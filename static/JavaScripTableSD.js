gx.grid.impl=function(q){var u=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName="";this.gxGridObject=
null;this.gxBuffer=new gx.text.stringBuffer;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass=this.gxParentRowId="";this.selectedRowClass="gx-row-selected";"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=
q;this.container=null;this.setContainerDelayed=function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;var b=this.columns.length;a.index=b;a.table=this;this.columns[b]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.addRow=function(a,b){a.table=this;
if(a!=null){this.rows[this.rows.length]=a;typeof a.id!="undefined"&&(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(b)&&this.render();return a}};this.getColumnByHtmlName=function(a){var b,c;b=this.columnsHtmlName[a];if(typeof b=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){c=a.substring(0,this.gxCmpContext.length);if(c==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);b=this.columnsHtmlName[a]}}return b};
this.getColumnByGxId=function(a){return this.columnsGxId[a]};this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var c=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(c&&c.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){if(a==this.sortColumn)this.ascSort=b==null?!this.ascSort:
gx.lang.booleanValue(b);else{this.sortColumn=a;this.ascSort=b==null?true:gx.lang.booleanValue(b)}this.doSort();this.ownerGrid.refreshGrid()};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=
function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.el(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName=="A")a.parentNode.style.display=
"inline"}};this.appendDeleteHeader=function(a,b){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var c=this.isGxTrn(),g=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)g=true;else return;else gx.grid.deletePosition==b&&(g=true);if(c&&g){c="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)c=gx.grid.deleteTitle;a.append('<th class="'+this.columnHeaderClass+'">'+c+"</th>")}}};this.appendDeleteImage=
function(a,b,c){if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){var g=false,e=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){g=b.gxDeleted();e=b.gxIsMod()||b.gxExists()}var l=this.deleteImgId(b.gxId),k=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(c==gx.grid.deletePositions.left)k=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==c)k=true;else if(this.gxIsFreestyle){var i=gx.grid.deletePositionFree;
c==gx.grid.deletePositions.left?k=i==gx.grid.deletePositions.topL||i==gx.grid.deletePositions.bottomL:c==gx.grid.deletePositions.right&&(k=i==gx.grid.deletePositions.topR||i==gx.grid.deletePositions.bottomR);c=i}if(k){i='<td style="text-align:'+this.deleteImageAlign(c)+";vertical-align:"+this.deleteVerticalAlign(c)+'">';c="";k=false;if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)c=gx.grid.undeleteImage;else if(e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)c=gx.grid.deleteImage;
else if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)c=gx.grid.deleteImage;else{c=gx.grid.deleteImage;k=true}g="";a.append(i);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){e=gx.fn.firstGridControl(this.ownerGrid.gridId);g=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+b.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+e+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+
"',"+this.ownerGrid.gridId+')"');b="";k&&(b=b+"display:none;");b&&a.append(' style="'+b+'"');a.append(">")}a.append('<img id="'+l+'" src="'+c+'"');g&&a.append(' title="'+g+'"');a.append(' style="border-style: none;');k&&a.append("display:none;");a.append('"');a.append("/>");this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&a.append("</a>");a.append("</td>")}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";
var b="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b="bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.topL)b="left";return b}return"center"};this.render=function(a,b,c,g){a&&(a=true);var e=this.isGxTrn(),l=this.gxIsFreestyle&&this.gxGridCols>1,k="cursor:"+(document.createTextRange?
"hand":"pointer")+";",b=new gx.text.stringBuffer,i=this.columns,j=i.length,f,d;!this.gxIsFreestyle&&e&&j++;var o=[],w,r;if(Number(this.pageSize)!==0){f=this.getMaxPage();if(this.currentPage<=0)this.currentPage=1;else if(this.currentPage>f)this.currentPage=f;w=Math.max(this.pageSize*(this.currentPage-1),0);r=Math.min(w+this.pageSize,this.rows.length)}else{w=0;r=this.rows.length}this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=
this.columnHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;var s="";this.gxHtmlTags.indexOf("class=")==-1&&(s=' class="'+this.gxCssClass+'"');f="";gx.lang.emptyObject(this.gxBackground)||(f=f+(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,true)+"');"));gx.lang.emptyObject(this.gxBorderWidth)||(f=f+(";border: solid "+this.gxBorderWidth+"px "));f=gx.lang.emptyObject(this.gxBordercolor)?f+";":f+(this.gxBordercolor+
";");this.ownerGrid.width>0&&(f=f+("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";"));if(this.gxAllowCollapsing){b.append('<table><tr valign="top"><td>');b.append('<img class="collapse-icon" style="cursor:pointer;" src="');if(this.gxCollapsed){f="display:none;";b.append(gx.ajax.getImageUrl(gx,"expandImage"))}else b.append(gx.ajax.getImageUrl(gx,"collapseImage"));b.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></td><td width="100%">')}b.append("<table "+s+' id="'+
this.gxCmpContext+this.gxGridObject+'Tbl" ');gx.lang.emptyObject(this.gxToolTipText)||b.append('title="'+this.gxToolTipText+'" ');s=u.exec(this.gxHtmlTags);d="";s&&s.length>1&&(d=s[1]);d=d+f;b.append('style="');b.append(d);b.append('" '+this.gxHtmlTags.replace(u,"")+">");gx.lang.emptyObject(this.headerText)||b.append('<tr><td colspan="'+j+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>");s=i.length;if(!this.gxIsFreestyle){b.append("<thead>");b.append("<tr>");this.appendDeleteHeader(b,
gx.grid.deletePositions.left);var q=gx.ajax.getImageUrl(gx,"ascImage"),t=gx.ajax.getImageUrl(gx,"descImage"),p=0,m;for(f=0;f<s;f++){d=i[f];b.append('<th nowrap="nowrap" class="'+this.columnHeaderClass+'"');m="";gx.lang.gxBoolean(d.visible)||(m=m+"display:none;");if(d.width){if(!d.gxWidthUnit)d.gxWidthUnit="px";m=m+("width:"+d.width+d.gxWidthUnit+";")}d.align&&(m=m+("text-align:"+d.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==
gx.grid.styles.report)){m=m+("background-color:"+this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&this.gxTitleBackstyle==gx.grid.styles.uniform){m=m+("background-color:"+this.gxBackColor+";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(m=m+("color:"+this.gxTitleForeColor+";"));gx.lang.emptyObject(this.gxTitleFont)||(m=m+this.gxTitleFont);b.append(' style="'+m+';"');b.append(' colindex="'+
p+'"');b.append(">");p++;if(gx.lang.emptyObject(gx.text.trim(d.title)))b.append("&nbsp;");else{b.append("<span");d.gxTooltip&&b.append(' title="'+d.gxTooltip+'"');m="";if(d.sortable){m=k;b.append(' onclick="'+this.gridObject()+".grid.setSort("+d.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"")}b.append('">');b.append(d.title);if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=q;this.descLabel.src=t;d.sortable&&
this.sortColumn==d.index&&b.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,o))}b.append("</span>")}b.append("</th>")}this.appendDeleteHeader(b,gx.grid.deletePositions.right);b.append("</tr>");b.append("</thead>")}b.append("<tbody>");k=true;for(f=w;f<r;f++){o=this.rows[f];a&&(f===w&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,o.gxId);q=o.gxDeleted();k=!k;p=(k?this.evenRowClass:this.oddRowClass)+(q?" RowDeleted":"");if(this.gxIsFreestyle&&!(this.gxTitleBackstyle==
gx.grid.styles.report||this.gxTitleBackstyle==gx.grid.styles.uniform))p=this.tableClass;d=new gx.text.stringBuffer;m="tr";if(l&&this.gxIsFreestyle&&(f>0&&f%this.gxGridCols===0||f===0&&this.gxGridCols>0)){f>0&&b.append("</tr>");b.append("<tr>")}this.gxIsFreestyle&&(m="td");t="";this.gxTitleBackstyle==gx.grid.styles.report&&(t=k?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)t=this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)t=
this.gxBackColor;if(!this.gxIsFreestyle||this.gxIsFreestyle&&l){d.append("<"+m+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+o.gxId+"'");this.gxIsFreestyle&&l?d.append(' gxrow="'+o.gxId.toString()+'"vAlign="'+this.columns[1].gxControl.verticalAlign+'"'):d.append(' gxrow="'+o.gxId.toString()+'"');this.gxIsFreestyle||d.append(' class="'+p+'"');o.selected&&d.append(' data-selected="1"');p="";t&&(p="background-color:"+t+";");gx.lang.emptyObject(this.gxLinesFont)||(p=p+this.gxLinesFont);p&&d.append(' style="'+
p+'" ');d.append(">");b.append(d.toString())}if(this.gxIsFreestyle){if(l){b.append("<table width='100%' cellspacing='0' cellpadding='0'");b.append("><tbody>")}d=this.gxBuffer.toString();b.append(d)}this.gxIsFreestyle||this.appendDeleteImage(b,o,gx.grid.deletePositions.left);for(p=0;p<s;p++){d=i[p];m=gx.lang.gxBoolean(d.visible);var n=o.gxProps[d.index],y=o.values[d.index],h=d.gxControl;if(this.gxIsFreestyle&&h.type==gx.html.controls.types.row&&d.index===0)h.isFreestyleRow=true;h.setGridData({grid:this.ownerGrid,
row:o,gridId:this.gxId,gridRow:o.gxId});if(c){delete h.formattedValue;h.value=y;h.id=d.htmlName+"_"+h.gridRow}else h.setProperties.apply(h,n);if(a)delete gx.usrPtys[h.id];else if(gx.usrPtys[h.id]!==void 0)for(var x in gx.usrPtys[h.id]){if(x=="enabled")h.rtEnabled=true;h.setIndividualProp(x,gx.usrPtys[h.id][x])}if(q){h.rtEnabled=true;h.enabled=false}if(n.Value)h.value=n.Value;if(n.FormattedValue)h.formattedValue=n.FormattedValue;if(n.Values)h.possibleValues=n.Values.v;if(this.gxIsFreestyle&&h.type==
gx.html.controls.types.row&&d.index===0){h.id=this.gxCmpContext+this.gxGridObject+"Row_"+o.gxId;if(e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)h.oncontextmenu=this.gridObject()+".showContextMenu(this, event);";if(t)h.style=h.style+("background-color:"+t+";")}if(!this.gxIsFreestyle){b.append('<td valign="'+d.valign+'"');b.append(' colindex="'+p+'"');n="";if(!m){n=n+"display:none;";h.visible&&(!d.isGxRemove()&&!this.ownerGrid.isPromptColumn(d))&&this.ownerGrid.addColPropertyAfterRender(p,
"Visible",1)}if(d.width){if(!d.gxWidthUnit)d.gxWidthUnit="px";n=n+("width:"+d.width+d.gxWidthUnit+";")}else if(d.gxColSize)h.colSize=d.gxColSize;d.align&&(n=n+("text-align:"+d.align+";"));h.style&&(n=n+h.style);n&&b.append(' style="'+n+'" ');b.append(">")}b.append(h.getHtml());this.gxIsFreestyle&&(h.type==gx.html.controls.types.row&&d.index===0)&&this.appendDeleteImage(b,o,gx.grid.deletePositions.left);h.persistValue();this.gxIsFreestyle||b.append("</td>");if(this.gxIsFreestyle){d.index==this.columns.length-
1&&this.appendDeleteImage(b,o,gx.grid.deletePositions.right);d=d.buffer.toString();b.append(d)}}this.gxIsFreestyle&&l?l&&b.append("</tbody></table></td>"):this.appendDeleteImage(b,o,gx.grid.deletePositions.right)}this.gxIsFreestyle&&(this.gxGridCols>0&&l)&&b.append("</tr>");b.append("</tbody>");b.append("<tfoot>");f="";if(e||this.hasPagingButtons()){f=this.buildNavigation(j);b.append(f)}gx.lang.emptyObject(this.footerText)||b.append('<tr><td colspan="'+j+'" class="'+this.footerClass+'">'+this.footerText+
"</td></tr>");b.append("</tfoot>");b.append("</table>");this.gxAllowCollapsing&&b.append("</td></tr></table>");if(gx.dom.shouldPurge()){c=["onblur","onclick","onfocus","onchange"];e=gx.dom.byTag("input",this.container);f=0;for(a=e.length;f<a;f++)gx.dom.purgeElement(e[f],c);e=gx.dom.byTag("textarea",this.container);f=0;for(a=e.length;f<a;f++)gx.dom.purgeElement(e[f],c);e=gx.dom.byTag("select",this.container);f=0;for(a=e.length;f<a;f++)gx.dom.purgeElement(e[f],c);e=gx.dom.byTag("span",this.container);
f=0;for(a=e.length;f<a;f++)gx.dom.purgeElement(e[f],c);e=gx.dom.byTag("img",this.container);f=0;for(a=e.length;f<a;f++)gx.dom.purgeElement(e[f],c)}var v=gx.dom.getActiveElement();f=v&&(v.id||v.name)&&gx.dom.isChildNode(v,this.container);this.container.innerHTML=b.toString();f&&setTimeout(function(){var a=gx.dom.el(v.id||v.name);if(a){gx.csv.disableFocus=true;a.focus()}},10);this.rendered||this.defineEventHandlers();b.clear();b=null;g();this.rendered=true};this.defineEventHandlers=function(){this.gxAllowHovering&&
!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);this.gxAllowHovering&&!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this);this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[this.gxAllowSelection&&!this.gxIsFreestyle],true),this);this.isGxTrn()&&gx.evt.attach(this.container,
"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&a.tagName=="TR"&&a.getAttribute("gxrow")&&gx.dom.findParentByTagName(a,"DIV")==this.container};this.getTargetRow=function(a,b){var c=a;for(this.isGridRow(c)||(c=gx.dom.findParentByTagName(a,"TR"));c&&gx.dom.isChildNode(c,this.container);){if(this.isGridRow(c)&&(!b||b=="body"&&c.parentNode.tagName=="TBODY"||b=="header"&&c.parentNode.tagName=="THEAD"))return c;c=gx.dom.findParentByTagName(c,"TR")}};this.mouseOverHandler=function(a){(a=
this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&this.startRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(a){(a=this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&this.endRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.contextMenuHandler=function(a){var b=this.getTargetRow(gx.evt.source(a),"body");b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=
function(a,b){var c=this.getTargetRow(gx.evt.source(a),"body");c&&this.setRowSelected(c,c.getAttribute("gxrow"),true,b)};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a),"body")&&this.ownerGrid.rowKeyPressed(a)};this.changePage=function(a){var b=this.getMaxPage(),a=parseInt(a,0);a<=0?a=1:a>b&&(a=b);this.currentPage=a;this.render()};this.setRowSelected=function(a,b,c,g){var g=g===void 0||g,e=function(){if(g){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;
gx.dom.forEachChild(a,this,function(b){if(a.gxOriginalBackcolor===void 0)b.gxOriginalBackcolor=b.style.backgroundColor})}this.instanciateSelectionVars(b);var c=this.rows.length,e,i=[];for(e=0;e<c;e++){var j=this.rows[e];j.selected=j.gxId==b;if(j.selected){if(g){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html;gx.dom.addClass(a,this.selectedRowClass)}i.push(j)}else if(g){j=gx.dom.el(this.gxCmpContext+this.gxGridObject+
"Row_"+j.gxId);if(j!=null&&j.gxSBackcolor!==void 0){j.style.backgroundColor=j.gxSBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(j,this,function(a){if(a!=null&&a.gxSBackcolor!==void 0)a.style.backgroundColor=a.gxSBackcolor});gx.dom.removeClass(j,this.selectedRowClass)}}}for(e=0;e<i.length;e++){this.instanciateSelectedRow(i[e]);g&&gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=
this.gxSelectionColor.Html})}};c&&(g||gx.O.isTransaction())?setTimeout(e.closure(this),100):e.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject.CmpContext,this.parentGxObject.IsMasterPage);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a){this.setSelectedRowVars(a);this.gxOnLineActivate&&!this.ownerGrid.isLoading&&this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,
a.gxId)};this.setSelectedRowVars=function(a){for(var b=this.parentGxObject,c=this.columns.length,g=0;g<c;g++){var e=this.columns[g],l=b.GXValidFnc[e.gxId];if(l!=null){var k=a.values[g];if(this.ownerGrid.isUsercontrol)k=this.properties[a.id][e.index].value;l.v2v&&l.c2v(k)}}};this.startRowHover=function(a,b){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(a){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor});
var c=this.getRowById(b);if(this.gxAllowHovering&&this.gxHoverColor&&!c.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html})}};this.endRowHover=function(a,b){var c=this.getRowById(b);if(this.gxAllowHovering&&!c.selected&&a.gxHBackcolor!==void 0){a.style.backgroundColor=a.gxHBackcolor;gx.util.browser.isIE()&&
gx.dom.forEachChild(a,this,function(a){if(a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor})}};this.hasPagingButtons=function(){return this.usePaging&&(!this.isFirstPage()||!this.isLastPage())};this.buildNavigation=function(a){function b(a,b,c,e,j){return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+j+'" onblur="this.style.textDecoration = \'none\';"><span '+(e!==void 0?'id="'+e+'"':"")+' style="'+g+'" class="'+k+'" onclick="'+b+'" onMouseOver="this.className=\''+
i+"';window.status='"+c+"';return true;\" onMouseOut=\"this.className='"+k+"';window.status='';return true;\">"+a+"</span></a>"}function c(a,b,c,e){return'<span class="'+a+'"'+(c?' onclick="'+b+'" ':"")+('style="'+j+(c?"":"opacity:.7;cursor:default")+'"')+' title="'+e+'">&nbsp;&nbsp;</span>'}var g="cursor:"+(document.createTextRange?"hand":"pointer")+";",e=new gx.text.stringBuffer,l=this.getRowCount();this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)a=this.gxGridCols;
gx.lang.emptyObject(this.gxRealTitleBackColor)?e.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):e.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">');var k=this.navigationLinkClass,i=this.highlightedNavigationLinkClass,j="padding-left:20px;padding-bottom:5px;";if((l>0||l===0&&!this.isFirstPage())&&this.usePaging){e.append('<div style="padding-bottom:5px;">');
if(this.currentPage<=0)this.currentPage=1;e.append(c("PagingButtonsFirst",this.getPaginEvent("FIRST"),!this.isFirstPage(),gx.getMessage("GXM_first")));e.append(c("PagingButtonsPrevious",this.getPaginEvent("PREV"),!this.isFirstPage(),gx.getMessage("GXM_previous")));e.append(c("PagingButtonsNext",this.getPaginEvent("NEXT"),!this.isLastPage(),gx.getMessage("GXM_next")));e.append(c("PagingButtonsLast",this.getPaginEvent("LAST"),!this.isLastPage(),gx.getMessage("GXM_last")));e.append("</div>")}this.isGxTrn()&&
(!this.gxHasAddlines&&this.parentGxObject.Gx_mode!="DSP")&&e.append(b("["+this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));e.append("</td></tr>");return e.toString()};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)=="0"};this.getPaginEvent=function(a){var b=this.gxGridName.toUpperCase()+
"PAGING";return"javascript:gx.fn.setHidden('"+this.gxCmpContext+b+"','"+a+"');gx.evt.execEvt('"+this.gxCmpContext+"E"+b+".', gx.evt.dummyCtrl);"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var r=0;this.handleLabel=function(a){if(a.src){var b="img"+r;r++;return"<img name='"+b+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&
b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var c=a.table,g=c.getColumnByIndex(c.sortColumn),e,l;e=a.values[c.sortColumn];l=b.values[c.sortColumn];gx.lang.instanceOf(e,Array)||(e=[e]);gx.lang.instanceOf(l,Array)||(l=[l]);switch(g.type){case gx.types.numeric:g=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:g=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,
"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:g=function(a){return gx.lang.booleanValue(a)?1:0};break;default:g=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var k=Math.max(e.length,l.length),i=0,j=0;i===0&&j<k;j++){var f=e[j];f==null&&(i=-1);var d=l[j];d==null&&(i=1);if(i===0){f=g(f);d=g(d);i=f==d?0:f>d?1:-1}i!==0&&(i=i*(c.ascSort?1:-1))}return i}};
gx.grid.column=function(q,u,r,a,b){this.table=null;this.index=-1;this.title=q||"";this.type="undefined"!=typeof u?u:gx.types.character;this.width=r||"";this.align=a||"left";this.valign=b||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(q,u,r,a){this.table=null;this.id=q;this.gxParentRowId=a||"";this.gxId=r+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=u.Props||[];this.gxRenderProps=u.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
