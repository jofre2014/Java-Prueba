gx.date=function(){var d=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{2})?:?([0-9]{2})?:?([0-9]{2})?:?([0-9]{2})?\s?(AM|PM)?/i,b=/([0-9]{2}):?([0-9]{2})?:?([0-9]{2})?:?([0-9]{2})?\s?(AM|PM)?/i,c=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,e=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i;return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(a){return this.getDay()==a.getDay()&&this.getMonth()==
a.getMonth()&&this.getFullYear()==a.getFullYear()?!0:!1},toJson:function(){var a=new gx.date.gxdate("");a.assign_date(this);return a.json()},gxdate:function(a,f){this.json=function(){var a=this.TimeFmt;this.TimeFmt=24;var b=this.HasTimePart;this.HasTimePart=!0;var f=this.getStringWithFmt("Y4MD")+" "+this.getTimeString(!0,!0);this.TimeFmt=a;this.HasTimePart=b;return f};this.mapCTODFormatToPattern=function(a){return"ANSI"==a?"Y4MD":a};this.emptyDateString=function(a){return-1==a.indexOf("Y4")?gx.blankWhenEmpty?
"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==a?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(a){a=this.mapCTODFormatToPattern(a);if(0===this.Value-new Date(0,0,0,0,0,0,0))return this.emptyDateString(a);var b=a,f=gx.text.padr(this.Value.getDate().toString(),2,"0"),c=gx.text.padr((this.Value.getMonth()+1).toString(),2,"0"),e=gx.text.padr(this.Value.getFullYear().toString(),4,"0"),d=this.FormatPos(a),b=b.replace("D",f+(3>d.DPos?"/":"")),b=b.replace("M",c+(3>d.MPos?"/":""));
-1==a.indexOf("Y4")?(e=e.slice(2,4),b=b.replace("Y",e+(3>d.YPos?"/":""))):b=b.replace("Y4",e+(3>d.YPos?"/":""));return b};this.getString=function(a){gx.lang.emptyObject(a)&&(a=gx.dateFormat);return this.getStringWithFmt(a)};this.toString=function(){return this.getString()};this.gxdtoc=function(a,b){return this.getStringWithFmt(this.mapCTODFormatToPattern(a)).replace("/",b)};this.getUrlVal=function(){if(gx.date.isNullDate(this))return"";var a=gx.text.padr(this.Value.getDate().toString(),2,"0"),b=gx.text.padr((this.Value.getMonth()+
1).toString(),2,"0"),f=gx.text.padr(this.Value.getFullYear().toString(),4,"0"),c=this.HasTimePart?gx.text.padr(this.Value.getHours().toString(),2,"0"):"",e=this.HasTimePart?gx.text.padr(this.Value.getMinutes().toString(),2,"0"):"",d=this.HasTimePart?gx.text.padr(this.Value.getSeconds().toString(),2,"0"):"";return f+b+a+c+e+d};this.getTimeString=function(a,b,f){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var c="";f&&(c+="  ");a&&(c+="   ");b&&(c+="   ");return c}var c="",e=this.Value.getHours(),
f=f||!0;12==this.TimeFmt&&12<=e?(12<e&&(e-=12),c=" PM"):12==this.TimeFmt&&(c=" AM");var d=this.HasTimePart?gx.text.padr(e.toString(),2,"0"):"",m=this.HasTimePart?gx.text.padr(this.Value.getMinutes().toString(),2,"0"):"",o=this.HasTimePart?gx.text.padr(this.Value.getSeconds().toString(),2,"0"):"";0===e&&""!==c&&(d="12");e="";f&&(e=d);a&&(e=e+":"+m);b&&(e=e+":"+o);return e+c};this.FormatPos=function(a){var b,f,c;"ANSI"==a?(b=1,f=2,a=3):(c=a.indexOf("Y4"),b=-1==c?a.indexOf("Y")+1:c+1,f=a.indexOf("M"),
0!==c&&f++,a=a.indexOf("D"),0!==c&&a++);return{YPos:b,MPos:f,DPos:a}};this.assign_date=function(a){a instanceof gx.date.gxdate?(this.Value=a.Value,this.HasTimePart=a.HasTimePart):this.Value=a};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;return a};this.fromUTC=function(){if(gx.date.isNullDate(this)||
"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;return a};this.assign_string=function(a,f,c,e){var q=d,h=q.exec(a),m=0;if(null==h)-1!=a.indexOf("  /  /  ")&&(c=!0);else for(var o=h.length,g=1;g<o;g++)gx.lang.emptyObject(h[g])||m++;var l=this.FormatPos(f),p=g=o=f=0,r=0,s=0,t=0;try{if(6==l.DPos+l.MPos+l.YPos&&null!=h&&3<=
m){null!=h[l.YPos]&&(f=parseInt(h[l.YPos],10));if(isNaN(f))throw"InvalidDate";f<this.FYearOfCentury?f+=2E3:100>f?f+=1900:1E3>f&&(f+=1E3);null!=h[l.MPos]&&(o=parseInt(h[l.MPos],10)-1);if(isNaN(o)||0>o||11<o)throw"InvalidDate";null!=h[l.DPos]&&(g=parseInt(h[l.DPos],10));if(isNaN(g)||0>g||g>gx.date.maxDays(o,f))throw"InvalidDate";}this.HasTimePart=!1;l=0;null==h?(q=b,h=q.exec(a),null!=h&&(l=1,this.HasTimePart=!0)):3<m&&(l=4,this.HasTimePart=!0);if(this.HasTimePart&&!c){null!=h[l]&&(p=parseInt(h[l],10));
if(gx.lang.emptyObject(h[l])||isNaN(p))throw this.HasTimePart=!1,"InvalidHour";null!=h[l+1]&&(r=parseInt(h[l+1],10));isNaN(r)&&(r=0);null!=h[l+2]&&(s=parseInt(h[l+2],10));isNaN(s)&&(s=0);null!=h[l+3]&&(t=parseInt(h[l+3],10));isNaN(t)&&(t=0);if(!this.validTime(-1!=a.toLowerCase().indexOf("m"),p,r,s,t))throw"InvalidHour";if((-1!=a.indexOf("PM")||-1!=a.indexOf("pm"))&&12>p)p+=12;if((-1!=a.indexOf("AM")||-1!=a.indexOf("am"))&&12==p)p=0}}catch(u){if(e)throw u;"InvalidDate"==u&&(t=s=r=p=g=o=f=0);"InvalidHour"==
u&&(t=s=r=p=0)}this.Value=new Date(f,o,g,p,r,s,t);if(0<f+o+g+p+r+s+t&&(!this.HasTimePart||c)&&this.Value.getDate()!=g)this.Value=new Date(Date.UTC(f,o,g,p+12,r,s,t))};this.validTime=function(a,b,f,c,e){return a&&12<b||!a&&(24<b||24==b&&0<f+c)?!1:59>=f||59>=c||59>=e};this.compare=function(a){return"string"==typeof a?this.compare_string(a):this.compare_date(a)};this.compare_string=function(a){return this.compare_date((new gx.date.gxdate(a)).Value)};this.compare_date=function(a){a=a instanceof gx.date.gxdate?
a.Value:a;return this.HasTimePart?this.Value-a:this.Value.getFullYear()>a.getFullYear()?1:this.Value.getFullYear()<a.getFullYear()?-1:this.Value.getMonth()>a.getMonth()?1:this.Value.getMonth()<a.getMonth()?-1:this.Value.getDate()>a.getDate()?1:this.Value.getDate()<a.getDate()?-1:0};this.TimeFmt=gx.timeFormat||12;this.SFmt=f||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof a?this.assign_string(a,this.SFmt):this.assign_date(a)},isANSIDateTime:function(a){return"string"==typeof a&&
d.test(a)?!0:!1},isANSIDate:function(a){return"string"==typeof a&&c.test(a)?!0:!1},isLeapYear:function(a){return 0===a%400?!0:0===a%100?!1:0===a%4?!0:!1},dateObject:function(a){return a instanceof this.gxdate?a.Value:"string"==typeof a?(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).Value:a instanceof Date?a:new Date},gxdateObject:function(a){if(a instanceof this.gxdate)return a;if("string"==typeof a)return new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0);if(a instanceof Date){var b=new this.gxdate("");
b.assign_date(a);return b}return new this.gxdate("")},clonedDate:function(a,b){var c=new this.gxdate("");c.assign_date(b);a instanceof this.gxdate&&(c.SFmt=a.SFmt,c.HasTimePart=a.HasTimePart);return c},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var a=this.today();a.HasTimePart=!0;return a},today:function(){var a=new this.gxdate("");a.assign_date(new Date);return a},ctot:function(a,b){return new this.gxdate(a,b)},ctod:function(a,b){var c=new this.gxdate(a,b);c.Value.setHours(0,
0,0,0);return c},ymdtod:function(a,b,c){a=new this.gxdate(a+"/"+b+"/"+c,"ANSI");a.Value.setHours(0,0,0,0);return a},ymdhmstot:function(a,b,c,e,d,k){return new this.gxdate(a+"/"+b+"/"+c+" "+e+":"+d+":"+k,"ANSI")},hour:function(a){return(new this.gxdate(a)).Value.getHours()},minute:function(a){return(new this.gxdate(a)).Value.getMinutes()},second:function(a){return(new this.gxdate(a)).Value.getSeconds()},millisec:function(a){return 864E5*a},day:function(a){return(new this.gxdate(a)).Value.getDate()},
month:function(a){return(new this.gxdate(a)).Value.getMonth()+1},year:function(a){return(new this.gxdate(a)).Value.getFullYear()},addDays:function(a,b){return this.addMill(a,this.dayToMillisec(b))},addSec:function(a,b){return this.addMill(a,this.secToMillisec(b))},addMill:function(a,b){var c=this.dateObject(a).clone(),e=new this.gxdate;e.assign_date(c);var d=c.getMilliseconds();c.setMilliseconds(d+b);return e.getString(this.isANSIDate(a)?"Y4MD":void 0)},secDiff:function(a,b){return this.millisecToSec(this.milliDiff(a,
b))},daysDiff:function(a,b){return this.millisecToDay(this.milliDiff(a,b))},milliDiff:function(a,b){var c=this.gxdateObject(a),e=this.gxdateObject(b),a=c.Value.valueOf(),b=e.Value.valueOf();return a-b},dayToMillisec:function(a){return 864E5*a},secToMillisec:function(a){return 1E3*a},millisecToDay:function(a){return a/24/60/60/1E3},millisecToSec:function(a){return a/1E3},dateParm:function(a){return"string"==typeof a?new this.gxdate(a):a},urlDate:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?
a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padr((c.Value.getMonth()+1).toString(),2,"0")+gx.text.padr(c.Value.getDate().toString(),2,"0"):""},urlDateTime:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padr((c.Value.getMonth()+1).toString(),2,"0")+gx.text.padr(c.Value.getDate().toString(),2,"0")+gx.text.padr(c.Value.getHours().toString(),
2,"0")+gx.text.padr(c.Value.getMinutes().toString(),2,"0")+gx.text.padr(c.Value.getSeconds().toString(),2,"0"):""},isNullDate:function(a){a instanceof this.gxdate&&(a=a.Value);var b=this.nullDate();return b.getFullYear()!=a.getFullYear()||b.getMonth()!=a.getMonth()||b.getDate()!=a.getDate()||b.getHours()!=a.getHours()||b.getMinutes()!=a.getMinutes()||b.getSeconds()!=a.getSeconds()?!1:!0},dtoc:function(a,b,c){return(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).gxdtoc(b,c)},dttoc:function(a,
b,c){var a=new this.gxdate(a,this.isANSIDateTime(a)?"Y4MD":void 0),e=gx.dateFormat,d="";0<b&&(8<b&&-1==e.indexOf("Y4")&&(e=e.replace("Y","Y4")),d=a.getStringWithFmt(e)+" ");return 0<c?d+a.getTimeString(3<c,8==c,1<c):d},nulldate_toc:function(a,b){var c=new this.gxdate("");c.HasTimePart=!0;var e=gx.dateFormat,d="";0<a&&(8<a&&-1==e.indexOf("Y4")&&(e=e.replace("Y","Y4")),d=c.getStringWithFmt(e)+" ");return 0<b&&!gx.blankWhenEmpty?d+c.getTimeString(1<b,8==b,3<b):d},addyr:function(a,b){return this.addmth(a,
12*b)},addmth:function(a,b){var c=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),b=b+a.getMonth(),e=parseInt(b/12,0),d=parseInt(b%12,0);a.setMonth(d);e=a.getFullYear()+e;1==d&&(29==a.getDate()&&!this.isLeapYear(e))&&a.setDate(28);a.setFullYear(e);return this.clonedDate(c,a)},dtadd:function(a,b){var c=this.gxdateObject(a),a=new Date(a.getTime()),b=1E3*b,a=this.dateObject(a),e=a.getMilliseconds();a.setMilliseconds(e+b);return this.clonedDate(c,a)},dtdiff:function(a,b){a=this.dateObject(a);
b=this.dateObject(b);return(a-b)/1E3},maxDays:function(a,b){switch(a){case 0:return 31;case 1:return 0!==b%100&&0===b%4||0===b%400?29:28;case 2:return 31;case 3:return 30;case 4:return 31;case 5:return 30;case 6:return 31;case 7:return 31;case 8:return 30;case 9:return 31;case 10:return 30;case 11:return 31}},eom:function(a){var b=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),c=this.maxDays(a.getMonth(),a.getFullYear());a.setDate(c);return this.clonedDate(b,a)},dow:function(a){a=
this.dateObject(a);return a.equalsNoTime(this.nullDate())?0:a.getDay()+1},age:function(a,b){var c,e,d;e=this.dateObject(a);c=this.dateObject(b);d=this.nullDate();if(e.equalsNoTime(d)||c.equalsNoTime(d)||e.equalsNoTime(c))return 0;if(c>=e){d=36E5*c.getUTCHours()+6E4*c.getUTCMinutes()+1E3*c.getUTCSeconds()-(36E5*e.getUTCHours()+6E4*e.getUTCMinutes()+1E3*e.getUTCSeconds());if(c.getUTCDate()>e.getUTCDate()||c.getUTCDate()==e.getUTCDate()&&0<=d)d=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),e.getUTCDate(),
e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()));else{d=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()-1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()));c=c.getUTCMonth()-1;for(-1==c&&(c=11);d.getUTCMonth()!=c;)d.setUTCDate(d.getUTCDate()-1)}return e=d.getUTCMonth()>=e.getUTCMonth()?d.getUTCFullYear()-e.getUTCFullYear():d.getUTCFullYear()-1-e.getUTCFullYear()}return 0},valid_date:function(a,b,c,d,j,k,q,h){var m=q||!1,o=!1,k="",q=c,g="",g="^[ ]*(",l=0<b?"GXM_invaliddate":
"GXM_invalidtime",k=a.value,k=k.split("\n")[0],c="YMD"==c?1:0,j=12==j?1:0;e.test(k)&&(o=!0,k="");g=0<b?8==b?g+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":0===c?m?g+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":g+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":m?g+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":g+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":g+"( )?( )?( )?";0<d&&(g+="(",0<b&&(g+="[ ]*"),g+="([0-9]{2})",g=2<d?g+"(:?([0-9]{2}))?":g+"(( )?)?",g=5<d?g+"(:?([0-9]{2}))?":
g+"(( )?)?",g=(1==j?g+"[ ]*(a|am|p|pm)?":g+"(( )?)?")+")?");c=RegExp(g+")?[ ]*$","i");if(c.test(k)){c=k.match(c);0<b?(g="/",0<k.indexOf("-")&&(g="-"),c[2]?g=c[2]+g+c[3]+g+c[4]:(g=1==h?"        ":"  "+g+"  "+g+"  ",10==b&&(g+="  "))):g="";0<d&&(0<b&&(g+=" "),1==h&&!c[6]&&!c[8]&&!c[10]?g+="        ":(c[6]?g+=c[6]:o?(h=k.match(e),g=h[4]?g+h[4]:g+(1==j?"12":"00")):g+=1==j?"12":"00",2<d&&(g=c[8]?g+":"+c[8]:g+":00"),5<d&&(g=c[10]?g+":"+c[10]:g+":00"),1==j&&(g="p"==(c[11]?c[11].substr(0,1):"a").toLowerCase()?
g+" PM":g+" AM")));j=new this.gxdate("",q);try{j.assign_string(g,q,0>=d,!0),""!==gx.text.trim(g)&&(g=this.formatDateTime(d,b,q,j))}catch(p){return gx.fn.alert(a,gx.getMessage(l)),gx.csv.setFormatError(a),!1}if(g!=k){a.value=g;if(-1!=navigator.userAgent.indexOf("Firefox/2"))a.onchange();(b=gx.O.getValidStructFld(a.id))&&gx.O.refreshDependantGrids(b)}gx.csv.setFormatError(a,!1);return!0}gx.fn.alert(a,gx.getMessage(l));gx.csv.setFormatError(a);return!1},formatDateTime:function(a,b,c,e){var d="";0<a&&
e.HasTimePart&&(d=e.getTimeString(4<=a,8<=a));a=c;8<b&&-1==a.indexOf("Y4")&&(a=a.replace("Y","Y4"));return 0<b?e.getStringWithFmt(a)+(e.HasTimePart?" "+d:""):e.HasTimePart?d:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(d){this.capacity=d||10;this.buffer=[];this.append=function(b){this.buffer.push(b);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var d=arguments[0],b=arguments.length,c=1;c<b;c++)d=d.replace("%"+c,gx.text.trim(arguments[c].toString()));return d},formatString:function(d,b,c){return c?gx.text.padl("",
b,"*"):d},replaceAll:function(d,b,c){return-1!=d.toString().indexOf(b)?(""+d).split(b).join(c):d},charReplace:function(d,b,c){for(var e="",a=d.length,f=0;f<a;f++){for(var i=!1,n=b.length,j=0;j<n;j++)if(d.charAt(f)==b[j]&&j<c.length){e+=c[j];i=!0;break}!1===i&&(e+=d.charAt(f))}return e},endsWith:function(d,b){return d.charAt(d.length-1)==b},length:function(d){return d.length},upper:function(d){return d.toUpperCase()},lower:function(d){return d.toLowerCase()},padr:function(d,b,c){b-=d.length;if(1>b)return d;
for(var e="",a=0;a<b;a++)e+=c;return e+d},padl:function(d,b,c){b-=d.length;if(1>b)return d;for(var e="",a=0;a<b;a++)e+=c;return e+d},ltrim:function(d){return d.toString().replace(/^ */,"")},rtrim:function(d){return d.toString().replace(/ *$/,"")},trim:function(d){return this.rtrim(this.ltrim(d))},chr:function(d){return String.fromCharCode(d)},concat:function(d,b,c){return this.rtrim(d)+c+b},space:function(d){for(var b="",c=0;c<d;c++)b+=" ";return b},substring:function(d,b,c){return d.toString().substring(b-
1,b-1+c)},tostring:function(d){return d.toString()},toformattedstring:function(d){return d.toString()},newline:function(){return"\n"},escapeMapping:{"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(d,b){var c=gx.text.escapeMapping[b];if(c)return c;c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)},escapeString:function(d){return this.escapeRegex.start.test(d)?'"'+
d.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+d+'"'},indexOf:function(d,b,c){if(c>d.length)return 0;0>=c&&(c=1);return d.indexOf(b,c-1)+1},lastIndexOf:function(d,b,c){if(c>d.length)return 0;0>=c&&(c=d.length);return d.lastIndexOf(b,c-1)+1}};
gx.num=function(){var d=function(b,c,e,a){var d=gx.lang.instanceOf,i="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,n=gx.thousandSeparator,j=gx.decimalPoint;"string"==typeof e&&(e=gx.num.parseFloat(e,n,j));"string"==typeof a&&(a=gx.num.parseFloat(a,n,j));return d(e,i)&&d(a,Number)?e[b](new i(a.toString())).toString():d(e,Number)&&d(a,i)?(new i(e.toString()))[b](a).toString():d(e,Number)&&d(a,Number)||"undefined"==typeof gx.num.dec?c(e,a):e[b](a)};return{str:function(b,c,e){"undefined"==
typeof c&&(c=10);if("undefined"==typeof e||c-1<=e)e=0;b=this.round(b,e);if(0===e)return b=b.toString(),b.length>c?gx.text.padr("",c,"*"):gx.text.padr(b,c," ");var b=b.toString(),a=b.indexOf(".");0<e&&(b=0>a?b+("."+gx.text.padr("",e,"0")):(0===a?"0":b.substring(0,a))+gx.text.padr(b.substring(a),e+1,"0"));if(b.length<=c)return gx.text.padr(b,c," ");a=b.indexOf(".");return 0<a&&b.substring(0,a).length<=c?gx.num.str(gx.num.val(b),c,0):gx.text.padr("",c,"*")},maxNumericPrecision:function(){return 15},
extractValue:function(b,c){if(gx.lang.instanceOf(c,Number)||this.overflowNumber(c))return c;var e,a=void 0===c?"":c;e="+"==b.charAt(0)||"-"==b.charAt(0)?b.replace(/[\+\-\d,*\.*Z*\s]+/,""):b.replace(/[\d,*\.*Z*\s]+/g,"");b.lastIndexOf(".")!=b.indexOf(".")&&(a=gx.text.replaceAll(a,".",""));for(var d=0;d<e.length;d++)a=a.replace(e.charAt(d),"");return gx.text.trim(a)},formatNumber:function(b,c,e,a,d,i){gx.lang.emptyObject(b)&&(b="0");var n=-1!=e.indexOf(",")?gx.thousandSeparator:"",j=gx.decimalPoint,
k=!1;"string"==typeof b&&n&&(b=gx.text.replaceAll(b,n,""));"string"==typeof b&&(b=b.replace(j,"."));if(gx.num.overflowNumber(b))return b;try{b=gx.num.setScale(b,c)}catch(q){b=b.toString()}var h=b.split(".");h[0]||(h[0]="0");h[1]||(h[1]="");if(i){if(h[1].length>c&&h[1].replace(/0*$/,"").length>c)throw"InvalidNumber";a=0===c?a:a-c-1;if(d&&"-"==h[0].charAt(0)&&h[0].replace(/0*/,"").length>a||!d&&"-"==h[0].charAt(0)||h[0].replace(/[+]?0*/,"").length>a)throw"InvalidNumber";}0>b&&(d=!0);if(h[1].length<
c){a=h[1];for(b=h[1].length+1;b<=c;b++)a+="0";h[1]=a}a="";d&&"-"==h[0].charAt(0)&&(a="-",h[0]=h[0].substring(1));if(n&&3<h[0].length){i=h[0];h[0]="";for(d=3;d<i.length;d+=3)b=i.slice(i.length-d,i.length-d+3),h[0]=n+b+h[0]+"";d=i.substr(0,0===i.length%3?3:i.length%3);h[0]=d+h[0]}j=!h[1]?"":j;0<c?(d=e.split("."),d[1]==gx.text.padr("",c,"Z")&&(k=!0)):(d=Array(e),0<d.length&&0===gx.text.replaceAll(gx.text.replaceAll(d[0],",",""),"Z","").length&&(k=!0));c=0;e="";if(1<d.length){i=d[1];for(b=0;b<i.length;b++){var m=
i.charAt(b);"9"==m||"Z"==m?h[1].length>c?(e+=h[1].charAt(c),c++):e+="0":"."!=m&&","!=m&&(e+=m)}}i="";d=d[0];c=h[0].length-1;for(b=d.length-1;0<=b;b--)m=d.charAt(b),"9"==m||"Z"==m?0<=c?(i=h[0].charAt(c)+i,c--):i=("9"==m?"0":"")+i:"Z"!=m&&","!=m?i=m+i:","==m&&h[0].charAt(c)==n&&(i=h[0].charAt(c)+i,c--);return k&&"0"==i&&0===e.replace(/0+$/,"").length?"":a+i+(!e?"":j+e)},add:function(b,c){return d("add",function(b,a){return b+a},b,c)},subtract:function(b,c){return d("substract",function(b,a){return b-
a},b,c)},multiply:function(b,c){return d("multiply",function(b,a){return b*a},b,c)},divide:function(b,c){return d("divide",function(b,a){return b/a},b,c)},negate:function(b){return gx.lang.instanceOf(b,Number)||"undefined"==typeof gx.num.dec?-b:b.negate()},pow:function(b,c){return d("pow",function(b,a){return b^a},b,c)},mod:function(b,c){return d("remainder",function(b,a){return b%a},b,c)},setScale:function(b,c){if(gx.lang.instanceOf(b,Number))return b.toFixed(c);"string"==typeof b&&(b=gx.text.trim(b));
if(b.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===b.length&&0===c)return"0";var d=b.split("."),a;d[1]||(d[1]="");if(d[1].length<c){var f=d[1];for(a=d[1].length+1;a<=c;a++)f+="0";d[1]=f;return d[0]+(""===d[1]?"":".")+d[1]}return Number(parseFloat(b)).toFixed(c)}return(new gx.num.dec.bigDecimal(b)).setScale(c,gx.num.dec.ROUND_UP).toString()},parseFloat:function(b,c,d){if(gx.lang.instanceOf(b,Number)||this.overflowNumber(b))return b;b=this.toInvariant(b,c,d);return b.length>
this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(b):parseFloat(b)},toInvariant:function(b,c,d){return"number"==typeof b||"undefined"!=typeof gx.num.dec&&b instanceof gx.num.dec.bigDecimal?b:gx.text.replaceAll(b,c,"").replace(d,".")},parseInt:function(b,c,d){if("number"==typeof b)return b;var a=b,a=gx.text.replaceAll(b,d,"");return parseInt(a,c)},overflowNumber:function(b){return/\*(\**)/.test(b)},urlDecimal:function(b,c,d){return"undefined"!=typeof b?(b="undefined"!=
typeof b.value?b.value:b,b=this.parseFloat(b,c,d),b.toString()):""},random:function(){return Math.random()},intval:function(b){var c=0,b="undefined"!=typeof b?b.toString():"",c=b.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(b,0):(new gx.num.dec.bigDecimal(b)).setScale(0,gx.num.dec.ROUND_UP);isNaN(c)&&(c=0);return c},val:function(b){b=gx.text.trim(b).replace(",",".");b=this.parseFloat(b);isNaN(b)&&(b=0);return b},trunc:function(b,c){var d=b,b=b.toString(),a=b.length,
f=b.indexOf(".");if(-1!=f){d=b.substring(0,f);if(0===c)return d;var i="";f+c<=a&&(i=b.substring(f+1,f+1+c));d=gx.num.parseFloat(d+"."+i);isNaN(d)&&(d=0)}return d},round:function(b,c){var b=b.toString(),d=b.indexOf("."),a="",f="",f=0,a="."+"0000000000000000000000".substring(1,parseInt(c,0)+1)+"5",f=parseFloat(a);if(-1==d)f="0000000000000000000000",a=""+b;else if(0===d)a="0",f=0+parseFloat(b)+parseFloat(f),b=f+"0000000000000000000000",f=""+b.substring(1,b.length);else{if(0===c){a=b.substring(0,d);a=
parseInt(a,0);d=parseInt(b.substring(d+1,d+2),0);if(isNaN(a))return 0;!isNaN(d)&&5<=d&&a++;return a}f=parseFloat(b)+f;a=f.toString().substring(0,d);f=""+(""+f+"0000000000000000000000").substring(d+1,d+1+parseInt(c,0))}f=f.substring(0,parseInt(c,0));a=parseFloat(a+"."+f);isNaN(a)&&(a=0);return a},valid_decimal:function(b,c,d,a){var f=b.value,i=f.lastIndexOf(d),n=!0;","==d&&(-1==i&&f.lastIndexOf(".")==f.indexOf("."))&&(f=f.replace(".",d));var j=gx.O.getValidStructFld(b.id);gx.lang.emptyObject(j)||(f=
gx.num.extractValue(j.pic,f));i=RegExp("^[ ]*([+-]?[0-9]*(\\"+c+"[0-9]{3})*(\\"+d+"[0-9]*)?)?[ ]*$");if(f)if(i.test(f)){var i=f.lastIndexOf(d),k=f;-1!=i&&(k=f.slice(0,i+parseInt(a,10)+1));try{gx.lang.emptyObject(j)||(k=gx.num.formatNumber(k,j.dec,j.pic,j.len,j.sign,!0)),"."!=d&&"SELECT"==b.tagName&&(k=gx.num.toInvariant(k,c,d))}catch(q){n=!1}if(n&&k!=gx.text.trim(b.value)&&(b.value=k,-1!=navigator.userAgent.indexOf("Firefox/2")))b.onchange()}else n=!1;else n=!0;n?gx.csv.setFormatError(b,!1):(gx.csv.setFormatError(b),
gx.fn.alert(b,gx.getMessage("GXM_badnum")))},valid_integer:function(b,c){var d,a,f,i=gx.O.getValidStructFld(gx.dom.id(b));a=b.value;gx.lang.emptyObject(i)||(a=gx.num.extractValue(i.pic,a));d=-1!=i.pic.indexOf(",")?RegExp("^[ ]*([+-]?[0-9]*(\\"+c+"[0-9]{3})*)?[ ]*$"):/^[ ]*([+-]?[0-9]*([0-9]{3})*)?[ ]*$/;f=!0;if(a)if(d.test(a)){try{gx.lang.emptyObject(i)||(a=gx.num.formatNumber(a,i.dec,i.pic,i.len,i.sign,!0))}catch(n){f=!1}if(a!=gx.text.trim(b.value)&&(b.value=a,-1!=navigator.userAgent.indexOf("Firefox/2")))b.onchange()}else f=
!1;else f=!0;f?gx.csv.setFormatError(b,!1):(gx.csv.setFormatError(b),gx.fn.alert(b,gx.getMessage("GXM_badnum")))}}}();
gx.color={rgb:function(d,b,c){return 65536*d+256*b+c},css:function(d){return"rgb"==d.substring(0,3)?eval(d):"#"==d.charAt(0)?parseInt(d.substring(1),16):0},html:function(d){d=this.toHex(d);gx.lang.emptyObject(d)&&(d="000000");var d=gx.text.padr(d,6,"0"),b={};b.Hexa=d;b.Html="#"+d;b.R=parseInt(d.substring(0,2),16);b.G=parseInt(d.substring(2,4),16);b.B=parseInt(d.substring(4,6),16);return b},fromRGB:function(d,b,c){var e={};"undefined"!=typeof d&&("undefined"!=typeof b&&"undefined"!=typeof c)&&(e.Hexa=
this.toHex(d)+this.toHex(b)+this.toHex(c),e.Html="#"+e.Hexa,e.R=d,e.G=b,e.B=c);return e},ARGBToHex:function(d){var b=this.toHex(d>>16&255),c=this.toHex(d>>8&255),d=this.toHex(d&255);return b+c+d},toHex:function(d){if(void 0===d)return"000000";if(0>d)return gx.color.ARGBToHex(d);if(0===d)return d+"0";for(var b=0,c="";0!==d;)b=d%16,d=(d-b)/16,c="0123456789ABCDEF".charAt(b)+c;0!==c.length%2&&(c="0"+c);return c}};
