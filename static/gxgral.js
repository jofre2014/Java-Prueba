var gx=function(){var c=/^(?:gx\.O\.)(.+)$/,b=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/;return{O:null,pO:null,oldValues:[],oldKeyValues:[],newRows:[],suggestControls:[],disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",theme:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,
descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},NULL_TIMEZONEOFFSET:0,setParentObj:function(a){gx.pO=a;gx.O=gx.pO},setExecutableComponent:function(a){null==gx.pO&&gx.setParentObj(gx.createComponent(a,""))},setMasterPage:function(a){null!=gx.pO&&(gx.pO.MasterPage=a)},addComponent:function(a){null!=gx.pO&&gx.pO.setWebComponent(a)},createComponent:function(a,e){var b=null,c,g;c=gx.lang.getType(a);null!=c&&(c.prototype=new gx.GxObject,
g=gx.csv.cmpCtx,gx.csv.cmpCtx=e,b=new c(e),gx.csv.cmpCtx=g);return b},getObj:function(a,e){return""==a?!0==e?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(a,e){gx.csv.cmpCtx=a;gx.O=""==a?!0==e?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a);gx.O=gx.O||gx.pO},setVar:function(a,e){gx.O.setVariable(a,e)},getVar:function(a){return gx.O.getVariable(a)},prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var e=c,e=e.exec(a);null!=e&&e[1]?a=e[1]:(e=b,e=e.exec(a),null!=e&&e[1]&&
(a=e[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory=
"/";else{var e=gx.staticDirectory.length,a="/"!=gx.staticDirectory.charAt(0),e="/"!=gx.staticDirectory.charAt(e-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(e?"/":"")}},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");if(a&&a!=this.theme&&(this.theme=a,a=gx.dom.byId("gxtheme_css_reference")))a.href=a.href.replace(/[^/]*.css/,this.theme+".css")},setTheme:function(a){this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{if(gx.HTML5){for(var e=document.getElementsByTagName("TABLE",
a),b=e.length-1;0<=b;b-=1){var c=e[b],g=c.getAttribute("data-cellpadding");g&&c.setAttribute("cellPadding",parseInt(g));var h=c.getAttribute("data-cellspacing");h&&c.setAttribute("cellSpacing",parseInt(h));var k=c.getAttribute("data-align");k&&c.setAttribute("align",k)}if(gx.util.browser.isIE()||gx.util.browser.isOpera())for(var e=[],c=a||document,e=c.querySelectorAll?c.querySelectorAll("td[data-align]"):gx.dom.byTag("td",a),b=0,l=e.length;b<l;b++){var o=e[b].getAttribute("data-align");o&&e[b].setAttribute("align",
o)}}}catch(n){gx.dbg.logEx(n,"gxapi.js","setTheme")}},SetOld:function(a,e,b){var c=e,a=gx.fn.controlGridId(a);0<a&&(c=e+"_"+gx.fn.currentGridRow(a));gx.fn.setHidden(c,gx.getVar(b))},Old:function(a,e){try{var b=e,c=gx.fn.controlGridId(a);0<c&&(b=e+"_"+gx.fn.currentGridRow(c));var g=gx.fn.getHidden(b);"undefined"==typeof g&&""!=gx.O.CmpContext&&(g=gx.fn.getHidden(gx.O.CmpContext+b));return g}catch(h){gx.dbg.logEx(h,"gxapi.js","Old")}return""},OldInteger:function(a,e){var b=parseInt(gx.Old(a,e),10);
return isNaN(b)?0:b},OldDecimal:function(a,e){var b=gx.num.parseFloat(gx.Old(a,e),gx.thousandSeparator,gx.decimalPoint);return isNaN(b)?0:b},OldDate:function(a,e){return(new gx.date.gxdate(gx.Old(a,e),"Y4MD")).getStringWithFmt(gx.dateFormat)},OldDateTime:function(a,e){var b=new gx.date.gxdate(gx.Old(a,e),"Y4MD");return b.getStringWithFmt(gx.dateFormat)+" "+b.getTimeString(!0,!0)},typedOld:function(a,e,b){switch(b){case "int":return this.OldInteger(a,e);case "decimal":return this.OldDecimal(a,e,!0);
case "date":return this.OldDate(a,e);case "dtime":return this.OldDateTime(a,e);default:return this.Old(a,e)}},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:function(){return!1},isJava:function(){return!this.net}},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==
a.id||""==a.id?a.name:a.id},byId:function(a,e){e=e||document;return e.getElementById(a)},byName:function(a){return document.getElementsByName(a)},byTag:function(a,e){e=e||document;return e.getElementsByTagName(a)},byClass:function(a,e,b){if(document.getElementsByClassName)return b=b||document,b.getElementsByClassName(a);var c=[],e=gx.dom.byTag(e||"*",b),b=e.length,a=RegExp("(^|\\s)"+a+"(\\s|$)");for(j=i=0;i<b;i++)a.test(e[i].className)&&(c[j]=e[i],j++);return c},el:function(a){if(a){if("object"==
typeof a&&a.tagName)return a;var e=this.byId(a);if(null!=e)return e;e=this.byId("span_"+a);if(null!=e)return e;e=this.byName(a);return null!=e&&0<e.length?e[0]:null}return null},hasClass:function(a,e){var b=gx.dom.el(a);if(b)return e&&-1!=(" "+b.className+" ").indexOf(" "+e+" ")},isMultimediaElement:function(a){return"SPAN"==a.tagName&&(gx.dom.hasClass(a,"gx-video-placeholder")||gx.dom.hasClass(a,"gx-audio-placeholder"))},addPrefixClass:function(a,e){a&&(a.className&&a.className.substr(0,e.length)!=
e)&&(a.className=e+a.className)},removePrefixClass:function(a,e){a&&0==a.className.indexOf(e)&&(a.className=a.className.substring(e.length))},addClass:function(a,e){var b=gx.dom.el(a);b&&(e&&!this.hasClass(a,e))&&(b.className=b.className+" "+e)},classReCache:{},removeClass:function(a,e){var b=gx.dom.el(a);if(b&&this.hasClass(a,e)){var c=this.classReCache[e];c||(c=RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)","g"),this.classReCache[e]=c);b.className=b.className.replace(c," ")}},purgeElement:function(a,e){var b=
e||a.attributes,c,g,h;if(b){g=b.length;for(c=0;c<g;c+=1)h=b[c].name||b[c],"function"===typeof a[h]&&(a[h]=null)}},purge:function(a,e){e||this.purgeElement(a);var b=a.childNodes;if(b)for(var c=0,g=b.length;c<g;c++)gx.dom.purge(b[c],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()},form:function(){null==this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){if(!document.all)for(var a=
this.form().elements,e=a.length,b=0;b<e;b++)a[b].gxIndex=b},setAttribute:function(a,e,b){try{var c=gx.dom.byName(a);if(null!=c&&0<c.length)for(var g=c.length,a=0;a<g;a++)c[a].setAttribute(e,b);else{var h=gx.dom.byId(a);null!=h&&h.setAttribute(e,b)}}catch(k){gx.dbg.logEx(k,"gxapi.js","setAttribute")}},createInput:function(a,e){var b=document.createElement("input");b.type=e;b.id=a;b.name=a;gx.dom.form().appendChild(b);return b},hasSubmitControl:function(){var a=this.byTag("input"),e=a.length;if(!e)return!1;
for(var b=0;b<e;b++){var c=a[b].getAttribute("type");if("submit"==c||"image"==c)return!0}return!1},scripts:function(){var a=document.scripts;a||(a=document.getElementsByTagName("script"));if("undefined"!=typeof a){for(var e=[],b=a.length,c=0;c<b;c++){var g=a[c].attributes.src;g&&g.value&&(g=g.value,"//:"!=g&&e.push(g))}return e}return[]},styles:function(){var a=document.styleSheets;if("undefined"!=typeof a){for(var e=[],b=a.length,c=0;c<b;c++){var g=a[c].href;gx.lang.emptyObject(g)||e.push(g)}return e}return[]},
getComputedStyle:function(a){try{return a==document?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(a):"undefined"!=typeof a.currentStyle?a.currentStyle:a.style}catch(e){return gx.dbg.logEx(e,"gxapi.js","getComputedStyle"),null}},getStyle:function(a,e){var b="";try{var b="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[e]:"undefined"!=typeof a.currentStyle?a.currentStyle[e]:a.style[e],c=parseInt(b);isNaN(c)||(b=c)}catch(g){gx.dbg.logEx(g,"gxapi.js",
"getStyle")}return b},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0},isEditControl:function(a){return a&&"INPUT"==a.tagName?this.editControls[a.type]||!1:!1},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||"datetime-local"==a.type},isButtonLike:function(a){return this.isButton(a)?!0:void 0!=a&&null!=a?"INPUT"==a.nodeName&&
("image"==a.type||"checkbox"==a.type)&&"function"==typeof a.onclick:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document}catch(e){}return null},forEachChild:function(a,e,b){if(a&&a.childNodes&&"function"==typeof b)for(var c=a.childNodes.length,g=0;g<c&&!1!==b.call(e,a.childNodes[g]);g++);},isTextWithLink:function(a){return null!=a&&"A"==a.tagName&&(a.childNodes&&0<a.childNodes.length)&&this.innerChildIsText(a.firstChild)?!0:
!1},isChildNode:function(a,e){a.frameElement&&(a=a.frameElement);if(a==e)return!0;for(;a.parentNode;){if(a==e||a.parentNode==e)return!0;a=a.parentNode}return!1},findParentByTagName:function(a,e,b){a=a.parentNode;e=e.toUpperCase();for(i=0;a&&!(b&&i==b);){i++;if(a.tagName==e)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},position:function(a){var e=0,b=0;if(a.getBoundingClientRect){var c,e={top:0,left:0};c=(b=
a)&&b.ownerDocument;if(!c)return;a=c.documentElement;b.getBoundingClientRect&&(e=b.getBoundingClientRect());c=c.defaultView||c.parentWindow;b=e.top+(c.pageYOffset||a.scrollTop)-(a.clientTop||0);e=e.left+(c.pageXOffset||a.scrollLeft)-(a.clientLeft||0)}else{for(;a.offsetParent;)e+=a.offsetLeft+(a.currentStyle?gx.num.intval(a.currentStyle.borderLeftWidth):0)-(a.scrollLeft||0),b+=a.offsetTop+(a.currentStyle?gx.num.intval(a.currentStyle.borderTopWidth):0)-(a.scrollTop||0),a=a.offsetParent;e+=a.offsetLeft+
(a.currentStyle?gx.num.intval(a.currentStyle.borderLeftWidth):0);b+=a.offsetTop+(a.currentStyle?gx.num.intval(a.currentStyle.borderTopWidth):0)}return{x:Math.floor(e),y:Math.floor(b)}},dimensions:function(a){var e=a.offsetWidth,b=a.offsetHeight,a=a.childNodes;if(!gx.util.browser.isIE()&&!gx.lang.emptyObject(a))for(var c=a.length,g=0;g<c;g++){var h=a[g].offsetWidth,k=a[g].offsetHeight;h>e&&(e=h);k>b&&(b=k)}return{w:e,h:b}},windowDimensions:function(a){var e=a.documentElement,b=a.body;if(e&&e.scrollHeight){var a=
Math.max(e.scrollHeight,b.scrollHeight),c=Math.max(e.scrollWidth,b.scrollWidth),g=Math.max(e.clientHeight,b.clientHeight),e=Math.max(e.clientWidth,b.clientWidth);return{scrollWidth:c,scrollHeight:a,clientHeight:g,clientWidth:e}}return{scrollWidth:b.scrollWidth,scrollHeight:b.scrollHeight,clientHeight:b.clientHeight,clientWidth:b.clientWidth}},documentScroll:function(a){a=a||document;return{scrollTop:a.documentElement.scrollTop||a.body.scrollTop,scrollLeft:a.documentElement.scrollLeft||a.body.scrollLeft}},
autofitIFrame:function(a){var a=gx.evt.source(window.event||a),e=window.frames[a.name].document;if(e&&!(""!=a.width||""!=a.height)){var b=gx.dom.windowDimensions(e),e=b.scrollWidth?b.scrollWidth+10:null,b=b.scrollHeight?b.scrollHeight+10:null;e&&b&&(a.style.width=e+"px",a.style.height=b+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&a&&a.childNodes){for(var e=null,b=a.childNodes.length,c=0;c<b;c++){var g=a.childNodes[c];if("TABLE"==g.nodeName){e=g;break}}if(null!=e&&(-1!=e.style.width.indexOf("%")&&
(a.style.width=gx.dom.addUnits(e.style.width)),-1!=e.style.height.indexOf("%")))a.style.height=gx.dom.addUnits(e.style.height)}},redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,a.outerHTML)},100)},setCaretPosition:function(a,e){if(null!=a)if(a.createTextRange){var b=a.createTextRange();b.move("character",e);b.select()}else a.selectionStart?(a.focus(),a.setSelectionRange(e,e)):a.focus()},
replaceAtCaretPosition:function(a,b){var d=a.selectionStart,c=a.selectionEnd;document.selection?(d=document.selection.createRange().getBookmark(),a.selection=a.createTextRange(),a.selection.moveToBookmark(d),a.selectLeft=a.createTextRange(),a.selectLeft.collapse(!0),a.selectLeft.setEndPoint("EndToStart",a.selection),d=a.selectLeft.text.length+1,c=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)):(d=a.selectionStart,c=a.selectionEnd);a.setRangeText?a.setRangeText(b,d,
c):a.value=a.value.substr(0,d)+b+a.value.substr(c,a.value.length);gx.dom.setCaretPosition(a,d+1)},spanValue:function(a){var b=a.nodeValue;gx.lang.emptyObject(b)&&(b=a.innerText||a.textContent);gx.lang.emptyObject(b)&&(b="");return b},removeControlSafe:function(a){this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV"),this._avoidLeaksDiv.style.display="none",document.body.appendChild(this._avoidLeaksDiv));this._avoidLeaksDiv.appendChild(a);gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv);
this._avoidLeaksDiv.innerHTML=""},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var b=document.createRange();a&&(b.selectNode(a),b.deleteContents())}},comboBoxToObj:function(a,b){try{var d={s:"",v:[]};if(!a)return d;if("SELECT"==a.tagName){d.s=a.value;for(var c=a.options.length,g=0;g<c;g++){var h="",h="undefined"!=typeof a.options[g].innerText?a.options[g].innerText:a.options[g].text;d.v.push([a.options[g].value,h])}}else"SPAN"==a.tagName&&"string"==typeof b&&(d.v.push([b,
b]),d.s=b);return d}catch(k){gx.dbg.logEx(k,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s)$/i,addUnits:function(a,b){return""===a||"auto"==a?a:void 0===a?"":"number"==typeof a||!this.unitPattern.test(a)?a+(b||"px"):a},getActiveElement:function(){var a=null;try{a=document.activeElement}catch(b){}return a},_init:function(){Function.prototype.closure=function(a,b,d){var c=gx.util.browser;if(c.isIE()&&8>c.ieVersion()){window.__objs||(window.__objs=[],window.__funs=
[],window.__args=[]);var g=this,h=a.__objId;h||(__objs[h=a.__objId=__objs.length]=a);var k=g.__funId;k||(__funs[k=g.__funId=__funs.length]=g);b||(b=[]);var l=b.__argsId;l||(__args[l=b.__argsId=__args.length]=b);b=g=a=null;return function(){if(__funs){var a=__args[l];if(d===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(__args[l])}a.length==0&&arguments.length>0&&(a=arguments);a=__funs[k].apply(__objs[h],a);if(__objs)try{delete __objs[h].__objId}catch(b){__objs[h].__objId=null}__funs&&
delete __funs[k].__funId;__args&&delete __args[l].__argsId;return a}}}g=this;return function(){var c=b||arguments;!0===d&&(c=Array.prototype.slice.call(arguments,0),c=c.concat(b));return g.apply(a||window,c)}};gx.evt.on_ready(this,function(){var a,b,d=gx.util.browser;if(d.isWebkit()){var c=[];if(document.querySelectorAll)c=document.querySelectorAll("input[type='hidden']");else{var g=gx.dom.byTag("input");a=0;for(b=g.length;a<b;a++)"hidden"==g[a].getAttribute("type")&&c.push(g[a])}a=0;for(b=c.length;a<
b;a++)c[a].setAttribute("autocomplete","off")}if(d.isChrome()){d=document.querySelectorAll("select");a=0;for(b=d.length;a<b;a++)if(!d[a].value&&(c=d[a].querySelectorAll("option[selected]"))&&c.length)d[a].value=c[0].value}})},_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv.parentNode.removeChild(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)}},
util:{contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",
pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},isKnownContentType:function(a){for(var b in this.contentTypes)if(this.contentTypes[b]==a)return!0;return!1},getContentTypeFromExt:function(a){var b=a.lastIndexOf(".");-1!=b&&(a=a.substring(b+1));return a?this.getContentType(a):""},getContentType:function(a){if(gx.lang.emptyObject(a))return"text/html";a=a.toLowerCase();a=gx.text.trim(a);if(this.isKnownContentType(a))return a;var b=a.lastIndexOf(".");
-1!=b&&(a=a.substring(b+1));a=this.contentTypes[a];return gx.lang.emptyObject(a)?"text/html":a},getFileName:function(a){var b=a.lastIndexOf("/"),d=a.lastIndexOf("\\"),b=b>d?b:d,d=a.lastIndexOf(".");if(!a)return a;if(0>d||b>d)d=a.length;return a.substring(b+1,d)},getFileType:function(a){var b=a.lastIndexOf("/"),d=a.lastIndexOf("\\"),c=a.lastIndexOf(".");return 0>c||c<b||c<d?"":a.substring(c+1)},getWindowInfo:function(){var a="",b=!0,d=!1;try{if(d=window.location!=window.parent.location?!0:!1)try{b=
window.frameElement.id||window.top.document.body,a=window.name}catch(c){b=!1}}catch(g){}return{insideIframe:d,canAccessFrame:b,frameId:a}},browser:{w3c:!0,ns4:!1,ie5:!0,ns6:!1,ie:-1!=navigator.userAgent.indexOf("MSIE")||-1!=navigator.userAgent.indexOf("Trident"),ff:-1!=navigator.userAgent.indexOf("Firefox"),winCE:-1!=navigator.userAgent.indexOf("Windows CE"),iphone:-1!=navigator.userAgent.indexOf("iPhone"),ipad:-1!=navigator.userAgent.indexOf("iPad"),blackBerry:-1!=navigator.userAgent.indexOf("BlackBerry"),
operaMini:-1!=navigator.userAgent.indexOf("Opera Mini"),opera:-1!=navigator.userAgent.indexOf("Opera"),chrome:-1!=navigator.userAgent.indexOf("Chrome"),webkit:-1!=navigator.userAgent.search(/webkit/ig),isIE:function(){return this.ie},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},
isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()},isCompatMode:function(){return"BackCompat"==document.compatMode},ieVersion:function(){if(this.isIE())try{var a=navigator.userAgent.indexOf("MSIE");if(0<=a){var b=navigator.userAgent.indexOf(";",a),d=navigator.userAgent.substring(a+5,b);return parseFloat(d,10)}var c=navigator.userAgent.match(/; rv.([0-9]+)/);if(1<c.length)return parseFloat(c[1],
10)}catch(g){gx.dbg.logEx(g,"gxapi.js","ieVersion")}return-1},chromeVersion:function(){if(this.isChrome()){var a=navigator.userAgent.match(/Chrome\/([0-9]+)/);if(1<a.length)return parseFloat(a[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&("undefined"!==typeof Range&&!Range.prototype.createContextualFragment)&&(Range.prototype.createContextualFragment=function(a){var b=document.createDocumentFragment(),d=document.createElement("div");b.appendChild(d);d.outerHTML=a;return b})},
setupFF:function(){if(this.isFirefox()){var a={IMG:!0,BR:!0,INPUT:!0,META:!0,LINK:!0,PARAM:!0,HR:!0};HTMLElement.prototype.__defineGetter__("outerHTML",function(){for(var b=this.attributes,d="<"+this.tagName,c=b.length,g=0;g<c;g++)d+=" "+b[g].name+'="'+b[g].value+'"';return a[this.tagName]?d+">":d+">"+this.innerHTML+"</"+this.tagName+">"});HTMLElement.prototype.__defineSetter__("outerHTML",function(a){var b=this.ownerDocument.createRange();b.setStartBefore(this);this.parentNode.replaceChild(b.createContextualFragment(a),
this)})}},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ns4=document.layers?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1,this.ns6=document.getElementById&&!document.all?!0:!1);this.setupFF();this.setupIE()}},addOnce:function(a,b,d){void 0==a[d]&&(a[d]=b)},inArray:function(a,b){if(null==a||!(b instanceof Array))return!1;for(var d=b.length,c=0;c<d;c++)if(b[c]==a)return!0;return!1},lastArray:function(a){return 0<a.length?a[a.length-1]:null},noParmsUrl:function(a){var b=
a.indexOf("?");-1!=b&&(a=a.substring(0,b));return a},resourceUrl:function(a,b){if("undefined"==typeof a)return"";if(-1!=a.indexOf("://")||"."==a.charAt(0))return a;var d="/"!=gx.basePath.charAt(gx.basePath.length-1),c=a.indexOf(gx.basePath);if(0==c&&!b)return("/"==a.charAt(0)?"":"/")+a;if(-1!=c||b){var g="",g=-1!=c?gx.text.replaceAll(a.substring(c+gx.basePath.length),"\\","/"):a;if("/"==a.charAt(0))return location.protocol+"//"+location.host+a;c="/"!=gx.basePath.charAt(0);d=d&&"/"!=g.charAt(0);return location.protocol+
"//"+location.host+(c?"/":"")+gx.basePath+(d?"/":"")+g}return a},sameAppUrl:function(a){a=new this.Url(a);return a.isRelative()?!0:a.isSameApp(location.href)},removeBaseUrl:function(a){var b=gx.staticDirectory.length,d="/"!=gx.staticDirectory.charAt(0),b="/"!=gx.staticDirectory.charAt(b-1),d=RegExp("(?:/)?(?:"+gx.basePath+(d?"/":"")+gx.staticDirectory+(b?"/":"")+")?((?:[\\S]*))").exec(a);null!=d&&d[1]&&(a=d[1]);return a},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&
6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var a=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,b=/^(([^@]+)@)?([^\:]+)(:(.+))?$/;return function(d){this.url=d;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(a){a=new gx.util.Url(a);return this.protocol==a.protocol&&this.host==a.host};(function(d,c){var h=a,h=h.exec(c),k=!gx.lang.emptyObject(h);
if(k&&(d.protocol=h[2]?h[2]:"",k=h[4]?h[4]:"",d.path=h[5]?h[5]:"",d.query=h[7]?h[7]:"",d.hash=h[9]?h[9]:"",h=b,h=h.exec(k),k=!gx.lang.emptyObject(h)))d.user=h[2]?h[2]:"",d.host=h[3]?h[3]:"",d.port=h[5]?h[5]:""})(this,d)}}(),regExp:{isMatch:function(a,b){return null!==RegExp(b).exec(a)},replace:function(a,b,d){return a.replace(b,d)},split:function(a,b){return a.split(b)},matches:function(a,b){var d=RegExp(b).exec(a);return null!==d?d:[]}},autoRefresh:{arTimer:null,getProps:function(){var a=gx.fn.getHidden("_GxRefreshTimeout");
null!=a&&(a=gx.json.evalJSON(a),a.Time=parseInt(a.Time));return a},install:function(){var a=this.getProps();null!=a&&(this.create(),"focus"==a.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var a=this.getProps();null!=a&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*a.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(a){var b=
"";if(-1!=a.indexOf("&"))for(var d=a.length,c=0;c<d-1;c++)if("&"==a[c]&&"&"!=a[c+1]){b+=a[c+1];break}return b},accessKeyCaption:function(a){var b="";if(-1==a.indexOf("&"))return a;for(var d=a.length,c=0;c<d-1;c++)if("&"==a[c]&&"&"!=a[c+1]){b+=a.substring(c+1);break}else b+=a[c];return b},invalidFunc:function(a){throw"gxInvalidFunc: "+a;},urlValue:function(a){var b=a;"string"!=typeof b&&(b=gx.fn.getControlValueInt(a));return encodeURIComponent(b)},help:function(a){open(a,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},
_init:function(){this.browser._init();Array.prototype.removeAt=function(a){this.splice(a,1)}}},lang:{inherits:function(a,b,d){var c=a.prototype;a.prototype=new b;for(var g in c)"undefined"==typeof a.prototype[g]&&(a.prototype[g]=c[g]);"undefined"==typeof a.prototype.base&&(a.prototype.base=b);!0===d&&(a.prototype.constructor=function(){b.prototype.constructor.apply(this,arguments);c.constructor.apply(this,arguments)})},apply:function(a,b){if(a&&b&&"object"===typeof b)for(var d in b)a[d]=b[d];return a},
instanceOf:function(a,b){if(null==a||null==b)return!1;if(a instanceof b||b==String&&"string"==typeof a||b==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||b==Array&&"array"==typeof a||b==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(var d=a.base;"undefined"!=typeof d;){if(d==b)return!0;d=d.base}return!1},clone:function(a){var b={},d;for(d in a)b[d]=a[d];return b},isNumericType:function(a){return"int"==
a||"decimal"==a},isBooleanType:function(a){return"boolean"==a||"bool"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return!0==a||!1==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&("false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},
arrayToSource:function(a){if(null!=a.toSource)return a.toSource();for(var b="[",d=a.length,c=d-1,g=0;g<d;g++)b+=this.objectToSource(a[g]),g<c&&(b+=",");return b+"]"},objectToSource:function(a){if(this.isArray(a))return this.arrayToSource(a);if("object"==typeof a){var b="{",d="",c;for(c in a){var g=c;""==g?g="''":"string"==typeof g&&(g="'"+g+"'");b+=d;b="object"==typeof a[c]?b+(g+":"+this.objectToSource(a[c])):"string"==typeof a[c]?b+(g+":'"+this.encodeValue(a[c])+"'"):b+(g+":"+a[c]);d=","}return b+
"}"}return"'"+this.encodeValue(a.toString())+"'"},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},supEval:function(a,b){var d=null,d=b instanceof String||"string"==typeof b?a[b]:b;return function(){return d.apply(a,arguments)}},getType:function(a){var b=null;try{b=eval(a)}catch(d){gx.dbg.logEx(d,"gxapi.js","getType")}return b},
doEval:function(a,b){b=b||window;return b.execScript?b.execScript(a):eval.call?eval.call(b,a):eval(a)},doCall:function(){try{for(var a=arguments[0],b=[],d=arguments.length,c=1;c<d;c++)b.push(arguments[c]);a.apply(this,b)}catch(g){gx.dbg.logEx(g,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,b,d,c){a=a.closure(b,d);c=setTimeout(a,c);return{f:a,t:c}},encodeValue:function(a){return gx.text.charReplace(a,['"',"'","\r","\n"],["\\042","\\047","\\015",
"\\012"])},decodeValue:function(a){a=gx.text.replaceAll(a,"\\042",'"');return gx.text.replaceAll(a,"\\015\\012","\r\n")},htmlDecode:function(a){if(!a)return a;this.htmlDecodeEl||(this.htmlDecodeEl=document.createElement("div"));this.htmlDecodeEl.innerHTML="<div>"+a+"</div>";a=this.htmlDecodeEl.firstChild;return a.innerText||a.text||a.textContent||""}},cache:{remoteFiles:[],inlineCode:[],addRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0},addLoadedFile:function(a){a=
gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0},removeRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!1},fileLoaded:function(a){a=gx.util.noParmsUrl(a);return this.remoteFiles[gx.util.resourceUrl(a,!0)]?!0:!1},updateStyles:function(a,b){for(var d=[],c=a.length,g=0;g<c;g++){var h=a[g];if(!gx.lang.emptyObject(h)){for(var k=!1,l=b.length,o=0;o<l;o++)if(h==b[o]){k=!0;break}k||d.push(h)}}k=gx.staticDirectory;"/"==k.charAt(0)&&(k=k.substring(1));
c=d.length;for(g=0;g<c;g++)h=d[g],"/"!=h.charAt(0)&&(h=k+h),this.removeRemoteFile(h)},addInlineCode:function(a){this.inlineCode[a]=!0},deleteInlineCode:function(a){delete this.inlineCode[a]},codeLoaded:function(a){return this.inlineCode[a]?!0:!1},_init:function(){var a=gx.staticDirectory;"/"==a.charAt(0)&&(a=a.substring(1));for(var b=gx.dom.scripts(),d=b.length,c=0;c<d;c++){var g=b[c];gx.lang.emptyObject(g)||("/"!=g.charAt(0)&&!gx.ajax.isabsoluteurl(g)&&(g=a+g),this.addRemoteFile(g))}b=gx.dom.styles();
d=b.length;for(c=0;c<d;c++)g=b[c],gx.lang.emptyObject(g)||("/"!=g.charAt(0)&&!gx.ajax.isabsoluteurl(g)&&(g=a+g),this.addRemoteFile(g))}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,hooks:[],controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!0,userReady:!1,skipPromptCtrl:!0,addHook:function(a,b,d){this.hooks[this.hooks.length]={c:a,e:b,f:d}},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof
Array?gx.evt.refreshGridCallback.push(a):a.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=gx.evt.refreshGridCallback.pop();"function"==typeof a&&a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=this.hooks.length,b=0;b<a;b++){var d=this.hooks[b];try{this.detach(d.c,d.e,d.f),d.c=null,d.f=null}catch(c){gx.dbg.logEx(c,"gxapi.js","clearHooks")}this.hooks[b]=null}this.hooks=
[]},source:function(a){return a.target||a.currentTarget||a.srcElement},attach:function(a,b,d,c,g){g=g||{};if("string"==typeof b){var h=d;c&&(h=d.closure(c));if(g.single)var k=h,l=!1,h=function(){l||(gx.evt.detach(a,b,k,g),k.apply(this,arguments),l=!0)};a.addEventListener?a.addEventListener(b,h,g.useCapture||!1):a.attachEvent?a.attachEvent("on"+b,h):a["on"+b]=h;this.addHook(a,b,h)}else if(gx.lang.isArray(b))for(var h=0,o=b.length;h<o;h++)this.attach(a,b[h],d,c,g)},detach:function(a,b,d,c){try{if(c=
c||{},"string"==typeof b)a.removeEventListener?a.removeEventListener(b,d,c.useCapture||!1):a.detachEvent?a.detachEvent("on"+b,d):a["on"+b]=null;else if(gx.lang.isArray(b))for(var g=0,h=b.length;g<h;g++)this.detach(a,b[g],d,c)}catch(k){gx.dbg.logEx(k,"gxapi.js","detach")}},cancel:function(a,b){if(b&&gx.util.browser.isIE()&&typeof("undefined"!=a.keyCode))try{a.keyCode=0}catch(c){}"undefined"==typeof a.preventDefault?(a.cancelBubble=b,a.returnValue=!b):b&&(a.preventDefault(),a.stopPropagation())},checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&
"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=a.onfocus)a.onfocus()}catch(b){gx.dbg.logEx(b,"gxapi.js","checkCtrlFocus")}},doClick:function(a,b){if(!gx.evt.processing||gx.csv.validating){var c=gx.evt.source(b);if("button"!=c.type&&"submit"!=c.type&&(c=gx.dom.el(a),gx.fn.isAccepted(c))){if(void 0!=c.onfocus)c.onfocus();if(void 0!=c.onclick)c.onclick();"INPUT"==c.nodeName&&"submit"==c.type&&gx.dom.form().submit()}}},executeOnblur:function(a){var b=gx.csv.lastId,c=gx.O.focusControl;gx.O.focusControl=
a;this.onblur(gx.O.focusControl);gx.O.focusControl=c;gx.csv.lastId=b},onblur:function(a){gx.csv.lastId=a;try{var b=gx.fn.validStruct(a);b&&null!=b.gxgrid&&b.gxgrid.updateControlValue(b,!1);var c=gx.csv.lastControl,f=c.getAttribute("maxlength");0<f&&c.value.length>=f&&(c.value=c.value.substring(0,f));if(b&&"bits"==b.type&&0==b.ro){var g=gx.fn.getControlGridRef(b.fld,b.gxgrid?b.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>c.id.indexOf(b.fld)&&(c=g);var h=gx.html.multimediaUpload.getContainer(g);
gx.html.multimediaUpload.refreshPreviewImg(h,c)}}catch(k){gx.dbg.logEx(k,"gxapi.js","onblur")}},onfocus:function(){var a=function(){gx.fx.obs.notify("gx.onbeforevalidate");gx.evt.onfocus_impl.apply(gx.evt,arguments);gx.fx.obs.notify("gx.onaftervalidate")};!0===gx.evt.is_button_mouse_event||gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,b,c,f,g,h,k){try{gx.evt.setReady(!1);if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0),
!1;var l=!1;gx.csv.cmpCtx!=c&&(l=!0,gx.O.fromValid=0);gx.setGxO(c,f);l&&gx.fn.changeCmpContext();gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(o){gx.dbg.logEx(o,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;(0==h||""!=g)&&gx.fn.setCurrentGridRow(h,g);gx.fx.installSuggest(a);c=!1;if(gx.csv.lastGrid!=h){gx.csv.lastRow[h]=null;if(!k){if(gx.csv.lastGrid<h){var n=gx.fn.firstGridControl(h);gx.O.fromValid>n&&(gx.O.fromValid=
n)}gx.csv.lastGrid=h}c=!0}gx.O.focusControl=b;if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(m){gx.dbg.logEx(m,"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0),!0;try{var p=gx.fn.getControlValue("Mode");if("DLT"==p||"DSP"==p||gx.O.isTransaction()&&gx.dom.isButton(a)&&!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&!k)return gx.evt.setReady(!0),!0}catch(q){gx.dbg.logEx(q,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&null!=gx.csv.lastControl){cn=
gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0),!0;gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0);return!0}if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0),!0;if(null!=gx.csv.invalidControl&&gx.csv.invalidControl!=a&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==a&&gx.csv.validate(gx.csv.invalidControl,
gx.csv.invalidId,!1))return gx.csv.invalidControl=null,gx.evt.setReady(!0),!0;k?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0!=gx.csv.lastRow[h]&&(gx.csv.lastRow[h]!=g&&!c)&&gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);var t=gx.fn.controlIds();0<t.length&&gx.O.fromValid<
t[0]&&(gx.O.fromValid=t[0]);gx.lang.emptyObject(gx.csv.lastRow[h])&&0!=h&&(gx.csv.rowChanged=!0,gx.csv.lastRow[h]=g);var w=gx.csv.checkRowChange(gx.csv.lastId,c),b=!1;if(!gx.lang.emptyObject(gx.csv.lastRow[h])&&!gx.lang.emptyObject(g)&&gx.csv.lastRow[h].length>g.length)var v=gx.csv.lastRow[h].substring(gx.csv.lastRow[h].length-g.length),b=parseInt(v)<parseInt(g);if((!w||c)&&(gx.O.focusControl>=gx.csv.lastId||b)){if(gx.fn.lastMainLevelCtrlId(gx.csv.lastId,h)){var y=gx.fn.getControlRefById(gx.csv.lastId);
y&&1===y.getAttribute("gxvalid")&&(gx.O.fromValid=gx.csv.lastId+1)}gx.csv.validateAll()}else gx.O.toValid=gx.O.focusControl;null==gx.csv.invalidControl&&("SELECT"==a.nodeName?(!gx.util.browser.isIE()||7<=gx.util.browser.ieVersion())&&gx.fn.setSelection(a):gx.fn.setSelection(a));gx.csv.disableFocusCondition();gx.evt.setReady(!0)}catch(A){gx.dbg.logEx(A,"gxapi.js","onfocus")}return!1},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(a){gx.dbg.logEx(a,"gxapi.js","userOnload")}},
onload:function(){gx.evt.execLoad&&(gx.fx.obs.notify("gx.onready"),null==gx.http.getCookie("GxTZOffset")&&gx.http.setCookie("GxTZOffset",jstz.determine().name())&&gx.http.reload(),gx.sec.loadKey(),gx.setTheme(),gx.fx.obs.addObserver("webcom.render",this,function(a){gx.setTheme(a.getContainer())}),gx.ajax._init(),gx.grid._init(),gx.evt.attach(window,"unload",gx.evt.onunload),gx.fn.setFocusInit(),gx.http.notification.node(),gx.cache._init(),gx.fn.installComponents(!0),gx.http.loadStyles(),gx.fn.objectOnload(),
gx.dom.indexElements(),gx.fn.doAttachs(),document.gxReadyState="complete",gx.util.autoRefresh.install(),(!gx.util.browser.isIE()||8<gx.util.browser.ieVersion())&&gx.fn.setOpacity(100,"body"),gx.evt.setProcessing(!1),gx.fx.obs.notify("gx.onload"),gx.evt.userOnload(),gx.fn.setFocusOnload(),gx.fx.delayedSuggest(),gx.http.doCommands(),gx.evt.setReady(!0),gx.evt.userReadyCnt=0)},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},
250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},on_ready:function(a,b){gx.fx.obs.addObserver("gx.onload",a,b)},onunload:function(){gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.obs.removeAll();gx.http.notification.cleanup();gx.fn.objectOnUnload();gx._deinit()},onclick:function(a){gx.evt.setReady(!1);gx.evt.processing&&gx.evt.cancel(a,!0);gx.evt.mouse.update(a);setTimeout(function(){gx.fx.ctx.notify()},10);gx.evt.setReady(!0)},onmousedown:function(a){var b=window.event||
a,c=gx.evt.source(b);if(c&&8>=gx.util.browser.ieVersion()&&"SHAPE"===c.tagName.toUpperCase())return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(c);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();c=a.getSource(b);null!=c&&(gx.evt.cancel(b,!0),gx.setGxO(c.obj.CmpContext,c.obj.IsMasterPage),a.drag(c.obj,c.types,c.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);var b=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()){var c=gx.popup.ext;c.movepopup();if(null!=c.currIDb||null!=
c.currRS)return!1}null!=b.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,b.obj.gxDragTypes)&&b.over(),b.moveControl(b.dragCtrl))},onmouseup:function(a){gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var b=gx.fx.dnd;if(null!=b.dragCtrl){var c=window.event||a,c=b.getTarget(c,b.obj.gxDragTypes);null!=c?(b.deleteClonControl(),gx.setGxO(c.obj.CmpContext,c.obj.IsMasterPage),b.drop(b.dropCtrl,c.obj,c.hdl)):b.restoreControl();c=window.event||a;gx.evt.cancel(c,!0)}b.out();
b.dragCtrl=null;b.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);gx.fx.dom.raiseEvent("dblclick",window.event||a)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(a,b,c){var c=window.event||c,f=gx.util.browser.isIE(),g=c.keyCode;if(f){if("keydown"==c.type&&229==g)return a.value.length<=b?a.ImeKey=!0:!1;if("keyup"==c.type&&8==g&&a.ImeKey&&a.value.length+1>=b)return a.value=a.value.substring(0,a.value.length-1),a.ImeKey=
!1,!0}if("keyup"==c.type||f)return a.value.length+1<=b||8==g||9==g||46==g||35<=g&&40>=g},onkeypress:function(a,b,c){if((null!=a||window.event)&&!(null!=a&&window.event)){var a=null==a?window.event:a,f=gx.fn,g=gx.util.browser,b={event:a,hasEnter:b,skipOnEnter:c,cancel:!1};gx.fx.obs.notify("gx.keypress",[b]);if(!b.cancel)if(27==a.keyCode&&gx.popup.ispopup())f.closeWindow();else{13==a.keyCode&&(gx.evt.processing&&!gx.csv.validating)&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&
this.invalidDSPKey(a))return this.cancel(a,!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var h=a.ctrlKey,b=gx.evt.source(a)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.csv.invalidateCtrl(b,a);if(!this.isEnterEvtCtrl(b)||!this.isTriggerKey(a)||!this.cancelAndRefresh(a)){this.checkFuncKey(a,b);if((32==a.charCode||32==a.keyCode||13==a.keyCode&&!c)&&gx.dom.hasClass(b,"gx_newrow")){var k=gx.dom.findParentByTagName(b,"DIV");k&&(k=gx.O.getGridById(k.getAttribute("gxgridid")))&&k.getNewRows(1,
a)}if(13==a.keyCode)if(k=this.triggersEvt(b),c){if(!f.enterHasFocus()&&(!this.shiftPressed||!("TEXTAREA"==b.nodeName&&g.isIE())))h&&"TEXTAREA"==b.nodeName?g.isIE()||gx.dom.replaceAtCaretPosition(b,"\n"):(g.isIE()&&"file"!=b.type?(gx.evt.isEnterEvtCtrl(b)&&gx.O.executeEnterEvent(a,b),a.keyCode=9,this.lastKey=a.keyCode,11<=g.ieVersion()&&(a.preventDefault(),f.setFocus(f.searchFocus(f.getControlIndex(b)+1,!0)))):(b.value&&(g.isIE()&&"SELECT"!=b.tagName)&&(g=b.value,b.value="",b.value=g),f.skipFocus(c),
this.cancel(a,!0)),this.enter=!1)}else k||gx.O.executeEnterEvent(a,b)}}}},onkeyup:function(a){var a=gx.evt.source(window.event?window.event:a),b=a.getAttribute("maxlength"),c="undefined"==typeof a.value?"":a.value;if((""==a.type&&9==this.lastKey||this.autoSkip&&""!=a.type&&!this.isControlKey(this.lastKey)&&c.length>=b)&&this.skipPromptCtrl)if(gx.dom.isTextWithLink(a)){if(b=a.id||("A"==a.tagName&&a.parentNode?a.parentNode.id:""))b=gx.O.getValidStructId(b),gx.evt.onfocus(a,b,"",!1,"",0)}else if(a=a.getAttribute("gxfocusable"),
!(null!=a&&"1"==a)){a=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==a)return!0;a=gx.fn.searchFocus(this.shiftPressed?a-1:a+1,!this.shiftPressed);gx.fn.setFocus(a)}},setEventRow:function(a,b){var c=gx.fn.rowGridId(b),f=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(c)||"0001";null!=c&&null!=f&&(void 0!=b.gxGridName&&gx.fn.setHidden(a.CmpContext+b.gxGridName.toUpperCase()+"_ROW",f),gx.csv.lastEvtRow=f,gx.fn.setCurrentGridRow(c,f))},ctrlOnchange:function(a,
b,c,f){gx.csv.pkDirty=c;"UPD"==a.value?"1"==b.value?(c?null!=f&&(f.value=gx.getMessage("GXM_captionadd")):null!=f&&(f.value=gx.getMessage("GXM_captionupdate")),b.value="0"):c&&null!=f&&(f.value=gx.getMessage("GXM_captionadd")):"INS"==a.value&&"1"==b.value&&(null!=f&&(f.value=gx.getMessage("GXM_captionadd")),b.value="0")},onchange:function(){var a=function(){gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):
a.apply(gx.evt,arguments)},onchange_impl:function(a){gx.evt.setReady(!1);gx.evt.lastControl=a;var b=gx.fn.getControlValue(gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"==a.type)a.onfocus();var c,f=!1;if(a.getAttribute("gxoldvalue")!=b){f=!0;gx.fn.setControlValue("IsModified","1");var g=!1;if(c=gx.O.getValidStruct(gx.O.focusControl))"function"==typeof c.c2v&&c.c2v(),"function"==typeof c.v2bc&&c.v2bc.call(gx.O);if(("select-one"==a.type||"checkbox"==a.type||"radio"==a.type)&&gx.csv.validate(a,gx.O.focusControl,
!0))g=!0,gx.csv.invalidControl==a&&(gx.csv.invalidControl=null);if("radio"==a.type)for(var h=gx.dom.byName(gx.dom.id(a)),k=h.length,l=0;l<k;l++)h[l].setAttribute("gxoldvalue",b);else a.setAttribute("gxoldvalue",b);gx.evt.execOnchange(a,g)}b=gx.evt.execUsrOnchange(a);gx.evt.setReady(!0);g=gx.util.browser.isWebkit()&&("radio"==a.type||"checkbox"==a.type||"file"==a.type);h=!1;if(f&&c&&(gx.fn.lastMainLevelCtrlId(gx.O.focusControl,c.grid)||c.gxsgprm))h=g=!0;if(g&&a.onblur)a.onblur();h&&("undefined"==typeof a.GXFormatError||
!1==a.GXFormatError)&&gx.csv.validControls(gx.O.focusControl,gx.O.focusControl+1,!0);return b},execOnchange:function(a,b){var c="";if(a.attributes.gxoch1)try{c+=a.attributes.gxoch1.value+";"}catch(f){gx.dbg.logEx(f,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&a.attributes.gxoch2)try{c+=a.attributes.gxoch2.value+";"}catch(g){gx.dbg.logEx(g,"gxapi.js","execOnchange")}try{""!=c&&eval(c)}catch(h){gx.dbg.logEx(h,"gxapi.js","execOnchange")}b||a.setAttribute("gxvalid","0");a.setAttribute("gxctrlchanged",
"1");gx.fn.setControlValue("IsModified","1")},execUsrOnchange:function(a){var b="";try{b=a.attributes.gxoch0.value}catch(c){return!0}return(new Function(b)).call(a)},jsEvent:function(a){if(gx.evt.processing&&!gx.csv.validating)return!1;a=a.getAttribute?a.getAttribute("jsevent"):a.jsevent;return!gx.lang.emptyObject(a)?eval(a):!0},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var b=gx.dom.id(a);!b&&"A"==a.tagName&&(b=a.parentNode.id);b&&0==b.indexOf("span_")&&(b=b.substring(5));if(!b)return!1;for(var c=
gx.O.EnterCtrl,a=gx.fn.rowGridId(a),f=0,g=c.length;f<g;f++){var h=gx.csv.ctxControlId(c[f]);if(a&&-1!=b.search(RegExp(".*"+h+"_[0-9]{4}$"))||h==b)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var a=gx.dom.id(a),b;for(b in gx.O.CheckCtrl)if(gx.O.CheckCtrl[b]==a||gx.O.CmpContext+gx.O.CheckCtrl[b]==a)return!0}return!1},isTriggerKey:function(a){for(var b=this.triggerKeys.length,c=0;c<b;c++)if(a.keyCode==this.triggerKeys[c]||a.charCode==this.triggerKeys[c])return!0;
return!1},isControlKey:function(a){for(var b=this.controlKeys.length,c=0;c<b;c++)if(a==this.controlKeys[c])return!0;return!1},invalidDSPKey:function(a){var b=a.keyCode-111;a.shiftKey&&(b+=12);return this.keyListeners[b]&&"ENTER"==this.keyListeners[b][gx.O.CmpContext]||13==a.keyCode?!0:!1},addKeyListener:function(a,b,c){1==b&&(document.body.onhelp=function(){return!1});void 0==this.keyListeners[b]&&(this.keyListeners[b]=[]);this.keyListeners[b][a]=c},setEvtName:function(a){gx.fn.setHidden("_EventName",
a)},cancelAndRefresh:function(a){return gx.O.conditionsChanged?(this.cancel(a,!0),gx.O.executeServerEvent("RFR",!1),!0):!1},setGridEvt:function(a,b){if((!gx.evt.processing||gx.csv.validating)&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(b)){var c=gx.fn.getGridObj(a);c&&(b=gx.fn.getHidden(gx.O.CmpContext+c.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",a);gx.fn.setHidden("_EventRowId",b);gx.fn.setCurrentGridRow(a,b)}},checkFuncKey:function(a,b){var c=this.lastKey-111;a.shiftKey&&
(c+=12);if(0<c&&24>=c&&void 0!=this.keyListeners[c]){var f=this.keyListeners[c][gx.O.CmpContext];if("undefined"!=typeof f)this.execFnKeyEvt(a,gx.O,f,b);else for(var g in this.keyListeners[c])if(f=this.keyListeners[c][g],"undefined"!=typeof f){var h=gx.getObj(g,!1);if(null!=h){this.execFnKeyEvt(a,h,f,b);break}}}},execFnKeyEvt:function(a,b,c,f){if(!gx.evt.processing)if(this.cancel(a,!0),"function"==typeof b[c])f=b.isServerEvent(c),gx.evt.setProcessing(!0,!f),b[c].call(b),"undefined"!=typeof gx&&gx.evt.setProcessing(!1,
!f);else if("PROMPT"==c){if((c=b.getValidStructFld(f.id))&&c.attachedCtrls)for(var a=c.attachedCtrls,g=0,h=a.length;g<h;g++)if((f=a[g])&&f.info&&f.info.isPrompt){var k=a[g].id;"function"==typeof b.promptKeyHandlers[k]&&(f=0<c.grid?"_"+gx.fn.currentGridRowImpl(c.grid):"",f=gx.dom.el(b.CmpContext+k+f),b.promptKeyHandlers[k].call(b,f))}}else if(b.isTransaction()&&"SELECT"==c){if((b=gx.dom.el(b.CmpContext+"BTN_SELECT"))&&"function"==typeof b.onclick)b.onclick()}else gx.evt.execEvt(b.CmpContext+"E"+c+
".",gx.evt.dummyCtrl)},keyModifiesValue:function(a){return 32<=a.keyCode&&127>=a.keyCode||229==a.keyCode?!0:!1},triggersEvt:function(a){return!gx.lang.emptyObject(a)&&(a==gx.evt.dummyCtrl||("A"==a.nodeName||"TEXTAREA"==a.nodeName)||"INPUT"==a.nodeName&&("button"==a.type||"image"==a.type))?!0:!1},setProcessing:function(a,b){if(("undefined"==typeof b||b)&&!gx.evt.redirecting)gx.evt.processing=a,gx.evt.setReady(!gx.evt.processing)},setReady:function(a){gx.evt.userReadyCnt+=a?-1:1;gx.evt.userReadyCnt=
0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;gx.evt.userReady=0==gx.evt.userReadyCnt;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0)},execEvt:function(a,b,c,f){var g=function(){gx.dbg.logPerf("execEvt");if(!gx.lang.emptyObject(a)&&!(gx.evt.processing&&!gx.csv.validating||!gx.ajax.isFormEnabled()||gx.csv.anyFormatError())){if(gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(b)&&b!=gx.csv.lastControl&&void 0!=b.onfocus)b.onfocus();gx.fx.obs.notify("gx.validation");if(f&&(gx.evt.srvCommand=!0,b)){var g=
gx.fn.rowGridId(b),k=gx.fn.controlRowId(b);!gx.lang.emptyObject(g)&&!gx.lang.emptyObject(k)&&(gx.csv.lastGrid=g,gx.fn.setCurrentGridRow(g,k))}0<gx.csv.lastId&&gx.evt.isEnterEvtCtrl(b)&&gx.O.getValidStructId(b.id)<gx.csv.lastId&&(gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll());this.setEvtName(a,b);this.lastEvent=a;!f&&(gx.grid.drawAtServer||b&&"INPUT"==b.nodeName&&"submit"==b.type)?this.execEvtSubmit(a,b):gx.ajax.doPost(gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),c)}}.closure(this);
gx.evt.waitGridRefresh(g)},execEvtSubmit:function(a,b){if(!gx.evt.processing||gx.csv.validating){gx.evt.setProcessing(!0);gx.ajax.disableForm();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);var c=gx.dom.form(),f=gx.popup.getPopup();if(null!=f){var g=c.action,f=f.window.gx.popup.lvl;if(-1!=f){var h=-1!=g.indexOf("?")?",":"?",h=h+encodeURIComponent("gxPopupLevel="+f+";");c.action=g+h}}c.submit()}},execCliEvt:function(a,b,c,f,g,h){if(!(gx.evt.processing&&
!gx.csv.validating||!gx.ajax.isFormEnabled()||gx.csv.anyFormatError())){gx.fx.obs.notify("gx.validation");var h=void 0!=h?h:[],k=gx.getObj(a,b);if(null!=k){gx.setGxO(a,b);"string"==typeof f&&(""!=f&&4<arguments.length)&&k.getGrid(f).instanciateRow(g);var l=k.isServerEvent(c);gx.evt.setProcessing(!0,!l);k.execC2VFunctions();k[c](h);gx.popup.waitCallback(function(){gx.evt.setProcessing(!1,!gx.csv.validating&&!l)});k.conditionsChanged&&k.executeServerEvent("RFR",!0)}}},fixWebKitOnFocus:function(){var a=
gx.util.browser;return a.isWebkit()&&!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},mouse:{x:-1,y:-1,update:function(a){try{gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=a.pageX,this.y=a.pageY)}catch(b){gx.dbg.logEx(b,"gxapi.js","mouse update")}}},_init:function(){document.gxReadyState="loading";if(gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&
!gx.util.browser.isWinCE()))this.attach(document,"readystatechange",this.onready);else if(9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini())this.attach(document,"DOMContentLoaded",this.onload);else if(gx.util.browser.isBlackBerry())this.attach(window,"load",this.onload);else this.onready(null);this.attach(document,"mousedown",this.onmousedown);this.attach(document,"mousemove",this.onmousemove);this.attach(document,
"mouseup",this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}},csv:{pkDirty:!1,validating:!1,lastRow:[],rowChanged:!1,currentId:0,
lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],validForm:function(){var a=!0;try{"1"!=gx.fn.getControlValue("IsConfirmed")&&"EENTER."==gx.fn.getHidden("_EventName")&&(a=this.validControls(this.lastId,
gx.fn.lastCtrlId()+1,!1))}catch(b){gx.dbg.logEx(b,"gxapi.js","validForm")}a&&gx.fn.forceEnableControls(!1);return a},validateAll:function(){try{if(this.validControls(gx.O.fromValid,gx.O.toValid,!1),(null==this.invalidControl||!gx.csv.stopOnError)&&(!this.rowChanged||this.targetRowIsMod(this.toValid)))gx.O.fromValid=gx.O.toValid}catch(a){gx.dbg.logEx(a,"gxapi.js","validateAll")}},validControls:function(a,b,c){var f=!0,g=-1;try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=
0;if(b>a)for(;a<b;a++){var h=this.validControl(a,c),k=h.ret;f&&!k&&(g=h.ctrl,f=!1)}if(gx.csv.stopOnError)if(-1!=g){var l=gx.fn.validStruct(g),o=gx.fn.getControlGridRef(l.fld,l.grid);gx.csv.disableFocus=!0;gx.fn.isAccepted(o)?gx.fn.setFocus(o):gx.fn.setFocus(gx.evt.lastControl)}else!gx.dom.isButton(gx.csv.lastControl)&&null!=gx.csv.validActivatedControl&&gx.fn.setFocus(gx.csv.validActivatedControl)}catch(n){gx.dbg.logEx(n,"gxapi.js","validControls")}return f},validControl:function(a,b){var c=!0,f=
-1,g=gx.fn.validStruct(a);if(void 0!=g){if(0!=g.grid){var h=gx.fn.currentGridRow(g.grid);void 0!=h&&gx.fn.setCurrentGridRow(g.grid,h)}!0==g.isuc?g.uc.execC2VFunctions():"function"==typeof g.c2v&&g.c2v();"function"==typeof g.v2bc&&g.v2bc.call(gx.O);try{if(0==g.lvl||0!=g.grid&&gx.fn.gridRowIsMod(g.lvl,gx.fn.currentGridRow(g.grid))||!gx.O.isTransaction())if(h=null,h=!0==g.isuc?g.uc.getRealControl():gx.fn.getControlGridRef(g.fld,g.grid)){var k=this.validate(h,a,b),l=!1;0!=g.grid&&(l=gx.fn.rowIsRemoved(g.grid,
gx.fn.currentGridRow(g.grid)));!k&&(c&&!l)&&(gx.csv.invalidControl=h,f=gx.csv.invalidId=a,c=!1);gx.csv.lastId=a;!1==gx.fn.isAccepted(h)&&(gx.evt.executeOnblur(a),h.getAttribute("gxhiddenonchange")!=h.value&&(h.setAttribute("gxhiddenonchange",h.value),gx.evt.execOnchange(h)))}}catch(o){gx.dbg.logEx(o,"gxapi.js","validControl")}}return{ret:c,ctrl:f}},validate:function(a,b,c){gx.csv.anyError=!1;var f=gx.fn.validStruct(b);if(void 0==f)return!0;gx.csv.refreshVars(f);if(null==f.fnc&&null==f.isvalid){if("SELECT"!=
a.tagName&&"checkbox"!=a.type&&gx.lang.isNumericType(f.type)&&!gx.lang.emptyObject(f.rgrid))for(var g=f.rgrid.length,b=0;b<g;b++)f.rgrid[b].filterVarChanged();return!0}try{if(-1!=b&&(c||"1"!=a.getAttribute("gxvalid"))){gx.evt.setProcessing(!0);gx.csv.currentId=b;gx.csv.validatingGrid=f.gxgrid;gx.csv.validating=!0;gx.csv.refreshVars(f);c=!1;c=!0==f.isuc?f.fnc.call(f.uc):null!=f.fnc?f.fnc.call(gx.O):!0;1==gx.O.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=a),gx.csv.anyError=
!0,gx.O.AnyError=0);!0==gx.csv.anyError&&(c=!gx.csv.anyError);if(!1==c)return gx.csv.validatingGrid=null,gx.csv.validating=!1,gx.evt.setProcessing(!1),!1;gx.csv.refreshControls(f);gx.csv.invalidateDeps(b);if(!gx.lang.emptyObject(f.rgrid)&&!gx.lang.emptyObject(f.hc)){g=f.rgrid.length;for(b=0;b<g;b++)f.rgrid[b].filterVarChanged()}if(!gx.csv.validateLostFocusOnly||gx.O.fromValid===b){var h=gx.fn.isAccepted(a);null!=f.isvalid&&h&&f.isvalid.call(gx.O);h?a.setAttribute("gxvalid","1"):a.setAttribute("gxvalid",
"0")}gx.csv.validatingGrid=null;gx.csv.validating=!1;gx.evt.setProcessing(!1)}}catch(k){gx.dbg.logEx(k,"gxapi.js","validate")}return!0},invalidateForm:function(){if(1!=gx.O.AnyError)for(var a=gx.fn.controlIds(),b=a.length,c=0;c<b;c++){var f=gx.fn.validStruct(a[c]);this.invalidateGXCtrl(gx.fn.getControlGridRef(f.fld,f.grid))}},invalidateGXCtrl:function(a){if(a){var b=a.getAttribute("gxoldvalue");1==a.getAttribute("gxvalid")&&b!=a.value&&a.setAttribute("gxvalid","0")}},invalidateCtrl:function(a,b){try{this.invalidateGXCtrl(a);
var c=gx.fn.validStruct(gx.O.focusControl);c&&(0!=c.grid&&gx.evt.keyModifiesValue(b))&&c.gxgrid.setRowModified(gx.fn.currentGridRowImpl(c.grid))}catch(f){gx.dbg.logEx(f,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(a){for(var b=gx.fn.controlIds(),c=b.length,f=0;f<c;f++){var g=b[f];if(g>a)for(var g=gx.fn.validStruct(g),h=g.ip?g.ip.length:0,k=0;k<h;k++)if(g.ip[k]==a)if(0==g.grid){var l=gx.fn.getControlGridRef(g.fld,g.grid);l&&l.setAttribute("gxvalid","0")}else{var o=gx.fn.getGridObj(g.grid);
if(o)for(var n=o.grid.rows.length,m=0;m<n;m++){var l=o.grid.rows[m],p=l.gxDeleted(),q=l.gxExists();!p&&q&&(o.setRowModified(l.gxId),(l=gx.fn.getControlRef(g.fld+"_"+l.gxId))&&l.setAttribute("gxvalid","0"))}}}},setFormatError:function(a,b){a.id&&(b||"undefined"==typeof b?(this.gxFormatErrors[a.id]=!0,a.GXFormatError=!0):(delete this.gxFormatErrors[a.id],a.GXFormatError=!1))},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==
typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var a=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var b=gx.fn.validStruct(gx.O.focusControl);if(b&&b.nac&&!0==b.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var c=gx.fn.searchFocusFwd(cn);null!=c&&gx.fn.setFocus(c);gx.setVar("Gx_mode",a);return!0}gx.setVar("Gx_mode",a)}catch(f){}return!1},loadScreen:function(){try{gx.csv.pkDirty&&(gx.csv.pkDirty=
!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,!0))}catch(a){gx.dbg.logEx(a,"gxapi.js","loadScreen")}},ctxControlId:function(a){return 0==a.indexOf(this.cmpCtx)?a:this.cmpCtx+a},isProperty:function(a){return a instanceof Array&&2==a.length||"object"==typeof a&&"undefined"!=typeof a[0]&&"undefined"!=typeof a[1]?!0:!1},checkRowChange:function(a,b){try{var c=gx.fn.validStruct(a);if("undefined"!=typeof c){var f=c.grid;if(0!=f){var g=gx.fn.currentGridRowImpl(f);if(g&&(g!=
gx.csv.lastRow[f]||b)&&1<g.length&&gx.csv.lastRow[f]&&1<gx.csv.lastRow[f].length){gx.csv.rowChanged=!0;var h=gx.O.Gx_BScreen;gx.O.Gx_BScreen=1;!0==gx.csv.validGridRowChange(f,g)&&gx.O.getGridById(f).instanciateRow(g);gx.O.Gx_BScreen=h;return!0}void 0!=g&&gx.fn.setCurrentGridRow(f,g)}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","checkRowChange")}return!1},validGridRow:function(a,b){void 0!=b&&gx.fn.setCurrentGridRow(a,b);var c=gx.fn.firstGridControl(a),f=gx.fn.lastGridControl(a);return gx.csv.validControls(c,
f+1,!0)},validGridRowChange:function(a,b){void 0!=gx.csv.lastRow[a]&&gx.fn.setCurrentGridRow(a,gx.csv.lastRow[a]);var c=gx.fn.firstGridControl(a),f=gx.fn.lastGridControl(a);((f=gx.csv.validControls(c,f+1,!0))||!gx.csv.stopOnError)&&gx.csv.changeGridRow(a,c,b);return f},changeGridRow:function(a,b,c){gx.csv.lastId=b;gx.O.fromValid>b&&(gx.O.fromValid=b);gx.csv.lastRow[a]=c;Gx_BScreen=1},targetRowIsMod:function(a){return(a=gx.fn.validStruct(a))?gx.fn.gridRowIsMod(a.lvl,gx.fn.currentGridRow(a.grid)):!1},
refreshVars:function(a){for(var b=a.ip?a.ip.length:0,c=0;c<b;c++)try{"function"==typeof gx.fn.validStruct(a.ip[c]).c2v&&gx.fn.validStruct(a.ip[c]).c2v()}catch(f){gx.dbg.logEx(f,"gxapi.js","refreshVars")}},refreshControls:function(a){for(var b=a.op?a.op.length:0,c=0;c<b;c++)try{var f=gx.fn.validStruct(a.op[c]);f.v2c();var g=null;(g=0==f.grid?gx.dom.el(gx.csv.ctxControlId(f.fld)):gx.fn.getControlGridRef(f.fld,f.grid))&&g.setAttribute("gxvalid","0")}catch(h){gx.dbg.logEx(h,"gxapi.js","refreshControls")}b=
a.ucs?a.ucs.length:0;for(c=0;c<b;c++)try{gx.fn.validStruct(a.ucs[c]).uc.execV2CFunctions(!0)}catch(k){gx.dbg.logEx(k,"gxapi.js","refreshControls")}},setValidValues:function(a,b,c){var f=gx.json.evalJSON(c[c.length-1]),g={},a={fields:a,msgs:f};gx.O.cmpCtx?g[gx.O.cmpCtx]=a:g.MAIN=a;gx.fn.setErrorViewer(g);if(!gx.O.AnyError)for(var h=!1,g=b.length,a=0;a<g;a++){var k=b[a],f=c[a];if(this.isProperty(k)){var l=gx.fn.vStructForVar(k[0])||gx.O.getValidStructFld(k[0]);null!=l&&gx.fn.setCtrlProperty(l.fld,k[1],
f)}else if(l=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(l.hc)&&(l.hc==k?(gx.O[l.hc]=f,gx.fn.setHidden(this.cmpCtx+"GXH_"+l.fld,f)):l.hd==k&&(gx.O[l.hd]=f)),l=gx.fn.vStructForVarWId(k,this.currentId),gx.lang.emptyObject(l)){l=gx.fn.vStructForHC(k);if(null!=l){var o="";0!=l.grid&&(o="_"+gx.fn.currentGridRow(l.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+l.fld+o,f)}l=gx.fn.gridObjFromGxO(k);void 0!=l?(h=!0,l.loadGrid(f)):gx.fn.saveLvlOldParm(k,f)&&(gx.setVar(k,f),gx.fn.setGridHidden(k,
f))}else if(k=gx.fn.screen_CtrlRef(l.fld),!gx.lang.emptyObject(k)&&f instanceof Object&&("SELECT"==k.tagName?(-1!=k.selectedIndex&&gx.fn.invalidEmptyValue(f)&&(f.s=k.options[k.selectedIndex].value),o=gx.dom.id(k),gx.fn.loadComboBox(o,f.v),gx.fn.setComboBoxValue(o,f.s)):gx.lang.emptyObject(f.s)||(f.s="int"==l.type?gx.text.trim(f.s):gx.text.rtrim(f.s)),o=gx.fn.selectedDescription(f),f=gx.lang.emptyObject(f.s)&&!gx.lang.emptyObject(k.value)?k.value:"SPAN"==k.tagName&&!gx.lang.emptyObject(f.s)&&!gx.lang.emptyObject(o)?
o:f.s,gx.fn.setControlValue_span_safe(this.cmpCtx+l.fld,f,0)),l.v2v)l.v2v(f),l.v2c()}gx.O.refreshOlds();gx.fn.enableDisableDelete();h&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}},json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||
this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=this._nonSerializables.length,c=0;c<b;c++)if(this._nonSerializables[c]==a)return!0;return!1},evalJSON:function(a){try{return eval("("+a+")")}catch(b){gx.dbg.logEx(b,"gxapi.js","evalJSON")}return a},serializeJson:function(a,b){var c=this.objToJson(a);if(null===c)c=this.arrayToJson(a);else return c;if(null===c){if("function"==typeof a)return null;var c=[],f;for(f in a)if(b||!this.isNonSerializable(f)){var g=this.objToJson(f,!0);
if(null!==g){var h=this.serializeJson(a[f]);"string"==typeof h&&c.push(g+":"+h)}}return"{"+c.join(",")+"}"}return c},objToJson:function(a,b){var c=typeof a;if(b){if(!gx.lang.emptyObject(a)){if("string"==c)return gx.text.escapeString(a);if("number"==c)return'"'+a+'"'}}else{if("undefined"==c)return c;if("string"==c)return gx.text.escapeString(a);if("number"==c||"boolean"==c)return a.toString();if(null===a)return"null";if("function"==typeof a.json&&(c=a.json(),a!==c))return this.serializeJson(c)}return null},
arrayToJson:function(a){if("function"!=typeof a&&"number"==typeof a.length){for(var b=[],c=a.length,f=0;f<c;f++){var g=this.serializeJson(a[f]);"string"!=typeof g&&(g="undefined");b.push(g)}return"["+b.join(",")+"]"}return null},objFromJson:function(a,b){var c=this.evalJSON(b);if(a instanceof Array&&c instanceof Array)for(;a.length>c.length;)a.shift();else for(var f in a)"function"!=typeof a[f]&&delete a[f];for(f in c)a[f]=c[f]}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,
hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()},logMsg:function(a){(this.enabled||window.console)&&this.write(a)},logEx:function(a,b,c){if(this.enabled||window.console){var f="";if(a&&a instanceof Error)f="["+a.name+": "+this.exTxt(a),f=f+(b?", file: "+b:"")+((c?", func: "+c:"")+"]"),a.fileName&&(f+=" FileName:"+a.fileName),a.lineNumber&&(f+=" ln:"+a.lineNumber);else try{f=""+a}catch(g){f="[Unknown Error]"}this.write(f,!0)}},exTxt:function(a){return!a?
"Unknown Error":a.message?a.message:a.description?a.description:a.toString()},write:function(a,b){if(this.enabled)try{null==this.dbgWin&&(this.dbgWin=window.open("","debug","scrollbars=1,height=900,width=900")),this.dbgWin.document.write(a+"<BR>")}catch(c){}window.console&&(b?console.error(a):console.log(a))},writeT:function(a){var b=new Date,c=b.getTime(),f=this.lastTime;0<this.lastTime&&(f=(c-this.lastTime)/1E3);this.lastTime=c;a=b.toString()+" (+"+f+"seg): "+a;this.write(a)},logPerf:function(a,
b){if(this.performance)if(void 0===this.hshTimes[a])this.hshTimes[a]=(new Date).getTime();else{var c=((new Date).getTime()-this.hshTimes[a])/1E3;delete this.hshTimes[a];0<c&&this.performanceLog.push((void 0==b?a:b)+":("+c+"seg)")}},printPerformanceLog:function(){if(this.performance){for(msg in this.performanceLog)"string"==typeof this.performanceLog[msg]&&(this.outputFunc&&this.outputFunc(this.performanceLog[msg]),this.write(this.performanceLog[msg]));this.performanceLog=[]}}},http:{STATE_UNSENT:0,
STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},loadState:function(){gx.dbg.logPerf("loadState");var a=gx.dom.el("GXState");this.viewState={};this.viewStateLoaded=!1;if(a){var b=a=a.value;this.useBase64State&&(b=gx.base64.decode(a));this.viewState=gx.json.evalJSON(b);this.viewStateLoaded=
!0}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var b=gx.json.serializeJson(this.viewState,a),a=b;this.useBase64State&&(a=gx.base64.encode(b));b=gx.dom.el("GXState");null==b?gx.dom.createInput("GXState","hidden"):this.oldState=b.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",
a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,b=0;b<a;b++)gx.http.setObjectHsh(gx.pO.WebComponents[b]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(a){var b=a.getControlIdsh();if(null!=b){var c="";a.IsComponent&&null!=a.CmpContext&&(c=a.CmpContext);for(var f="",g=0;g<b.length;g++)if((validStruct=a.getValidStruct(b[g]))&&"function"==typeof validStruct.val)var h=gx.fn.getControlValue_impl(c+validStruct.fld),f="checkbox"==validStruct.ctrltype&&""==gx.text.trim(h)?f+validStruct.val():
f+h;gx.http.createHsh(c+"GXHSH11",f)}},createHsh:function(a,b){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");var c=gx.MD5.getHsh(b);gx.fn.setControlValue_impl(a,c)},refreshState:function(){null!=this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},notification:{_node:null,_moveInterval:null,_closeLink:null,_delay:200,isVisible:function(){var a=gx.http.notification.node();return null!=a&&"none"!=a.style.display},node:function(){if(!this._node&&(this._node=gx.dom.byId("gx_ajax_notification"),
!this._node)){var a=gx.ajax.getImageUrl(gx,"indicatorImage",!0),b;b='<div id="gx_ajax_notification" style="display:none;position:absolute;text-align:center;vertical-align:top;top:0px;left:0px;"><div style="background-color:#BEBEBE;filter:alpha(opacity=50);opacity:0.5;position:absolute;top:0px;left:0px;width:100%;height:100%;">';gx.grid.drawAtServer&&(b+='<div onclick="gx.ajax.enableForm()" style="display:none;cursor:hand;font-size:9;position:absolute;top:0px;left:0px;"><u>Enable Form</u></div>');
this._node=gx.html.nodesFromText(b+"</div>"+('<img id="gx_ajax_indicator" src="'+a+'" width="16px" height="16px" align="absmiddle"/></div>'))[0];document.body.appendChild(this._node);gx.popup.setZIndex(this._node);gx.grid.drawAtServer&&(this._closeLink=this._node.firstChild.firstChild)}return this._node},show:function(){var a=gx.http.notification.node();a.style.width=gx.html.viewportWidth()+"px";a.style.height=gx.html.viewportHeight()+"px";a.style.display="block";gx.http.notification._moveInterval=
setInterval(gx.http.notification.move,50);gx.evt.attach(window,"resize",gx.http.notification.resize);gx.grid.drawAtServer&&setTimeout(gx.http.notification.showCloseLink,5E3)},hide:function(){gx.http.notification.node().style.display="none";clearInterval(gx.http.notification._moveInterval);gx.http.notification._moveInterval=null;gx.evt.detach(window,"resize",gx.http.notification.resize);gx.grid.drawAtServer&&gx.http.notification.hideCloseLink()},move:function(){var a=gx.http.notification.node(),b=
parseInt(a.style.top),b=(gx.dom.documentScroll().scrollTop-b-10)/3+3+b;a.style.top=b+"px"},resize:function(){var a=gx.http.notification.node();a.style.width=gx.html.viewportWidth()+"px";a.style.height=gx.html.viewportHeight()+"px"},showCloseLink:function(){gx.http.notification._closeLink&&(gx.http.notification._closeLink.style.display="block")},hideCloseLink:function(){gx.http.notification._closeLink&&(gx.http.notification._closeLink.style.display="none")},cleanup:function(){this._node&&gx.dom.removeControlSafe(this._node);
this._moveInterval=this._closeLink=this._node=null}},getCookie:function(a){for(var a=a+"=",b=document.cookie.split(";"),c=b.length,f=0;f<c;f++){for(var g=b[f];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(a))return g.substring(a.length,g.length)}return null},setCookie:function(a,b,c){c=c||1;c=new Date((new Date).getTime()+864E5*c);document.cookie=a+"="+escape(b)+"; expires="+c.toGMTString();return this.getCookie(a)==b},checkResponseStatus:function(a){return a.status==this.STATUS_FORBIDDEN?
!1:a.status==this.STATUS_SESSION_TO||this.isBadResponse(a)?(gx.http.reloadOnTimeout(),!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.warn&&gx.http.reloadOnTimeout(),!0):!1},isSessionTimeoutError:function(a,b){return!gx.gen.isDotNet()&&(b&&a&&gx.pO.AjaxSecurity)&&a.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==b.name&&2147500037==b.result||"Error"==b.name&&-2146697209==b.number||"NETWORK_ERR"==
b.name&&101==b.code)?!0:!1},reloadOnTimeout:function(){if(gx.pO.AjaxSecurity&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(){""==document.location.hash?this.redirect(location.href):document.location.reload()},redirect:function(a,b){gx.evt.setProcessing(!0);b?gx.evt.redirecting=!0:setTimeout(function(){gx.ajax.enableForm()},200);var c=gx.popup.getPopup();if(null!=c&&(c=c.window.gx.popup.lvl,-1!=c))var f=-1!=a.indexOf("?")?",":
"?",f=f+encodeURIComponent("gxPopupLevel="+c+";"),a=a+f;gx.ajax.isabsoluteurl(a)||(a=gx.ajax.absoluteurl(a));location.href=a},getRequest:function(){var a=null;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}null==a&&"undefined"!=typeof XMLHttpRequest&&(a=new XMLHttpRequest);return a},getPostData:function(a){for(var a=a.formNode,b=[],c=a.elements.length,f=0;f<c;f++){var g=gx.http.elementPostData(a.elements[f]);null!=g&&b.push(g)}return b.join("&")+
"&"},elementPostData:function(a){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var b="";if("select-multiple"==a.type)for(var c=a.options.length,f=0;f<c;f++)a.options[f].selected&&(b=a.options[f].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)b=a.value;else{if("radio"==a.type)return null}else b=this.element_gxvalue(a);return encodeURIComponent(a.name)+"="+encodeURIComponent(b)},element_gxvalue:function(a){return a.gxtype&&"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,
gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,b){a.readyState==this.STATE_DONE&&(gx.evt.setReady(!1),gx.evt.setProcessing(!1,!gx.csv.validating),a.status==this.STATUS_OK?this.doCallHandler(a,b):gx.http.checkResponseStatus(a)||gx.lang.doCallTimeout(function(a){document.write(a)},document,[a.responseText],50),window.gx&&(gx.evt.setReady(!0),gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog()))},onRequestError:function(a){gx.evt.setProcessing(!1,
!gx.csv.validating);a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a):this.isBadResponse(a)&&gx.http.reloadOnTimeout()},isBadResponse:function(a){return a.status==this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?!0:!1},doCall:function(a){!a.handler&&"function"==typeof a.load&&(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var b=this.getRequest();if(null!=b){if("function"==typeof a.handler&&
!a.sync){var c=gx.http.doHandleRequest.closure(this,[b,a]),f=gx.http.onRequestError.closure(this,[b,a]);gx.util.browser.isIE()?b.onreadystatechange=c:(b.onload=c,b.onerror=f)}c=null;"POST"==a.method&&(c=gx.http.getPostData(a));b.open(a.method,this.uncache(a.url),!a.sync);b.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");gx.sec.secToken&&(gx.pO.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&b.setRequestHeader(gx.sec.secTokenName,
gx.sec.secToken);try{b.send(c)}catch(g){gx.dbg.logEx(g,"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(b,a)}}},doCallHandler:function(a,b){b.obj?b.handler.call(b.obj,null,a.responseText,a):b.handler(null,a.responseText,a);if(window.gx&&"function"===typeof b.onReady)b.onReady()},doMultipartPost:function(a){this.getPostIFrame().gxPostInfo=a;var b=a.formNode;a.oldAction=b.getAttribute("action");b.setAttribute("action",a.url);a.oldTarget=b.getAttribute("target");b.setAttribute("target",
this.iframeName);b.submit()},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var a=this.iframeName,b=gx.dom.el(a);b&&b.frameElement&&(b=b.frameElement);b||(b=document.createElement("div"),b.innerHTML='<iframe name="'+a+'" src="about:blank">',document.body.appendChild(b),b=b.firstChild,document.body.appendChild(b),window[a]=b,b.name=a,b.setAttribute("name",
a),b.id=a,b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.height="1px",b.style.width="1px",b.style.visibility="hidden");gx.evt.attach(b,this.iFrameloadEventName(),gx.http.iframeOnload);return b},iframeOnload:function(){var a=gx.dom.el(gx.http.iframeName);if(!(gx.http.useReadyStateEvent()&&"complete"!=a.readyState)&&(gx.evt.setProcessing(!1,!gx.csv.validating),a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&(a=a.frameElement),a)){gx.http.useReadyStateEvent()&&(a.src=
"about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var b=a.gxPostInfo,c=b.formNode;c.setAttribute("action",b.oldAction);c.setAttribute("target",b.oldTarget);if(a=a.contentDocument?a.contentDocument:a.contentWindow.document)c=a.body,1==c.childNodes.length&&"#text"==c.childNodes[0].nodeName?(a=gx.base64.decode(gx.http.multipartResponse(c)),b.handler(null,a,b)):document.write(a.documentElement.innerHTML)}},multipartResponse:function(a){try{for(var b=a.childNodes[0];"#text"!=
b.nodeName;)b=b.childNodes[0];var c=b.nodeValue;if(!gx.util.browser.isIE())for(b=b.nextSibling;b;)c+=b.nodeValue,b=b.nextSibling;return c}catch(f){return gx.dbg.logEx(f,"gxapi.js","multipartResponse"),""}},uncache:function(a){var b=(new Date).getTime(),c=a.indexOf("?");return a+(0<c?c<a.length-1?",":"":"?")+"gx-no-cache="+b},callBackend:function(a,b,c,f,g,h,k,l,o,n,m){var p=this.getRequest(),m=m||{};if(p){try{h||gx.ajax.disableForm();k="undefined"!=typeof k?k:"GET";l="undefined"!=typeof l?l:null;
n="undefined"!=typeof n?n:!1;o||(b=this.uncache(b));p.open(k,b,n);p.setRequestHeader(gx.ajax.reqHeader,"2");for(var q in m)p.setRequestHeader(q,m[q]);"POST"==k?p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&(gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&p.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);p.send(l);h||gx.ajax.enableForm();this.lastStatus=p.status;this.lastResponse=p.responseText}catch(t){window.status="GXAjax HTTP error: "+
t.message}window.status="";if(p.readyState!=this.STATE_DONE||p.status!=this.STATUS_OK)gx.http.checkResponseStatus(p)||(window.status="GXAjax HTTP error: ("+p.status+") - "+p.statusText,gx.dbg.logEx(p.responseText));else if(g!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(g==this.modes.full)this.handleFull(this.lastResponse,a,c);else if(g==this.modes.call)return this.handleCall(this.lastResponse,a,c);return this.handleRetVal(this.lastResponse,
a,c,f)}catch(w){gx.dbg.logEx(w,"gxapi.js","callBackend")}}else window.status="GXAjax HTTP error: (bad response format)"}},handleFull:function(a){gx.http.postHandler(null,a,{status:200,responseText:""})},handleCall:function(a,b,c){if(b)return eval(b+a+c)},handleRetVal:function(a,b,c,f){var a=gx.json.evalJSON(a),g=a[0];this.lastStatus=a[1];void 0==this.lastStatus&&(this.lastStatus=0);if(b&&(f||null==this.lastStatus||0==this.lastStatus))return eval(b+gx.lang.arrayToSource(g)+c)},postHandler:function(a,
b,c){try{if(gx.evt.enter=!1,gx.csv.lastEvtResponse=null,200>c.status||299<c.status)document.write(c.responseText);else{var f=gx.json.evalJSON(b);null==f?document.write(b.toString()):(gx.http.refreshState(),gx.csv.lastEvtResponse=f,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(f)||gx.fx.obs.notify("gx.onafterevent",[f]))}}catch(g){gx.dbg.logEx(g,"gxapi.js","postHandler")}},formatLink:function(a,b){a=gx.ajax.objectUrl(a);if(b&&0<b.length)for(var a=a+"?",c=b.length,f=0;f<c;f++)0<f&&(a+=","),
a+=encodeURIComponent("function"==typeof b[f].getUrlVal?b[f].getUrlVal():b[f]);return a},loadScripts:function(a,b,c){"undefined"==typeof c&&(c=0);c>=a.length?b():gx.http.loadScript(a[c],function(){gx.http.loadScripts(a,b,c+1)})},loadScript:function(a,b){var c=gx.dom.byTag("head")[0],f=document.createElement("script");f.type="text/javascript";f.src=a;"function"==typeof b&&(f.addEventListener?f.addEventListener("load",b,!1):f.onreadystatechange=function(){("loaded"==f.readyState||"complete"==f.readyState)&&
b()});c.appendChild(f)},loadStyle:function(a,b){var c=gx.dom.byTag("head")[0],f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=a;"function"==typeof b&&(f.onload=b);c.appendChild(f)},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var b=0;b<a.length;b++){var c=a[b];(new gx.util.Url(c)).isRelative()&&(c=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c,!1));gx.cache.fileLoaded(c)||(gx.cache.addRemoteFile(c),this.loadStyle(c))}},
doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||gx.ajax.dispatchCommands(a)}},stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},storage:function(a){this._store=window.sessionStorage;this._prefix=a;this.supported=!1;this.set_string=function(a,b){this.supported&&(this._store[this._prefix+a]=b)};this.get_string=function(a){return this.supported?
this._store[this._prefix+a]:null};this.set=function(a,b){this.set_string(a,gx.json.serializeJson(b))};this.get=function(a){return(a=this.get_string(a))?gx.json.evalJSON(a):null};this.remove=function(a){this.supported&&this._store.removeItem(this._prefix+a)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1)}},_setBasePath:function(){for(var a=
gx.dom.scripts(),b=null,c=0,f=a.length;c<f;c++)if(0<=a[c].indexOf("gxgral.js")||0<=a[c].indexOf("gxapiSD.js")){b=a[c];break}a="";if(!gx.ajax.isRelativeToHost(b)||gx.ajax.isabsoluteurl(b))c=location.pathname.lastIndexOf("/"),a=1<c?location.pathname.substring(1,c):"";else{var b=b.split("/"),g=location.pathname.split("/");b.splice(b.length-1,1);g.splice(g.length-1,1);c=0;for(f=g.length;c<f;c++)if(g[c]==b[c]||void 0===b[c])a=a+(""==a?"":"/")+g[c];else break}gx.basePath=a},_init:function(){gx.dbg._init();
gx.dom._init();gx.base64._init();gx.sec._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.popup._init();gx.geolocation._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],b=gx.dom.form().elements,c=0,f=b.length;c<f;c++)gx.dom.purgeElement(b[c],
a);b=gx.dom.byTag("span");c=0;for(f=b.length;c<f;c++)gx.dom.purgeElement(b[c],a);b=gx.dom.byTag("img");c=0;for(f=b.length;c<f;c++)gx.dom.purgeElement(b[c],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.O=null;gx.pO=null}}}();
gx.html=function(){var c=/<style[^>]*>([\s\S]*?)<\/style>/i,b=RegExp("<style[^>]*>([\\s\\S]*?)</style>","ig"),a=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,e=RegExp("<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>","ig"),d=/<script([^>]*)>([\s\S]*?)<\/script>/i,f=RegExp("<script([^>]*)>([\\s\\S]*?)<\/script>","ig"),g=/href=(['"]?)([^'">]*)\1/i,h=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,k=/src=(['"]?)([^"']*)\1/i;return{encodeCaseFormat:function(a,b,c){b==gx.html.controls.formats.TEXT?a=gx.html.encode(a,
!1,c):b==gx.html.controls.formats.TEXT_W_SPACES&&(a=gx.html.encode(a,!0,c));return a},encode:function(a,b,c){var e=["<",">","&"],d=["&lt;","&gt;","&amp;"];b&&(e.push(" "),d.push("&nbsp;"));c&&(e.push("\n"),d.push("<br/>"));return gx.text.charReplace(a,e,d)},getHidden:function(a,b){return'<input type="hidden" id="'+a+'" name="'+a+'" value="'+b+'">'},viewportWidth:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientWidth,document.body.clientWidth):document.body.clientWidth},
viewportHeight:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(a){a=a.replace(b,"");a=a.replace(e,"");return a=a.replace(f,"")},setOuterHtml:function(a,b){a.outerHTML=b},setInnerHtml:function(a,b,c){var e=gx.dom.styles();gx.dom.shouldPurge()&&gx.dom.purge(a,!0);a.innerHTML=this.cleanHtmlRefs(b);gx.util.browser.isIE()&&gx.cache.updateStyles(e,gx.dom.styles());!0==c&&this.processCode(b,
!1)},setInnerText:function(a,b,c,e){null!=a.nodeValue?a.nodeValue=b:null!=a.innerText&&!gx.util.browser.isChrome()?a.innerText=b:a.innerHTML=gx.util.browser.isFirefox()?gx.html.encodeCaseFormat(b,c,e):gx.util.browser.isChrome()?"<text>"+gx.html.encodeCaseFormat(b,c,e)+"</text>":"TEXT"==a.tagName&&null!=a.innerHTML?b:"<text>"+b+"</text>"},nodesFromText:function(a){var b=document.createElement("div");b.style.visibility="hidden";b.style.display="none";document.body.appendChild(b);gx.dom.shouldPurge()&&
gx.dom.purge(b,!0);b.innerHTML=a;for(var a=[],c=b.childNodes.length,e=0;e<c;e++)a.push(b.childNodes[e].cloneNode(!0));gx.dom.removeControlSafe(b);return a},onTypeAvailable:function(a,b,c){try{eval(a),c instanceof Array?b.apply(this,c):b()}catch(e){setTimeout(function(){gx.html.onTypeAvailable(a,b,c)},250)}},processCode:function(b,e,f,m,p){var q=b,t=[],w=!1,v=[],y=[],A=[];if(""!=b){for(var s=[];s;){if(s=b.match(c)){var u=s.lastIndex;u||(u=s.index+s[0].length);b=b.substring(u)}else break;A.push(s[1])}b=
q;for(s=[];s;){if(s=b.match(a))(u=s.lastIndex)||(u=s.index+s[0].length),b=b.substring(u);else break;if((u=s[1].match(g))&&!gx.cache.fileLoaded(u[2]))y.push(u[2]),gx.cache.addRemoteFile(u[2])}b=q;for(s=[];s;){if(s=b.match(d))(u=s.lastIndex)||(u=s.index+s[0].length),b=b.substring(u);else break;void 0!=s[1]&&""!=s[1]?(u=s[1].match(h),null==u&&(u=s[1].match(k)),u&&!gx.cache.fileLoaded(u[2])?(q=u[2],gx.lang.emptyObject(u[3])||(q+="?"+u[3]),t.push(q),gx.cache.addRemoteFile(u[2])):u&&gx.cache.fileLoaded(u[2])?
w=!0:!u&&s[2]&&v.push(s[2])):s[2]&&v.push(s[2])}if(!0!=e){s="";e=v.length;for(b=0;b<e;b++)s+=v[b];""!=s&&gx.lang.doEval(s);var C=[];if("function"==typeof f)gx.http.loadScripts(t,function(){m instanceof Array?f.apply(this,m):f()});else{v={method:"GET",useCash:!0};v.load=function(a,b){gx.lang.supEval(this,C.push(b))}.closure(this);v.mimetype="text/plain";v.sync=!0;for(var K=t.length,b=0;b<K;b++)v.url=t[b],gx.http.doCall(v)}s="";e=C.length;for(b=0;b<e;b++)s+=C[b];""!=s&&gx.lang.doEval(s);t=document.getElementsByTagName("style");
e=y.length;for(b=0;b<e;b++){v=!1;s=t.length;for(q=0;q<s;q++)if(y[b]==(t[b].styleSheet&&t[b].styleSheet.cssText?t[b].styleSheet.cssText:t[b].innerHTML))v=!0;v||gx.http.loadStyle(y[b],function(){})}s="";e=A.length;for(b=0;b<e;b++)s+=A[b];""!=s&&(y=document.createElement("style"),y.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(y),y.styleSheet?y.styleSheet.cssText=s:(A=document.createTextNode(s),y.appendChild(A)));if(0==K&&"function"==typeof f)if(w&&p)gx.html.onTypeAvailable(p,
f,m);else m instanceof Array?f.apply(this,m):f()}}},multimediaUpload:{resolveFileName:function(a,b){return a||b||""},onOptionChange:function(a){var a=this.getElements(a),b=a.fileField,c=a.uriField;a.uriOption.checked?(gx.dom.removeClass(b,"field-selected"),gx.dom.addClass(c,"field-selected")):(gx.dom.removeClass(c,"field-selected"),gx.dom.addClass(b,"field-selected"))},imageLoadHandler:function(a,b){var c=function(a){var b="IMG"==a.tagName?"src":"href";return!a[b]||a[b]==document.location.href||"/"==
a[b].charAt(a[b].length-1)};!a||c(a)?gx.dom.addClass(b,"gx-multimedia-empty"):gx.dom.removeClass(b,"gx-multimedia-empty");b&&!c(b)&&gx.dom.removeClass(b,"gx-multimedia-empty");if(gx.util.browser.isIE()&&(a&&"IMG"==a.tagName)&&(c=parseInt(a.currentStyle.maxWidth),c<a.width&&(a.style.height=gx.dom.addUnits(c*a.height/a.width),a.style.width=gx.dom.addUnits(c)),c=parseInt(a.currentStyle.maxHeight),c<a.height))a.style.width=gx.dom.addUnits(c*a.width/a.height),a.style.height=gx.dom.addUnits(c)},dialogCloseHandler:function(a,
b,c){var e=this.getElements(a);b.style.display="none";a.appendChild(b);b.removeChild(c);e.uriOption.checked?this.refreshPreviewImg(a,e.uriField):this.refreshPreviewImg(a,e.fileField);e.action.focus()},actionClickHandler:function(a,b){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var c=this.getElements(b);c.fieldsCt.style.display="block";var e=document.createElement("input");e.type="button";e.className="Button";e.value=gx.getMessage("GXM_uploadconfirmoption");c.fieldsCt.appendChild(e);
var d=130;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(b.style.position="static",c.fileField.style.marginTop="0",c.uriField.style.marginTop="0",d=230);d=gx.popup.openDialog({parentElement:b,w:500,h:d,contentHtml:c.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[b,c.fieldsCt,e])}});c.fileOption.focus();gx.evt.attach(e,"click",d.close,d);gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(a,
b){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var c=this.getElements(b);c.uriField.value="";c.fileField.value="";c.uriOption.checked=!1;c.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[b]);this.refreshPreviewImg(b,c.fileField)},keypressHandler:function(a){13==a.event.keyCode&&(a.cancel=!0,gx.popup.currentPopup.close(),gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler))},tapHandler:function(a){this.getElements(a).action.focus()},getElements:function(a){var a=
gx.dom.el(a),b=a.firstChild,c=a.childNodes[1],e=null,d=a.childNodes[2],a=gx.dom.el(a.id+"_fields");"A"==d.tagName?(e=d,d=d.firstChild):"IMG"!=d.tagName&&(d=null);return{previewLink:e,action:b,clearAction:c,previewImg:d,fieldsCt:a,uriField:a.childNodes[2],fileField:a.childNodes[3],uriOption:a.childNodes[1].childNodes[0],fileOption:a.childNodes[0].childNodes[0]}},getContainer:function(a){for(a=gx.dom.el(a);a;){if(gx.dom.hasClass(a,"gx-multimedia-upload"))return a;a=a.parentNode}return null},setPreviewImage:function(a,
b){var a=gx.dom.el(a),c=this.getElements(a);c.previewImg&&("IMG"==c.previewImg.tagName&&(c.previewImg.src=b),this.imageLoadHandler(c.previewImg,c.previewLink))},setPreviewLink:function(a,b){var a=gx.dom.el(a),c=this.getElements(a);c.previewLink&&(b&&(!c.previewImg||"IMG"!=c.previewImg.tagName)?c.previewLink.href=b:c.previewLink.removeAttribute("href"));this.imageLoadHandler(c.previewImg,c.previewLink)},refreshPreviewImg:function(a,b){var a=gx.dom.el(a),c=this.getElements(a);if(c.previewImg&&"INPUT"==
b.tagName){if(b==c.fileField){var e;if(b.files&&(e=b.files[0]))if(e.type.match(/image.*/)){var d=new FileReader;d.onload=function(a,b,c){b.src=a.target.result;c.href=""}.closure(this,[c.previewImg,c.previewLink],!0);d.readAsDataURL(e)}else c.previewLink.href="#";if(!e&&"1"==b.getAttribute("gxctrlchanged")||b.gxctrldeleted)c.previewImg.src="",c.previewLink.href=""}else b==c.uriField&&(c.previewImg.src=b.value,c.previewLink.href=b.value);this.imageLoadHandler(c.previewImg,c.previewLink)}},setType:function(a,
b){var a=gx.dom.el(a),c=this.getElements(a);c.fileOption.checked=b;c.uriOption.checked=!b;b&&(c.uriField.value="");this.onOptionChange(a)},getOptionValue:function(a){a=gx.dom.el(a);return this.getElements(a).fileOption.checked?"file":"uri"},createControl:function(a){a=gx.dom.el(a);if(!a._created){a._created=!0;var b=this.getElements(a);gx.dom.addClass(b.fileField,"field-selected");b.action.setAttribute("gxfocusable","1");var c=this.imageLoadHandler.closure(this,[b.previewImg,b.previewLink]),e=this.onOptionChange.closure(this,
[a]);c();b.previewImg&&gx.evt.attach(b.previewImg,"load",c);e();gx.evt.attach(b.uriOption,"click",e);gx.evt.attach(b.fileOption,"click",e);gx.evt.attach(b.action,"click",this.actionClickHandler.closure(this,[a],!0));gx.evt.attach(b.clearAction,"click",this.clearActionHandler.closure(this,[a],!0));gx.evt.attach(a,"touchstart",this.tapHandler.closure(this,[a]))}}},controls:{types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,
userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(a){return"combo"==a||"dyncombo"==a||"listbx"==a||"dynlistbx"==a?!0:!1},eventJSCode:function(a,b,c,e,d){var g="";if(4==a&&c)g=c;else if(1==a)g="gx.fn.closeWindow();";else if(7==a)a="",e&&d&&(a=",'"+e.gridName+"','"+d.gxId+"'"),g="gx.evt.execCliEvt("+b+a+",this);";else if(6==a||5==
a)g="gx.evt.execEvt('"+b+"',this);";return g},startAnchor:function(a,b,c,e,d){""!=c?""!=b?a.append('<a href="javascript:if( '+c+") {"+b+'}">'):a.append('<a href="javascript:'+c+'">'):""!=b?a.append('<a href="javascript:'+b+'">'):""!=e&&(a.append('<a href="'+e+'"'),""!=d&&a.append(' target="'+d+'"'),a.append(">"))},endAnchor:function(a,b,c,e){(""!=b||""!=c||""!=e)&&a.append("</a>")},onJSEvent:function(a,b,c,e){a.append(" ");""!=e&&a.append('jsevent="'+e+'" ');a.append(b+'="if( ');""!=c?a.append("gx.evt.jsEvent(this)) {"+
c+'} else return false;"'):a.append('!gx.evt.jsEvent(this)) return false;"')},htmlControl:function(a,b,c,e,d){this.id=a||"";this.width=b||0;this.widthUnit="px";this.height=c||0;this.heightUnit="px";this.cssClass=e||"";this.style=this.ownCssClass=this.roClass="";this.title=d||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=
this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(a){return this.buffer.append(a)};this.tagAtt=function(a,b){return this.buffer.append(" "+a+'="'+b.toString().replace(/\"/g,"&quot;")+'"')};this.persistValue=function(){var a=this.grid.parentObject.GXValidFnc[this.column.gxId];!gx.lang.emptyNum(this.column.gxId)&&a&&(this._persistValue?this._persistValue():a.v2v&&a.v2v(this.value))};this.setIndividualProp=
function(a,b){this[a]="enabled"==a||"visible"==a||"isPassword"==a||"autoComplete"==a||"hasJsLink"==a?gx.lang.gxBoolean(b):b};this.setGridData=function(a){this.grid=a.grid;this.row=a.row;this.gridId=a.gridId;this.gridRow=a.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}}},singleLineEdit:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(a,
b,c,e,d,g,f,h,k,l,o,m,n,p,z,D,r,x,E,F,H,I,O,P,L,Q,R,S,T,J,U,W,V){this.id=a;this.inputType=r;this.step=x;this.title=f;this.placeholder=h;this.width=E;this.widthUnit=F;this.height=H;this.heightUnit=I;this.maxLength=O;this.visible=0!=p;this.enabled=0!=z;this.rtEnabled=0!=D;this.isPassword=0!=P;this.format=L;this.link=d;this.linkTarget=g;this.style=m;this.cssClass=o;this.roClass=n;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);this.formattedValue=!gx.lang.emptyObject(b)?gx.html.encodeCaseFormat(b,
L):this.applyPicture(gx.html.encodeCaseFormat(V,L));this.extraAttributes=c;this.jsScrCode=l;this.usrOnclick=k;this.eventName=e;this.parentId=Q;this.hasTheme=R;this.autoComplete=0!=S;this.autoCorrection=0!=T;this.value=V;this.domainName=U};this.applyPicture=function(a){var b=this.vStruct;if(!gx.lang.emptyObject(b)&&!gx.lang.emptyObject(b.pic)&&!gx.lang.emptyObject(b.type))switch(b.type){case "int":return gx.num.formatNumber(a,b.dec,b.pic,b.len,b.sign,!0);case "decimal":return gx.num.formatNumber(a,
b.dec,b.pic,b.len,b.sign,!0);case "char":return a;default:return a}else return a};this._getHtml=function(){var a="",b="";0==this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?a=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");b=this.style;this.style+=!this.visible?";display:none;":
"";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");this.append("<input");if(!0==this.isPassword)this.tagAtt("type","password");else if(this.tagAtt("type",this.inputType),this.step&&("number"==this.inputType||"range"==this.inputType))this.tagAtt("step",
this.step),"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"');this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(a);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete","off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=
this.inputType&&("datetime"!=this.inputType&&"datetime-local"!=this.inputType)&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);a=this.style;""!=this.column.align&&(a+=";text-align:"+this.column.align);var c=!this.enabled&&this.rtEnabled?";display:none;":"",a=a+c;""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(a=this.grid.parentObject.getValidStructFld(this.id),
void 0!=a.dp&&(0==a.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),c=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+c),this.tagAtt("title","Date selector"),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){c="";this.rtEnabled||this.grid.addHiddenControl(this.id,
this.value);c=this.hasTheme?0==this.parentId?""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass:""!=this.roClass&&0!=this.roClass.indexOf("Readonly")?"Readonly"+this.roClass:this.roClass:this.cssClass;a="";this.format!=gx.html.controls.formats.RAW_HTML&&(b+=!this.visible?";display:none;":"",this.append("<span"),this.append(this.extraAttributes),""!=c&&this.tagAtt("class",c),""!=b&&this.tagAtt("style",b),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id",
"span_"+this.id),this.append(">"),a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget));if(this.isPassword){b=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength);for(c=0;c<b;c++)this.append("*")}else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link),this.append("</span>"));this.format==
gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(a,b,c,e,d,g,f,h,k,l,o,m,n,p,z,D,r,x,E,F,H){this.id=a;this.visible=0!=d;this.enabled=0!=g;this.rtEnabled=0!=f;this.width=h;this.widthUnit=k;this.height=l;this.heightUnit=o;this.style=m;this.cssClass=n;this.maxLength=p;this.extraAttributes=
c;this.autoresize=0!=z;this.format=e;this.link=b;this.linkTarget=D;this.placeholder=r;this.value=H;this.autoCorrection=0!=x;this.domainName=F};this._getHtml=function(){this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)this.append("<textarea"),""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+
this.width+this.widthUnit,"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",
this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(this.value),this.append("</textarea>");if(!this.enabled){var a=!this.visible?"display:none;":"";this.autoresize||(a+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")&&(this.cssClass="Readonly"+this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",
this.cssClass);""!=a&&this.tagAtt("style",a);""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id","span_"+this.id);this.append(">");gx.html.controls.startAnchor(this,"","",this.link,this.linkTarget);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,"","",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(a,b,c,e,d,g,f){this.base(a,b,c,e,d);this.type=gx.html.controls.types.blob;this.display=g||0;this.contentType=
f||"text/html";this.parameters=this.url="";this.setProperties=function(a,b,c,e,d,g,f,h,k,l,q,o,m,n,p,t,E,F,H,I,O,P,L,Q,R,S,T,J){this.id=a;this.value=b;this.contentType=c||"text/html";this.linkTarget=d;this.parameters=g;this.display=f;this.visible=0!=k;this.enabled=0!=h;this.alt=l;this.title=q;this.borderWidth=o;this.autoresize=0!=m;this.width=n;this.widthUnit=p;this.height=t;this.heightUnit=E;this.vSpace=F;this.hSpace=H;this.jsScrCode=I;this.usrOnclick=O;this.eventName=P;this.style=L;this.cssClass=
Q;this.extraAttributes=R;this.extraDisplayAttributes=S;this.jsDynCode=T;J?gx.ajax.isabsoluteurl(J)?this.url=J:gx.ajax.isRelativeToHost(J)?(this.url=J,0!=J.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())&&(this.url=gx.util.resourceUrl(gx.basePath+J,!1))):this.url=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+J,!1):this.url=""};this._getHtml=function(){var a="";this.style+=this.visible?"":";display:none;";this.append("<table");this.tagAtt("border",0);this.tagAtt("cellpadding",0);this.tagAtt("cellspacing",
0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");""!=this.title&&this.tagAtt("title",this.title);this.append("><tr><td>");var b=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(b){this.append("<img");""!=this.alt&&this.tagAtt("alt",this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),
""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0!=this.width&&!this.autoresize&&(this.style=this.style+"width:"+this.width+this.widthUnit+";");0!=this.height&&!this.autoresize&&(this.style=this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);a=""!=this.cssClass?"BlobContent"+this.cssClass:this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+
a);this.tagAtt("class",a);this.append(this.extraDisplayAttributes);this.append(">");b?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border",
"0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</td></tr><tr><td>");if(this.enabled){var c="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");a=gx.dom.el(this.id);this.grid&&this.grid.parentObject.isTransaction()&&a&&this.value===a.value?(b=this.id+"_hook",this.append("<div"),this.tagAtt("id",b),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:a,hookId:b})):(this.append("<input"),this.tagAtt("type",
"file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(c+="display:none;"),0!=this.width&&(c=c+"width:"+this.width+";"),this.tagAtt("style",c),this.tagAtt("value",this.value),a=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a),this.tagAtt("class",a),b&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</td></tr></table>")}},
radio:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(a,b,c,e,d,g,f,h,k,l,o,m,n,p){this.possibleValues=a.v||[];this.id=b;this.title=c;this.visible=0!=e;this.enabled=0!=d;this.columns=g;this.orientation=f;this.style=h;this.cssClass=k;this.jsScrCode=l;this.usrOnclick=o;this.eventName=m;this.extraAttributes=n;this.value=p};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));
var a="",a=!this.enabled&&""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass,b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";1==this.orientation?this.append("<table"):this.append("<span ");this.tagAtt("class",a);""!=this.style&&this.tagAtt("style",this.style);this.append(">");for(var a=0,c=this.possibleValues.length,e=0;e<c;e++){var d=this.possibleValues[e],g=d[0],d=d[1];
1==this.orientation&&(1<this.columns&&(a=(a+1)%this.columns),0==a&&this.append("<tr>"),this.append("<td>"));this.append("<input");this.tagAtt("type","radio");this.tagAtt("name",this.id);this.tagAtt("value",g);""!=this.title&&this.tagAtt("title",this.title);gx.text.trim(this.value.toString())==gx.text.trim(g.toString())&&this.append(" checked");this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"gxoch0",b,this.usrOnclick);this.append(">");this.append(d);
1==this.orientation&&(this.append("</td>"),0==a&&this.append("</tr>"))}1==this.orientation?this.append("</table>"):this.append("</span>")}},comboBox:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(a,b,c,e,d,g,f,h,k,l,o,m,n,p,z,D,r,x,E,F,H,I){this.possibleValues=a.v||[];this.id=b;this.title=h;this.visible=0!=k;this.enabled=0!=l;this.rtEnabled=0!=o;this.rows=c;this.format=m;this.width=n;this.widthUnit=
p;this.height=z;this.heightUnit=D;this.style=r;this.cssClass=x;this.formattedValue=F;this.jsScrCode=d;this.usrOnclick=e;this.eventName=g;this.extraAttributes=E;this.value=I};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var a=this.style+" ;overflow:hidden;";this.style+=!this.visible||!this.enabled&&
this.rtEnabled?";display:none;":"";if(this.enabled||this.rtEnabled){var b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,
this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"gxoch0",b,this.usrOnclick);this.append(">");for(var b=this.possibleValues.length,c=0;c<b;c++){var e=this.possibleValues[c];this.append("<option");this.tagAtt("value",e[0]);gx.text.trim(e[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(e[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,
this.value);b="";b=""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass;a+=!this.visible?";display:none;":"";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=b&&this.tagAtt("class",b);""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");b=this.possibleValues.length;for(c=0;c<b;c++)if(e=this.possibleValues[c],gx.text.trim(e[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(e[1]);
break}this.append("</span>")}}},listBox:function(a,b,c,e,d,g){this.base(a,b,c,e,d);this.type=gx.html.controls.types.listBox;this.rows=g},checkBox:function(a,b,c,e,d,g,f,h){this.base(a,b,c,e,d);this.type=gx.html.controls.types.checkBox;this.caption=g||"";this.checkedValue=f;this.uncheckedValue=h;this.setProperties=function(a,b,c,e,d,g,f,h,k,l){this.id=a;this.title=b;this.visible=0!=c;this.enabled=0!=e;this.checkedValue=d;this.caption=g;this.style=f;this.cssClass=h;this.extraAttributes=k;this.value=
l};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));var a=this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+this.cssClass);this.style+=this.visible?"":";display:none;";this.append("<span ");""!=a&&this.tagAtt("class",a);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("type","checkbox");this.tagAtt("name",
this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);this.append(">");this.append(this.caption);this.append("</span>")}},imageReadOnly:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(a,b,c,e,d,g,
f,h,k,l,o,m,n,p,z,D,r,x,E,F,H,I,O,P,L,Q,R){this.id=a;this.accessKey=e;this.visible=0!=g;this.enabled=0!=f;this.alt=h;this.title=k;this.borderWidth=l;this.autoresize=0!=o;this.width=m;this.widthUnit=n;this.height=p;this.heightUnit=z;this.vSpace=D;this.hSpace=r;this.link=b;this.linkTarget=c;this.jsScrCode=x;this.usrOnclick=E;this.eventName=F;this.style=H;this.cssClass=I;this.align=O;this.extraAttributes=P;this.useMap=L;this.jsDynCode=Q;this.value=this.imageUrl=R};this._getHtml=function(){this.grid.addHiddenControl(this.id,
this.imageUrl);""!=this.eventName&&gx.text.endsWith(this.eventName,".")&&(this.eventName+=this.gridRow);var a=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=a&&(this.accessKey=a);this.style+=this.visible?"":";display:none;";a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);""!=a?(this.append("<input"),this.tagAtt("type","image"),this.tagAtt("src",this.value),this.tagAtt("name",this.id),gx.html.controls.onJSEvent(this,
"onclick",a+"return false;",this.usrOnclick)):(this.enabled&&""!=this.link&&gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget),this.append("<img"),this.tagAtt("src",this.value));this.enabled||this.append(" disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||
0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+this.borderWidth);""!=this.alt&&this.tagAtt("alt",this.alt);""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",
this.useMap);this.extraAttributes&&this.append(this.extraAttributes);this.append(">");this.enabled&&(""!=this.link&&""==a)&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link)};this._persistValue=function(){this.grid.parentObject.GXValidFnc[this.column.gxId].v2v&&this.grid.parentObject.GXValidFnc[this.column.gxId].v2v(this.imageUrl)}},multimedia:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.multimedia;this.setProperties=function(a,b,c,e,d,g,f,h,k,l,o,m,n,p,z,D,
r,x,E,F){this.id=a;this.display=0!=b;this.visible=0!=c;this.enabled=0!=e;this.autoresize=0!=d;this.width=g;this.widthUnit=f;this.height=h;this.heightUnit=k;this.jsScrCode=l;this.usrOnclick=o;this.eventName=m;this.style=n;this.cssClass=p;this.extraInputAttributes=z;this.jsDynCode=r;this.readOnly=0!=x;this.isBlob=gx.lang.gxBoolean(E);this.multimediaUrl=F;this.value=this.resolveUrl(F)};this.resolveUrl=function(a){return!a?a:gx.ajax.isabsoluteurl(a)?a:gx.ajax.isRelativeToHost(a)?0!=a.toLowerCase().indexOf("/"+
gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+a,!1):a:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1)};this.startMultimediaUploadControl=function(a,b,c,e){return['<div id="',a,'_ct" class="gx-multimedia-upload" style="',(e||"")+(b?"":"display:none;"),'">'].join("")};this.endMultimediaUploadControl=function(a,b,c,e,d,g,f,h,k,l,o,m,n,p,z,D){c=[];e=gx.dom.el(a);d="checked";g="";f=a.match(/([\w]+)(_\d{4})$/);f=f[1]+"_GXI"+f[2];if(z||void 0===z)d="",g="checked",b="";z=['<div id="',
a,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',a,'Option" type="radio" value="file" ',g,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',a,'Option" type="radio" value="uri" ',d,"/>",gx.getMessage("GXM_uploadurioption"),"</label>",'<input type="text" class="field ',o,'" id="',f,'" name="',f,'" value="',b,'" ',n," />"];c.push(z.join(""));z=e?['<div id="',a,'_hook"></div>']:['<input type="file" class="field ',o,'" id="',a,'" name="',
a,'" accept="',D,'" ',n,"/>"];c.push(z.join(""));z=["</div>","</div>"];c.push(z.join(""));return c.join("")};this.getPreviewHtml=function(){return['<a target="_blank"',this.value?' href="'+this.value+'"':"",'><span id="',this.readOnly||!this.enabled?this.id:"",'" class="',this.cssClass?"Readonly"+this.cssClass:""," ",this.placeHolderClass,'" title="',gx.getMessage("GXM_multimediaalttext"),'"></span></a>'].join("")};this._getHtml=function(){!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,
this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,
this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var a=gx.dom.el(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}};this._persistValue=function(){this.grid.parentObject.GXValidFnc[this.column.gxId].v2v&&this.grid.parentObject.GXValidFnc[this.column.gxId].v2v(this.multimediaUrl)}},image:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.image;
this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(a,b,c,e,d,g,f,h,k,l,o,m,n,p,z,D,r,x,E,F,H,I,O,P,L,Q,R,S,T,J,U){this.id=a;this.accessKey=e;this.visible=0!=g;this.enabled=0!=f;this.alt=h;this.title=k;this.borderWidth=l;this.autoresize=0!=o;this.width=m;this.widthUnit=n;this.height=p;this.heightUnit=z;this.vSpace=D;this.hSpace=r;this.link=b;this.linkTarget=c;this.jsScrCode=x;this.usrOnclick=E;this.eventName=F;this.style=
H;this.cssClass=I;this.align=O;this.extraInputAttributes=P;this.extraImageAttributes=L;this.useMap=Q;this.jsDynCode=R;this.readOnly=0!=S;this.isBlob=gx.lang.gxBoolean(T);this.isAttribute=gx.lang.gxBoolean(J);this.multimediaUrl=U;this.value=this.resolveUrl(U);this.themeName=d;this.className=J&&I?"Readonly"+I:I;a=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(a);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,
this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.heightUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,this.style,this.className,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.value)};this.getPreviewHtml=function(){return['<a target="_blank"><img id="Object_',this.id,'" class="',this.cssClass?"Readonly"+this.cssClass:"",
'" alt="',this.alt,'" src="',this.value,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");
this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var a=gx.dom.el(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}}},
video:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},audio:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},textBlock:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.textBlock;this.setProperties=function(a,b,c,e,d,g,f,h,k,l,o,m,n){this.id=a;this.visible=0!=l;this.enabled=0!=
o;this.format=m;this.title=k;this.link=b;this.linkTarget=c;this.jsScrCode=h;this.usrOnclick=e;this.eventName=d;this.extraAttributes=g;this.cssClass=f;this.value=gx.text.replaceAll(n,"","'")};this._getHtml=function(){var a;this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(a=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,this.append("<div ")):(a=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),this.tagAtt("id",
this.id),""!=this.cssClass&&this.tagAtt("class",this.cssClass),this.tagAtt("gxformat",this.format),""!=a&&this.tagAtt("style",a),""!=this.title&&this.tagAtt("title",this.title),this.append(">"));a="";this.enabled?(a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget)):a="";this.append(gx.html.encodeCaseFormat(this.value,this.format));this.enabled&&gx.html.controls.endAnchor(this,a,this.usrOnclick,
this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1)}},button:function(a,b,c,e,d,g){this.base(a,b,c,e,d);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=g||"rounded";this.setProperties=function(a,b,c,e,d,g,f,h,k,l,o,q,m,n,p,r){this.reset=p;this.id=a;this.title=d;this.accessKey=g;this.style=
f;this.cssClass=h;this.visible=0!=k;this.enabled=0!=l;this.buttonStyle=o;this.jsScrCode=e;this.usrOnclick=c;this.eventName=q+(5==this.jsScrCode?this.gridRow:"");this.extraAttributes=m;this.jsCode=b;this.jsDynCode=n;this.caption=r};this._getHtml=function(){this.style+=this.visible?"":";display:none;";var a="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",
this.style),this.tagAtt("class",a),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");a="button";1==this.reset?a="submit":0==this.reset&&(a="reset");this.tagAtt("type",a);a=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==a&&(a=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=a&&(this.accessKey=a);this.tagAtt("name",this.id);this.tagAtt("value",this.caption);""!=this.title&&
this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("gxevent",this.eventName);this.enabled||this.append(" disabled");a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);a=this.jsCode+a;gx.html.controls.onJSEvent(this,"onclick",a+"return false;",this.usrOnclick);this.append(this.extraAttributes);this.append(">");"rounded"==
this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=function(a){this.containerName=a;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.userControl;this.containerName=
"";this.setProperties=function(a){this.id=this.containerName=a};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class","gx_usercontrol");this.append("></div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(a,b){this.parentName=a;this.containerName=b;this.id=this.parentName+
this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(a){this.controlName=a;var b=this.grid.parentObject.getComponentData(this.controlName),c=b.Prefix,a=this.grid.gxComponentContext+"gxHTMLWrp"+
c+this.gridRow,e=gx.dom.el(a),d="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+c+this.gridRow);if(null!=e)b=a+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:b,el:a}),a=b;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(e=gx.csv.lastEvtResponse.gxComponents[a],gx.lang.emptyObject(e))d="";else{var d=gx.html.cleanHtmlRefs(e),g=gx.fn.getHidden(this.grid.gxComponentContext+c+this.gridRow);g||(g=b.GXClass);
gx.lang.emptyObject(g)||this.grid.addComponentToDraw({load:!0,n:g.toLowerCase(),p:this.grid.gxComponentContext+c+this.gridRow,c:e})}this.id=a;this.content=d};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class","gxwebcomponent");this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=
function(a,b,c,e,d,g,f,h,k,l,o){this.id=a;this.value=b;this.visible=0!=c;this.width=e;this.widthUnit=d;this.height=g;this.heightUnit=f;this.borderStyle=h;this.align=k;this.title=l;this.scrollbars=o};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",
this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(a,
b,c,e,d,g,f,h,k,l,o,m,n,p,z,D){this.id=a;this.visible=0!=b;this.cssClass=c;this.background=e;this.backColor=d;this.borderColor=g;this.align=f;this.title=h;this.borderWidth=k;this.cellPadding=l;this.cellSpacing=o;this.height=m;this.width=n;this.rules=p;this.heightUnit=z;this.widthUnit=D;this.style=""};this._getHtml=function(){this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+
"background-image: url("+this.background+");");if(""!=this.backColor){var a=parseInt(this.backColor),a=isNaN(a)?this.backColor:gx.color.html(a).Html;this.style=this.style+"background-color: "+a+";"}""!=this.borderColor&&(a=parseInt(this.borderColor),a=isNaN(a)?this.borderColor:gx.color.html(a).Html,this.style=this.style+"border-color: "+a+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+
";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",
this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">")}},row:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(a,b,c){b&&(this.cssClass=this.ownCssClass?b+(this.ownCssClass?" "+this.ownCssClass:""):b);this.style=c};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&
this.tagAtt("gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(a,
b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.cell;this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style="";this.setProperties=function(a,b){this.background=a;b&&""!=b&&0<b.indexOf("style=")&&(this.style=b.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&
0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",
this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},group:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(){};this._getHtml=function(){this.append("<fieldset");this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var a="-moz-border-radius:3pt;";"0px"!=this.width&&(a+="width:"+this.width+";");"0px"!=this.height&&(a+="height:"+this.height+";");this.tagAtt("style",
a);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(a,b,c,e,d){this.base(a,b,c,e,d);this.type=gx.html.controls.types.div;this.setProperties=function(a,b,c,e,d,g,f,h){this.id=a;this.visible=0!=b;this.width=c;this.widthUnit=e;this.height=d;this.heightUnit=g;this.cssClass=f;this.extraAtts=h};this._getHtml=function(){var a=this.visible?"":";display:none;";
""!=this.height&&(a=a+"height: "+this.height+this.heightUnit+";");""!=this.width&&(a=a+"width: "+this.width+this.widthUnit+";");this.append("<div");this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=a&&this.tagAtt("style",a);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">")}},specificDomainCtrls:function(a){if(a.domainName==gx.domains.component&&0==a.enabled){var b=a.enabled?";display:none;":"",c=a.id+"_comp_trigger",e=gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);a.append("<img");a.tagAtt("src",e);a.tagAtt("id",c);a.tagAtt("class","");a.tagAtt("style",b+" margin-left:2px; cursor:pointer;");a.tagAtt("onclick","gx.popup.openUrl('"+a.value+"')");a.append("/>");b=[];b.push(a.column.gxId)}else a.dataType==gx.types.geolocation&&(b=!a.enabled?";display:none;":"",c=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\locateMe.png",!0),e=a.id+"_geoLocMe",a.append("<img"),a.tagAtt("src",c),a.tagAtt("id",
e),a.tagAtt("class","GeoLocOption"),a.tagAtt("style",b),a.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),a.append(">"),b=[],b.push(a.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,
this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,
this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl)}}}}();
gx.fx={delayedSuggest:function(){for(var c=gx.suggestControls.length,b=0;b<c;b++)this.installSuggest(gx.suggestControls[b],!0)},installSuggest:function(c,b){if(!b&&document.readyState&&"complete"!=document.readyState)gx.suggestControls.push(c);else try{var a=gx.O.getValidStructFld(c.id);if(a&&!gx.lang.emptyObject(a.gxsgprm)){var e=0<a.grid?gx.fn.currentGridRowImpl(a.grid):"main",d=a.gxsgprm;d.installed||(d.installed={});d.installed[e]||(gx.ajax.suggest(d[1],c.id,d[0],d[3],d[2]),d.installed[e]=!0)}}catch(f){gx.dbg.logEx(f,
"gxfx.js","installSuggest")}},updateSuggestParms:function(c){if(c)for(var b=c.length,a=0;a<b;a++){var e=gx.fn.validStruct(c[a]);e&&"function"==typeof e.c2v&&e.c2v()}},firesuggest:function(c,b,a,e){this.updateSuggestParms(e);c.textbox.value&&b.requestSuggestions(c,a);delete gx.fx.suggestProcessing;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(c,b,a,e,d,f){this.cur=-1;this.layer=this.IFrameControl=null;this.provider=b;this.textbox=c;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=
c.onblur);this.ControlRefresh=a;this.typeahead=e;this.suggestParms=d||[];this.sdtParms=f||[];this.requestSuggestions=function(a,b,c){gx.fx.suggestProcessing=true;var e=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(a,b,c,e)},400)};this.hideSuggestions=function(){if(this.IFrameControl)this.IFrameControl.style.visibility="hidden";this.layer.style.visibility="hidden"};this.highlightSuggestion=function(a){for(var b=this.layer.childNodes.length,
c=0;c<b;c++){var e=this.layer.childNodes[c];if(e==a)e.className="current";else if(e.className=="current")e.className=""}};this.init=function(){var a=function(a){if(!a)a=window.event;this.handleKeyUp(a)};gx.evt.attach(this.textbox,"keyup",a.closure(this));gx.evt.attach(this.textbox,"keydown",function(a){if(!a)a=window.event;this.handleKeyDown(a)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,
"input",a.closure(this));this.createDropDown()};this.nextSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur<a.length-1?this.cur+1:0;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.previousSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur>0?this.cur-1:a.length-1;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.selectRange=function(a,b){if(this.textbox.createTextRange){var c=
this.textbox.createTextRange();c.moveStart("character",a);c.moveEnd("character",b-this.textbox.value.length);c.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(a,b);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(a){this.cur=-1;var b=null;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,true);this.layer.innerHTML="";if(!this.IFrameControl){b=false;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");if(!this.IFrameControl){b=true;
this.IFrameControl=document.createElement("IFRAME");this.IFrameControl.src="about:blank";this.IFrameControl.id="gxAutosuggestIFrame"}this.IFrameControl.style.zIndex=1;this.IFrameControl.style.visibility="hidden";this.IFrameControl.style.position="absolute";this.IFrameControl.frameBorder="0";b&&document.body.appendChild(this.IFrameControl)}for(var c=a.length,e=0;e<c;e++){b=document.createElement("div");b.appendChild(document.createTextNode(a[e].d));b.style.width=this.textbox.offsetWidth;this.layer.appendChild(b)}this.layer.style.left=
this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.visibility="visible";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;this.IFrameControl.style.visibility="visible"};this.typeAhead=function(a){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var b=
this.textbox.value.length;this.pickvalue(a);a=a.length;b<a&&this.selectRange(b,a)}};this.pickvalue=function(a){for(var b=this.aSuggestions.length,c=0;c<b;c++)if(this.aSuggestions[c].d==a){this.textbox.value=a;gx.evt.onchange_impl(this.textbox);break}};this.autosuggest=function(a,b){this.aSuggestions=a;var c=this.aSuggestions.length;if(b&&this.aSuggestions!=null&&c==1)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&(this.aSuggestions!=null&&c>0)&&(c==1&&this.aSuggestions[0].d!=
this.textbox||c>1)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var a=false;this.layer=gx.dom.byId("gxAutosuggestElement");if(!this.layer){a=true;this.layer=document.createElement("div");this.layer.className="suggestions";this.layer.id="gxAutosuggestElement"}this.setupLayer();a&&document.body.appendChild(this.layer)};this.setupLayer=function(){this.layer.style.visibility="hidden";this.layer.style.width=this.textbox.offsetWidth;this.layer.onmousedown=
this.layer.onmouseup=this.layer.onmouseover=function(a){var a=a||window.event,b=gx.evt.source(a);if(a.type=="mousedown"){gx.evt.cancel(a,true);this.pickvalue(b.firstChild.nodeValue);this.hideSuggestions();window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)}else a.type=="mouseover"?this.highlightSuggestion(b):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var a=this.textbox,b=0;a.tagName!="BODY";){b=b+a.offsetLeft;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){b=
b-a.scrollLeft;a=a.parentNode}return b};this.getTop=function(){for(var a=this.textbox,b=0;a.tagName!="BODY";){b=b+a.offsetTop;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){b=b-a.scrollTop;a=a.parentNode}return b};this.handleKeyDown=function(a){switch(a.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(a){a=a.keyCode;a==9?this.hideSuggestions():a==8||a==46?this.requestSuggestions(this,this.provider,
false):a<32||(a>=33&&a<46||a>=112&&a<=123)||this.requestSuggestions(this,this.provider,this.typeahead)};this.init()},suggestProvider:function(c,b,a){this.ControlId=c;this.ControlRefresh=b;this.CtrlSvc=a;this.requestSuggestions=function(a,b){var c,g="gx.fx.returnSuggestValues('"+this.VarRefresh+"',",h=gx.ajax.objectUrl()+"?",k="gxajaxSuggest_"+this.CtrlSvc,l=this.ControlId.length;for(c=0;c<l;c++)k+=","+encodeURIComponent(eval(this.ControlId[c]));k+=","+encodeURIComponent(gx.fn.getControlValue_impl(this.ControlRefresh));
l=a.sdtParms.length;for(c=0;c<l;c++)k+=","+encodeURIComponent(eval(a.sdtParms[c]));h+=gx.ajax.encryptParms(gx.O,k);(this.values=gx.http.callBackend(g,h,")",!1,gx.http.modes.retval,!0))?a.autosuggest(this.values,b):a.hideSuggestions()}},returnSuggestValues:function(c,b){return b},addElement:function(c,b,a){if(!this.elementExists(c,b,a)){var e=b.id;!0===a&&(e+=b.types.sort().join(""));c.splice(0,0,b);c[e]=b}},elementExists:function(c,b,a){var e=b.id;!0===a&&(e+=b.types.sort().join(""));return c[e]?
!0:!1},deleteElement:function(c,b,a){var e=b;a&&(e+=a.sort().join(""));c[e]&&delete c[e];for(var e=c.length,d=0;d<e;d++){var f=c[d];if(f.id==b)if(a){if(this.matchingTypes(a,f.types)){c.removeAt(d);break}}else{c.removeAt(d);break}}return c},matchingTypes:function(c,b){for(var a=b.length,e=0;e<a;e++){for(var d=!1,f=c.length,g=0;g<f;g++)b[e].toLowerCase()==c[g].toLowerCase()&&(d=!0);if(!d)return!1}return!0},findControl:function(c,b,a){b=gx.dom.el(a);if(null!=b)return b;b=gx.dom.el("gxHTMLWrp"+a);if(null!=
b)return b;a=RegExp("^"+a+"_(?:(?:[0-9]){4})+$");return null!=c&&a.test(c.id)?c:null},isUnderMouse:function(c){var b=gx.evt.mouse.x,a=gx.evt.mouse.y,e=gx.dom.position(c),c=gx.dom.dimensions(c);return b>=e.x&&b<=e.x+c.w&&a>=e.y&&a<=e.y+c.h?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(c){return"dblclick"==c?this.dblclicks:this.generics},addEventHandler:function(c,b,a,e){a=gx.lang.emptyObject(c)?a:c.CmpContext+a;c={id:b+a,cId:a,type:b,obj:c,hdl:e};b=this.getEventHandlers(b);gx.fx.addElement(b,
c,!1)},raiseEvent:function(c,b){for(var a=gx.evt.source(b),e=this.getEventHandlers(c),d=e.length,f=0;f<d;f++){var g=e[f],h=gx.fx.findControl(a,g.obj,g.cId);null!=h&&gx.fx.isUnderMouse(h)&&g.hdl.call(g.obj)}},highlight:function(c,b,a){var e=gx.color.fromRGB(b[0],b[1],b[2]),d=gx.dom.getStyle(c,"backgroundColor"),f="transparent"==d||"rgba(0, 0, 0, 0)"==d;return{play:function(){c.style.backgroundColor=e.Html;setTimeout(this.end,a)},end:function(){var a=d;f&&(a="transparent");c.style.backgroundColor=a}}}},
obs:{observers:[],addObserver:function(){gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(c,b,a,e){0>this.indexOf(c,b,a)&&this.observers.push({e:c,o:b,f:a,cfg:e})},deleteObserver:function(c,b,a){gx.thread.Mutex(this,this.deleteObserverSync,[c,b,a])},deleteObserverSync:function(c,b,a){c=this.indexOf(c,b,a);0<=c&&this.observers.removeAt(c)},removeAll:function(){this.observers=[]},indexOf:function(c,b,a){for(var e=this.observers.length,d=0;d<e;d++){var f=this.observers[d];
if(f.e==c&&f.o==b&&f.f==a)return d}return-1},notify:function(c,b){b||(b=[]);var a=this.observers.length,e=[],d;for(d=0;d<a;d++){var f=this.observers[d];if(f.e==c&&!f.removed)try{f.cfg&&f.cfg.single&&(f.removed=!0,e.push(d)),f.f.apply(f.o,b)}catch(g){gx.dbg.logEx(g,"gxfx.js","gx.obs.notify")}}if(0<e.length)for(d=e.length-1;0<=d;d--)this.observers.removeAt(e[d])}},dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(c,b,a){a&&(gx.evt.setEventRow(c,
this.dragCtrl),this.obj=a.call(c,this.dragCtrl),this.obj.gxDragTypes=b)},drop:function(c,b,a){a&&a.call(b,c,this.dragCtrl,this.obj)},noDrop:function(){var c=this.noDropCtrl;null!=c&&c.gxDndClassName&&(c.className=c.gxDndClassName+"NoAcceptDrag")},out:function(){var c=this.dropCtrl;c&&c.gxClassName&&(c.className=c.gxClassName);this.dropCtrl=null;c=this.noDropCtrl;null!=c&&c.gxClassName&&(c.className=c.gxClassName);this.noDropCtrl=null},over:function(){var c=this.dropCtrl;null!=c&&c.gxDndClassName&&
(c.className=c.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var c=this.clonCtrl;null!=c&&((null==this.toHdl&&(c.dropLeft=parseFloat(c.style.left||"0"),c.dropTop=parseFloat(c.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored())?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(c=this.nextCoords(),this.moveDragControl(c.X,
c.Y)))},nextCoords:function(){var c=this.clonCtrl,b=parseFloat(c.style.left||"0"),a=parseFloat(c.style.top||"0"),e=0,d=0;b>=a?(e=b-1,d=c.dropTop-(c.dropTop-c.originalTop)*(c.dropLeft-e)/(c.dropLeft-c.originalLeft)):(d=a-1,e=c.dropLeft-(c.dropTop-d)*(c.dropLeft-c.originalLeft)/(c.dropTop-c.originalTop));e<=c.originalLeft&&(e=c.originalLeft);d<=c.originalTop&&(d=c.originalTop);return{X:e,Y:d}},moveControl:function(c){if(null==this.clonCtrl){var b=document.createElement("DIV");b.style.position="absolute";
c.gxDndClassName&&(b.className=c.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(b,!0);b.innerHTML=this.dragInfo();gx.fn.setOpacity(50,b);document.body.appendChild(b);b.originalLeft=gx.evt.mouse.x-10;b.originalTop=gx.evt.mouse.y-10;b.diffLeft=10;b.diffTop=10;this.clonCtrl=b}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var c=this.clonCtrl;if(null==c)return!0;var b=parseFloat(c.style.left||"0"),a=parseFloat(c.style.top||"0")-c.originalTop;return 0>=b-
c.originalLeft&&0>=a?!0:!1},moveDragControl:function(c,b){try{var a=this.clonCtrl;null!=a&&(a.style.left=c-a.diffLeft+"px",a.style.top=b-a.diffTop+"px")}catch(e){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var c="",b="",a;for(a in this.obj){if("gxDragTypes"!=a){var e=[c];if("function"==typeof this.obj[a])continue;b+=a+": "+this.obj[a]+"</br>";c=e[0]}if(5<=c){b+="...";break}c++}return b}return""},deleteHandlers:function(c){gx.thread.Mutex(this,this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var b=
[],a,e=this.sources.length;for(a=0;a<e;a++){var d=this.sources[a];d.obj!=c&&b.push(d)}this.sources=b;b=[];e=this.targets.length;for(a=0;a<e;a++)d=this.targets[a],d.obj!=c&&b.push(d);this.targets=b},addSource:function(c,b,a,e,d){gx.thread.Mutex(this,this.addSourceSync,[c,b,a,e,d])},addSourceSync:function(c,b,a,e,d){b=gx.lang.emptyObject(c)?b:c.CmpContext+b;gx.fx.addElement(this.sources,{id:b,cssClass:a,types:e,obj:c,hdl:d},!1)},addTarget:function(c,b,a,e,d){gx.thread.Mutex(this,this.addTargetSync,
[c,b,a,e,d])},addTargetSync:function(c,b,a,e,d){b=gx.lang.emptyObject(c)?b:c.CmpContext+b;gx.fx.addElement(this.targets,{id:b,cssClass:a,types:e,obj:c,hdl:d},!0)},deleteSource:function(c){gx.thread.Mutex(this,this.deleteSourceSync,[c])},deleteSourceSync:function(c){this.sources=gx.fx.deleteElement(this.sources,c)},getSource:function(c){for(var c=gx.evt.source(c),b=this.sources.length,a=0;a<b;a++){var e=this.sources[a],d=this.dragCtrl=gx.fx.findControl(c,e.obj,e.id);if(null!=d&&(d.gxClassName=d.className,
d.gxDndClassName=e.cssClass,gx.fx.isUnderMouse(d)))return e}return this.obj=this.dragCtrl=null},getTarget:function(c,b){for(var a=gx.evt.source(c),e=this.targets.length,d=0;d<e;d++){var f=this.targets[d],g=gx.fx.findControl(a,f.obj,f.id);if(null!=g&&(g.gxClassName=g.className,g.gxDndClassName=f.cssClass,gx.fx.isUnderMouse(g))){if(gx.fx.matchingTypes(b,f.types))return this.noDropCtrl=null,this.dropCtrl=g,f;this.out();this.noDropCtrl=g;this.noDrop();return null}}this.out();return null}},ctx:{setters:[],
trackers:[],deleteHandlers:function(c){gx.thread.Mutex(this,this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var b,a=[],e=this.setters.length;for(b=0;b<e;b++){var d=this.setters[b];d.obj!=c&&a.push(d)}this.setters=a;a=[];e=this.trackers.length;for(b=0;b<e;b++)d=this.trackers[b],d.obj!=c&&a.push(d);this.trackers=a},addSetter:function(c,b,a,e,d){gx.thread.Mutex(this,this.addSetterSync,[c,b,a,e,d])},addSetterSync:function(c,b,a,e,d){b=gx.lang.emptyObject(c)?b:c.CmpContext+b;gx.fx.addElement(this.setters,
{id:b,cssClass:a,types:e,obj:c,hdl:d},!1)},addTracker:function(c,b,a){gx.thread.Mutex(this,this.addTrackerSync,[c,b,a])},addTrackerSync:function(c,b,a){gx.fx.addElement(this.trackers,{id:c.CmpContext+c.IsMasterPage.toString(),cssClass:"",types:b,obj:c,hdl:a},!0)},deleteSetter:function(c){gx.thread.Mutex(this,this.deleteSetterSync,[c])},deleteSetterSync:function(c){this.setters=gx.fx.deleteElement(this.setters,c)},notify:function(c,b,a){gx.thread.Mutex(this,this.notifySync,[c,b,a])},notifySync:function(c,
b,a){if(c&&c.forcedFocus)c.forcedFocus=!1;else{var e,d=gx.lang.emptyObject,f=null;if(d(b)||d(a)){var g=this.setters.length;for(e=0;e<g;e++){var h=this.setters[e];if(d(c)){if(f=gx.fx.findControl(null,h.obj,h.id),null!=f&&d(f.onfocus)&&gx.fx.isUnderMouse(f)){gx.evt.setEventRow(h.obj,f);b=h.types;a=h.hdl.call(h.obj,f);break}}else if(c.id==h.id){f=c;gx.evt.setEventRow(h.obj,f);b=h.types;a=h.hdl.call(h.obj,f);break}}}if(!d(b)&&(a||""===a)){c=this.trackers.length;for(e=0;e<c;e++)d=this.trackers[e],gx.fx.matchingTypes(b,
d.types)&&d.hdl.call(d.obj,null,f,a)}}}}};
gx.date=function(){var c=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{2})?:?([0-9]{2})?:?([0-9]{2})?:?([0-9]{2})?\s?(AM|PM)?/i,b=/([0-9]{2}):?([0-9]{2})?:?([0-9]{2})?:?([0-9]{2})?\s?(AM|PM)?/i,a=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,e=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i;return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(a){return this.getDay()==a.getDay()&&this.getMonth()==
a.getMonth()&&this.getFullYear()==a.getFullYear()?!0:!1},toJson:function(){var a=new gx.date.gxdate("");a.assign_date(this);return a.json()},gxdate:function(a,e){this.json=function(){var a=this.TimeFmt;this.TimeFmt=24;var b=this.HasTimePart;this.HasTimePart=!0;var c=this.getStringWithFmt("Y4MD")+" "+this.getTimeString(!0,!0);this.TimeFmt=a;this.HasTimePart=b;return c};this.mapCTODFormatToPattern=function(a){return"ANSI"==a?"Y4MD":a};this.emptyDateString=function(a){return-1==a.indexOf("Y4")?gx.blankWhenEmpty?
"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==a?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(a){a=this.mapCTODFormatToPattern(a);if(0===this.Value-new Date(0,0,0,0,0,0,0))return this.emptyDateString(a);var b=a,c=gx.text.padr(this.Value.getDate().toString(),2,"0"),e=gx.text.padr((this.Value.getMonth()+1).toString(),2,"0"),d=gx.text.padr(this.Value.getFullYear().toString(),4,"0"),f=this.FormatPos(a),b=b.replace("D",c+(3>f.DPos?"/":"")),b=b.replace("M",e+(3>f.MPos?"/":""));
-1==a.indexOf("Y4")?(d=d.slice(2,4),b=b.replace("Y",d+(3>f.YPos?"/":""))):b=b.replace("Y4",d+(3>f.YPos?"/":""));return b};this.getString=function(a){gx.lang.emptyObject(a)&&(a=gx.dateFormat);return this.getStringWithFmt(a)};this.toString=function(){return this.getString()};this.gxdtoc=function(a,b){return this.getStringWithFmt(this.mapCTODFormatToPattern(a)).replace("/",b)};this.getUrlVal=function(){if(gx.date.isNullDate(this))return"";var a=gx.text.padr(this.Value.getDate().toString(),2,"0"),b=gx.text.padr((this.Value.getMonth()+
1).toString(),2,"0"),c=gx.text.padr(this.Value.getFullYear().toString(),4,"0"),e=this.HasTimePart?gx.text.padr(this.Value.getHours().toString(),2,"0"):"",d=this.HasTimePart?gx.text.padr(this.Value.getMinutes().toString(),2,"0"):"",f=this.HasTimePart?gx.text.padr(this.Value.getSeconds().toString(),2,"0"):"";return c+b+a+e+d+f};this.getTimeString=function(a,b,c){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var e="";c&&(e+="  ");a&&(e+="   ");b&&(e+="   ");return e}var e="",d=this.Value.getHours(),
c=c||!0;12==this.TimeFmt&&12<=d?(12<d&&(d-=12),e=" PM"):12==this.TimeFmt&&(e=" AM");var f=this.HasTimePart?gx.text.padr(d.toString(),2,"0"):"",m=this.HasTimePart?gx.text.padr(this.Value.getMinutes().toString(),2,"0"):"",p=this.HasTimePart?gx.text.padr(this.Value.getSeconds().toString(),2,"0"):"";0===d&&""!==e&&(f="12");d="";c&&(d=f);a&&(d=d+":"+m);b&&(d=d+":"+p);return d+e};this.FormatPos=function(a){var b,c,e;"ANSI"==a?(b=1,c=2,a=3):(e=a.indexOf("Y4"),b=-1==e?a.indexOf("Y")+1:e+1,c=a.indexOf("M"),
0!==e&&c++,a=a.indexOf("D"),0!==e&&a++);return{YPos:b,MPos:c,DPos:a}};this.assign_date=function(a){a instanceof gx.date.gxdate?(this.Value=a.Value,this.HasTimePart=a.HasTimePart):this.Value=a};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;return a};this.fromUTC=function(){if(gx.date.isNullDate(this)||
"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;return a};this.assign_string=function(a,e,d,f){var o=c,n=o.exec(a),m=0;if(null==n)-1!=a.indexOf("  /  /  ")&&(d=!0);else for(var p=n.length,q=1;q<p;q++)gx.lang.emptyObject(n[q])||m++;var t=this.FormatPos(e),w=q=p=e=0,v=0,y=0,A=0;try{if(6==t.DPos+t.MPos+t.YPos&&null!=n&&3<=
m){null!=n[t.YPos]&&(e=parseInt(n[t.YPos],10));if(isNaN(e))throw"InvalidDate";e<this.FYearOfCentury?e+=2E3:100>e?e+=1900:1E3>e&&(e+=1E3);null!=n[t.MPos]&&(p=parseInt(n[t.MPos],10)-1);if(isNaN(p)||0>p||11<p)throw"InvalidDate";null!=n[t.DPos]&&(q=parseInt(n[t.DPos],10));if(isNaN(q)||0>q||q>gx.date.maxDays(p,e))throw"InvalidDate";}this.HasTimePart=!1;t=0;null==n?(o=b,n=o.exec(a),null!=n&&(t=1,this.HasTimePart=!0)):3<m&&(t=4,this.HasTimePart=!0);if(this.HasTimePart&&!d){null!=n[t]&&(w=parseInt(n[t],10));
if(gx.lang.emptyObject(n[t])||isNaN(w))throw this.HasTimePart=!1,"InvalidHour";null!=n[t+1]&&(v=parseInt(n[t+1],10));isNaN(v)&&(v=0);null!=n[t+2]&&(y=parseInt(n[t+2],10));isNaN(y)&&(y=0);null!=n[t+3]&&(A=parseInt(n[t+3],10));isNaN(A)&&(A=0);if(!this.validTime(-1!=a.toLowerCase().indexOf("m"),w,v,y,A))throw"InvalidHour";if((-1!=a.indexOf("PM")||-1!=a.indexOf("pm"))&&12>w)w+=12;if((-1!=a.indexOf("AM")||-1!=a.indexOf("am"))&&12==w)w=0}}catch(s){if(f)throw s;"InvalidDate"==s&&(A=y=v=w=q=p=e=0);"InvalidHour"==
s&&(A=y=v=w=0)}this.Value=new Date(e,p,q,w,v,y,A);if(0<e+p+q+w+v+y+A&&(!this.HasTimePart||d)&&this.Value.getDate()!=q)this.Value=new Date(Date.UTC(e,p,q,w+12,v,y,A))};this.validTime=function(a,b,c,e,d){return a&&12<b||!a&&(24<b||24==b&&0<c+e)?!1:59>=c||59>=e||59>=d};this.compare=function(a){return"string"==typeof a?this.compare_string(a):this.compare_date(a)};this.compare_string=function(a){return this.compare_date((new gx.date.gxdate(a)).Value)};this.compare_date=function(a){a=a instanceof gx.date.gxdate?
a.Value:a;return this.HasTimePart?this.Value-a:this.Value.getFullYear()>a.getFullYear()?1:this.Value.getFullYear()<a.getFullYear()?-1:this.Value.getMonth()>a.getMonth()?1:this.Value.getMonth()<a.getMonth()?-1:this.Value.getDate()>a.getDate()?1:this.Value.getDate()<a.getDate()?-1:0};this.TimeFmt=gx.timeFormat||12;this.SFmt=e||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof a?this.assign_string(a,this.SFmt):this.assign_date(a)},isANSIDateTime:function(a){return"string"==typeof a&&
c.test(a)?!0:!1},isANSIDate:function(b){return"string"==typeof b&&a.test(b)?!0:!1},isLeapYear:function(a){return 0===a%400?!0:0===a%100?!1:0===a%4?!0:!1},dateObject:function(a){return a instanceof this.gxdate?a.Value:"string"==typeof a?(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).Value:a instanceof Date?a:new Date},gxdateObject:function(a){if(a instanceof this.gxdate)return a;if("string"==typeof a)return new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0);if(a instanceof Date){var b=new this.gxdate("");
b.assign_date(a);return b}return new this.gxdate("")},clonedDate:function(a,b){var c=new this.gxdate("");c.assign_date(b);a instanceof this.gxdate&&(c.SFmt=a.SFmt,c.HasTimePart=a.HasTimePart);return c},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var a=this.today();a.HasTimePart=!0;return a},today:function(){var a=new this.gxdate("");a.assign_date(new Date);return a},ctot:function(a,b){return new this.gxdate(a,b)},ctod:function(a,b){var c=new this.gxdate(a,b);c.Value.setHours(0,
0,0,0);return c},ymdtod:function(a,b,c){a=new this.gxdate(a+"/"+b+"/"+c,"ANSI");a.Value.setHours(0,0,0,0);return a},ymdhmstot:function(a,b,c,e,k,l){return new this.gxdate(a+"/"+b+"/"+c+" "+e+":"+k+":"+l,"ANSI")},hour:function(a){return(new this.gxdate(a)).Value.getHours()},minute:function(a){return(new this.gxdate(a)).Value.getMinutes()},second:function(a){return(new this.gxdate(a)).Value.getSeconds()},millisec:function(a){return 864E5*a},day:function(a){return(new this.gxdate(a)).Value.getDate()},
month:function(a){return(new this.gxdate(a)).Value.getMonth()+1},year:function(a){return(new this.gxdate(a)).Value.getFullYear()},addDays:function(a,b){return this.addMill(a,this.dayToMillisec(b))},addSec:function(a,b){return this.addMill(a,this.secToMillisec(b))},addMill:function(a,b){var c=this.dateObject(a).clone(),e=new this.gxdate;e.assign_date(c);var k=c.getMilliseconds();c.setMilliseconds(k+b);return e.getString(this.isANSIDate(a)?"Y4MD":void 0)},secDiff:function(a,b){return this.millisecToSec(this.milliDiff(a,
b))},daysDiff:function(a,b){return this.millisecToDay(this.milliDiff(a,b))},milliDiff:function(a,b){var c=this.gxdateObject(a),e=this.gxdateObject(b),a=c.Value.valueOf(),b=e.Value.valueOf();return a-b},dayToMillisec:function(a){return 864E5*a},secToMillisec:function(a){return 1E3*a},millisecToDay:function(a){return a/24/60/60/1E3},millisecToSec:function(a){return a/1E3},dateParm:function(a){return"string"==typeof a?new this.gxdate(a):a},urlDate:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?
a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padr((c.Value.getMonth()+1).toString(),2,"0")+gx.text.padr(c.Value.getDate().toString(),2,"0"):""},urlDateTime:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padr((c.Value.getMonth()+1).toString(),2,"0")+gx.text.padr(c.Value.getDate().toString(),2,"0")+gx.text.padr(c.Value.getHours().toString(),
2,"0")+gx.text.padr(c.Value.getMinutes().toString(),2,"0")+gx.text.padr(c.Value.getSeconds().toString(),2,"0"):""},isNullDate:function(a){a instanceof this.gxdate&&(a=a.Value);var b=this.nullDate();return b.getFullYear()!=a.getFullYear()||b.getMonth()!=a.getMonth()||b.getDate()!=a.getDate()||b.getHours()!=a.getHours()||b.getMinutes()!=a.getMinutes()||b.getSeconds()!=a.getSeconds()?!1:!0},dtoc:function(a,b,c){return(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).gxdtoc(b,c)},dttoc:function(a,
b,c){var a=new this.gxdate(a,this.isANSIDateTime(a)?"Y4MD":void 0),e=gx.dateFormat,k="";0<b&&(8<b&&-1==e.indexOf("Y4")&&(e=e.replace("Y","Y4")),k=a.getStringWithFmt(e)+" ");return 0<c?k+a.getTimeString(3<c,8==c,1<c):k},nulldate_toc:function(a,b){var c=new this.gxdate("");c.HasTimePart=!0;var e=gx.dateFormat,k="";0<a&&(8<a&&-1==e.indexOf("Y4")&&(e=e.replace("Y","Y4")),k=c.getStringWithFmt(e)+" ");return 0<b&&!gx.blankWhenEmpty?k+c.getTimeString(1<b,8==b,3<b):k},addyr:function(a,b){return this.addmth(a,
12*b)},addmth:function(a,b){var c=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),b=b+a.getMonth(),e=parseInt(b/12,0),k=parseInt(b%12,0);a.setMonth(k);e=a.getFullYear()+e;1==k&&(29==a.getDate()&&!this.isLeapYear(e))&&a.setDate(28);a.setFullYear(e);return this.clonedDate(c,a)},dtadd:function(a,b){var c=this.gxdateObject(a),a=new Date(a.getTime()),b=1E3*b,a=this.dateObject(a),e=a.getMilliseconds();a.setMilliseconds(e+b);return this.clonedDate(c,a)},dtdiff:function(a,b){a=this.dateObject(a);
b=this.dateObject(b);return(a-b)/1E3},maxDays:function(a,b){switch(a){case 0:return 31;case 1:return 0!==b%100&&0===b%4||0===b%400?29:28;case 2:return 31;case 3:return 30;case 4:return 31;case 5:return 30;case 6:return 31;case 7:return 31;case 8:return 30;case 9:return 31;case 10:return 30;case 11:return 31}},eom:function(a){var b=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),c=this.maxDays(a.getMonth(),a.getFullYear());a.setDate(c);return this.clonedDate(b,a)},dow:function(a){a=
this.dateObject(a);return a.equalsNoTime(this.nullDate())?0:a.getDay()+1},age:function(a,b){var c,e,k;e=this.dateObject(a);c=this.dateObject(b);k=this.nullDate();if(e.equalsNoTime(k)||c.equalsNoTime(k)||e.equalsNoTime(c))return 0;if(c>=e){k=36E5*c.getUTCHours()+6E4*c.getUTCMinutes()+1E3*c.getUTCSeconds()-(36E5*e.getUTCHours()+6E4*e.getUTCMinutes()+1E3*e.getUTCSeconds());if(c.getUTCDate()>e.getUTCDate()||c.getUTCDate()==e.getUTCDate()&&0<=k)k=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),e.getUTCDate(),
e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()));else{k=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()-1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()));c=c.getUTCMonth()-1;for(-1==c&&(c=11);k.getUTCMonth()!=c;)k.setUTCDate(k.getUTCDate()-1)}return e=k.getUTCMonth()>=e.getUTCMonth()?k.getUTCFullYear()-e.getUTCFullYear():k.getUTCFullYear()-1-e.getUTCFullYear()}return 0},valid_date:function(a,b,c,h,k,l,o,n){var m=o||!1,p=!1,l="",o=c,q="",q="^[ ]*(",t=0<b?"GXM_invaliddate":
"GXM_invalidtime",l=a.value,l=l.split("\n")[0],c="YMD"==c?1:0,k=12==k?1:0;e.test(l)&&(p=!0,l="");q=0<b?8==b?q+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":0===c?m?q+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":q+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":m?q+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":q+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":q+"( )?( )?( )?";0<h&&(q+="(",0<b&&(q+="[ ]*"),q+="([0-9]{2})",q=2<h?q+"(:?([0-9]{2}))?":q+"(( )?)?",q=5<h?q+"(:?([0-9]{2}))?":
q+"(( )?)?",q=(1==k?q+"[ ]*(a|am|p|pm)?":q+"(( )?)?")+")?");c=RegExp(q+")?[ ]*$","i");if(c.test(l)){c=l.match(c);0<b?(q="/",0<l.indexOf("-")&&(q="-"),c[2]?q=c[2]+q+c[3]+q+c[4]:(q=1==n?"        ":"  "+q+"  "+q+"  ",10==b&&(q+="  "))):q="";0<h&&(0<b&&(q+=" "),1==n&&!c[6]&&!c[8]&&!c[10]?q+="        ":(c[6]?q+=c[6]:p?(n=l.match(e),q=n[4]?q+n[4]:q+(1==k?"12":"00")):q+=1==k?"12":"00",2<h&&(q=c[8]?q+":"+c[8]:q+":00"),5<h&&(q=c[10]?q+":"+c[10]:q+":00"),1==k&&(q="p"==(c[11]?c[11].substr(0,1):"a").toLowerCase()?
q+" PM":q+" AM")));k=new this.gxdate("",o);try{k.assign_string(q,o,0>=h,!0),""!==gx.text.trim(q)&&(q=this.formatDateTime(h,b,o,k))}catch(w){return gx.fn.alert(a,gx.getMessage(t)),gx.csv.setFormatError(a),!1}if(q!=l){a.value=q;if(-1!=navigator.userAgent.indexOf("Firefox/2"))a.onchange();(b=gx.O.getValidStructFld(a.id))&&gx.O.refreshDependantGrids(b)}gx.csv.setFormatError(a,!1);return!0}gx.fn.alert(a,gx.getMessage(t));gx.csv.setFormatError(a);return!1},formatDateTime:function(a,b,c,e){var k="";0<a&&
e.HasTimePart&&(k=e.getTimeString(4<=a,8<=a));a=c;8<b&&-1==a.indexOf("Y4")&&(a=a.replace("Y","Y4"));return 0<b?e.getStringWithFmt(a)+(e.HasTimePart?" "+k:""):e.HasTimePart?k:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(c){this.capacity=c||10;this.buffer=[];this.append=function(b){this.buffer.push(b);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var c=arguments[0],b=arguments.length,a=1;a<b;a++)c=c.replace("%"+a,gx.text.trim(arguments[a].toString()));return c},formatString:function(c,b,a){return a?gx.text.padl("",
b,"*"):c},replaceAll:function(c,b,a){return-1!=c.toString().indexOf(b)?(""+c).split(b).join(a):c},charReplace:function(c,b,a){for(var e="",d=c.length,f=0;f<d;f++){for(var g=!1,h=b.length,k=0;k<h;k++)if(c.charAt(f)==b[k]&&k<a.length){e+=a[k];g=!0;break}!1===g&&(e+=c.charAt(f))}return e},endsWith:function(c,b){return c.charAt(c.length-1)==b},length:function(c){return c.length},upper:function(c){return c.toUpperCase()},lower:function(c){return c.toLowerCase()},padr:function(c,b,a){b-=c.length;if(1>b)return c;
for(var e="",d=0;d<b;d++)e+=a;return e+c},padl:function(c,b,a){b-=c.length;if(1>b)return c;for(var e="",d=0;d<b;d++)e+=a;return e+c},ltrim:function(c){return c.toString().replace(/^ */,"")},rtrim:function(c){return c.toString().replace(/ *$/,"")},trim:function(c){return this.rtrim(this.ltrim(c))},chr:function(c){return String.fromCharCode(c)},concat:function(c,b,a){return this.rtrim(c)+a+b},space:function(c){for(var b="",a=0;a<c;a++)b+=" ";return b},substring:function(c,b,a){return c.toString().substring(b-
1,b-1+a)},tostring:function(c){return c.toString()},toformattedstring:function(c){return c.toString()},newline:function(){return"\n"},escapeMapping:{"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(c,b){var a=gx.text.escapeMapping[b];if(a)return a;a=b.charCodeAt();return"\\u00"+Math.floor(a/16).toString(16)+(a%16).toString(16)},escapeString:function(c){return this.escapeRegex.start.test(c)?'"'+
c.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+c+'"'},indexOf:function(c,b,a){if(a>c.length)return 0;0>=a&&(a=1);return c.indexOf(b,a-1)+1},lastIndexOf:function(c,b,a){if(a>c.length)return 0;0>=a&&(a=c.length);return c.lastIndexOf(b,a-1)+1}};
gx.num=function(){var c=function(b,a,c,d){var f=gx.lang.instanceOf,g="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,h=gx.thousandSeparator,k=gx.decimalPoint;"string"==typeof c&&(c=gx.num.parseFloat(c,h,k));"string"==typeof d&&(d=gx.num.parseFloat(d,h,k));return f(c,g)&&f(d,Number)?c[b](new g(d.toString())).toString():f(c,Number)&&f(d,g)?(new g(c.toString()))[b](d).toString():f(c,Number)&&f(d,Number)||"undefined"==typeof gx.num.dec?a(c,d):c[b](d)};return{str:function(b,a,c){"undefined"==
typeof a&&(a=10);if("undefined"==typeof c||a-1<=c)c=0;b=this.round(b,c);if(0===c)return b=b.toString(),b.length>a?gx.text.padr("",a,"*"):gx.text.padr(b,a," ");var b=b.toString(),d=b.indexOf(".");0<c&&(b=0>d?b+("."+gx.text.padr("",c,"0")):(0===d?"0":b.substring(0,d))+gx.text.padr(b.substring(d),c+1,"0"));if(b.length<=a)return gx.text.padr(b,a," ");d=b.indexOf(".");return 0<d&&b.substring(0,d).length<=a?gx.num.str(gx.num.val(b),a,0):gx.text.padr("",a,"*")},maxNumericPrecision:function(){return 15},
extractValue:function(b,a){if(gx.lang.instanceOf(a,Number)||this.overflowNumber(a))return a;var c,d=void 0===a?"":a;c="+"==b.charAt(0)||"-"==b.charAt(0)?b.replace(/[\+\-\d,*\.*Z*\s]+/,""):b.replace(/[\d,*\.*Z*\s]+/g,"");b.lastIndexOf(".")!=b.indexOf(".")&&(d=gx.text.replaceAll(d,".",""));for(var f=0;f<c.length;f++)d=d.replace(c.charAt(f),"");return gx.text.trim(d)},formatNumber:function(b,a,c,d,f,g){gx.lang.emptyObject(b)&&(b="0");var h=-1!=c.indexOf(",")?gx.thousandSeparator:"",k=gx.decimalPoint,
l=!1;"string"==typeof b&&h&&(b=gx.text.replaceAll(b,h,""));"string"==typeof b&&(b=b.replace(k,"."));if(gx.num.overflowNumber(b))return b;try{b=gx.num.setScale(b,a)}catch(o){b=b.toString()}var n=b.split(".");n[0]||(n[0]="0");n[1]||(n[1]="");if(g){if(n[1].length>a&&n[1].replace(/0*$/,"").length>a)throw"InvalidNumber";d=0===a?d:d-a-1;if(f&&"-"==n[0].charAt(0)&&n[0].replace(/0*/,"").length>d||!f&&"-"==n[0].charAt(0)||n[0].replace(/[+]?0*/,"").length>d)throw"InvalidNumber";}0>b&&(f=!0);if(n[1].length<
a){d=n[1];for(b=n[1].length+1;b<=a;b++)d+="0";n[1]=d}d="";f&&"-"==n[0].charAt(0)&&(d="-",n[0]=n[0].substring(1));if(h&&3<n[0].length){g=n[0];n[0]="";for(f=3;f<g.length;f+=3)b=g.slice(g.length-f,g.length-f+3),n[0]=h+b+n[0]+"";f=g.substr(0,0===g.length%3?3:g.length%3);n[0]=f+n[0]}k=!n[1]?"":k;0<a?(f=c.split("."),f[1]==gx.text.padr("",a,"Z")&&(l=!0)):(f=Array(c),0<f.length&&0===gx.text.replaceAll(gx.text.replaceAll(f[0],",",""),"Z","").length&&(l=!0));a=0;c="";if(1<f.length){g=f[1];for(b=0;b<g.length;b++){var m=
g.charAt(b);"9"==m||"Z"==m?n[1].length>a?(c+=n[1].charAt(a),a++):c+="0":"."!=m&&","!=m&&(c+=m)}}g="";f=f[0];a=n[0].length-1;for(b=f.length-1;0<=b;b--)m=f.charAt(b),"9"==m||"Z"==m?0<=a?(g=n[0].charAt(a)+g,a--):g=("9"==m?"0":"")+g:"Z"!=m&&","!=m?g=m+g:","==m&&n[0].charAt(a)==h&&(g=n[0].charAt(a)+g,a--);return l&&"0"==g&&0===c.replace(/0+$/,"").length?"":d+g+(!c?"":k+c)},add:function(b,a){return c("add",function(a,b){return a+b},b,a)},subtract:function(b,a){return c("substract",function(a,b){return a-
b},b,a)},multiply:function(b,a){return c("multiply",function(a,b){return a*b},b,a)},divide:function(b,a){return c("divide",function(a,b){return a/b},b,a)},negate:function(b){return gx.lang.instanceOf(b,Number)||"undefined"==typeof gx.num.dec?-b:b.negate()},pow:function(b,a){return c("pow",function(a,b){return a^b},b,a)},mod:function(b,a){return c("remainder",function(a,b){return a%b},b,a)},setScale:function(b,a){if(gx.lang.instanceOf(b,Number))return b.toFixed(a);"string"==typeof b&&(b=gx.text.trim(b));
if(b.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===b.length&&0===a)return"0";var c=b.split("."),d;c[1]||(c[1]="");if(c[1].length<a){var f=c[1];for(d=c[1].length+1;d<=a;d++)f+="0";c[1]=f;return c[0]+(""===c[1]?"":".")+c[1]}return Number(parseFloat(b)).toFixed(a)}return(new gx.num.dec.bigDecimal(b)).setScale(a,gx.num.dec.ROUND_UP).toString()},parseFloat:function(b,a,c){if(gx.lang.instanceOf(b,Number)||this.overflowNumber(b))return b;b=this.toInvariant(b,a,c);return b.length>
this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(b):parseFloat(b)},toInvariant:function(b,a,c){return"number"==typeof b||"undefined"!=typeof gx.num.dec&&b instanceof gx.num.dec.bigDecimal?b:gx.text.replaceAll(b,a,"").replace(c,".")},parseInt:function(b,a,c){if("number"==typeof b)return b;var d=b,d=gx.text.replaceAll(b,c,"");return parseInt(d,a)},overflowNumber:function(b){return/\*(\**)/.test(b)},urlDecimal:function(b,a,c){return"undefined"!=typeof b?(b="undefined"!=
typeof b.value?b.value:b,b=this.parseFloat(b,a,c),b.toString()):""},random:function(){return Math.random()},intval:function(b){var a=0,b="undefined"!=typeof b?b.toString():"",a=b.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(b,0):(new gx.num.dec.bigDecimal(b)).setScale(0,gx.num.dec.ROUND_UP);isNaN(a)&&(a=0);return a},val:function(b){b=gx.text.trim(b).replace(",",".");b=this.parseFloat(b);isNaN(b)&&(b=0);return b},trunc:function(b,a){var c=b,b=b.toString(),d=b.length,
f=b.indexOf(".");if(-1!=f){c=b.substring(0,f);if(0===a)return c;var g="";f+a<=d&&(g=b.substring(f+1,f+1+a));c=gx.num.parseFloat(c+"."+g);isNaN(c)&&(c=0)}return c},round:function(b,a){var b=b.toString(),c=b.indexOf("."),d="",f="",f=0,d="."+"0000000000000000000000".substring(1,parseInt(a,0)+1)+"5",f=parseFloat(d);if(-1==c)f="0000000000000000000000",d=""+b;else if(0===c)d="0",f=0+parseFloat(b)+parseFloat(f),b=f+"0000000000000000000000",f=""+b.substring(1,b.length);else{if(0===a){d=b.substring(0,c);d=
parseInt(d,0);c=parseInt(b.substring(c+1,c+2),0);if(isNaN(d))return 0;!isNaN(c)&&5<=c&&d++;return d}f=parseFloat(b)+f;d=f.toString().substring(0,c);f=""+(""+f+"0000000000000000000000").substring(c+1,c+1+parseInt(a,0))}f=f.substring(0,parseInt(a,0));d=parseFloat(d+"."+f);isNaN(d)&&(d=0);return d},valid_decimal:function(b,a,c,d){var f=b.value,g=f.lastIndexOf(c),h=!0;","==c&&(-1==g&&f.lastIndexOf(".")==f.indexOf("."))&&(f=f.replace(".",c));var k=gx.O.getValidStructFld(b.id);gx.lang.emptyObject(k)||(f=
gx.num.extractValue(k.pic,f));g=RegExp("^[ ]*([+-]?[0-9]*(\\"+a+"[0-9]{3})*(\\"+c+"[0-9]*)?)?[ ]*$");if(f)if(g.test(f)){var g=f.lastIndexOf(c),l=f;-1!=g&&(l=f.slice(0,g+parseInt(d,10)+1));try{gx.lang.emptyObject(k)||(l=gx.num.formatNumber(l,k.dec,k.pic,k.len,k.sign,!0)),"."!=c&&"SELECT"==b.tagName&&(l=gx.num.toInvariant(l,a,c))}catch(o){h=!1}if(h&&l!=gx.text.trim(b.value)&&(b.value=l,-1!=navigator.userAgent.indexOf("Firefox/2")))b.onchange()}else h=!1;else h=!0;h?gx.csv.setFormatError(b,!1):(gx.csv.setFormatError(b),
gx.fn.alert(b,gx.getMessage("GXM_badnum")))},valid_integer:function(b,a){var c,d,f,g=gx.O.getValidStructFld(gx.dom.id(b));d=b.value;gx.lang.emptyObject(g)||(d=gx.num.extractValue(g.pic,d));c=-1!=g.pic.indexOf(",")?RegExp("^[ ]*([+-]?[0-9]*(\\"+a+"[0-9]{3})*)?[ ]*$"):/^[ ]*([+-]?[0-9]*([0-9]{3})*)?[ ]*$/;f=!0;if(d)if(c.test(d)){try{gx.lang.emptyObject(g)||(d=gx.num.formatNumber(d,g.dec,g.pic,g.len,g.sign,!0))}catch(h){f=!1}if(d!=gx.text.trim(b.value)&&(b.value=d,-1!=navigator.userAgent.indexOf("Firefox/2")))b.onchange()}else f=
!1;else f=!0;f?gx.csv.setFormatError(b,!1):(gx.csv.setFormatError(b),gx.fn.alert(b,gx.getMessage("GXM_badnum")))}}}();
gx.color={rgb:function(c,b,a){return 65536*c+256*b+a},css:function(c){return"rgb"==c.substring(0,3)?eval(c):"#"==c.charAt(0)?parseInt(c.substring(1),16):0},html:function(c){c=this.toHex(c);gx.lang.emptyObject(c)&&(c="000000");var c=gx.text.padr(c,6,"0"),b={};b.Hexa=c;b.Html="#"+c;b.R=parseInt(c.substring(0,2),16);b.G=parseInt(c.substring(2,4),16);b.B=parseInt(c.substring(4,6),16);return b},fromRGB:function(c,b,a){var e={};"undefined"!=typeof c&&("undefined"!=typeof b&&"undefined"!=typeof a)&&(e.Hexa=
this.toHex(c)+this.toHex(b)+this.toHex(a),e.Html="#"+e.Hexa,e.R=c,e.G=b,e.B=a);return e},ARGBToHex:function(c){var b=this.toHex(c>>16&255),a=this.toHex(c>>8&255),c=this.toHex(c&255);return b+a+c},toHex:function(c){if(void 0===c)return"000000";if(0>c)return gx.color.ARGBToHex(c);if(0===c)return c+"0";for(var b=0,a="";0!==c;)b=c%16,c=(c-b)/16,a="0123456789ABCDEF".charAt(b)+a;0!==a.length%2&&(a="0"+a);return a}};
gx.popup=function(){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.left=this.top=this.position=this.height=this.width=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};this.open=function(c){this.state="opening";this.id=c.id||"gxdialog";this.callbacks=c.callbacks;gx.popup.ext.window(this,!1,0,0,c.w,c.h,c.contentHtml,"white",c.title,
"black","black","black","black",!0,!0,!0,!0,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader","PopupHeaderButton","PopupContent","PopupBorder","PopupShadow",c.showParentPopups,!1,c.callbacks,c.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened"};this.close=function(){this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;
delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(c,b){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=b?b:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){if(gx.lang.isArray(c))this.url=c[0],this.autoresize=
c[1],this.width=c[2],this.height=c[3],this.position=c[4],this.top=c[5],this.left=c[6],this.OncloseCmds=c[7]||[],this.ReturnParms=c[8]||[];else if(c&&c.Url&&(this.url=c.Url,"undefined"!=typeof c.Autoresize&&(this.autoresize=c.Autoresize),"undefined"!=typeof c.Width&&(this.width=c.Width),"undefined"!=typeof c.Height&&(this.height=c.Height),"undefined"!=typeof c.Position&&(this.position=c.Position),"undefined"!=typeof c.Top&&(this.top=c.Top),"undefined"!=typeof c.Left&&(this.left=c.Left),"undefined"!=
typeof c.OncloseCmds&&(this.OncloseCmds=c.OncloseCmds),"undefined"!=typeof c.ReturnParms))this.ReturnParms=c.ReturnParms};this.open=function(){this.state="opening";var a=gx.popup.gxOpener();this.lvl=-1;this.lvl=a&&a.gx&&a.gx.popup.ext.win&&a.gx.popup.ext.win.gx?a.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;a=this.url;if(this.IsPrompt){gx.popup.currentPrompt=this;
for(var b="?",c="",f="",g=this.ReturnParms.length,h=0;h<g;h++){if(gx.lang.emptyObject(this.ReturnParms[h].Ctrl))if("string"==typeof this.ReturnParms[h])c=gx.util.urlValue(this.ReturnParms[h])+",";else if("number"==typeof this.ReturnParms[h])c=gx.util.urlValue(this.ReturnParms[h].toString())+",";else if(this.CustomRenderGrid)f=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[h].id),gx.lang.emptyObject(f)||(c=gx.util.urlValue(f+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[h].id))continue;
else f=gx.fn.getHidden(this.ReturnParms[h].id),gx.lang.emptyObject(f)||(c=gx.util.urlValue(f)),c+=",";else c=gx.util.urlValue(this.ReturnParms[h].Ctrl)+",";b="out"==this.ReturnParms[h].IOType?b+",":b+c;this.ReturnParms[h].isLastKey&&(gx.fn.isOutputParm(this.ReturnParms[h])&&!this.PromptIsGet)&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);a+=b}b=document.activeElement;b==document.body&&gx.csv.lastControl&&(b=gx.csv.lastControl);
b&&(b&&(this.callerActiveElement=b),b.blur&&b.blur());this.InternalPopup=gx.popup.Impl(this,a,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var a=[];if(this.IsPrompt)for(var b=this.ReturnParms.length,c=0;c<b;c++){var f=this.ReturnParms[c];gx.fn.isOutputParm(f)&&a.push(f)}else return this.ReturnParms;return a};this.close=function(a){var b;this.state="closing";a&&(this.RawReturnedParms=a);gx.popup.ext.win?(gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),
gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);!gx.popup.ext.isPdf&&(this.frameWindow&&this.frameWindow.gx)&&(this.IsPrompt&&(null==this.parentPopup?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null),this.frameWindow.gx.evt.onunload.call(this.frameWindow),this.frameWindow=this.frameDocument=this.frameDocument.gxPopup=null);gx.popup.ext.close(this);var c=this.getOutputParms();if(null!=a&&this.IsPrompt){var f=a.length,g=gx.popup.assignPromptField,
h=gx.popup;gx.lang.emptyObject(this.CustomRenderGrid)||(g=this.CustomRenderGrid.grid.setCellValue,h=this.CustomRenderGrid.grid);for(b=0;b<f;b++)g.apply(h,[c[b],a[b]]);a=null;f=c.length;for(b=0;b<f;b++)g=c[b].Ctrl,gx.fn.isAccepted(g)&&(a=g);a&&gx.TabOnPrompSelect&&(b=gx.fn.getControlIndex(a),-1!=b&&(a=gx.fn.searchFocus(b+1,!0)));gx.fn.setFocus(a);if(this.PromptIsGet)gx.csv.loadScreen(),gx.fn.setFocus(a);else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+
"IsConfirmed"),"undefined"==typeof window.GXPkIsDirty?!1:window.GXPkIsDirty,null,"eng")}catch(k){gx.dbg.logEx(k,"gxpopup.js","close")}}else a&&c&&(c instanceof Array&&0<c.length)&&gx.fn.setReturnParms(this.Opener,c,a);gx.ajax.dispatchCommands(this.OncloseCmds);this.cleanup();this.state="closed"};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload()};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=
this.document=this.window=this.InternalPopup=null,this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(a){gx.dbg.logEx(a,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},gxOpener:function(){var c=null;try{parent.gxTestAvailable=1,c=parent}catch(b){}return c},setFocus:function(){var c=this.getPopup();c&&c.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(c){var b=
gx.popup.getPopup();b?"opened"==b.state?c():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[c],50):c()},getPopup:function(){var c=this.gxOpener();try{if(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(c.gx))return c.gx.popup.currentPopup}catch(b){}return null},setPopup:function(c){this.currentPopup=c},open:function(c){return this.openPopup(c)},openUrl:function(c,b,a){var e=1,d=0,f=0,g=0,h=0,k=0;a&&(e=a[0],d=a[1],f=a[2],g=a[3],h=a[4],k=a[5]);return this.openPopup([c,e,d,f,g,h,k,[],b])},openPopup:function(c){c=
new this.Popup(c,!1);c.Opener=gx.O;c.open();return c},openDialog:function(c){var b=new this.Dialog;b.Opener=gx.O;b.open(c);return b},openPrompt:function(c,b,a,e,d,f){if(null==gx.popup.currentPrompt){var g=b[0].Ctrl,h=!1,k,l;if(g)k=gx.fn.rowGridId(g),g=gx.fn.controlRowId(g),!gx.lang.emptyObject(k)&&!gx.lang.emptyObject(g)&&(gx.csv.lastGrid=k,gx.fn.setCurrentGridRow(k,g));else if(k=gx.O.getValidStructFld(b[0].id),!gx.lang.emptyObject(k)&&(l=gx.O.getGridById(k.grid)))if(h=l.isUsercontrol)k=l.gridId+
"",g=!gx.lang.emptyObject(l.grid.getSelectedRow)?gx.text.padl(l.grid.getSelectedRow()+"",4,"0"):void 0,!gx.lang.emptyObject(k)&&!gx.lang.emptyObject(g)&&(gx.csv.lastGrid=k,gx.fn.setCurrentGridRow(k,g));if(f||this.outParmsAccepted(b)||h)c=new this.Popup([c,1,0,0,0,0,0,[],b],!0),c.IsMod=a,c.Opener=gx.getObj(e,d),c.CustomRenderGrid=l,c.open()}},outParmsAccepted:function(c){for(var b=c.length,a=!1,e=0;e<b;e++){var d=c[e];gx.fn.isOutputParm(d)&&(a=!0);if(gx.fn.isOutputParm(d)&&d.Ctrl&&gx.fn.isAccepted(d.Ctrl))return!0}return!a},
gxReturn:function(c){gx.fn.closeWindow(c)},parmId:function(c){c=gx.dom.id(c);0===c.indexOf("span_")&&(c=c.substring(5));return c},popuplvl:function(){var c=gx.popup.getPopup();return!c||!c.window?-1:c.window.gx.popup.lvl},assignPromptField:function(c,b){if(!gx.lang.emptyObject(c)&&(gx.csv.pkDirty=c.isKey,c.Ctrl)){"checkbox"==c.Ctrl.type&&c.Ctrl.value!=b&&(c.Ctrl.checked=!c.Ctrl.checked);c.Ctrl.value!=b&&c.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var a=gx.csv.ctxControlId(this.parmId(c.Ctrl)),e=
gx.O.getValidStructFld(a),d;if(!gx.lang.emptyObject(e)&&(d=gx.O.getValidStructId(e.fld)))d>gx.O.toValid&&(gx.O.toValid=d),gx.csv.validateAll();!gx.lang.emptyObject(e)&&!gx.lang.emptyObject(e.v2c)&&("date"==e.type||"dtime"==e.type)?(e.v2v(b),e.v2c()):gx.fn.setControlValue(this.parmId(c.Ctrl),b,0);c.Ctrl.setAttribute("gxvalid","0");gx.evt.execOnchange(c.Ctrl);var f=gx.dom.byId("span_"+c.Ctrl.name);null!=f&&(0===f.childNodes.length&&f.appendChild(gx.popup.gxOpener().document.createTextNode("")),f.childNodes[0].nodeValue=
b);e&&e.gxgrid&&e.gxgrid.updateControlValue(e,!1);gx.util.balloon.clear(a);d&&(gx.O.toValid=d,gx.csv.validateAll())}},autofit:function(){var c=this.getPopup();!gx.lang.emptyObject(c)&&"opened"==c.state&&this.ext.autofit(c,null,!1)},Impl:function(c,b,a,e,d,f,g,h){return new this.ext.popUp(c,a,f,h,g,e,d,"gxp",b,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader",
"PopupHeaderButton","PopupContent","PopupBorder","PopupShadow",void 0)},setZIndex:function(c){c=gx.dom.getStyle(c,"zIndex");isNaN(c)&&(c=999);c++;this.zindex=c;this.ext.zdx=c},ext:{w3c:gx.util.browser.w3c,ns4:gx.util.browser.ns4,ie5:gx.util.browser.ie5,ns6:gx.util.browser.ns6,isFF:gx.util.browser.isFirefox(),currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,hide:function(c){if(this.w3c){var b=gx.dom.byId;b(c+"_t").style.visibility="hidden";b(c+"_c").style.visibility=
"hidden";b(c+"_rs").style.visibility="hidden";b(c+"_b").style.visibility="hidden";b(c+"_s").style.visibility="hidden"}},show:function(c){var b=gx.dom.byId;b(c+"_t").style.visibility="visible";b(c+"_c").style.visibility="visible";b(c+"_rs").style.visibility="visible";b(c+"_b").style.visibility="visible";b(c+"_s").style.visibility="visible"},close:function(c,b){if(!b||!("function"==typeof b&&!1===b())){gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currIDs=null;gx.popup.ext.currRS=
null;var a=c.id,e=document.getElementById(a+"_s"),d=document.getElementById(a+"_b");gx.dom.removeControlSafe(e);a=document.getElementById(a+"_ifrm");gx.popup.ext.deinitmodal(c);gx.popup.setPopup(c.parentPopup);(e=c.callerActiveElement)&&e.focus&&e.focus();c.parentPopup?c.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[c]):gx.fx.obs.notify("popup.close",[c]);a&&(a.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?d.parentNode.removeChild(d):gx.dom.removeControlSafe(d)}},
move:function(c,b,a){if(this.w3c){var e=gx.dom.byId,d=e(c+"_b"),f=e(c+"_c"),c=e(c+"_s");d.style.left=b+"px";c.style.left=b+this.sdiff+"px";d.style.top=a+"px";c.style.top=a+this.sdiff+"px";f.style.overflow="hidden"}},resize:function(c,b,a){if(this.w3c){var e=gx.dom.byId;if(e(c+"_rs").rsEnable){var d=e(c+"_extWA"),f=e(c+"_rs"),g=e(c+"_b"),h=e(c+"_t"),k=e(c+"_s"),c=e(c+"_c"),e=this.ie5;d.style.display="block";f.style.left=Math.max(b,e?88:92)+"px";f.style.top=Math.max(a,e?68:72)+"px";g.style.width=Math.max(b+
(e?12:8),100)+"px";g.style.height=Math.max(a+(e?12:8),80)+"px";h.style.width=Math.max(b+(e?4:3),this.ns6?95:92)+"px";k.style.width=Math.max(b+12,e?100:104)+"px";k.style.height=Math.max(a+(e?12:13),e?80:86)+"px";c.style.width=Math.max(b-(e?-5:5),e?92:87)+"px";c.style.height=Math.max(a-(e?24:28),44)+"px";c.style.overflow="hidden"}}},ns6bugfix:function(){0<navigator.userAgent.indexOf("Netscape/6")&&setTimeout("self.resizeBy(0,1); self.resizeBy(0,-1);",100)},movepopup:function(){null!=this.currIDb&&this.w3c&&
this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.w3c&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(c,b){document.getElementById(b.cid+"_extWA").style.display="none";gx.popup.ext.currRS=null},startRS:function(c,b){var a=gx.popup.ext,e=a.ie5?event.clientX+gx.dom.documentScroll().scrollLeft:c.pageX,d=a.ie5?event.clientY+gx.dom.documentScroll().scrollTop:c.pageY;a.rsxoff=parseInt(b.style.left,
0)-e;a.rsyoff=parseInt(b.style.top,0)-d;a.currRS=b;a.ns6&&(document.getElementById(b.cid+"_c").style.overflow="hidden");return!1},changez:function(c){var c=null!=c?c:this,b=gx.popup.ext,a=gx.dom.byId;b.ns6&&(a(c.cid+"_c").style.overflow="hidden");a(c.cid+"_s").style.zIndex=++b.zdx;c.style.zIndex=++b.zdx;a(c.cid+"_rs").style.zIndex=++b.zdx},stopdrag:function(c,b){var a=gx.popup.ext;a.currIDb=null;document.getElementById(b.cid+"_extWA").style.display="none";a.ns6bugfix()},grab_id:function(c,b){var a=
gx.popup.ext,e=gx.dom.byId;gx.evt.mouse.update(c);var d=gx.evt.mouse.x,f=gx.evt.mouse.y;a.xoff=parseInt(e(b.cid+"_b").style.left,0)-d;a.yoff=parseInt(e(b.cid+"_b").style.top,0)-f;a.currIDb=e(b.cid+"_b");a.currIDs=e(b.cid+"_s");e(b.cid+"_extWA").style.display="block";return!1},subBox:function(c,b,a,e,d,f){d=document.createElement("div");d.setAttribute("id",f);d.style.position="absolute";d.style.left=c+"px";d.style.top=b+"px";d.style.width=a+"px";d.style.height=e+"px";d.style.visibility="visible";d.style.padding=
"0px";return d},window:function(c,b,a,e,d,f,g,h,k,l,o,n,m,p,q,t,w,v,y,A,s,u,C,K,B,M,G,N){var B=void 0!==B?B:gx.popup.showParentPopups,z=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);var D=this.win.gx.dom.byId.closure(this.win.gx.dom),d=Math.max(d,100),f=Math.max(f,80),b=new this.subBox(d-(this.ie5?12:8),f-(this.ie5?12:8),7,7,"",z+"_rs");w&&(b.innerHTML='<img src="'+y+'" width="7" height="7">',b.style.cursor="se-resize");b.rsEnable=w;var y=this.ie5?d:d+4,r=this.ie5?f:f+6,
m=new this.subBox(a+this.sdiff,e+this.sdiff,y,r,m,z+"_s");m.className=K;this.ie5?m.style.filter="alpha(opacity=50)":m.style.MozOpacity=0.5;m.style.zIndex=++this.zdx;q||(m.style.visibility="hidden");a=new this.subBox(a,e,d,f,o,z+"_b");a.className=C;a.style.display="block";a.style.zIndex=++this.zdx;q||(a.style.visibility="hidden");y=this.ie5?d-8:d-5;r=this.ie5?f+4:f-4;C=new this.subBox(2,2,y,20,l,z+"_t");C.style.overflow="hidden";C.className=A;q||(C.style.visibility="hidden");C.innerHTML='<span id="'+
z+'_gxtitle" class="PopupTitle" style="white-space:nowrap;position:absolute;padding: 2px;">'+k+'</span><span class="'+s+'" style="z-index:'+ ++this.zdx+';" id="'+z+'_cls"></span>';y=this.ie5?d-7:d-13;d=new this.subBox(2,24,y,f-36,h,z+"_c");d.className=u;"string"==typeof g?d.innerHTML=g:d.appendChild(g);d.style.overflow="hidden";q||(d.style.visibility="hidden");q||(a.style.visibility="hidden");g=new this.subBox(2,24,0,0,"",z+"_extWA");g.style.display="none";g.style.width="100%";g.style.height="100%";
a.appendChild(C);a.appendChild(d);a.appendChild(g);a.appendChild(b);N=gx.dom.el(N)||this.doc.body;N.appendChild(m);N.appendChild(a);q||this.hide(z);q=D(z+"_b");q.cid=z;q.isExt=v?!0:!1;v=D(z+"_t");v.cid=z;w&&(w=D(z+"_rs"),w.cid=z,gx.evt.attach(w,"mousedown",this.startRS.closure(this,[w],!0)),gx.evt.attach(w,"mouseup",this.stopRS.closure(this,[w],!0)));w=D(z+"_cls");q.activecolor=l;q.inactivecolor=n;gx.evt.attach(w,"click",G.close||this.close.closure(this,[c,G.beforeClose]));t&&(gx.evt.attach(v,"mousedown",
this.grab_id.closure(this,[v],!0)),gx.evt.attach(v,"mouseup",this.stopdrag.closure(this,[v],!0)),gx.evt.attach(b.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(p||B)&&this.initmodal(c,B,M)},popUp:function(c,b,a,e,d,f,g,h,k,l,o,n,m,p,q,t,w,v,y,A,s,u,C,K,B,M,G,N,z,D,r,x,E,F,H){o=gx.popup.ext;null!=c.parentPopup?(n=c.parentPopup.window,o=n.gx.popup.ext,o.win=n,o.doc=n.document,gx.popup.ext=o):(o.win=window,o.doc=o.win.document);o.win.gx.popup.setPopup(c);c.window=o.win;c.document=o.doc;
o.win.gx.popup.lvl++;h+=o.win.gx.popup.lvl;c.id=h;!c.IsPrompt&&!gx.util.sameAppUrl(k)?(gx.popup.setPopup(null),c=new Date,c=c.getTime(),h="",1==a&&(h=o.ns4?"screenX="+e+",screenY="+d:"left="+e+",top="+d),e="",b||(e=",width="+f+",height="+g),window.open(K?k:"","gx"+c,"status=no,menubar=no"+e+",resizable="+(u?"yes":"no")+",scrollbars=yes,"+h)):(k+=-1!=k.indexOf("?")?",":"?",k+=encodeURIComponent("gxPopupLevel="+o.win.gx.popup.lvl+";"),k='<iframe id="'+h+'_ifrm" src="'+k+'" width="100%" height="100%" frameborder="0" '+
(gx.HTML5?"":'scrolling="off"')+' style="overflow:auto;"></iframe>',a={close:c.close.closure(c)},o.window(c,b,e,d,f,g,k,l,m,p,t,w,v,y,A,s,u,K,z,D,r,x,E,F,H,!0,a),b=o.win.gx.dom.el(h+"_ifrm"),gx.lang.doCallTimeout(o.showIfLoaded,o,[c,b,1],50))},initmodal:function(c,b,a){c.showParentPopups=b;null==c.parentPopup?gx.ajax.disableForm(a):b?(b=gx.http.notification.node(),c=gx.dom.el(c.id+"_b"),b&&c&&(b.style.zIndex=parseInt(c.style.zIndex,0)-1)):this.hide(c.parentPopup.id)},deinitmodal:function(c){if(null==
c.parentPopup)gx.ajax.enableForm();else{if(c.showParentPopups){var b=gx.http.notification.node(),a=gx.dom.el(c.parentPopup.id+"_b");b&&a&&(b.style.zIndex=parseInt(a.style.zIndex,0)-1)}this.show(c.parentPopup.id);(b=c.parentPopup.frameWindow)&&b.gx&&c.parentPopup.frameWindow.gx.ajax.enableForm()}},isPDF_IE:function(c){this.isPdf=!1;var b=c.src;if(gx.util.getContentTypeFromExt(b)==gx.util.contentTypes.pdf)return this.isPdf=!0;var a=!0;try{if(a=c.contentDocument,a=c.contentWindow.document,a.contentType==
gx.util.contentTypes.pdf)return this.isPdf=!0}catch(e){a=!1}if(!1===a){var d,c={};c.url=b;c.method="HEAD";c.sync=!0;c.handler=function(a,b,c){d=c.getResponseHeader("Content-Type")};c.obj=!0;gx.http.doCall(c);if(d&&0<=d.indexOf(gx.util.contentTypes.pdf))return this.isPdf=!0}return!1},showIfLoaded:function(c,b,a){try{if(c.isActive()&&(this.docReady(b,a)||10<a&&void 0===this.isPdf&&this.isPDF_IE(b))){var e=gx.dom.iFrameDoc(b),d=!1;try{d=e&&"about:blank"!=e.URL}catch(f){}var g=this.isPdf||this.isPDF_IE(b);
if(d||g){c.state="opened";this.autofit(c,e,!0);return}}}catch(h){gx.dbg.logEx(h,"gxpopup.js","showIfLoaded")}a++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[c,b,a],50*a)},docReady:function(c,b){if("complete"==c.readyState)return!0;var a=gx.dom.iFrameDoc(c);if(a){var e;try{e="undefined"!=typeof a.gxReadyState?a.gxReadyState:a.readyState}catch(d){return!0}if("complete"==e)return!0}return!gx.util.browser.isIE()&&10<=b&&a&&a.body&&0!==a.body.childNodes.length?!0:!1},autofit:function(c,
b,a){if(!gx.lang.emptyObject(c)){var e=document;c.zindex=null!=e.gxPopup?this.zdx+e.gxPopup.zindex:this.zdx;var d=c.id;this.doc||(this.doc=c.document);var e=this.doc,f=e.getElementById(d+"_ifrm");!b&&gx.popup.ispopup()&&(b=gx.dom.iFrameDoc(f));c.frameDocument=b;c.frameWindow=f.contentWindow;b&&!this.isPdf&&(b.gxPopup=c);var f=e.getElementById(d+"_rs"),g=e.getElementById(d+"_s"),h=e.getElementById(d+"_t"),k=e.getElementById(d+"_b"),l=e.getElementById(d+"_c"),o=e.getElementById(d+"_gxtitle"),n=parseInt(l.style.height,
0),m=parseInt(l.style.width,0),p,q,t,w,v=0,y=0;p=gx.util.getWindowInfo().canAccessFrame;o.innerHTML=b&&!this.isPdf?b.title:"";if(!p||window==window.top||gx.lang.emptyObject(window.top))p=window.innerWidth||e.documentElement.clientWidth||e.body.offsetWidth,q=window.innerHeight||e.documentElement.clientHeight||e.body.offsetHeight,t=gx.dom.documentScroll(e).scrollTop,w=gx.dom.documentScroll(e).scrollLeft;else{var A=gx.dom.position(window.frameElement);window.top.document.body.clientHeight>e.body.clientHeight?
q=e.body.clientHeight:(q=window.top.document.body.clientHeight,y=A.y);t=e.body.scrollTop;w=e.body.scrollLeft;p=Math.min(window.top.document.body.clientWidth,e.body.clientWidth);window.top.document.body.clientWidth>e.body.clientWidth?p=e.body.clientWidth:(p=window.top.document.body.clientWidth,v=A.x)}A=gx.dom.dimensions(k);c.autoresize||(n=c.height-n+A.h,m=c.width-m+A.w);var s=c.width-m,u=c.height-n;if(c.autoresize)if(!this.isPdf&&b&&b.body){s=b.body.scrollWidth+30-p;e=b.body.scrollHeight+30-q;u=0;
if(b.body.scrollWidth>p)var C=b.body.scrollWidth-b.body.clientWidth,u=u+(a&&0<C?C:0);s=Math.max(b.body.scrollWidth,o.clientWidth+15)-m-(0<s?s:0)+u;u=b.body.scrollHeight-n-(0<e?e:0)}else this.isPdf&&(s=e.body.clientWidth/2,u=e.body.clientHeight/2);b=parseInt(c.top,0);n=parseInt(c.left,0);if(!c.position&&(b=(q-u)/2-A.h/2+t-y,n=(p-s)/2-A.w/2+w-v,0>b&&(b=5,u-=5),0>n))n=5,s-=5;k.style.top=parseInt(b,0)+"px";k.style.left=parseInt(n,0)+"px";g.style.top=parseInt(b,0)+this.sdiff+"px";g.style.left=parseInt(n,
0)+this.sdiff+"px";c.autoresize?(c=function(a,b){var c=parseInt(a,0)+b;return c>0?c:a},h.style.width=c(h.style.width,s)+"px",k.style.height=c(k.style.height,u)+"px",k.style.width=c(k.style.width,s)+"px",l.style.height=c(l.style.height,u)+"px",l.style.width=c(l.style.width,s)+"px",h=gx.util.browser.isIE()?0:4,g.style.height=parseInt(k.style.height,0)+h+"px",g.style.width=parseInt(k.style.width,0)+h+"px",h=gx.util.browser.isIE()?4:2,f.style.top=parseInt(k.style.height,0)-parseInt(f.style.height,0)-
h+"px",f.style.left=parseInt(k.style.width,0)-parseInt(f.style.width,0)-h+"px"):(n=c.height,m=c.width,c=this.ie5,f.style.left=Math.max(m,c?88:92)+"px",f.style.top=Math.max(n,c?68:72)+"px",k.style.width=Math.max(m+(c?12:8),100)+"px",k.style.height=Math.max(n+(c?12:8),80)+"px",h.style.width=Math.max(m+(c?4:3),this.ns6?95:92)+"px",g.style.width=Math.max(m+12,c?100:104)+"px",g.style.height=Math.max(n+(c?12:13),c?80:86)+"px",l.style.width=Math.max(m-(c?-5:5),c?92:87)+"px",l.style.height=Math.max(n-(c?
24:28),44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(l.style["overflow-y"]="auto",l.style["-webkit-overflow-scrolling"]="touch"):l.style.overflow="hidden";a&&this.show(d)}},_init:function(){this.w3c=gx.util.browser.w3c;this.ns4=gx.util.browser.ns4;this.ie5=gx.util.browser.ie5;this.ns6=gx.util.browser.ns6;setInterval(gx.popup.ext.movepopup.closure(gx.popup.ext),40)}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var c=this.getPopup();if(c){try{c.frameDocument&&
(c.frameDocument.gxPopup=c)}catch(b){c.frameDocument=c.frameWindow.document,gx.dbg.logEx(b,"gxpopup.js","_init")}c=c.window.gx.popup;gx.fx.obs.addObserver("gx.onload",c,function(){this.autofit()}.closure(c));gx.fx.obs.addObserver("grid.onafterrefresh",c,function(a,b,c){b<c&&this.autofit()}.closure(c));gx.fx.obs.addObserver("gx.onafterevent",c,function(){this.autofit()}.closure(c))}}}}();
gx.ajax={reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,timeoutActions:{ignore:0,warn:1},maxGETLength:function(c){return c.AjaxSecurity?600:1350},getImageUrl:function(c,b){var a=c[b];if(gx.lang.emptyObject(a))return"";"object"==typeof a&&(c[b]=gx.ajax.imageGuidToUrl(a.guid));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c[b],!0)},imageGuidToUrl:function(c){try{if(!gx.lang.emptyObject(this.resourceProvider)){var b=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(c)+
",,"+encodeURIComponent(gx.theme);gx.http.callBackend("",b,")",!0,gx.http.modes.none,!0,"GET",null,!0);return gx.http.lastResponse}}catch(a){gx.dbg.logEx(a,"gxcallrpc.js","getImageUrl")}return c},sendHeader:function(c){try{if(!gx.lang.emptyObject(this.resourceProvider))return gx.http.callBackend("",location.href,")",!0,gx.http.modes.none,!0,"HEAD",null,!0,!0,c),!0}catch(b){}return!1},encryptParms:function(c,b){return c.AjaxSecurity?gx.sec.encrypt(b):b},doPost:function(c,b){if(!gx.evt.processing||
gx.csv.validating){gx.evt.setProcessing(!0);gx.ajax.disableForm();gx.fx.obs.notify("gx.onbeforeevent",[c,b]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);var a=this.getPostInfo(c,b);a.onReady=function(){gx.evt.setProcessing(!1)};gx.http.doCall(a)}},getPostInfo:function(c,b){var a=gx.ajax.selfUrl(),e=/\?(.*)/,a=e.test(a)?a.replace(e,"?"+c+",$1"):a+("?"+c),e={};e.url=a;e.formNode=gx.dom.form();e.method="POST";e.encoding="UTF-8";e.useCash=!1;!0===b&&(e.sync=!0);e.handler=gx.http.postHandler;
this.multipartInfo(e);return e},multipartInfo:function(c){var b=!1,a=c.formNode.getElementsByTagName("input"),e=a.length;if(e){for(var d=0;d<e;d++)if("file"==a[d].getAttribute("type")&&!gx.lang.emptyObject(a[d].value)){b=!0;break}b&&(c.multipart=!0,c.mimetype="text/html",c.formNode.encoding="multipart/form-data")}},dispatchCommands:function(c){if(c&&0<c.length)for(var b=c.length,a=0;a<b;a++){var e=c[a];e.redirect&&(e.redirect.url=gx.ajax.removeGXParms(e.redirect.url));e.print&&gx.printing.print(e.print);
if(e.close){var d=[];e.close instanceof Array&&(d=e.close);gx.fn.closeWindow(d)}"undefined"!=typeof e.refresh&&("GET"==e.refresh?gx.http.reload():(d="RFR",gx.O.IsMasterPage&&(d+="_MPAGE"),gx.O.executeServerEvent(d,!0)));e.redirect&&gx.http.redirect(e.redirect.url,e.redirect.forceDisableFrm);if(e.popup){c.length>a+1&&(e.popup[7]=c.slice(a+1));e.popup[0]=gx.http.formatLink(e.popup[0]);gx.popup.open(e.popup);break}if(e.ucmethod){var f=gx.getObj(e.ucmethod.CmpContext,e.ucmethod.IsMasterPage);f&&(d=gx.O,
gx.setGxO(f.CmpContext,f.IsMasterPage),(f=gx.O.getUserControl(e.ucmethod.Control))&&"function"==typeof f[e.ucmethod.Method]&&f[e.ucmethod.Method].apply(f,e.ucmethod.Parms),gx.setGxO(d.CmpContext,d.IsMasterPage))}}},willLeavePage:function(c){if(c)for(var b=c.length,a=0;a<b;a++)if(c[a].close)return!0;return!1},hasRedirectCommand:function(c){if(c)for(var b=c.length,a=0;a<b;a++){var e=c[a];if(e.popup)break;if(e.redirect)return!0}return!1},setPostResponse:function(c){var b=gx.fn,a=gx.lang.doCall,e=this.willLeavePage(c.gxCommands);
gx.evt.srvCommand?(gx.evt.srvCommand=!1,a(gx.ajax.dispatchCommands,c.gxCommands)):this.hasRedirectCommand(c.gxCommands)?a(gx.ajax.dispatchCommands,c.gxCommands):e?a(gx.ajax.dispatchCommands,c.gxCommands):(a(b.setPostHiddens,c.gxHiddens),a(b.setPostComponents,c.gxComponents,c.DynComponentMap,c.gxHiddens,function(){gx.http.loadStyles();gx.updateTheme();gx.fn.installComponents(!1);a(b.setPostValues,c.gxValues);a(b.setPostProperties,c.gxProps);gx.util.balloon.clearAll();b.enableDisableDelete();a(b.loadPostGrids,
c.gxGrids);a(b.setErrorViewer,c.gxMessages);b.objectPostback();b.setFocusAfterLoad();gx.popup.currentPopup||gx.ajax.enableForm();gx.dom.indexElements();a(gx.ajax.dispatchCommands,c.gxCommands)}));return e},swallowKeys:function(c){c.cancel=!0},disableForm:function(c){c=void 0===c||c;0<gx.http.notification._delay?(this.dfTimer&&clearTimeout(this.dfTimer),this.dfTimer=setTimeout(gx.http.notification.show,gx.http.notification._delay)):gx.http.notification.show();c&&gx.fx.obs.addObserver("gx.keypress",
this,this.swallowKeys)},enableForm:function(){this.dfTimer&&0<gx.http.notification._delay&&clearTimeout(this.dfTimer);gx.http.notification.hide();gx.fx.obs.deleteObserver("gx.keypress",this,this.swallowKeys)},isFormEnabled:function(){return!gx.http.notification.isVisible()},executeCliEvent:function(c,b){try{var a,e=gx.lang.emptyObject;if(!e(b)){var d=gx.fn.rowGridId(b);if(!e(d)){var f=gx.fn.getGridObj(d);e(f)||(a=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(d)||"0001",f.instanciateRow(a))}}gx.O[c].call(gx.O,
a)}catch(g){gx.dbg.logEx(g,"gxcallrpc.js","executeCliEvent")}},suggest:function(c,b,a,e,d,f){c=new gx.fx.suggestProvider(c,b,a);new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(b),c,b,e,d,f)},hideCode:function(c,b,a){for(var a="gx.fn.setVarValues("+gx.lang.arrayToSource(a)+",",e=this.objectUrl()+"?",b="gxajaxHideCode_"+b,d=c.length,f=0;f<d;f++)b+=","+encodeURIComponent(eval(c[f]));e+=gx.ajax.encryptParms(gx.O,b);gx.http.callBackend(a,e,")",!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(c,
b,a){var e=a?"gx.fn.setGridComboValues":"gx.fn.setComboValues",a=a?b:gx.fn.screen_CtrlRef(b).name,e=e+"('"+a+"',",a=this.objectUrl()+"?",c="gxajaxCallCrl_"+b+","+this.arrayToUrl(c),a=a+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(e,a,")",!0,gx.http.modes.retval)},refreshGrid:function(c,b){var a=this.objectUrl()+"?",e="gxajaxGridRefresh_"+c.gridName+","+b;gx.fx.obs.notify("grid.onbeforerefresh",[c]);c.autoRefreshing=!0;gx.csv.autoRefreshing=c;var d=c.grid.rows.length;c.setPagingVars(0,0);if(e.length>
gx.ajax.maxGETLength(gx.O)){for(var e=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+c.gridName)],f=b.split(","),g=0,h=f.length;g<h;g++)e.push("GXParm"+g+"="+f[g]);gx.http.callBackend("",a,")",!1,gx.http.modes.full,!1,"POST",e.join("&"))}else e=gx.ajax.encryptParms(gx.O,e),gx.http.callBackend("",a+e,")",!1,gx.http.modes.full);gx.csv.autoRefreshing=null;gx.fx.obs.notify("grid.onafterrefresh",[c,d,c.grid.rows.length]);c.autoRefreshing=!1},newRows:function(c,b,a,e,d,f,g,h){var k="gx.fn.gridObj('"+
c+"','"+a+"',"+b.toString()+"').setNewRows(",l=this.objectUrl()+"?",e="gxajaxNewRow_"+a+","+e+","+d+","+f,c=gx.fn.gridObj(c,g?a+"_"+g:a,b);gx.O.IsComponent&&(e+=","+gx.O.CmpContext);for(b=0;b<c.postingVariables.length;b++)e+=","+encodeURIComponent(c.parentObject[c.postingVariables[b]]);l+=gx.ajax.encryptParms(gx.O,e);gx.http.callBackend(k,l,")",!0,gx.http.modes.none);if(k=gx.http.lastResponse)k=gx.json.evalJSON(k),h.call(c,k),gx.dom.indexElements()},loadCrl:function(c,b,a){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=
0;else{var a="gx.fn.setVarValues("+gx.lang.arrayToSource(a)+",",e=this.objectUrl()+"?",c="gxajaxExecAct_"+c+","+this.arrayToUrl(b),e=e+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(a,e,")",!0,gx.http.modes.retval)}},udp:function(c,b,a){var a="gx.fn.setVarValues("+gx.lang.arrayToSource(a)+",",e=this.objectUrl()+"?",c=c+","+this.arrayToUrl(b),e=e+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(a,e,")",!0,gx.http.modes.retval)},srvEvt:function(c,b,a,e){var e="gx.fn.setVarValues("+gx.lang.arrayToSource(e)+
",",d=this.objectUrl()+"?",c=c+","+b+","+this.arrayToUrl(a),d=d+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(e,d,")",!0,gx.http.modes.full)},validSrvEvt:function(c,b,a,e){var e="gx.csv.setValidValues("+gx.lang.arrayToSource(a)+","+gx.lang.arrayToSource(e)+",",d=this.objectUrl(),f=c+","+b+","+this.arrayToUrl(a,!0);f.length>this.maxGETLength(gx.O)?this.validAsPost(d,e,c,b,a):(d+="?"+gx.ajax.encryptParms(gx.O,f),gx.http.callBackend(e,d,")",!0,gx.http.modes.call,!gx.ajax.isFormEnabled()))},validAsPost:function(c,
b,a,e,d){a="GXEvent="+gx.ajax.encryptParms(gx.O,a)+"&GXAction="+e;0<d.length&&(a+="&"+this.getParmsPostData(d));gx.http.callBackend(b,c,")",!0,gx.http.modes.call,!1,"POST",a)},getParmsPostData:function(c){for(var b="",a=0;a<c.length;a++)0<a&&(b+="&"),b+="GXParm"+a+"="+this.parmToUrl(c[a],!0);return b},getCallerUrl:function(c){if(gx.stackSupported()){var c=(c=gx.call_stack_storage.get(gx.stackId(c)))||[],b=1==c.length&&c[0]!=gx.ajax.selfUrl()?c[0]:"";return b=1<c.length?c[c.length-2]:b}return gx.fn.getControlValue("sCallerURL")},
pushReferer:function(c,b){b="undefined"==typeof b?location.href:gx.ajax.absoluteurl(b);if(gx.stackSupported()){"undefined"==typeof c&&(c=gx.popup.popuplvl());var a=gx.call_stack_storage.get(gx.stackId(c)),a=a||[];b!=gx.util.lastArray(a)&&a.push(b);gx.call_stack_storage.set(gx.stackId(c),a)}else{var a=this.objectUrl()+"?",e="dyncall,PushReferer,"+encodeURIComponent(b),a=a+gx.ajax.encryptParms(gx.O,e);gx.http.callBackend("",a,"",!0,gx.http.modes.none,!0)}},windowClosed:function(c){if(gx.stackSupported())if(-1==
c){var b=gx.stackId(gx.popup.popuplvl()),c=(c=gx.call_stack_storage.get(b))||[];c.pop();gx.call_stack_storage.set(b,c)}else gx.call_stack_storage.remove(gx.stackId(c));else b="",b=-1==c?",PopReferer":",DeleteReferer,"+c.toString(),c=this.objectUrl()+"?",c+=gx.ajax.encryptParms(gx.O,"dyncall"+b),gx.http.callBackend("",c,"",!0,gx.http.modes.none,!0)},aggSel:function(c,b,a){var e=this.objectUrl()+"?",c="gxajaxAggSel"+b+"_"+c+","+this.arrayToUrl(a),e=e+gx.ajax.encryptParms(gx.O,c);return gx.http.callBackend(null,
e,"",!1,gx.http.modes.retval)[0]},aggSelDecimal:function(c,b,a,e,d){return gx.num.parseFloat(this.aggSel(c,b,d),a,e)},aggSelInteger:function(c,b,a){return parseInt(this.aggSel(c,b,a),10)},dynComponent:function(c,b,a,e){c=c.toLowerCase();gx.gen.isDotNet()&&(c+=".aspx");c=gx.ajax.objectUrl(c);a="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(a)+"&GXParm0="+encodeURIComponent(e);for(e=0;e<b.length;e++)a+="&GXParm"+(e+1).toString()+"="+encodeURIComponent(b[e]);gx.http.callBackend("",
c,")",!0,gx.http.modes.none,!0,"POST",a);return gx.json.evalJSON(gx.http.lastResponse)},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(c){return c.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},arrayToUrl:function(c,b){for(var a="",e=c.length,d=0;d<e;d++)a+=this.parmToUrl(c[d],b)+",";return a},parmToUrl:function(c,b){var a=eval(c);if(a instanceof Array&&2==a.length&&"string"==typeof a[0]&&"string"==typeof a[1]){var e=gx.fn.vStructForVar(a[0]);null!=e&&(a=gx.fn.getGridCtrlProperty(e.grid,
e.fld,a[1]))}b&&(e=gx.fn.vStructForVar(gx.unprefixVar(c)),null!=e&&gx.html.controls.isMultiSelection(e.ctrltype)&&(e=gx.fn.getControlGridRef(e.fld,e.grid),(e=gx.dom.comboBoxToObj(e,a))&&(a=e)));"object"==typeof a&&(a=gx.json.serializeJson(a));if("undefined"==typeof a||null==a){e=!1;if(c&&0===c.indexOf("gx.O.")){var c=gx.unprefixVar(c),d=gx.fn.getHidden(gx.O.CmpContext+c);null!=d&&"undefined"!=typeof d&&(a=d,e=!0)}e||(a="")}return encodeURIComponent(a)},objectUrl:function(c){var b="";c?b=c:(b=gx.csv.cmpCtx?
gx.fn.getControlValue(gx.csv.cmpCtx+"_CMPPGM"):gx.ajax.selfUrl(),null!=b&&(b=b.replace(/\?.*/,""),b=b.replace(/#[\s\S]*$/,"")),b=this.objnameFromUrl(b));return this.absoluteurl(this.objToRelativeUrl(b))},objToRelativeUrl:function(c){if(this.isabsoluteurl(c))return c;var b=location.pathname;if(null!=c){for(var a=location.pathname.split("/"),b="",e=a.length,d=1;d<e-1;d++)b+="/"+a[d];b+="/"+c}return b},isabsoluteurl:function(c){return-1!=c.search("://")},isRelativeToHost:function(c){return"/"==c.substr(0,
1)},absoluteurl:function(c){if(!this.isabsoluteurl(c)){if("/"!=c.charAt(0)){for(var b="",a=location.pathname.split("/"),e=1;e<a.length-1;e++)b+="/"+a[e];return location.protocol+"//"+location.host+b+"/"+c}return location.protocol+"//"+location.host+c}return c},objnameFromUrl:function(c){0<=c.indexOf("?")&&(c=c.split("?")[0]);var b=c.split("/"),a=b.length;return 0===a?c:b[a-1]},_init:function(){this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER");if(gx.stackSupported()){var c=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));
if(c)for(var b=0;b<c.length;b++)gx.ajax.pushReferer(gx.popup.popuplvl(),c[b]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}};
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){this.init=function(c,b){this.id=c;this.balloonid=c+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.quirksCompatMode=gx.csv.compatibleOverlapMode&&gx.csv.overlap&&("top"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition);this.sourceElements=b||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr="";this.active=!1;this.errorValue=
null;gx.util.balloon.lastLbl=null};this.setMessage=function(c){this.hasMessage||(this.messageWar=c,this.hasMessage=!0)};this.setError=function(c){this.hasMessage||(this.messageErr=c,this.hasMessage=this.isError=!0)};this.create=function(c,b,a,e){var d;d=document.createElement("span");d.id=c;d.className=a;c=document.createElement("div");if(this.quirksCompatMode){var f=gx.dom.position(b);0===f.x&&(0===f.y&&b.parentNode)&&(f=gx.dom.position(b.parentNode));var g=parseInt(f.x,10),f=parseInt(f.y,10);0>=
g&&(g=10);0>=f&&(f=20);c.style.position="absolute";"top"==gx.csv.messagePosition&&(c.style.top=f-gx.dom.dimensions(b).h-4-2+"px",c.style.left=g+"px");"bottom"==gx.csv.messagePosition&&(c.style.top=f+gx.dom.dimensions(b).h+2+"px",c.style.left=g+"px");c.style.zIndex=1}else c.style.position="relative";d.style.display="none";d.style.className=a;a=document.createTextNode(e);d.appendChild(a);c.appendChild(d);this.quirksCompatMode?document.body.appendChild(c):("right"==gx.csv.messagePosition||"bottom"==
gx.csv.messagePosition?(e=(a=b.nextSibling)?a.firstChild:null,a&&(a.id&&a.id=="span_"+this.id)&&(a=a.nextSibling),a&&a.id&&0<a.id.indexOf("dp_trigger")?b=a:a&&("A"==a.nodeName&&e&&"IMG"==e.nodeName&&e.id&&0===e.id.indexOf("PROMPT_"))&&(b=a),b.parentNode.insertBefore(c,b.nextSibling)):b.parentNode.insertBefore(c,b),!0===gx.csv.overlap)?(d.style.position="absolute",d.style.zIndex="1"):d.style.position="relative";return d};this.getControlValue=function(){for(var c=[gx.fn.getControlValue(this.id)],b=
0,a=this.sourceElements.length;b<a;b++)c.push(gx.fn.getControlValue(this.sourceElements[b]));return c.join(";")};this.groupControl=function(c){c=gx.dom.el(c);"INPUT"===c.nodeName&&"radio"===c.type&&(c=c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,"table"));return c};this.hideBalloon=function(c){try{c&&(c.style.display="none",c.parentNode.style.display="none")}catch(b){gx.dbg.logEx(b,"gxballoon.js","hideBalloon")}};this.showBalloon=function(c){try{var b=gx.dom.el(this.id);
if(this.quirksCompatMode)c.style.display="block","top"==gx.csv.messagePosition&&(!this.quirksCompatMode&&!0===gx.csv.overlap)&&(c.style.top=0-gx.dom.dimensions(c).h+"px"),c.parentNode.style.display="inline";else if(c.style.display="inline",!this.quirksCompatMode)if("right"==gx.csv.messagePosition||"left"==gx.csv.messagePosition)c.parentNode.style.display="inline","left"==gx.csv.messagePosition&&!0===gx.csv.overlap&&(c.parentNode.style.left=0-gx.dom.dimensions(c).w+"px");else{if("bottom"==gx.csv.messagePosition&&
!0===gx.csv.overlap){c.parentNode.style.display="inline";if(!c.parentNode.style.left){var a=0-(gx.dom.position(c).x-gx.dom.position(b).x);c.parentNode.style.left=a-1+"px"}c.parentNode.style.top=gx.dom.dimensions(b).h+"px";c.style.top="0px"}"top"==gx.csv.messagePosition&&!0===gx.csv.overlap&&(c.style.top=0-gx.dom.dimensions(c).h-2+"px")}}catch(e){gx.dbg.logEx(e,"gxballoon.js","showBalloon")}};this.show=function(c){var b,a,e,d,f,g,h,k,l,o;if(!(void 0!==document.readyState&&"complete"!=document.readyState)){try{if(!1===
this.hasMessage)return!0;a=gx.dom.el(this.id);null===a&&null!==gx.csv.validatingUC&&(a=gx.csv.validatingUC.getContainerControl());"hidden"==a.type?(b=gx.dom.el("span_"+this.id),null!==b&&(a=b)):"INPUT"===a.nodeName&&"radio"===a.type&&(k=gx.dom.byName(gx.dom.id(a)),a.parentNode&&"SPAN"==a.parentNode.tagName?a=a.parentNode:(h=k[0],a=gx.dom.findParentByTagName(a,"table")));if(k){b=[];l=0;for(o=k.length;l<o;l++)b.push(k[l]);k=b}else{k=[a];l=0;for(o=this.sourceElements.length;l<o;l++)k.push(gx.dom.el(this.sourceElements[l]))}this.active=
f=!0;0<this.messageErr.length?(e="Error",d=this.messageErr):0<this.messageWar.length&&(e="Warning",d=gx.html.encode(this.messageWar));""!==e&&(b=e+"Messages",gx.dom.addPrefixClass(a,e),(g=gx.dom.byId(this.balloonid))?(g.innerHTML=d,g.className=b,f=!1):g=this.create(this.balloonid,h?h:a,b,d));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);gx.util.balloon.lastLbl=g;!0===c?gx.csv.oneAtAtime||this.showBalloon(g):this.showBalloon(g);if(!1===gx.util.balloon.timerOn&&
0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(f){gx.csv.oneAtAtime&&(gx.evt.attach(a,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(a,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this)));o=k.length;for(l=0;l<o;l++)"INPUT"===k[l].nodeName&&"radio"===k[l].type?gx.evt.attach(k[l],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(k[l],"blur",gx.util.balloon.cvsHide,
this)}this.errorValue=this.getControlValue()}catch(n){gx.dbg.logEx(n,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var c,b,a;try{c=this.groupControl(this.id),a=this.getControlValue(),a!=this.errorValue&&(this.errorValue=a,b=gx.dom.byId(this.balloonid),null!=b&&(gx.dom.removePrefixClass(c,"Error"),gx.dom.removePrefixClass(c,"Warning"),this.hideBalloon(b),this.active=!1))}catch(e){}},cvsMouseOutHandler:function(){if(this.active){var c=gx.dom.byId(this.balloonid);null!=c&&(gx.util.balloon.lastLbl?
gx.util.balloon.lastLbl.id!=c.id&&this.hideBalloon(c):this.hideBalloon(c))}},cvsMouseOverHandler:function(){if(this.active){var c=gx.dom.byId(this.balloonid);null!=c&&this.showBalloon(c)}},clearAll:function(){var c,b,a;this.timerOn=!1;for(a in this.balloons)c=this.balloons[a],b=gx.util.balloon.cvsHide.closure(c),c.clear(),b()},clear:function(c){var b,a,e;try{b=gx.csv.ctxControlId(c),this.balloons[b]&&(a=this.balloons[b],e=gx.util.balloon.cvsHide.closure(a),a.clear(),e())}catch(d){gx.dbg.logEx(d,"gxballoon.js",
"clear")}},getNew:function(c,b,a){var a=a||[],e,d,f,g=a.length;"undefined"!=typeof b&&(c=c+"_"+b);try{e=gx.fn.screen_CtrlRef(c);d=gx.dom.id(e);c=gx.csv.ctxControlId(d);for(f=0;f<g;f++)e=gx.fn.screen_CtrlRef(a[f]),d=gx.dom.id(e),a[f]=gx.csv.ctxControlId(d)}catch(h){gx.dbg.logEx(h,"gxballoon.js","getNew")}this.balloons[c]?(b=this.balloons[c],b.sourceElements=a||[],b.clear()):(b=new this.impl,this.balloons[c]=b,b.init(c,a));return b}};
gx.grid={drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3},getImplClass:function(c,b){if(b){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,gx.grid.impl,!0);gx.lang.inherits(b,gx.ui.grid,!0);var a=new b;
c&&(a.ParentObject=c.parentObject,a.ControlName=c.gridName,c.parentObject.setUserControl(a));return a}return new gx.grid.impl("gx")},validGridColsValue:function(c){var b=c,b=void 0!=c?c:1;return 0!=b?b:9999},grid:function(c,b,a,e,d,f,g,h,k,l,o,n,m,p,q,t,w,v,y,A,s,u,C,K,B,M,G,N,z,D){this.parentObject=c;this.gridLvl=b;this.gridLvlName=a;this.gridId=e;this.gridName=d;this.realGridName=f;this.containerName=g||this.gridName+"Container";this.parentName=l||"";this.pagingParms=[];this.lvlKey=o||[];this.isFreestyle=
n||!1;this.allowHovering=(this.allowSelection=p||!1)&&q||!1;this.allowCollapsing=z||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=K||!1;this.hasAddlines=B||!1;this.hasForEachLine=M||!1;this.width=void 0!=s?s:0;this.widthUnit=u||"";this.gridCols=void 0!=m?m:1;this.gridCols=0!=this.gridCols?this.gridCols:9999;this.gridRows=void 0!=t?t:5;this.usePaging=(this.usePaging=w||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=
0;this.defaultDragable=v||!1;this.defaultSetsContext=y||!1;this.boundedCollType=A||"";this.boundedCollName=D||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=h;this.isMasterPageGrid=k;this.htmlTags="";this.onLineActivate=N;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.implClass=G;this.grid=gx.grid.getImplClass(this,G);this.grid.ownerGrid=
this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=
this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxCmpContext=this.gxComponentContext;this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;
this.grid.gxNewRowText=void 0!=C?C:"New Row";this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.gxCreateGridCode=function(a){return new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+a,this.gridName,this.containerName+"_"+a,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,
this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaulSetsContext,this.boundedCollType,this.width,this.widthUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing)}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.addColumnDinCode=
function(a,b){this.gxAddColumnsCode.push(function(){a.apply(this,b)})};this.addSingleLineEdit=function(a,b,c,e,d,f,g,h,k,l,m,o,n,q,p,s,t,u,v,w){this.addColumnDinCode(this.addSingleLineEdit,arguments);var r=this.newColumn(e,g,o,h);r.visible=t;r.htmlName=c;r.gxId=b;r.gxAttId=a;r.gxAttName=f;r.gxTooltip=d;r.gxWidthUnit=k;r.gxColSize=m;r.gxSetsContext=v;r.gxControl=new gx.html.controls.singleLineEdit;r.gxControl.column=r;r.gxControl.isPassword=w;r.gxControl.visible=r.visible;r.gxControl.dataType=r.type;
r.gxControl.clickEvent=n;this.grid.addColumn(r)};this.addPostingVar=function(a){this.postingVariables.push(a)};this.addMultipleLineEdit=function(a,b,c,e,d,f,g,h,k,l,m,o,n,q,p,t,s){this.addColumnDinCode(this.addMultipleLineEdit,arguments);var r=this.newColumn(e,f,n,g);r.visible=p;r.htmlName=c;r.gxId=b;r.gxAttId=a;r.gxAttName=d;r.gxWidthUnit=h;r.gxSetsContext=t;r.gxControl=new gx.html.controls.multipleLineEdit;r.gxControl.column=r;r.gxControl.dataType=r.type;r.gxControl.visible=r.visible;r.gxControl.heightUnit=
l;r.gxControl.clickEvent=q;this.grid.addColumn(r)};this.addBlob=function(a,b,c,e,d,f,g,h,k,l,m,o,n){this.addColumnDinCode(this.addBlob,arguments);var q=this.newColumn(e,f,"left",k);q.visible=o;q.htmlName=c;q.gxId=b;q.gxAttId=a;q.gxAttName=d;q.gxWidthUnit=m;q.gxSetsContext=n;q.gxControl=new gx.html.controls.blob;q.gxControl.column=q;q.gxControl.dataType=q.type;q.gxControl.visible=q.visible;q.gxControl.height=h;q.gxControl.width=k;this.grid.addColumn(q)};this.addRadioButton=function(a,b,c,e,d,f,g,h,
k,l){this.addColumnDinCode(this.addRadioButton,arguments);var m=this.newColumn(e,f,"left","");m.visible=k;m.htmlName=c;m.gxId=b;m.gxAttId=a;m.gxAttName=d;m.gxSetsContext=l;m.gxControl=new gx.html.controls.radio;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.vertical=h;m.gxControl.visible=m.visible;m.gxControl.clickEvent=g;this.grid.addColumn(m)};this.addComboBox=function(a,b,c,e,d,f,g,h,k,l,m,q){this.addColumnDinCode(this.addComboBox,arguments);var o=this.newColumn(e,f,"left",m);o.visible=
k;o.htmlName=c;o.gxId=b;o.gxAttId=a;o.gxAttName=d;o.gxSetsContext=l;o.gxWidthUnit=q;o.gxControl=new gx.html.controls.comboBox;o.gxControl.column=o;o.gxControl.dataType=o.type;o.gxControl.rtEnabled=1==h;o.gxControl.visible=o.visible;o.gxControl.clickEvent=g;this.grid.addColumn(o)};this.addListBox=function(a,b,c,e,d,f,g,h,k,l,m,o,q){this.addColumnDinCode(this.addListBox,arguments);var n=this.newColumn(e,f,"left",m);n.visible=k;n.htmlName=c;n.gxId=b;n.gxAttId=a;n.gxAttName=d;n.gxSetsContext=l;n.gxWidthUnit=
o;n.gxControl=new gx.html.controls.listBox;n.gxControl.column=n;n.gxControl.dataType=n.type;n.gxControl.rows="undefined"!=typeof q?q:4;n.gxControl.rtEnabled=1==h;n.gxControl.visible=n.visible;n.gxControl.clickEvent=g;this.grid.addColumn(n)};this.addCheckBox=function(a,b,c,e,d,f,g,h,k,l,m,o,n,q){this.addColumnDinCode(this.addCheckBox,arguments);var p=this.newColumn(e,g,"left",n);p.visible=m;p.htmlName=c;p.gxId=b;p.gxAttId=a;p.gxAttName=f;p.gxChecked=h;p.gxUnChecked=k;p.gxSetsContext=o;p.gxWidthUnit=
q;p.gxControl=new gx.html.controls.checkBox;p.gxControl.column=p;p.gxControl.checkedValue=h;p.gxControl.uncheckedValue=k;p.gxControl.dataType=p.type;p.gxControl.visible=p.visible;p.gxControl.clickEvent=l;this.grid.addColumn(p)};this.addBitmap=function(a,b,c,e,d,f,g,h,k,l){this.addColumnDinCode(this.addBitmap,arguments);var m=this.newColumn(l,"","left",e);m.htmlName=b;m.gxId=c;m.gxAttId=a;m.gxWidthUnit=d;m.gxControl=new gx.html.controls.image;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.width=
e;m.gxControl.widthUnit=d;m.gxControl.height=f;m.gxControl.heightUnit=g;m.gxControl.clickEvent=h;this.grid.addColumn(m)};this.addVideo=function(a,b,c,e,d,f,g,h,k,l){this.addColumnDinCode(this.addVideo,arguments);var m=this.newColumn(l,"","left",e);m.htmlName=b;m.gxId=c;m.gxAttId=a;m.gxWidthUnit=d;m.gxControl=new gx.html.controls.video;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.width=e;m.gxControl.widthUnit=d;m.gxControl.height=f;m.gxControl.heightUnit=g;m.gxControl.clickEvent=h;
this.grid.addColumn(m)};this.addAudio=function(a,b,c,e,d,f,g,h,k,l){this.addColumnDinCode(this.addAudio,arguments);var m=this.newColumn(l,"","left",e);m.htmlName=b;m.gxId=c;m.gxAttId=a;m.gxWidthUnit=d;m.gxControl=new gx.html.controls.audio;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.width=e;m.gxControl.widthUnit=d;m.gxControl.height=f;m.gxControl.heightUnit=g;m.gxControl.clickEvent=h;this.grid.addColumn(m)};this.addTextBlock=function(a,b){this.addColumnDinCode(this.addTextBlock,arguments);
var c=this.newColumn("","","left");c.htmlName=a;c.gxControl=new gx.html.controls.textBlock;c.gxControl.column=c;c.gxControl.dataType=c.type;c.gxControl.clickEvent=b;this.grid.addColumn(c)};this.addButton=function(a,b,c,e,d){this.addColumnDinCode(this.addButton,arguments);var f=this.newColumn("","","left");f.htmlName=b;f.gxId=a;f.gxControl=new gx.html.controls.button;f.gxControl.column=f;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.addGrid=function(a){this.addColumnDinCode(this.addGrid,
arguments);this.childGrids.push(a);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.grid;b.gxControl.column=b;this.grid.addColumn(b)};this.addUsercontrol=function(a,b,c,e,d,f,g,h){this.addColumnDinCode(this.addUsercontrol,arguments);var k="",l=this.parentObject;l.GridUCsProps&&l.GridUCsProps[d]&&(k=l.GridUCsProps[d].title||"");k=this.newColumn(k,"","left");k.gxUCId=a;k.gxUCLastId=b;k.gxUCClassName=c;k.gxUCContainerName=e;k.gxUCControlName=d;k.gxShowFunc=f;k.gxC2VFuncs=g;k.gxV2CFuncs=
h;k.gxControl=new gx.html.controls.userControl;k.gxControl.column=k;k.gxControl.dataType=k.type;this.grid.addColumn(k)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.userControlContainer;a.gxControl.column=a;a.gxControl.dataType=a.type;this.grid.addColumn(a)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=
function(a){this.addColumnDinCode(this.addWebComponent,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.webComponent;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addEmbeddedPage=function(a){this.addColumnDinCode(this.addEmbeddedPage,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.embeddedPage;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addHtmlCode=function(a){this.addColumnDinCode(this.addHtmlCode,
arguments);this.currentBuffer.append(a)};this.startTable=function(a,b,c){this.addColumnDinCode(this.startTable,arguments);var e=this.newColumn("","","left");e.htmlName=a+"_"+b;e.gxControl=new gx.html.controls.table;e.gxControl.column=e;e.gxControl.width=c;e.gxControl.dataType=e.type;this.grid.addColumn(e)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(a,b,c,e,d,f){this.addColumnDinCode(this.startRow,arguments);
var g=this.newColumn("","","left");g.gxControl=new gx.html.controls.row;g.gxControl.column=g;g.gxControl.title=a;g.gxControl.align=b;g.gxControl.verticalAlign=c;g.gxControl.backColor=e;g.gxControl.borderColor=d;g.gxControl.cssClass=f;g.gxControl.ownCssClass=f;g.gxControl.dataType=g.type;this.grid.addColumn(g)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(a,b,c,e,d,f,g,h,k,l){this.addColumnDinCode(this.startCell,arguments);
var m=this.newColumn("","","left");m.gxControl=new gx.html.controls.cell;m.gxControl.column=m;m.gxControl.title=a;m.gxControl.align=b;m.gxControl.verticalAlign=c;m.gxControl.backColor=e;m.gxControl.borderColor=d;m.gxControl.height=f;m.gxControl.width=g;m.gxControl.colSpan=h;m.gxControl.rowSpan=k;m.gxControl.cssClass=l;m.gxControl.dataType=m.type;this.grid.addColumn(m)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.currentBuffer.append("</td>")};this.startGroup=function(a,
b,c,e){this.addColumnDinCode(this.startGroup,arguments);var d=this.newColumn("","","left");d.htmlName=a;d.gxControl=new gx.html.controls.group;d.gxControl.column=d;d.gxControl.id=a;d.gxControl.caption=b;d.gxControl.height=c;d.gxControl.width=e;d.gxControl.dataType=d.type;this.grid.addColumn(d)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(a,b,c,e){this.addColumnDinCode(this.startDiv,arguments);var d=this.newColumn("",
"","left");d.htmlName=a+"_"+b;d.gxControl=new gx.html.controls.div;d.gxControl.column=d;d.gxControl.width=e;d.gxControl.height=c;d.gxControl.dataType=d.type;this.grid.addColumn(d)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);this.currentBuffer.append("</div>")};this.newColumn=function(a,b,c,e){b=this.getColumnType(b);a=new gx.grid.column(a,b,e,c);this.currentBuffer=a.buffer;a.htmlName="";a.gxId="";a.gxAttId="";a.gxAttName="";return a};this.getColumnType=function(a){switch(a){case "decimal":case "int":a=
gx.types.numeric;break;case "date":a=gx.types.date;break;case "dtime":a=gx.types.dateTime;break;case "boolean":a=gx.types.bool;break;case "Geolocation":a=gx.types.geolocation;break;default:a=gx.types.character}return a};this.addOldComponent=function(a,b){"undefined"==typeof this.oldCmps[a]&&(this.oldCmps[a]=[]);this.oldCmps[a].push(b)};this.updateOldComponents=function(){for(var a=this.grid.rows.length,b=0;b<a;b++)delete this.oldCmps[this.grid.rows[b].gxId];for(var c in this.oldCmps){for(a=this.oldCmps[c];0<
a.length;)b=a.shift(),gx.fn.deleteHidden(b);delete this.oldCmps[c]}};this.addHidden=function(a){this.hiddens.push(a)};this.addHiddenControl=function(a,b,c){gx.fn.setHidden(a,b);!0!=c&&this.addHidden(a)};this.clearHiddens=function(){for(;0<this.hiddens.length;){var a=this.hiddens.shift();gx.fn.deleteHidden(a)}};var r={};this.setHtmlTags=function(a){gx.lang.apply(r,a);var b;b=' style="'+("0"==r.Visible?"display:none;":"");var a=""+(' class="'+r.Class+'"'),c=gx.lang.emptyObject;b+=!c(r.Background)?"background:"+
r.Background+";":"";b+=!c(r.Backcolor)&&"0"!=r.Backcolor?"background-color:"+gx.color.html(r.Backcolor).Html+";":"";b+=!c(r.Bordercolor)&&"0"!=r.Bordercolor?"border-color:"+gx.color.html(r.Bordercolor).Html+";":"";a+=!c(r.Align)?' align="'+r.Align+'"':"";a+=!c(r.Tooltiptext)?' title="'+r.Tooltiptext+'"':"";b+=!c(r.Borderwidth)&&"0"!=r.Borderwidth?" border-width:"+r.Borderwidth+";":"";a+=!c(r.Cellpadding)?' cellpadding="'+r.Cellpadding+'"':"";a+=!c(r.Cellspacing)?' cellspacing="'+r.Cellspacing+'"':
"";a+=!c(r.Height)&&"0"!=r.Height?' height="'+r.Height+'"':"";a+=!c(r.Width)&&"0"!=r.Width?' width="'+r.Width+'"':"";this.htmlTags=gx.text.trim(a+(b+'"'));this.grid.gxHtmlTags=this.htmlTags;c(r.Width)||(this.grid.gxWidth=r.Width);c(r.Height)||(this.grid.gxHeight=r.Height)};var x={};this.setGridStyles=function(a){gx.lang.apply(x,a);this.visible=void 0!=x.Visible?gx.lang.gxBoolean(x.Visible):!0;this.setSortable(void 0!=x.Sortable?gx.lang.gxBoolean(x.Sortable):!0);this.background=void 0!=x.Background?
x.Background:"";this.cssClass=void 0!=x.Class?x.Class:"";this.titleBackstyle=void 0!=x.Backcolorstyle?x.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=x.Titlefont?x.Titlefont:"";this.linesFont=void 0!=x.Linesfont?x.Linesfont:"";this.borderWidth=void 0!=x.Borderwidth?x.Borderwidth:"";this.toolTipText=void 0!=x.Tooltiptext?x.Tooltiptext:"";try{this.backcolor=void 0!=x.Backcolor?gx.color.html(x.Backcolor).Html:"",this.titleBackcolor=void 0!=x.Titlebackcolor?gx.color.html(x.Titlebackcolor).Html:
"",this.titleForecolor=void 0!=x.Titleforecolor?gx.color.html(x.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=x.Backcolorodd?gx.color.html(x.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=x.Backcoloreven?gx.color.html(x.Backcoloreven).Html:"",this.bordercolor=void 0!=x.Bordercolor?gx.color.html(x.Bordercolor).Html:""}catch(b){gx.dbg.logEx(b,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=x.Borderwidth?x.Borderwidth:"";this.toolTipText=void 0!=x.Tooltiptext?x.Tooltiptext:"";this.grid.gxCssClass=
"";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;
this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=
this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};
this.setSortable=function(a){if(this.sortable!=a){this.sortable=a;for(var b=this.grid.columns.length,c=0;c<b;c++)this.grid.columns[c].sortable=a}};this.lastRowId=0;this.addRow=function(a){var b,c,e,d=this.lastRowId++,f=gx.grid.rowId(d+1),f=new gx.grid.row(d,a,f,this.grid.gxParentRowId);f.gxCmpContext=this.gxComponentContext;f.Grids=a.Grids;f.ownerGrid=this;f.gxLvl=this.gridLvl;this.setRowHiddens(a.Hiddens);var g=this.grid.columns,h;h=g.length;for(var k=0;k<h;k++){var l=g[k];if(0!==d){e=this.grid.rows[0].gxProps[k];
b=a.Props[k].length;for(c=this.grid.rowsValues?e.length-1:e.length;b<c;b++)f.gxProps[k].push(e[b])}e=a.Props[k];c=e[e.length-1];this.grid.rowsValues&&!this.autoRefreshing?void 0!==this.grid.rowsValues[d]&&(c=this.grid.rowsValues[d][k]):c=e[e.length-1];f.values[k]=c;this.grid.rowsValues&&f.gxProps[k].push(c);this.parentObject.isTransaction()&&(l=this.columnIndexInKey(l.gxAttId),-1!=l&&(f.gxKeyValues[l]=c))}this.isFreestyle&&(f.IsNew=!0,this.installChildGrids(f));this.grid.addRow(f);return f};this.installChildGrids=
function(a){for(var b=this.childGrids.length,c=0;c<b;c++){var e=this.childGrids[c],d=e.gxCreateGridCode(a.gxId);d.grid.parentGxObject=this.parentObject;var f=(!d.isMasterPageGrid?this.grid.gxCmpContext:"MP")+d.realGridName+"Container";d.gxContainerDivName=f+"Div_"+a.gxId;d.gxContainerDataName=f+"Data_"+a.gxId;d.gxContainerValuesName=f+"DataV_"+a.gxId;a.gxGrids.push(d);d.parentGrid=this;d.parentRow=a;this.parentObject.setGrid(d);e.copyPropertiesTo(d);d.grid.gxCmpContext=this.grid.gxCmpContext;d.grid.gxParentRowId=
a.gxId;this.installChildGridColumns(d,e)}};this.installChildGridColumns=function(a,b){for(var c=b.gxAddColumnsCode.length,e=0;e<c;e++)b.gxAddColumnsCode[e].call(a)};this.copyPropertiesTo=function(a){a.cssClass=this.cssClass;a.titleBackstyle=this.titleBackstyle;a.titleBackcolor=this.titleBackcolor;a.linesBackcolorOdd=this.linesBackcolorOdd;a.linesBackcolorEven=this.linesBackcolorEven;a.grid.gxCssClass=this.grid.gxCssClass;a.grid.gxTitleClass=this.grid.gxTitleClass;a.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;
a.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;a.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;a.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(a){if(a&&this.parentObject.isTransaction())for(var b in a)gx.fn.setHidden(b,a[b])};this.executeEvent=function(a,b){gx.evt.setGridEvt(this.gridId.toString(),b);this.instanciateRow(b);this.parentObject[a].call(this.parentObject,b)};this.updatePagingVars=function(a,b){this.grid.usePaging&&(void 0==a&&void 0==b?(this.grid.eof=gx.fn.getHidden(this.grid.gxCmpContext+
this.grid.gxGridName.toUpperCase()+"_nEOF"),this.grid.firstRecordOnPage=gx.fn.getHidden(this.grid.gxCmpContext+this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage")):(this.grid.eof=a,this.grid.firstRecordOnPage=b))};this.setPagingVars=function(a,b){this.grid.eof=a;this.grid.firstRecordOnPage=b;var c=this.grid.gxGridName.toUpperCase(),e=this.grid.gxCmpContext;gx.fn.setHidden(e+c+"_nEOF",a);gx.fn.setHidden(e+c+"_nFirstRecordOnPage",b)};this.clearDefaultEventHandlers=function(){var a=0;if(this.defaultDragable||
this.defaultSetsContext)for(var a=this.grid.rows.length,b=0;b<a;b++){var c=this.containerName+"Row_"+this.grid.rows[b].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(c);this.defaultSetsContext&&gx.fx.ctx.deleteSetter(c)}a=this.grid.columns.length;for(b=0;b<a;b++)if(c=this.grid.columns[b],!0==c.gxSetsContext)for(var e=this.grid.rows.length,d=0;d<e;d++)gx.fx.ctx.deleteSetter(c.htmlName+"_"+this.grid.rows[d].gxId)};this.setDefaultEventHandlers=function(){var a=0;if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(var b=
this.getRowAsTypes(),a=this.grid.rows.length,c=0;c<a;c++){var e=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[c].gxId,d=gx.dom.el(e);null!=d&&(d.gxGrid=this.containerName,d.gxGridName=this.gridName,d.gxId=this.grid.rows[c].gxId);e=this.containerName+"Row_"+this.grid.rows[c].gxId;d=function(a){return this.returnRowData(a)}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,e,this.cssClass,b,d);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,
e,this.cssClass,b,d)}else a=this.grid.gxCmpContext+this.containerName+"Div",d=function(){return this.returnGridData()}.closure(this),this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,a,this.cssClass,[this.boundedCollType],d),this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,a,this.cssClass,[this.boundedCollType],d);a=this.grid.columns.length;for(c=0;c<a;c++)if(b=this.grid.columns[c],!0==b.gxSetsContext){d=this.grid.rows.length;for(e=0;e<d;e++){var f=gx.dom.el(this.gxComponentContext+
b.htmlName+"_"+this.grid.rows[e].gxId);null!=f&&(f.gxHtmlName=b.htmlName,gx.fx.ctx.addSetter(this.parentObject,b.htmlName+"_"+this.grid.rows[e].gxId,"",[b.gxAttName],this.returnColumnContext))}}};this.returnColumnContext=function(a){var b="",b="SPAN"==a.nodeName?gx.dom.spanValue(a):gx.fn.getControlValue_impl(a.id);return null!=b?b:""};this.returnRowData=function(a){var b={};if(a=this.grid.getRowByGxId(a.gxId))for(var c=this.grid.columns.length,e=0;e<c;e++){var d=this.grid.columns[e].gxAttName;""!=
d&&(b[d]=a.values[e])}return b};this.returnGridData=function(){for(var a=[],b=this.grid.rows.length,c=0;c<b;c++){var e={};a[c]=e;for(var d=this.grid.rows[c],f=this.grid.columns.length,g=0;g<f;g++){var h=this.grid.columns[g].gxAttName;""!=h&&(e[h]=d.values[g])}}return a};this.doDrop=function(a){this.getNewRows(void 0!=a.length?ropObj.length:1,null,function(b){this.addDropedRows(b,a)})};this.addDropedRows=function(a,b){var c=b.length;if(void 0!=c)for(var e=0;e<c;e++)this.setDroppedRow(a[e],b[e]);else this.setDroppedRow(a[0],
b);this.setNewRows(a)};this.setDroppedRow=function(a,b){for(var c=this.grid.columns.length,e=0;e<c;e++){var d=a.Props[e],f=this.grid.columns[e].gxAttName,g="";""!=f&&void 0!=b[f]&&(g=b[f]);d.Value=g;d.FormattedValue=g}};this.getRowAsTypes=function(){for(var a=[],b=this.grid.columns.length,c=0;c<b;c++){var e=this.grid.columns[c].gxAttName;""!=e&&a.push(e)}return a};this.addRows=function(a){var b=a.Count;this.grid.rowsValues=a.values;for(var c=0;c<b;c++)this.addRow(a[c])};this.lastRowIsModified=function(){if(0==
this.grid.rows.length)return!1;var a=this.grid.rows[this.grid.rows.length-1];return a.gxExists()||a.gxIsMod()?!0:!1};this.getNewRows=function(a,b,c){var c=void 0!=c?c:this.setNewRows,e=gx.util.browser.isFirefox()?"keypress":"keydown";null==b||(b.type==e&&(32==b.charCode||32==b.keyCode||13==b.keyCode)||"click"==b.type)&&(0==this.grid.rows.length||this.lastRowIsModified())?(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,a+this.lastRowId,this.lastRowId+
1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,c),gx.csv.pkDirty=!1,null!=b&&gx.evt.cancel(b,!0)):null!=b&&(32==b.keyCode||13==b.keyCode)&&gx.evt.cancel(b,!0)};this.setNewRows=function(a){if(void 0!=a.Count){for(var b=0,b=0;b<a.Count;b++){var c=this.addRow(a[b]);gx.fn.setCurrentGridRow(this.gridId,c.gxId)}0<a.Count&&(this.addingRows=!0,this.refreshGrid(!1),this.addingRows=!1,this.setFocusFirstControl(a[0]))}};this.gxNewRowFocused=function(a){a.style.textDecoration=
"underline";var b=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(a,b,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(a){var b=gx.evt.source(a);void 0!=b&&(a.ctrlKey&&46==a.keyCode)&&(this.setRowDeleted(b),gx.evt.cancel(a,!0))};this.gxHasDuplicateKey=function(){for(var a=[],b=this.grid.rows,c=b.length,e=0;e<c;e++){var d=b[e];if((d.gxExists()||d.gxIsMod())&&!d.gxDeleted()){for(var f="",g=d.gxKeyValues.length,h=0;h<g;h++)f+=d.gxKeyValues[h].toString();
if(void 0!=a[f])return!0;a[f]=1}}return!1};this.columnIndexInKey=function(a){for(var b=this.lvlKey.length,c=0;c<b;c++)if(this.lvlKey[c]==a)return c;return-1};this.refreshVars=[];this.addRefreshingVar=function(a){if(!gx.lang.emptyObject(a)){var b="";this.refreshVars[this.refreshVars.length]=a;if(a.fld){var c=gx.dom.el(this.gxComponentContext+a.fld);if(void 0!=c&&gx.lang.emptyObject(a.hc)&&("radio"==c.type||"checkbox"==c.type&&gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()?b="click":"SELECT"==
c.tagName||"checkbox"==c.type?b="change":gx.lang.isNumericType(a.type)?gx.lang.isNumericType(a.type)&&(b="blur"):b=["keyup","input"],""!=b))if("radio"==c.type)for(var a=gx.dom.byName(this.gxComponentContext+a.fld),c=a.length,e=0;e<c;e++)gx.evt.attach(a[e],b,function(){this.filterVarChanged()},this);else"search"==c.type&&(b=[b,"search"]),gx.evt.attach(c,b,function(){this.filterVarChanged()},this)}}};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var a=this.getRefreshParmsUrl();
this.lastRefreshParms!=a&&(this.lastRefreshParms=a,this.callAsyncRefresh(a))}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=function(){for(var a=this.refreshVars.length,b=0;b<a;b++){var c=this.refreshVars[b];if("undefined"==typeof c.rfrVar){var e=gx.fn.getHidden(this.gxComponentContext+"GXH_"+c.fld),c=c.val();if(e!=c)return!0}}return!1};this.getRefreshParmsUrl=function(){var a="";this.pageSizeParm&&(a=this.grid.pageSize+",");for(var b=this.refreshVars.length,
c=0;c<b;c++){var e=this.refreshVars[c];if("undefined"!=typeof e.rfrVar){var d=void 0,f=void 0;if("undefined"!=typeof e.rfrProp){var g;"undefined"!=typeof e.gxAttId&&(g=this.grid.getColumnByGxAttId(e.gxAttId));g||(g=this.grid.getColumnForVar(e.rfrVar));g?(e=e.rfrProp.toLowerCase(),d=g[e],"value"==e&&g.gxControl.type==gx.html.controls.types.image&&(d=gx.util.removeBaseUrl(d))):d=""}else"undefined"!=typeof this.parentObject.VarControlMap[e.rfrVar]&&(f=this.parentObject.VarControlMap[e.rfrVar].id),"undefined"!=
typeof f&&(d=gx.fn.getHidden(this.gxComponentContext+f)),"undefined"==typeof d&&(d=this.parentObject[e.rfrVar]),"object"==typeof d&&(d=gx.json.serializeJson(d));a+=encodeURIComponent(d)+","}else a=gx.lang.emptyObject(e.hc)?a+(this.getFormattedParm(e)+","):a+(encodeURIComponent(this.parentObject[e.hc])+","),gx.fn.setHidden(this.gxComponentContext+"GXH_"+e.fld,e.val())}this.parentObject.IsComponent&&(a+=encodeURIComponent(this.parentObject.CmpContext)+",");return a};this.initRefreshParms=function(){this.parentObject.autoRefresh&&
(this.lastRefreshParms=this.getRefreshParmsUrl())};this.getFormattedParm=function(a){return"date"==a.type?(a=gx.dom.el(this.gxComponentContext+a.fld),encodeURIComponent(gx.date.urlDate(a,gx.dateFormat))):"dtime"==a.type?(a=gx.dom.el(this.gxComponentContext+a.fld),encodeURIComponent(gx.date.urlDateTime(a,gx.dateFormat))):encodeURIComponent(a.val())};this.callAsyncRefresh=function(a){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),
this.refreshTimer=null,gx.evt.setReady(!0));gx.evt.setReady(!1);this.refreshTimer=window.setTimeout(function(){gx.ajax.refreshGrid(this,a);gx.evt.setReady(true);gx.evt.notifyRefreshGrid()}.closure(this),400)};this.updatePropsHidden=function(a){var b=this.getDataHiddenName();gx.fn.setHidden(b,a)};this.updatePagingVarsAfterRefresh=function(a){if(this.usePaging){var b=this.grid.gxGridName.toUpperCase()+"_nEOF",c=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(a[b],a[c])}};
this.getSelection=function(){if(this.allowSelection)for(var a=this.grid.rows.length,b=0;b<a;b++)if(this.grid.rows[b].selected)return b;return-1};this.setSelection=function(a){if(this.allowSelection&&0<=a){var a=gx.grid.rowId(a+1),b=gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+a);b&&this.grid.setRowSelected(b,a)}};this.blankGridRows=function(){this.lastRowId=0;this.grid.rows=[];delete this.grid.rowsValues};this.setRowDeleted=function(a){var b=null,b="string"==typeof a?this.grid.getRowByGxId(a):
void 0==a.gxId?this.getRowFromHtmlCtrl(a):a;b.setDeleted(!b.gxDeleted());this.setRowModified(b.gxId);gx.fn.removeGridRow(b.gxId,this.gridId.toString());this.refreshGrid(!1)};this.setFocusFirstControl=function(a){for(var b=0;b<a.Count;b++){var c=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(c&&(c=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[b].htmlName+"_"+c.gxId),void 0!=c&&gx.fn.isAccepted(c))){gx.grid.lastFocusCtrl=this.grid.columns[b].gxId;gx.fn.setFocus(c);
break}}};this.instanciateRow=function(a){var b=gx.O;gx.setGxO(this.parentObject.CmpContext,this.parentObject.IsMasterPage);try{var c=a;"string"==typeof c&&(c=this.grid.getRowByGxId(a));if(null!=c){gx.fn.setCurrentGridRow(this.gridId,c.gxId);for(var e=c.values.length,d=0;d<e;d++){var f=this.grid.columns[d];if(""!=f.gxId){var g=this.parentObject.getValidStruct(f.gxId);g&&(this.isUsercontrol?g.v2v&&(g.v2v(this.grid.properties[c.id][f.index].value),gx.fn.setHidden(this.grid.properties[c.id][f.index].id,
this.grid.properties[c.id][f.index].value)):"function"==typeof g.c2v&&g.c2v())}}}else{gx.fn.setCurrentGridRow(this.gridId,a);e=this.grid.columns.length;for(d=0;d<e;d++)f=this.grid.columns[d],""!=f.gxId&&(g=this.parentObject.getValidStruct(f.gxId))&&"function"==typeof g.c2v&&g.c2v()}}catch(h){gx.dbg.logEx(h,"gxgrid.js","instanciateRow")}gx.setGxO(b.CmpContext,b.IsMasterPage);return!0};this.setRenderProp=function(a,b,c,e){this.grid.setProp(a,b,c,e)};this.setRenderDynProp=function(a,b,c,e){this.grid.setDynProp(a,
b,c,e)};this.addRenderEventHandler=function(a,b){this.grid.addEventHandler(a,b)};this.cleanup=function(){this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid=this.grid.rows=null};this.loadGrid=function(a,b){gx.dbg.logPerf("loadGrid_"+this.gridName);var c=gx.O;gx.setGxO(this.parentObject.CmpContext,this.parentObject.IsMasterPage);this.isLoading=!0;var e=
this.parentObject.isTransaction();e&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));void 0!=a?(e=this.getContainerControl(),null!=e&&(!0==b&&(a.values=this.getValuesFromHidden(),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),this.grid.setContainerDelayed(e),this.clearHiddens(),this.setRowsProperty(),e=this.getSelection(),this.blankGridRows(),this.setHtmlTags(a),this.setGridStyles(a),this.setDeleteMethod(a.DeleteMethod),
this.setSelectionAndHover(a.Allowselection,a.Selectioncolor,a.Allowhover,a.Hovercolor),this.setCollapsing(a.Allowcollapsing,a.Collapsed),this.setSflColumns(a.SflColumns),this.setColumnsProperties(a.Columns),this.autoRefreshing?this.updatePagingVarsAfterRefresh(a):this.updatePagingVars(),this.addRows(a),this.updateOldComponents(),this.initRefreshParms(),this.refreshGrid(null,this.autoRefreshing),this.setSelection(e))):(this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=e||this.isFreestyle?
9999:this.gridRows,e=this.getContainerControl(),null!=e?(this.grid.setContainerDelayed(e),e=this.getRowsFromHidden(),null!=e?(e.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(e),this.setGridStyles(e),this.setDeleteMethod(e.DeleteMethod),this.setSelectionAndHover(e.Allowselection,e.Selectioncolor,e.Allowhover,e.Hovercolor),this.setCollapsing(e.Allowcollapsing,e.Collapsed),this.setSflColumns(e.SflColumns),this.setColumnsProperties(e.Columns),this.updatePagingVars(),this.addRows(e),
this.initRefreshParms(),this.addingRows=!0,this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),this.refreshGrid())):this.loadWrappedGridChilds());this.isLoading=!1;gx.setGxO(c.CmpContext,c.IsMasterPage);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded")};this.loadWrappedGridChilds=function(){try{var a=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_"+this.gridName);if("undefined"!=typeof a){for(var a=parseInt(a),b=0;b<a;b++)for(var c=
this.grid.columns.length,e=0;e<c;e++){var d=this.grid.columns[e];d.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(b+1),c:d})}this.setupGridUsercontrols(this.GridUserControls)}}catch(f){gx.dbg.logEx(f,"gxgrid.js","loadWrappedGridChilds")}};this.getRowsFromHidden=function(){var a=this.getDataHiddenName(),b=gx.fn.getHidden(a),c=null;if(gx.lang.emptyObject(b))return null;gx.json.setNonSerializable(a);return c=gx.json.evalJSON(b)};this.deleteGridData=function(){var a=
this.getDataHiddenName();gx.json.setNonSerializable(a)};this.getValuesFromHidden=function(){var a=this.getValuesHiddenName(),b=gx.fn.getHidden(a);gx.lang.emptyObject(b)&&(b=gx.fn.getControlValue(a));gx.json.setNonSerializable(a);a=null;null!=b&&""!=b&&(a=gx.json.evalJSON(b));return a};this.getContainerControl=function(){var a=null;if(a=void 0!=this.gxContainerDivName?gx.dom.byId(this.gxContainerDivName):gx.dom.byId(this.grid.gxCmpContext+this.containerName+"Div"))this.gxContainerCtrl=a,a.setAttribute("gxgridid",
this.gridId.toString()),a.gxGridName=this.grid.gxGridName;return a};this.getDataHiddenName=function(){var a=""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId,b="";return b=void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+a};this.getValuesHiddenName=function(){var a=""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId,b="";return b=void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+
"DataV"+a};this.setColumnsProperties=function(a){try{for(var b=a.length,c=0;c<b;c++){var e=this.grid.columns[c],d;for(d in a[c]){var f=a[c][d];d=this.fixColumnPropName(d);this.isUsercontrol&&(e[d]=f);e[d.toLowerCase()]=f}this.checkPromptColumn(e)}}catch(g){gx.dbg.logEx(g,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(a){try{if(this.isPromptColumn(a)){var b=gx.fn.getAttachedCtrl(a.htmlName);if(b&&b.info&&b.info.controls){for(var c=!1,e=!1,d=b.info.controls.length,f=0;f<d;f++){var g=
this.grid.getColumnByGxId(b.info.controls[f]),h=gx.lang.gxBoolean(g.enabled),k=gx.lang.gxBoolean(g.visible);h&&(e=!0);k&&(c=!0)}e||(a.enabled="0");c||(a.visible="0")}}}catch(l){gx.dbg.logEx(l,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(a){return"Horizontalalignment"==a?"align":a};this.setDeleteMethod=function(a){if(this.parentObject.isTransaction()){var b="DSP"==this.parentObject.Gx_mode;!b&&(a&&"none"==a)&&(b=!0);this.deleteMethod=b?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};
this.setSelectionAndHover=function(a,b,c,e){try{this.allowSelection=gx.lang.gxBoolean(a),this.hoverColor=this.selectionColor=null,this.allowSelection&&(this.allowHovering=gx.lang.gxBoolean(c),b=eval(b),this.selectionColor="undefined"!=typeof b[0]?gx.color.fromRGB(b[0],b[1],b[2]):gx.color.html(b),this.allowHovering&&(e=eval(e),this.hoverColor="undefined"!=typeof e[0]?gx.color.fromRGB(e[0],e[1],e[2]):gx.color.html(e))),this.grid.gxAllowSelection=this.allowSelection,this.grid.gxSelectionColor=this.selectionColor,
this.grid.gxAllowHovering=this.allowHovering,this.grid.gxHoverColor=this.hoverColor}catch(d){gx.dbg.logEx(d,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(a,b){try{this.allowCollapsing=gx.lang.gxBoolean(a),this.collapsed=gx.lang.gxBoolean(b),this.grid.gxAllowCollapsing=this.allowCollapsing,this.grid.gxCollapsed=this.collapsed}catch(c){gx.dbg.logEx(c,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(a){try{if(!gx.lang.emptyObject(a)||0===a)this.gridCols=gx.grid.validGridColsValue(parseInt(a)),
this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(a){return a.gxAttId.indexOf&&-1!=a.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var a=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_Rows");if(null!=a){try{this.gridRows=parseInt(a,10)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setRowsProperty")}this.grid.pageSize=
this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var a=this.grid.columns.length,b=0;b<a;b++){var c=this.parentObject.getValidStruct(this.grid.columns[b].gxId);c&&(c.gxsgprm&&c.gxsgprm.installed)&&(c.gxsgprm.installed={})}};this.refreshCollection=function(a){try{this.blankGridRows();this.updatePagingVars();this.initRefreshParms();for(var b=a.length,c=0;c<b;c++){for(var e={Props:[]},d=a[c],f=this.grid.columns.length,g=0;g<f;g++){var h=this.grid.columns[g];
e.Props[h.index]=[d[h.gxAttName]]}this.addRow(e)}this.refreshGrid(!1,!1,!0)}catch(k){gx.dbg.logEx(k,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(a,b,c){this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.clearDefaultEventHandlers();this.clearHiddens();this.crearInstalledSuggests();this.setRowsProperty();if(void 0!=this.parentRow&&!gx.lang.emptyObj(this.parentRow.Grids)){var e=this.parentRow.Grids[this.realGridName];null!=e&&(this.setHtmlTags(e),
this.setGridStyles(e),this.setColumnsProperties(e.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(e))}var d=!1,e=function(){this.setupGridControls(this.GridControls);this.setupFixedColumnProperties();this.setupGridComponents(this.GridComponents);this.setupGridUsercontrols(this.GridUserControls);this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.isFreestyle&&this.loadRowsGrids(d);this.updateRcdCount();this.setDefaultEventHandlers()}.closure(this);this.grid.doSort();
!1==a?this.grid.render(d,!1,c,e):(d=!0,this.grid.render(d,b,c,e))};var E="gx-wc-bkp_"+h+"_"+d;this.getComponentsBackupContainer=function(){var a=gx.dom.el(E);a||(a=document.createElement("div"),a.id=E,a.style.display="none",document.body.appendChild(a));return a};this.destroyComponentsBackup=function(){var a=gx.dom.el(E);a&&a.parentNode&&gx.dom.removeControlSafe(a)};this.backupComponents=function(){try{for(var a=this.grid.rows.length,b=0;b<a;b++){for(var c=this.grid.rows[b],e=this.grid.columns.length,
d=0;d<e;d++)if(this.grid.columns[d].gxControl.type==gx.html.controls.types.webComponent){var f=this.gxComponentContext+"gxHTMLWrp"+this.parentObject.getComponentPrefix(c.gxProps[d][0])+c.gxId,g=gx.dom.el(f);g&&(g.parentNode.removeChild(g),this.getComponentsBackupContainer().appendChild(g))}for(var h=c.gxGrids.length,d=0;d<h;d++){var k=c.gxGrids[d];k&&k.isFreestyle&&k.backupComponents()}}}catch(l){gx.dbg.logEx(l,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(a){var b=this.getContainerControl().firstChild,
c=[];if(b.querySelectorAll)c=gx.fn.toArray(b.querySelectorAll("td[colindex='"+a+"'], th[colindex='"+a+"']"));else{for(var e=gx.dom.byTag("TD",b),b=gx.dom.byTag("TH",b),d=0,f=e.length;d<f;d++)e[d].getAttribute("colindex")==a&&c.push(e[d]);d=0;for(f=b.length;d<f;d++)b[d].getAttribute("colindex")==a&&c.push(b[d])}return c};this.applyPropEntireColumn=function(a,b,c){for(var a=this.getEntireGridColumn(a),e=0;e<a.length;e++)gx.fn.setCtrlPropertyImpl(a[e],b,c)};this.setupFixedColumnProperties=function(){for(var a=
0;a<this.ColumnPropertiesAfterRender.length;a++){var b=this.ColumnPropertiesAfterRender[a];this.applyPropEntireColumn(b.colIndex,b.ptyName,b.ptyValue)}};this.addColPropertyAfterRender=function(a,b,c){this.ColumnPropertiesAfterRender.push({colIndex:a,ptyName:b,ptyValue:c})};this.setupGridControls=function(a){for(var b=0,c=a.length;b<c;b++){var e=a[b],d=gx.dom.el(e.hookId),f=d.parentNode;f&&(f.insertBefore(e.el,d),gx.dom.removeControlSafe(d))}};this.setupGridComponents=function(a){for(var b=a.length,
c=0;c<b;c++){var e=a[c];if(!1===e.create){var d=gx.dom.el(e.existingEl),f=d.parentNode,e=gx.dom.el(e.el);gx.dom.removeControlSafe(d);f.appendChild(e)}else gx.html.processCode(e.c,!1,function(a){var b=gx.createComponent(a.n,a.p);if(b!=null){gx.addComponent(b);b.readServerVars();if(a.load)b.onload()}},[e])}this.destroyComponentsBackup()};this.setupGridUsercontrols=function(a){for(var b=a.length,c=0;c<b;c++){var e=a[c].r,d=a[c].c,e=gx.uc.getNew(this.parentObject,d.gxUCId,d.gxUCLastId,d.gxUCClassName,
d.gxUCContainerName+"_"+e,d.gxUCControlName,this.gridLvl,this.gridId,e);e.DesignContainerName=d.gxUCContainerName;e.setC2ShowFunction(d.gxShowFunc);for(var f=d.gxC2VFuncs.length,g=0;g<f;g++)e.addC2VFunction(d.gxC2VFuncs[g]);f=d.gxV2CFuncs.length;for(g=0;g<f;g++)e.addV2CFunction(d.gxV2CFuncs[g]);e.setGridProperties();e.setGridEventHandlers();this.parentObject.setUserControl(e);e.execV2CFunctions(!0);e.execShowFunction()}};this.triggerDatePickersSetup=function(a){for(var b=a.length,c=0;c<b;c++){for(var e=
a[c].CtrlId,d=a[c].Grid,f=a[c].Row,g=gx.O,h=null,k=gx.fn.controlIds(),l=k.length,m=0;m<l&&!(h=gx.fn.validStruct(k[m]),h.grid==d&&g.CmpContext+h.fld+"_"+f==e);m++);null!=h&&void 0!=h.dp&&gx.fn.installDatePicker(e,h.dp.f,h.dp.st,h.dp.wn,h.dp.mf,gx.fn.datePickerFormat(h.dp.pic,h.dp.dec,h.len))}};this.installImageControls=function(){for(var a=gx.dom.byClass("gx-multimedia-upload","",this.gxContainerCtrl),b=0,c=a.length;b<c;b++)gx.html.multimediaUpload.createControl(a[b])};this.addComponentToDraw=function(a){this.GridComponents.push(a)};
this.addUsercontrolToDraw=function(a){this.GridUserControls.push(a)};this.addDatepickerToSetup=function(a){this.DatePickersControls.push(a)};this.addControlToReuse=function(a){a.el.parentNode&&gx.dom.removeControlSafe(a.el);this.GridControls.push(a)};this.loadRowsGrids=function(a){for(var b=this.grid.rows.length,c=0;c<b;c++)this.loadRowGrids(this.grid.rows[c],a)};this.loadRowGrids=function(a,b){for(var c=a.gxGrids.length,e=0;e<c;e++){var d=a.gxGrids[e];d.grid.setContainerDelayed(gx.dom.el(d.gxContainerDivName));
if(b){if(void 0!=d.parentRow&&!gx.lang.emptyObj(d.parentRow.Grids)){var f=d.getDataHiddenName();gx.fn.setHidden(f,d.parentRow.Grids[d.realGridName])}d.loadGrid()}else d.refreshGrid();a.IsNew=!1}};this.updateRcdCount=function(){(this.hasForEachLine||this.parentObject.isTransaction())&&gx.fn.setHidden(this.grid.gxCmpContext+"nRC_"+this.gridName,this.lastRowId.toString());var a=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");parseInt(a,10)>this.lastRowId&&this.grid.instanciateSelectionVars("0000")};
this.updateControlValue=function(a,b){try{var c=this,e=gx.fn.currentGridRow(a.grid).toString(),d=e,f=e.length;if(4<f){var g=e.substring(4,f),c=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+g,this.isMasterPageGrid);if(!c)return;d=e.substring(0,4)}var h=parseInt(d,10)-1;!0==b&&c.setRowModified(e);var k=c.getColumnIndexByName(a.fld),l=gx.dom.el(this.gxComponentContext+a.fld+"_"+e);c.updateRowValue(k,h,l);return c}catch(m){gx.dbg.logEx(m,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=
function(a,b,c){var e=a.lastIndexOf("_");if(-1!=e){var d=a.substring(0,e);if(e=this.grid.getRowByGxId(a.substring(e+1)))if(d=this.grid.getColumnByHtmlName(d)){var f=this.parentObject[c.gxvar];"decimal"==c.type&&gx.lang.instanceOf(f,Number)&&(f=f.toFixed(c.dec));e.values[d.index]=f;e.gxProps[d.index]||(e.gxProps[d.index]={});if((a=gx.dom.el(a))&&"SELECT"==a.tagName)e.gxProps[d.index].Values=gx.dom.comboBoxToObj(a);e.gxProps[d.index].Value=f;e.gxProps[d.index].FormattedValue=b}}};this.getColumnIndexByName=
function(a){for(var b=this.grid.columns,c=b.length,e=0;e<c;e++)if(b[e].htmlName==a)return e;return-1};this.setRowModified=function(a){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+a,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(a)};this.validateRow=function(a){if(a)try{gx.fn.setCurrentGridRow(a.gxgridid,a.gxrow);var b=gx.fn.lastGridControl(a.gxgridid);gx.csv.validControls(gx.csv.lastId,b+1,!0)}catch(c){gx.dbg.logEx(c,
"gxgrid.js","validateRow")}};this.updateRowValue=function(a,b,c){var b=this.grid.getRowById(b),e=this.grid.columns[a];"checkbox"==c.type&&(c.value=c.checked?e.gxChecked:e.gxUnChecked);var d=gx.fn.getControlValue(this.grid.columns[a].htmlName+"_"+b.gxId),c=this.parentObject.getValidStruct(this.grid.columns[a].gxId).val();b.values[a]=c;gx.lang.emptyObject(b.gxProps[a])||(b.gxProps[a].Value=c,b.gxProps[a].FormattedValue=d);this.parentObject.isTransaction()&&(a=this.columnIndexInKey(e.gxAttId),-1!=a&&
(b.gxKeyValues[a]=c));e.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+e.htmlName+"_"+b.gxId+"_gxBlob",c)};this.expandCollapse=function(a,b){gx.evt.cancel(b,!0);var c=gx.dom.el(this.gxComponentContext+this.containerName+"Tbl");null!=c&&(this.collapsed?(c.style.display="block",a.src=gx.ajax.getImageUrl(gx,"collapseImage")):(c.style.display="none",a.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,
this.parentGrid?(c=this.gridName.substring(this.gridName.lastIndexOf("_")),c=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+c):c=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(c,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(a){var b=a.gxrow;gx.lang.emptyObject(b)&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return this.grid.getRowByGxId(b)};this.showContextMenu=function(a,b){this.contextMenu.show(a,b)}},contextMenu:function(c){this.gxgrid=
c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;var b=new gx.text.stringBuffer;this.show=function(a,c){this.gxgrid.validateRow(a);this.contextEvent=c;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(c,!0);this.rowClicked=a;this.startMenu();b.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};
this.startMenu=function(){b.clear();var a=this.getMenuCoords();b.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');b.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');b.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");
b.append("top:"+a.top+"; left:"+a.left+";").append('">')};this.endMenu=function(){b.append("</div>");var a=gx.dom.byId(this.controlName);null==a&&(a=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),a.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",
IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(a),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));gx.dom.shouldPurge()&&gx.dom.purge(a,!0);a.innerHTML=b.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};
this.getMenuCoords=function(){var a=0,b=0,c=this.contextEvent;if(c.pageX||c.pageY)a=c.pageX,b=c.pageY;else if(c.clientX||c.clientY)a=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b=c.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:a,top:b}};this.contextMenuClicked=function(a){this.handleContextMenuAction(gx.evt.source(a).id);this.hide()};this.handleContextMenuAction=function(a){switch(a){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);
break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"deleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.undeleteImage=this.undeleteImage&&this.deleteMethod==
this.deleteMethods.images?gx.ajax.getImageUrl(this,"undeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}};
gx.grid.impl=function(c){var b=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName="";this.gxGridObject=
null;this.gxBuffer=new gx.text.stringBuffer;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass=this.gxParentRowId="";this.selectedRowClass="gx-row-selected";"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=
c;this.container=null;this.setContainerDelayed=function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;var b=this.columns.length;a.index=b;a.table=this;this.columns[b]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.addRow=function(a,b){a.table=this;
if(a!=null){this.rows[this.rows.length]=a;typeof a.id!="undefined"&&(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(b)&&this.render();return a}};this.getColumnByHtmlName=function(a){var b,c;b=this.columnsHtmlName[a];if(typeof b=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){c=a.substring(0,this.gxCmpContext.length);if(c==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);b=this.columnsHtmlName[a]}}return b};
this.getColumnByGxId=function(a){return this.columnsGxId[a]};this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var c=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(c&&c.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){if(a==this.sortColumn)this.ascSort=b==null?!this.ascSort:
gx.lang.booleanValue(b);else{this.sortColumn=a;this.ascSort=b==null?true:gx.lang.booleanValue(b)}this.doSort();this.ownerGrid.refreshGrid()};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=
function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.el(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName=="A")a.parentNode.style.display=
"inline"}};this.appendDeleteHeader=function(a,b){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var c=this.isGxTrn(),g=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)g=true;else return;else gx.grid.deletePosition==b&&(g=true);if(c&&g){c="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)c=gx.grid.deleteTitle;a.append('<th class="'+this.columnHeaderClass+'">'+c+"</th>")}}};this.appendDeleteImage=
function(a,b,c){if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){var g=false,h=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){g=b.gxDeleted();h=b.gxIsMod()||b.gxExists()}var k=this.deleteImgId(b.gxId),l=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(c==gx.grid.deletePositions.left)l=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==c)l=true;else if(this.gxIsFreestyle){var o=gx.grid.deletePositionFree;
c==gx.grid.deletePositions.left?l=o==gx.grid.deletePositions.topL||o==gx.grid.deletePositions.bottomL:c==gx.grid.deletePositions.right&&(l=o==gx.grid.deletePositions.topR||o==gx.grid.deletePositions.bottomR);c=o}if(l){o='<td style="text-align:'+this.deleteImageAlign(c)+";vertical-align:"+this.deleteVerticalAlign(c)+'">';c="";l=false;if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)c=gx.grid.undeleteImage;else if(h&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)c=gx.grid.deleteImage;
else if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)c=gx.grid.deleteImage;else{c=gx.grid.deleteImage;l=true}g="";a.append(o);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){h=gx.fn.firstGridControl(this.ownerGrid.gridId);g=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+b.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+h+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+
"',"+this.ownerGrid.gridId+')"');b="";l&&(b=b+"display:none;");b&&a.append(' style="'+b+'"');a.append(">")}a.append('<img id="'+k+'" src="'+c+'"');g&&a.append(' title="'+g+'"');a.append(' style="border-style: none;');l&&a.append("display:none;");a.append('"');a.append("/>");this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&a.append("</a>");a.append("</td>")}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";
var b="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b="bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.topL)b="left";return b}return"center"};this.render=function(a,c,f,g){a&&(a=true);var h=this.isGxTrn(),k=this.gxIsFreestyle&&this.gxGridCols>1,l="cursor:"+(document.createTextRange?
"hand":"pointer")+";",c=new gx.text.stringBuffer,o=this.columns,n=o.length,m,p;!this.gxIsFreestyle&&h&&n++;var q=[],t,w;if(Number(this.pageSize)!==0){m=this.getMaxPage();if(this.currentPage<=0)this.currentPage=1;else if(this.currentPage>m)this.currentPage=m;t=Math.max(this.pageSize*(this.currentPage-1),0);w=Math.min(t+this.pageSize,this.rows.length)}else{t=0;w=this.rows.length}this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=
this.columnHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;var v="";this.gxHtmlTags.indexOf("class=")==-1&&(v=' class="'+this.gxCssClass+'"');m="";gx.lang.emptyObject(this.gxBackground)||(m=m+(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,true)+"');"));gx.lang.emptyObject(this.gxBorderWidth)||(m=m+(";border: solid "+this.gxBorderWidth+"px "));m=gx.lang.emptyObject(this.gxBordercolor)?m+";":m+(this.gxBordercolor+
";");this.ownerGrid.width>0&&(m=m+("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";"));if(this.gxAllowCollapsing){c.append('<table><tr valign="top"><td>');c.append('<img class="collapse-icon" style="cursor:pointer;" src="');if(this.gxCollapsed){m="display:none;";c.append(gx.ajax.getImageUrl(gx,"expandImage"))}else c.append(gx.ajax.getImageUrl(gx,"collapseImage"));c.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></td><td width="100%">')}c.append("<table "+v+' id="'+
this.gxCmpContext+this.gxGridObject+'Tbl" ');gx.lang.emptyObject(this.gxToolTipText)||c.append('title="'+this.gxToolTipText+'" ');v=b.exec(this.gxHtmlTags);p="";v&&v.length>1&&(p=v[1]);p=p+m;c.append('style="');c.append(p);c.append('" '+this.gxHtmlTags.replace(b,"")+">");gx.lang.emptyObject(this.headerText)||c.append('<tr><td colspan="'+n+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>");v=o.length;if(!this.gxIsFreestyle){c.append("<thead>");c.append("<tr>");this.appendDeleteHeader(c,
gx.grid.deletePositions.left);var y=gx.ajax.getImageUrl(gx,"ascImage"),A=gx.ajax.getImageUrl(gx,"descImage"),s=0,u;for(m=0;m<v;m++){p=o[m];c.append('<th nowrap="nowrap" class="'+this.columnHeaderClass+'"');u="";gx.lang.gxBoolean(p.visible)||(u=u+"display:none;");if(p.width){if(!p.gxWidthUnit)p.gxWidthUnit="px";u=u+("width:"+p.width+p.gxWidthUnit+";")}p.align&&(u=u+("text-align:"+p.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==
gx.grid.styles.report)){u=u+("background-color:"+this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&this.gxTitleBackstyle==gx.grid.styles.uniform){u=u+("background-color:"+this.gxBackColor+";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(u=u+("color:"+this.gxTitleForeColor+";"));gx.lang.emptyObject(this.gxTitleFont)||(u=u+this.gxTitleFont);c.append(' style="'+u+';"');c.append(' colindex="'+
s+'"');c.append(">");s++;if(gx.lang.emptyObject(gx.text.trim(p.title)))c.append("&nbsp;");else{c.append("<span");p.gxTooltip&&c.append(' title="'+p.gxTooltip+'"');u="";if(p.sortable){u=l;c.append(' onclick="'+this.gridObject()+".grid.setSort("+p.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"")}c.append('">');c.append(p.title);if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=y;this.descLabel.src=A;p.sortable&&
this.sortColumn==p.index&&c.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,q))}c.append("</span>")}c.append("</th>")}this.appendDeleteHeader(c,gx.grid.deletePositions.right);c.append("</tr>");c.append("</thead>")}c.append("<tbody>");l=true;for(m=t;m<w;m++){q=this.rows[m];a&&(m===t&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,q.gxId);y=q.gxDeleted();l=!l;s=(l?this.evenRowClass:this.oddRowClass)+(y?" RowDeleted":"");if(this.gxIsFreestyle&&!(this.gxTitleBackstyle==
gx.grid.styles.report||this.gxTitleBackstyle==gx.grid.styles.uniform))s=this.tableClass;p=new gx.text.stringBuffer;u="tr";if(k&&this.gxIsFreestyle&&(m>0&&m%this.gxGridCols===0||m===0&&this.gxGridCols>0)){m>0&&c.append("</tr>");c.append("<tr>")}this.gxIsFreestyle&&(u="td");A="";this.gxTitleBackstyle==gx.grid.styles.report&&(A=l?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)A=this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)A=
this.gxBackColor;if(!this.gxIsFreestyle||this.gxIsFreestyle&&k){p.append("<"+u+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+q.gxId+"'");this.gxIsFreestyle&&k?p.append(' gxrow="'+q.gxId.toString()+'"vAlign="'+this.columns[1].gxControl.verticalAlign+'"'):p.append(' gxrow="'+q.gxId.toString()+'"');this.gxIsFreestyle||p.append(' class="'+s+'"');q.selected&&p.append(' data-selected="1"');s="";A&&(s="background-color:"+A+";");gx.lang.emptyObject(this.gxLinesFont)||(s=s+this.gxLinesFont);s&&p.append(' style="'+
s+'" ');p.append(">");c.append(p.toString())}if(this.gxIsFreestyle){if(k){c.append("<table width='100%' cellspacing='0' cellpadding='0'");c.append("><tbody>")}p=this.gxBuffer.toString();c.append(p)}this.gxIsFreestyle||this.appendDeleteImage(c,q,gx.grid.deletePositions.left);for(s=0;s<v;s++){p=o[s];u=gx.lang.gxBoolean(p.visible);var C=q.gxProps[p.index],K=q.values[p.index],B=p.gxControl;if(this.gxIsFreestyle&&B.type==gx.html.controls.types.row&&p.index===0)B.isFreestyleRow=true;B.setGridData({grid:this.ownerGrid,
row:q,gridId:this.gxId,gridRow:q.gxId});if(f){delete B.formattedValue;B.value=K;B.id=p.htmlName+"_"+B.gridRow}else B.setProperties.apply(B,C);if(a)delete gx.usrPtys[B.id];else if(gx.usrPtys[B.id]!==void 0)for(var M in gx.usrPtys[B.id]){if(M=="enabled")B.rtEnabled=true;B.setIndividualProp(M,gx.usrPtys[B.id][M])}if(y){B.rtEnabled=true;B.enabled=false}if(C.Value)B.value=C.Value;if(C.FormattedValue)B.formattedValue=C.FormattedValue;if(C.Values)B.possibleValues=C.Values.v;if(this.gxIsFreestyle&&B.type==
gx.html.controls.types.row&&p.index===0){B.id=this.gxCmpContext+this.gxGridObject+"Row_"+q.gxId;if(h&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)B.oncontextmenu=this.gridObject()+".showContextMenu(this, event);";if(A)B.style=B.style+("background-color:"+A+";")}if(!this.gxIsFreestyle){c.append('<td valign="'+p.valign+'"');c.append(' colindex="'+s+'"');C="";if(!u){C=C+"display:none;";B.visible&&(!p.isGxRemove()&&!this.ownerGrid.isPromptColumn(p))&&this.ownerGrid.addColPropertyAfterRender(s,
"Visible",1)}if(p.width){if(!p.gxWidthUnit)p.gxWidthUnit="px";C=C+("width:"+p.width+p.gxWidthUnit+";")}else if(p.gxColSize)B.colSize=p.gxColSize;p.align&&(C=C+("text-align:"+p.align+";"));B.style&&(C=C+B.style);C&&c.append(' style="'+C+'" ');c.append(">")}c.append(B.getHtml());this.gxIsFreestyle&&(B.type==gx.html.controls.types.row&&p.index===0)&&this.appendDeleteImage(c,q,gx.grid.deletePositions.left);B.persistValue();this.gxIsFreestyle||c.append("</td>");if(this.gxIsFreestyle){p.index==this.columns.length-
1&&this.appendDeleteImage(c,q,gx.grid.deletePositions.right);p=p.buffer.toString();c.append(p)}}this.gxIsFreestyle&&k?k&&c.append("</tbody></table></td>"):this.appendDeleteImage(c,q,gx.grid.deletePositions.right)}this.gxIsFreestyle&&(this.gxGridCols>0&&k)&&c.append("</tr>");c.append("</tbody>");c.append("<tfoot>");m="";if(h||this.hasPagingButtons()){m=this.buildNavigation(n);c.append(m)}gx.lang.emptyObject(this.footerText)||c.append('<tr><td colspan="'+n+'" class="'+this.footerClass+'">'+this.footerText+
"</td></tr>");c.append("</tfoot>");c.append("</table>");this.gxAllowCollapsing&&c.append("</td></tr></table>");if(gx.dom.shouldPurge()){f=["onblur","onclick","onfocus","onchange"];h=gx.dom.byTag("input",this.container);m=0;for(a=h.length;m<a;m++)gx.dom.purgeElement(h[m],f);h=gx.dom.byTag("textarea",this.container);m=0;for(a=h.length;m<a;m++)gx.dom.purgeElement(h[m],f);h=gx.dom.byTag("select",this.container);m=0;for(a=h.length;m<a;m++)gx.dom.purgeElement(h[m],f);h=gx.dom.byTag("span",this.container);
m=0;for(a=h.length;m<a;m++)gx.dom.purgeElement(h[m],f);h=gx.dom.byTag("img",this.container);m=0;for(a=h.length;m<a;m++)gx.dom.purgeElement(h[m],f)}var G=gx.dom.getActiveElement();m=G&&(G.id||G.name)&&gx.dom.isChildNode(G,this.container);this.container.innerHTML=c.toString();m&&setTimeout(function(){var a=gx.dom.el(G.id||G.name);if(a){gx.csv.disableFocus=true;a.focus()}},10);this.rendered||this.defineEventHandlers();c.clear();c=null;g();this.rendered=true};this.defineEventHandlers=function(){this.gxAllowHovering&&
!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);this.gxAllowHovering&&!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this);this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[this.gxAllowSelection&&!this.gxIsFreestyle],true),this);this.isGxTrn()&&gx.evt.attach(this.container,
"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&a.tagName=="TR"&&a.getAttribute("gxrow")&&gx.dom.findParentByTagName(a,"DIV")==this.container};this.getTargetRow=function(a,b){var c=a;for(this.isGridRow(c)||(c=gx.dom.findParentByTagName(a,"TR"));c&&gx.dom.isChildNode(c,this.container);){if(this.isGridRow(c)&&(!b||b=="body"&&c.parentNode.tagName=="TBODY"||b=="header"&&c.parentNode.tagName=="THEAD"))return c;c=gx.dom.findParentByTagName(c,"TR")}};this.mouseOverHandler=function(a){(a=
this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&this.startRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(a){(a=this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&this.endRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.contextMenuHandler=function(a){var b=this.getTargetRow(gx.evt.source(a),"body");b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=
function(a,b){var c=this.getTargetRow(gx.evt.source(a),"body");c&&this.setRowSelected(c,c.getAttribute("gxrow"),true,b)};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a),"body")&&this.ownerGrid.rowKeyPressed(a)};this.changePage=function(a){var b=this.getMaxPage(),a=parseInt(a,0);a<=0?a=1:a>b&&(a=b);this.currentPage=a;this.render()};this.setRowSelected=function(a,b,c,g){var g=g===void 0||g,h=function(){if(g){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;
gx.dom.forEachChild(a,this,function(b){if(a.gxOriginalBackcolor===void 0)b.gxOriginalBackcolor=b.style.backgroundColor})}this.instanciateSelectionVars(b);var c=this.rows.length,f,h=[];for(f=0;f<c;f++){var n=this.rows[f];n.selected=n.gxId==b;if(n.selected){if(g){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html;gx.dom.addClass(a,this.selectedRowClass)}h.push(n)}else if(g){n=gx.dom.el(this.gxCmpContext+this.gxGridObject+
"Row_"+n.gxId);if(n!=null&&n.gxSBackcolor!==void 0){n.style.backgroundColor=n.gxSBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(n,this,function(a){if(a!=null&&a.gxSBackcolor!==void 0)a.style.backgroundColor=a.gxSBackcolor});gx.dom.removeClass(n,this.selectedRowClass)}}}for(f=0;f<h.length;f++){this.instanciateSelectedRow(h[f]);g&&gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=
this.gxSelectionColor.Html})}};c&&(g||gx.O.isTransaction())?setTimeout(h.closure(this),100):h.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject.CmpContext,this.parentGxObject.IsMasterPage);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a){this.setSelectedRowVars(a);this.gxOnLineActivate&&!this.ownerGrid.isLoading&&this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,
a.gxId)};this.setSelectedRowVars=function(a){for(var b=this.parentGxObject,c=this.columns.length,g=0;g<c;g++){var h=this.columns[g],k=b.GXValidFnc[h.gxId];if(k!=null){var l=a.values[g];if(this.ownerGrid.isUsercontrol)l=this.properties[a.id][h.index].value;k.v2v&&k.c2v(l)}}};this.startRowHover=function(a,b){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(a){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor});
var c=this.getRowById(b);if(this.gxAllowHovering&&this.gxHoverColor&&!c.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html})}};this.endRowHover=function(a,b){var c=this.getRowById(b);if(this.gxAllowHovering&&!c.selected&&a.gxHBackcolor!==void 0){a.style.backgroundColor=a.gxHBackcolor;gx.util.browser.isIE()&&
gx.dom.forEachChild(a,this,function(a){if(a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor})}};this.hasPagingButtons=function(){return this.usePaging&&(!this.isFirstPage()||!this.isLastPage())};this.buildNavigation=function(a){function b(a,c,e,d,f){return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+f+'" onblur="this.style.textDecoration = \'none\';"><span '+(d!==void 0?'id="'+d+'"':"")+' style="'+g+'" class="'+l+'" onclick="'+c+'" onMouseOver="this.className=\''+
o+"';window.status='"+e+"';return true;\" onMouseOut=\"this.className='"+l+"';window.status='';return true;\">"+a+"</span></a>"}function c(a,b,e,d){return'<span class="'+a+'"'+(e?' onclick="'+b+'" ':"")+('style="'+n+(e?"":"opacity:.7;cursor:default")+'"')+' title="'+d+'">&nbsp;&nbsp;</span>'}var g="cursor:"+(document.createTextRange?"hand":"pointer")+";",h=new gx.text.stringBuffer,k=this.getRowCount();this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)a=this.gxGridCols;
gx.lang.emptyObject(this.gxRealTitleBackColor)?h.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):h.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">');var l=this.navigationLinkClass,o=this.highlightedNavigationLinkClass,n="padding-left:20px;padding-bottom:5px;";if((k>0||k===0&&!this.isFirstPage())&&this.usePaging){h.append('<div style="padding-bottom:5px;">');
if(this.currentPage<=0)this.currentPage=1;h.append(c("PagingButtonsFirst",this.getPaginEvent("FIRST"),!this.isFirstPage(),gx.getMessage("GXM_first")));h.append(c("PagingButtonsPrevious",this.getPaginEvent("PREV"),!this.isFirstPage(),gx.getMessage("GXM_previous")));h.append(c("PagingButtonsNext",this.getPaginEvent("NEXT"),!this.isLastPage(),gx.getMessage("GXM_next")));h.append(c("PagingButtonsLast",this.getPaginEvent("LAST"),!this.isLastPage(),gx.getMessage("GXM_last")));h.append("</div>")}this.isGxTrn()&&
(!this.gxHasAddlines&&this.parentGxObject.Gx_mode!="DSP")&&h.append(b("["+this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));h.append("</td></tr>");return h.toString()};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)=="0"};this.getPaginEvent=function(a){var b=this.gxGridName.toUpperCase()+
"PAGING";return"javascript:gx.fn.setHidden('"+this.gxCmpContext+b+"','"+a+"');gx.evt.execEvt('"+this.gxCmpContext+"E"+b+".', gx.evt.dummyCtrl);"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var a=0;this.handleLabel=function(b){if(b.src){var c="img"+a;a++;return"<img name='"+c+"' border='0' src='"+b.src+"'>"}return b};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&
b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var c=a.table,g=c.getColumnByIndex(c.sortColumn),h,k;h=a.values[c.sortColumn];k=b.values[c.sortColumn];gx.lang.instanceOf(h,Array)||(h=[h]);gx.lang.instanceOf(k,Array)||(k=[k]);switch(g.type){case gx.types.numeric:g=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:g=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,
"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:g=function(a){return gx.lang.booleanValue(a)?1:0};break;default:g=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var l=Math.max(h.length,k.length),o=0,n=0;o===0&&n<l;n++){var m=h[n];m==null&&(o=-1);var p=k[n];p==null&&(o=1);if(o===0){m=g(m);p=g(p);o=m==p?0:m>p?1:-1}o!==0&&(o=o*(c.ascSort?1:-1))}return o}};
gx.grid.column=function(c,b,a,e,d){this.table=null;this.index=-1;this.title=c||"";this.type="undefined"!=typeof b?b:gx.types.character;this.width=a||"";this.align=e||"left";this.valign=d||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(c,b,a,e){this.table=null;this.id=c;this.gxParentRowId=e||"";this.gxId=a+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=b.Props||[];this.gxRenderProps=b.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.GxObject=function(){this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.ajax.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings=[];this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls=[];this.VarControlMap=
[];this.FormBCs=[];this.GridBCs=[];this.LvlOlds=[];this.ServerEvents=[];this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})/;this.getContainer=function(){var c=this.cmpRegex.exec(this.CmpContext);if(c=gx.dom.el(c[1]+"gxHTMLWrp"+c[2]))return c};this.setObjectType=function(c){this.ObjectType=c};this.getObjectType=function(){return this.ObjectType};this.isTransaction=
function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};this.setAjaxSecurity=function(c){this.AjaxSecurity=c};this.setOnAjaxSessionTimeout=function(c){switch(c){case "Warn":this.OnSessionTimeout=gx.ajax.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=gx.ajax.timeoutActions.callObj}};this.addKeyListener=function(c,b){gx.evt.addKeyListener(this.CmpContext,c,b)};this.clearMessages=function(){this.MsgList.length=0};this.addMessage=function(c){this.MsgList.push(c)};
this.showMessages=function(){for(var c=[],b=this.MsgList.length,a=0;a<b;a++)c.push({att:"",type:2,text:this.MsgList[a]});b={};b[""==this.CmpContext?"MAIN":this.CmpContext]=c;gx.fn.setErrorViewer(b);this.clearMessages()};this.setPrompt=function(c,b){gx.fn.attachCtrl(c,{isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:b});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[c]=function(a){if((a=(a||gx.dom.el(this.CmpContext+c)).parentNode)&&a.href)if((a=a.href.match("javascript:(.+)"))&&
a.length>1){a=decodeURIComponent(a[1]);try{eval(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setPrompt")}}}};this.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var c=[],b=gx.csv.lastEvtResponse.gxValues,a=b.length,e=0;e<a;e++){var d=b[e];if(d.CmpContext==this.CmpContext&&gx.lang.booleanValue(d.IsMasterPage)==this.IsMasterPage){c.push(d);break}}gx.fn.setPostValues(c)}};this.refreshInputs=function(c){for(var b=c.length,a=0;a<b;a++){var e=this.getValidStructFld(c[a][1]);
null!=e&&"function"==typeof e.c2v&&e.c2v()}};this.refreshOutputs=function(c){for(var b=[],a=0,e=c.length;a<e;a++){var d=c[a];if(d.fld){var f=this.getValidStructFld(d.fld);if(null!=f)f.v2c();else{f=this.getVariable(d.av);if(null!=f&&"object"==typeof f){var g=this.getFormBCForVar(d.av);null!=g&&this.bcToScreen(g,f);(g=this.getGridForColl(d.av))&&g.refreshCollection(f)}gx.fn.setHidden(gx.csv.ctxControlId(d.fld),f)}}else d.ctrl&&b.push(d)}a=0;for(e=b.length;a<e;a++)d=b[a],gx.uc.isUserControl(d.ctrl)&&
(d.ctrl.execV2CFunctions(!1),d.ctrl.execShowFunction());this.showMessages()};this.refreshServerOutputs=function(c){for(var b=c.length,a=0;a<b;a++){var e=c[a],d=gx.fn.getHidden(this.CmpContext+e.fld);void 0!=d&&((e=this.getValidStructFld(e.fld))&&e.v2v?(e.v2v(d),e.v2c()):this.setVariable(c[a].av,d))}};this.getContextObject=function(c){return null!=this.getValidStructFld(c)&&(c=gx.fn.getControlValue_impl(this.CmpContext+c),null!=c)?c:""};this.getValidStructId=function(c){if(!gx.lang.emptyObject(c))for(var b=
this.getControlIds(),a=0;a<b.length;a++)if(validStruct=this.getValidStruct(b[a]),this.isSameField(validStruct,c))return b[a];return-1};this.getValidStructFld=function(c){if(this.getValidStructFld_cache[c])return this.getValidStructFld_cache[c];if(!gx.lang.emptyObject(c))for(var b=this.getControlIds(),a=b.length,e=0;e<a;e++){var d=this.getValidStruct(b[e]);if(this.isSameField(d,c))return this.getValidStructFld_cache[c]=d}return this.getValidStructFld_cache[c]=null};this.isSameField=function(c,b){var a=
c.fld;if(a==b)return!0;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(b=b.substring(this.CmpContext.length));0!=c.grid&&(b=b.replace(/_([0-9]{4})*$/,""));return a==b};this.getUserFocus=function(){var c=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(c)&&"notset"!=c){var b=gx.dom.byId(c);if(!gx.lang.emptyObject(b)&&!gx.fn.isAccepted(b)){c=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var a=gx.O;gx.O=this;b=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=a;gx.csv.cmpCtx=
c;c=gx.lang.emptyObject(b)?"":b.id}}if(gx.lang.emptyObject(c)){if(this.hasMasterPage()&&(c=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(c)))return c;b=[];for(a=0;a<this.WebComponents.length;a++)if(0==this.WebComponents[a].CmpContext.indexOf("MP"))b.push(this.WebComponents[a]);else if(c=this.WebComponents[a].getUserFocus(),!gx.lang.emptyObject(c))return c;for(a=0;a<b.length&&!(c=b[a].getUserFocus(),!gx.lang.emptyObject(c));a++);}return c};this.hasMasterPage=function(){return null!=this.MasterPage};
this.setComponent=function(c){this.CmpControls[c.id.toLowerCase()]=c};this.getComponentPrefix=function(c){return(c=this.getComponentData(c))?c.Prefix||"":""};this.getComponentData=function(c){return this.CmpControls[c.toLowerCase()]};this.createWebComponent=function(c,b,a,e,d,f){e=e||"";c=f||this.getComponentPrefix(c);b=gx.ajax.dynComponent(b,a,c,e);b.DynComponentMap||(b.DynComponentMap={});b.DynComponentMap[f+e]=d;gx.ajax.setPostResponse(b)};this.setWebComponent=function(c){this.deleteComponent(c.CmpContext,
c);this.WebComponents[c.CmpContext]=c;this.WebComponents.push(c);c.JustCreated=!0;gx.fx.obs.notify("webcom.render",[c])};this.getWebComponent=function(c){return this.WebComponents[c]};this.deleteComponent=function(c,b){var a=this.getWebComponent(c);if(a){gx.cache.deleteInlineCode(c+a.ServerClass.toLowerCase());this.deleteComponentHiddens(c);gx.lang.emptyObject(b)||gx.fn.setHidden(b.CmpContext,b.ServerClass);a.ondestroy();delete this.WebComponents[c];for(var a=this.WebComponents.length,e=0;e<a;e++)if(this.WebComponents[e].CmpContext==
c){this.WebComponents.removeAt(e);break}var a=this.WebComponents,d;for(d in a)isNaN(parseInt(d))&&0==d.indexOf(c)&&this.deleteComponent(d)}};this.deleteComponentHiddens=function(c){var c=gx.fn.filterHiddens(RegExp("^"+c),gx.http.viewState),b;for(b in c)b&&gx.fn.deleteHidden(b)};this.setCmpContext=function(c){void 0!=c&&(""!=c&&(this.IsComponent=!0),this.CmpContext=c)};this.getOldLvl=function(c){for(var b in this.LvlOlds)for(var a=this.LvlOlds[b],e=a.length,d=0;d<e;d++)if(a[d]==c)return b;return-1};
this.refreshDependantGrids=function(c){for(var b=this.Grids.length,a=0;a<b;a++)for(var e=this.Grids[a],d=e.refreshVars,f=d.length,g=0;g<f;g++)if(d[g].fld==c.fld){e.filterVarChanged();break}};this.setGrid=function(c){this.Grids[c.gridName]=c;var b=this.getGridIdxByName(c.gridName);-1!=b?this.Grids[b]=c:this.Grids.push(c)};this.getGrid=function(c){return this.Grids[c]};this.getGridIdxByName=function(c){for(var b=this.Grids.length,a=0;a<b;a++)if(this.Grids[a].gridName==c)return a;return-1};this.getGridIdx=
function(c){for(var b=this.Grids.length,a=0;a<b;a++)if(this.Grids[a].gridId==c)return a;return-1};this.getGridById=function(c,b){for(var b=b||"",a=this.Grids.length,e=0;e<a;e++){var d=this.Grids[e];if(d.gridId==c&&(!d.parentRow||gx.text.endsWith(b,d.parentRow.gxId)))return d}return null};this.getGridForColl=function(c){for(var b=this.Grids.length,a=0;a<b;a++){var e=this.Grids[a];if(e.boundedCollName==c)return e}return null};this.getFormBCForVar=function(c){for(var b in this.FormBCs){var a=this.FormBCs[b];
if(a&&a.gxvar==c)return a}return null};this.getGridBC=function(c){var b=c;this.IsComponent&&0==c.indexOf(this.CmpContext)&&(b=c.substring(this.CmpContext.length));return this.GridBCs[b]};this.getFormBC=function(c){var b=c;this.IsComponent&&0==c.indexOf(this.CmpContext)&&(b=c.substring(this.CmpContext.length));return this.FormBCs[b]};this.addGridBCProperty=function(c,b,a,e){var d=this.getGridBC(c);"undefined"==typeof d&&(d={},d.gxvar=e,this.GridBCs[c]=d);this.addBCProperties(d,b,a,e)};this.addBCProperty=
function(c,b,a,e){var d=this.getFormBC(c);"undefined"==typeof d&&(d={},d.gxvar=e,this.FormBCs[c]=d);this.addBCProperties(d,b,a,e)};this.addBCProperties=function(c,b,a,e){if(b instanceof Array)for(var d=b.length,f=0;f<d;f++){if("undefined"==typeof c[b[f]])if(f<d-1)c[b[f]]={};else{c[b[f]]=a;"object"==typeof this[e]&&(a.v2bc=function(){var c=this[a.gxvar];"date"==a.type&&(c=(new gx.date.gxdate(c)).getString("Y4MD"));this.valueToBCProp(this[e],b,c)});break}c=c[b[f]]}else"string"==typeof b&&(c[b]=a)};
this.valueToBCProp=function(c,b,a){try{for(var e=b.length,d=0;d<e;d++)if(1<e&&(d<e-1&&void 0===c[b[d]])&&(c[b[d]]={}),"object"==typeof c[b[d]])c=c[b[d]];else{c[b[d]]=a;break}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","valueToBCProp")}};this.bcToScreen=function(c,b){for(var a in c)if("gxvar"!=a)try{if("object"==typeof b[a])this.bcToScreen(c[a],b[a]);else{var e=c[a];if((0==e.grid||gx.csv.validatingGrid&&e.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(e.hc)&&e.v2v)e.v2v(b[a]),e.v2c()}}catch(d){gx.dbg.logEx(d,
"gxfrmutl.js","bcToScreen")}};this.addGridUCEventHandler=function(c,b,a){gx.lang.emptyObject(this.GridUCsEvts[c])&&(this.GridUCsEvts[c]=[]);this.GridUCsEvts[c].push({e:b,h:a})};this.getGridUCEventHandlers=function(c){c=this.GridUCsEvts[c];return gx.lang.emptyObject(c)?[]:c};this.setGridUCDynProp=function(c,b,a,e,d){this.setGridUCProp(c,b,a,void 0,d)};this.setGridUCProp=function(c,b,a,e,d){gx.lang.emptyObject(this.GridUCsProps[c])&&(this.GridUCsProps[c]=[]);this.GridUCsProps[c].push({p:b,h:a,v:e,t:d});
"InternalTitle"==b&&(this.GridUCsProps[c].title=e)};this.getGridUCProperties=function(c){c=this.GridUCsProps[c];return gx.lang.emptyObject(c)?[]:c};this.addUsercontrolBinding=function(c,b){this.UCBindings[c]=b};this.setUserControl=function(c){c.ContainerName&&(this.UserControls[c.ContainerName]=c)};this.getUserControl=function(c){var b=this.UserControls[c];!b&&""!=this.CmpContext&&(b=this.UserControls[this.CmpContext+c]);return b};this.execV2CFunctions=function(c){for(var b in this.UserControls)if(this.UserControls.hasOwnProperty(b)){var a=
this.UserControls[b];try{a.execV2CFunctions(c)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","execV2CFunctions")}!0==c&&a.execShowFunction()}};this.execC2VFunctions=function(){for(var c in this.UserControls)if(this.UserControls.hasOwnProperty(c)){try{this.UserControls[c].execC2VFunctions()}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","execC2VFunctions")}try{this.UserControls[c].saveProperties()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","execC2VFunctions")}}};this.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",
this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};this.setVariable=function(c,b){FormattedValue=this[c]=b;0!=c.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+c,b);if(void 0!=this.VarControlMap[c]){var a=this.VarControlMap[c].type;if("date"==a||"dtime"==a)"string"==typeof b&&(b=new gx.date.gxdate(b)),FormattedValue="date"==a?b.getStringWithFmt("Y4MD"):b.getStringWithFmt("Y4MD")+" "+b.getTimeString(!0,!0);"decimal"==a&&"."!=gx.decimalPoint?(FormattedValue=b.toString().replace(".",
gx.decimalPoint),"string"==typeof b&&(this[c]=gx.num.parseFloat(b))):"int"==a&&"string"==typeof b&&(this[c]=gx.num.parseInt(b));gx.fn.setHidden(this.CmpContext+this.VarControlMap[c].id,FormattedValue)}"Gx_mode"==c&&this.setMode();void 0!=this.UCBindings[c]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[c],b)};this.getVariable=function(c){return this[c]};this.isServerEvent=function(c){for(var b=this.ServerEvents.length,a=0;a<b;a++)if(this.ServerEvents[a]==c)return!0;return!1};this.setEventParameters=
function(c,b){gx.csv.lastEvtRow=null;gx.O=this;var a=!0,e=-1;gx.csv.cmpCtx=this.CmpContext;for(var d=c.length,f=0;f<d;f++){var g=c[f][0],h=c[f][1],k=c[f][2],l=!1,o;for(o in b)if(o.toLowerCase()==g.toLowerCase()){this.setVariable(k,b[o]);l=!0;break}l||this.setVariable(k,b);g=this.getValidStructFld(h);null!=g?(0!=g.grid&&-1==e?e=g.grid:0!=g.grid&&g.grid!=e&&(a=!1),g.v2c()):gx.fn.setHidden(this.CmpContext+h,this.getVariable(k))}a&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(e))};this.executeServerEvent=
function(c,b,a){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var e=!0;void 0!=b&&!1==b&&(e=!1);b="string"==typeof a?a:"";gx.lang.emptyObject(gx.csv.lastEvtRow)||(b=gx.csv.lastEvtRow);""==b&&!gx.lang.emptyObject(gx.csv.validatingGrid)&&(b=gx.csv.lastRow[gx.csv.validatingGrid.gridId]);gx.evt.execEvt(this.CmpContext+"E"+c+"."+b,gx.evt.dummyCtrl,e)};this.executeEnterEvent=function(c,b){if(b&&b.onblur)b.onblur();if(!gx.evt.cancelAndRefresh(c)){gx.dom.hasSubmitControl()&&gx.evt.cancel(c,!0);b&&("INPUT"==b.nodeName&&
gx.dom.isEditControl(b))&&gx.evt.cancel(c,!0);var a=this.gxOWithEnter();if(null!=a){gx.evt.enter=!0;var e="ENTER";a.IsMasterPage&&(e+="_MPAGE");e=a.CmpContext+"E"+e+".";gx.evt.isEnterEvtCtrl(b)&&(a=gx.fn.controlRowId(b))&&(e+=a);gx.evt.execEvt(e,gx.evt.dummyCtrl);gx.evt.enter=!1;gx.evt.cancel(c,!0)}}};this.gxOWithEnter=function(){if(this.hasEnterEvent)return this;if(this.IsComponent){var c=this.cmpRegex.exec(this.CmpContext),b=""==c[1]&&0==c[0].indexOf("MP"),c=gx.getObj(c[1],b);if(!gx.lang.emptyObject(c))return c.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();
return null};this.getLastControlId=function(){return this.GXLastCtrlId};this.getValidStruct=function(c){return this.GXValidFnc[c]};this.getControlIds=function(){return this.GXCtrlIds};this.getControlIdsh=function(){return this.GXCtrlIdsh};this.getUsercontrolFromChild=function(c){for(var b in this.UserControls)if(this.UserControls.hasOwnProperty(b)){var a=this.UserControls[b].getContainerControl();if(gx.dom.isChildNode(c,a))return this.UserControls[b]}return null};this.installFlatLevelDatePickers=
function(){for(var c=null,b=this.getControlIds(),a=b.length,e=0;e<a;e++)c=this.getValidStruct(b[e]),void 0!=c&&(0==c.grid&&void 0!=c.dp)&&gx.fn.installDatePicker(this.CmpContext+c.fld,c.dp.f,c.dp.st,c.dp.wn,c.dp.mf,gx.fn.datePickerFormat(c.dp.pic,c.dp.dec,c.len))};this.installImageControls=function(){for(var c=gx.dom.byClass("gx-multimedia-upload"),b=0,a=c.length;b<a;b++)gx.html.multimediaUpload.createControl(c[b]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};this.clearMultimediaValue=
function(c){c=gx.html.multimediaUpload.getElements(c);c.fileField.onchange(c.fileField);gx.fn.setHidden(c.fileField.id,"");gx.fn.setHidden(c.uriField.id,"");gx.fn.setHidden("gxBlob"+c.fileField.id,"")};this.refreshOlds=function(){for(var c in this.LvlOlds){var b=this.LvlOlds[c];if("function"!=typeof b){var a=gx.fn.lvlGrid(parseInt(c)),e=void 0;0!=a&&(e=gx.fn.currentGridRow(a));for(var a=b.length,d=0;d<a;d++){var f=b[d],g=f,h="",k=gx.fn.vStructForOld(g);if(k){if(!k.gxgrid||0<k.gxgrid.grid.rows.length)h=
gx.typedOld(k.fld,g,k.type)}else gx.lang.emptyObject(e)||(f+="_"+e),h=gx.fn.getHidden(f);"undefined"!=typeof h&&(k||(window[g]=h),this[g]=h)}}}};this.deleteEventHandlers=function(){try{gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","deleteEventHandlers")}};this.ondestroy=function(){try{this.deleteEventHandlers();for(var c in this.UserControls)if(this.UserControls.hasOwnProperty(c)){var b=this.UserControls[c];if(!gx.lang.emptyObject(b.destroy))try{b.destroy()}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","ondestroy")}}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","ondestroy")}};this.onpost=function(){var c=gx.O;gx.setGxO(this.CmpContext,this.IsMasterPage);if(this.hasMasterPage())this.MasterPage.onpost();for(var b=this.WebComponents.length,a=0;a<b;a++)this.WebComponents[a].onpost();this.ReadonlyForm&&(this.IsComponent&&c!=this)&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(c.CmpContext,c.IsMasterPage)};this.roControlsAsHidden=function(){for(var c=this.getControlIds(),b=c.length,
a=0;a<b;a++){var e=this.getValidStruct(c[a]);if(0==e.grid&&"function"==typeof e.val){var e=this.CmpContext+e.fld,d=gx.dom.el(e);d&&!gx.fn.isAccepted(d)&&gx.fn.setHidden(e,gx.fn.getControlValue(e))}}};this.onload=function(){gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this.CmpContext,this.IsMasterPage);this.screenToVars();this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this.CmpContext,this.IsMasterPage));for(var c=this.Grids.length,b=0;b<c;b++)this.Grids[b].loadGrid();
c=this.WebComponents.length;for(b=0;b<c;b++)this.WebComponents[b].onload();gx.setGxO(this.CmpContext,this.IsMasterPage);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.execV2CFunctions(!0);this.JustCreated=!1;gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass)};this.onunload=function(){if(this.hasMasterPage())this.MasterPage.onunload();for(var c=this.Grids.length,b=0;b<c;b++)this.Grids[b].cleanup(),this.Grids[b]=null;this.Grids=[];c=this.WebComponents.length;
for(b=0;b<c;b++)this.WebComponents[b].onunload(),this.WebComponents[b]=null;this.WebComponents=[];this.getValidStructFld_cache={}};this.screenToVars=function(){try{for(var c=this.getControlIds(),b=c.length,a=0;a<b;a++){var e=this.getValidStruct(c[a]);e&&(0==e.lvl&&"function"==typeof e.c2v)&&e.c2v()}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","screenToVars")}};this.postbackLoad=function(){this.hasMasterPage()&&this.MasterPage.postbackLoad();for(var c=this.WebComponents.length,b=0;b<c;b++)this.WebComponents[b].postbackLoad();
this.IsComponent&&this.JustCreated&&(this.installImageControls(),this.installFlatLevelDatePickers());this.execV2CFunctions(!0);this.conditionsChanged=this.JustCreated=!1};this.addDragSource=function(c,b,a,e){gx.fx.dnd.addSource(this,c,b,a,e)};this.addDropTarget=function(c,b,a,e){gx.fx.dnd.addTarget(this,c,b,a,e)};this.addContextSetter=function(c,b,a,e){gx.fx.ctx.addSetter(this,c,b,a,e)};this.addContextTracker=function(c,b,a,e){gx.fx.ctx.addTracker(this,a,e)};this.addEventHandler=function(c,b,a){gx.fx.dom.addEventHandler(this,
c,b,a)};this.updateBitmapValue=function(c,b,a,e){c=gx.html.multimediaUpload.getContainer(c);"file"==gx.html.multimediaUpload.getOptionValue(c)?this[b]=e:this[a]=e}};
gx.uc={getNew:function(c,b,a,e,d,f,g,h,k){e=eval(e);gx.lang.inherits(e,gx.uc.UserControl,!0);e=new e;e.ContainerName=d;e.DesignContainerName=d;e.setupControl(c,f,b,a,g,h,k);return e},fromChild:function(c){var b=gx.pO.getUsercontrolFromChild(c);if(null!=b||gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUsercontrolFromChild(c),null!=b))return b;for(var a=gx.pO.WebComponents.length,e=0;e<a;e++)if(b=gx.pO.WebComponents[e].getUsercontrolFromChild(c),null!=b)return b;return null},getUserControlObj:function(c){var b=
gx.O.getUserControl(c);if(gx.lang.emptyObject(b)){if(gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUserControl(c),!gx.lang.emptyObject(b)))return b;for(var a=gx.pO.WebComponents.length,e=0;e<a&&!(b=gx.pO.WebComponents[e].getUserControl(c),!gx.lang.emptyObject(b));e++);}return b},userControlContainerId:function(c){var b=c.lastIndexOf("_");return-1!=b&&(b=c.substring(0,b)+"Container"+c.substring(b),null!=gx.dom.byId(b))?b:c+"Container"},setProperties:function(c,b){var a=gx.uc.getUserControlObj(gx.uc.userControlContainerId(c));
if(null!=a)if(void 0!=b.length)for(var e=b.length,d=0;d<e;d++)for(var f in b[d]){var g=b[d][f];a[f]=g}else for(f in b)g=b[f],a[f]=g},isUserControl:function(c){if(gx.lang.emptyObj(gx.O.UserControls))return!1;if(c instanceof gx.uc.UserControl)return!0;c=gx.dom.byId(gx.uc.userControlContainerId(c));return null!=c&&"DIV"==c.tagName?!0:!1},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=
0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.RealControl=this.C2ShowFunction=null;this.IsPostBack=!1;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(c){return gx.dom.byId(this.DesignContainerName+
c+(""!=this.GridRow?"_"+this.GridRow:""))};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl};this.setupControl=function(c,b,a,e,d,f,g){this.ParentObject=c;this.ControlName=b;this.ControlId=a;this.LastIdBefore=e;this.ControlLvl=void 0!=d?d:0;this.GridId=void 0!=f?f:0;this.GridRow=void 0!=g?g:"";this.ParentObject.GXValidFnc[this.ControlId]={lvl:this.ControlLvl,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl}};
this.addValidFunction=function(c,b,a){this.ValidFunctions.push(c);this.ParentObject.addUsercontrolBinding(b,a+(""==this.GridRow?"":"_"+this.GridRow))};this.validateControl=function(){gx.csv.validatingUC=this;for(var c=this.ValidFunctions.length,b=0;b<c;b++)if(!this.ValidFunctions[b].call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var c=this.getContainerControl();if(gx.lang.emptyObject(document.frames))c.onfocus=this.onfocus,
this.RealControl=c;else{var b=document.frames.length;if(0<b)for(var a=0,a=0;a<b;a++){var e=document.frames[a];if(!0==gx.dom.isChildNode(e,c)){e.frameElement.onfocus=this.onfocus;this.RealControl=e.frameElement;break}}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);this.execShowFunction();gx.csv.anyError||this.setFocusBase()};this.onchange=
function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(c){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=c};this.createWebComponent=function(c,b,a,e,d){this.ParentObject.createWebComponent(c,b,a,this.GridRow,e,d)};this.deleteWebComponent=function(c){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(c))};
this.notifyContext=function(c,b){gx.fx.ctx.notify(null,c,b)};this.addV2CFunction=function(){if(1==arguments.length&&"function"==typeof arguments[0])this.V2CFunctions.push(arguments[0]);else{var c=arguments[0],b=arguments[1],a=arguments[2];this.V2CFunctions.push(function(e,d,f){var g=b;f&&(d&&(g=b+"_"+d),e.ParentObject[c]=gx.fn.getControlValue(g));e[a](e.ParentObject[c])})}};this.addC2VFunction=function(c){this.C2VFunctions.push(c)};this.setC2ShowFunction=function(c){this.C2ShowFunction=c};this.execV2CFunctions=
function(c){var b=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var a=0,e=this.V2CFunctions,d=e.length,a=0;a<d;a++)try{e[a](this,this.GridRow,c)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=b};this.execC2VFunctions=function(){var c=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var b=0,a=this.C2VFunctions,e=a.length,b=0;b<e;b++)try{a[b](this,this.GridRow)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=c};this.execShowFunction=
function(){try{null!=this.C2ShowFunction&&this.getContainerControl()&&this.C2ShowFunction(this)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execV2CFunctions")}this.IsPostBack=!0};this.getEventRow=function(){return this.GridRow};this.eventHandler=function(c,b,a){gx.evt.setReady(!1);gx.setGxO(this.ParentObject.CmpContext,this.ParentObject.IsMasterPage);if(0<c){var e=this.DesignContainerName,d=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);d&&d[1]&&(e=d[1]);this.ParentObject[e]=
this;(c=this.ParentObject.getGridById(c))&&c.instanciateRow(b)}this.execC2VFunctions();a.call(this.ParentObject,this.getEventRow());gx.evt.setReady(!0)};this.addEventHandler=function(c,b){this[c]=this.eventHandler.closure(this,[this.GridId,this.GridRow,b])};this.addProperty=function(c,b){this.Properties[c]=b};this.setProp=function(c,b,a,e){this.addProperty(c,b);this.PropTypes[c]=e;gx.lang.isBooleanType(e)?this[c]=gx.lang.gxBoolean(a):"color"==e?gx.lang.emptyObject(a)||(this[c]="number"==typeof a||
"string"==typeof a?gx.color.html(a):a):gx.lang.isNumericType(e)?gx.lang.emptyObject(a)||(this[c]=gx.num.parseFloat(a)):this[c]=a};this.setDynProp=function(c,b,a,e){var d=this.getDynPropertyValueFromHidden(c,b);void 0===d&&(d=a);this.DynProperties.push(c);this.setProp(c,b,d,e)};this.refreshDynProperties=function(){for(var c=0,b=this.DynProperties.length;c<b;c++){var a=this.DynProperties[c];this[a]=this.getDynPropertyValueFromHidden(a,this.Properties[a])}};this.getDynPropertyValueFromHidden=function(c,
b){var a=gx.fn.getHidden(this.getHiddenName(b));void 0===a&&(a=gx.fn.getHidden(this.getHiddenName(c)));return a};this.setGridProperties=function(){for(var c=this.ParentObject.getGridUCProperties(this.ControlName),b=c.length,a=0;a<b;a++){var e=c[a],d=e.v;"undefined"==typeof d&&(d=this.getHiddenName(e.h),d=gx.fn.getHidden(d),"color"==e.t&&(d=gx.color.html(d)));this.setProp(e.p,e.h,d,e.t)}};this.setGridEventHandlers=function(){for(var c=this.ParentObject.getGridUCEventHandlers(this.ControlName),b=c.length,
a=0;a<b;a++){var e=c[a];this.addEventHandler(e.e,e.h)}};this.getHiddenName=function(c){var b="";""!=this.GridRow&&(b="_"+this.GridRow);return this.ParentObject.CmpContext+this.ControlName.toUpperCase()+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+c+b};this.saveProperties=function(){for(var c in this.Properties){var b=this[c];"function"!=typeof this.Properties[c]&&("undefined"!=typeof b&&("undefined"!=typeof b.R&&"undefined"!=typeof b.G&&"undefined"!=typeof b.B)&&(b=gx.color.rgb(b.R,b.G,b.B)),
gx.lang.isBooleanType(this.PropTypes[c])&&(b=b?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[c]),b))}}}};
gx.printing={loaded:!1,tries:0,waitInterval:100,IFrameId:"gxprintHelper_Iframe",print:function(c){if(gx.printing.avoidPrintingApplet)this.printDirect(c);else{if(!this.loaded){var b='<applet name="GeneXusPrintAppletForWindows" archive="'+gx.util.resourceUrl("printingappletsigned.jar",!0)+'" code="com/genexus/printing/Printer.class" width="0" height="0">',b=b+('<param name="path" value="'+gx.util.resourceUrl(gx.basePath,!0)+'">');document.body.appendChild(gx.html.nodesFromText(b+'<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p></applet>')[0]);
this.loaded=!0}0==this.tries?this.printWhenReady(c):gx.dbg.logMsg("Already trying to print a document.")}},printDirect:function(c){if(c){var b=gx.dom.byId(gx.printing.IFrameId);b||(b=document.createElement("IFRAME"),b.id=gx.printing.IFrameId,b.style.visibility="hidden",document.body.appendChild(b));b.src=c.reportFile;b.onload=function(){this.contentWindow.print();this.onload=null;this.src=""}}},printWhenReady:function(c){this.tries>=60*this.waitInterval?(this.tries=0,gx.dbg.logMsg("The printing applet was not loaded.")):
(this.tries++,this.isReady()?(document.GeneXusPrintAppletForWindows.printReport(c.reportFile,c.printerRule,"GXPRN.INI"),this.tries=0):setTimeout(function(){gx.printing.printWhenReady(c)},this.waitInterval))},isReady:function(){var c=document.GeneXusPrintAppletForWindows;return c&&("function"==typeof c.isReady||"unknown"==typeof c.isReady)?c.isReady():!1}};
gx.fn=function(){var c=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/;return{attachedControls:function(){return gx.attachedControls},closeWindow:function(b){if("string"==typeof b){if(this.closeFromServer(b))return;b=[]}b||(b=[]);if(gx.popup.ispopup()){var a=gx.popup.getPopup(),c=a.url?gx.util.noParmsUrl(a.url):"";if(!a.frameWindow||-1!=a.frameWindow.location.href.search(c+"(\\?.*)?$")||gx.grid.drawAtServer){a.close(b);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():
(b=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(b)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),location.href=gx.ajax.absoluteurl(b)))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(b){try{if(window.parent&&window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(b)):window.parent.gx.fn.closeWindow(gx.json.evalJSON(b)),
!0}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(b,a){gx.evt.execLoad=!1;b&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(a)},invalidEmptyValue:function(b){if(gx.lang.emptyObject(b.s)){for(var a=b.v.length,c=0;c<a;c++)if(b.v[c][0]===b.s)return!1;return!0}return!1},selectedDescription:function(b){for(var a=b.v.length,c=0;c<a;c++)if(b.v[c][0]===b.s)return b.v[c][1];return null},setGridCheckBoxValue:function(b,a,c,d){this.setCheckBoxValue(b+
"_"+a,c,d)},setGridDecimalValue:function(b,a,c){return this.setGridControlValue(b,a,c)},setGridControlValue:function(b,a,c,d){if(void 0!==a)return this.setControlValue(b+"_"+a,c,d)},setVarValues:function(b,a){for(var c=b.length,d=0;d<c;d++){var f=gx.fn.vStructForVar(b[d]);f&&f.v2v?f.v2v(a[d]):eval(b[d]+'="'+a[d]+'"')}},setControlValue:function(b,a,c){b=gx.csv.ctxControlId(b);this.setControlValueAny(b,a,c)},setControlValueAny:function(b,a,c){var d=gx.O.getValidStructFld(b),f=gx.dom.el(b);if(d&&("dtime"==
d.type||"date"==d.type))""===a?a=gx.date.nulldate_toc(d.len,d.dec):"string"==typeof a&&(a=new gx.date.gxdate(a));a instanceof gx.date.gxdate?gx.lang.emptyObject(d)||(a=gx.date.formatDateTime(d.dec,d.len,gx.dateFormat,a)):gx.lang.instanceOf(a,Number)||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal?!gx.lang.emptyObject(d)&&void 0!=d.pic&&(a=gx.num.formatNumber(a,d.dec,d.pic,d.len,d.sign,!1)):"string"==typeof a&&null!=f&&"SPAN"==f.nodeName&&!gx.lang.emptyObject(d)&&void 0!=d.isPwd&&
(a=gx.text.formatString(a,d.len,d.isPwd));this.persistGridControlValue(b,a);null!=f&&"SPAN"!=f.nodeName?this.setControlValue_impl(f,a,c):gx.fn.setHidden(b,a);null!=f&&"SPAN"==f.nodeName&&(b=f);var g=!1,g=d?d.multiline:null!=f&&"TEXTAREA"==f.tagName;this.setControlValue_span_safe(b,a,c,g)},setDecimalValue:function(b,a){this.setControlValue(b,a)},toDecimalValue:function(b,a,c){return gx.num.parseFloat(b,a,c)},toDatetimeValue:function(b,a){return new gx.date.gxdate(b,a)},setCheckBoxValue:function(b,
a,c){try{var b=gx.csv.ctxControlId(b),d=gx.dom.form()[b];null==d&&(d=gx.dom.byId(b));d&&(d.checked=a.toString()==c.toString(),d.value=a)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(b,a,c){var d=b.lastIndexOf("_");if(-1!=d&&(c=c?c:gx.O.getValidStructFld(b.substring(0,d)))&&c.gxgrid)d=b.substring(d+1),4<d.length?(d=d.substring(4,d.length),(d=gx.O.getGrid(c.gxgrid.gridName+"_"+d))&&d.persistControlValue(b,a,c)):c.gxgrid.persistControlValue(b,a,c)},setControlValue_span_safe:function(b,
a,c,d){"string"==typeof b&&(b=gx.dom.el("span_"+b));if(null!=b){if("SPAN"!=b.nodeName)var f="span_",f="string"==typeof b?f+b:f+gx.dom.id(b),b=gx.dom.byId(f);this.setControlValue_fmt(b,a,c,d)}},setControlValue_fmt:function(b,a,c,d){try{if(null!=b)if(1==c){var f=b.getAttribute("gxlink");!gx.lang.emptyObject(f)&&(null!=b.firstChild&&"A"==b.firstChild.nodeName)&&(b=b.firstChild);gx.html.setInnerHtml(b,a,!0)}else{0==c&&"string"==typeof a&&(a=a.replace(/ +/g," "));for(f=b;null!=b.firstChild&&"#text"!=b.firstChild.nodeName;)b=
b.firstChild;0==c&&(null==b.firstChild||"#text"!=b.firstChild.nodeName)&&"A"!=b.nodeName?gx.html.setInnerText(f,a,c,d):gx.html.setInnerText(b,a,c,d)}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(b,a,c){"string"==typeof b&&(b=gx.dom.el(b));a instanceof gx.date.gxdate&&(a=a.getString());null!=b&&(null!=b&&"undefined"!=typeof b.length&&"undefined"!=typeof b[0]&&"radio"==b[0].type?this.setRadioValue(b,a):gx.dom.isEditControl(b)||"textarea"==b.type?b.value=
gx.lang.decodeValue(a):void 0!=b.value?b.value=a:this.setControlValue_span_safe(b,a,c))},setGridComboBoxValue:function(b,a,c){this.setComboBoxValue(b+"_"+a,c)},setComboBoxValue:function(b,a){var c=gx.util.browser.isIE(),b=gx.csv.ctxControlId(b),d=gx.dom.byId(b);if(d){var f="",g=gx.O.getValidStructFld(b);gx.lang.emptyObject(g)||(f=g.type);"int"==f?a=gx.text.trim(a):"date"==f&&a instanceof gx.date.gxdate?a=a.getStringWithFmt("Y4MD"):"decimal"!=f&&(a=gx.text.rtrim(a));var h=a,k=!1;try{for(var l=d.options.length,
o,n=0;n<l;n++){var m=d.options[n];if(gx.lang.isNumericType(f)?Number(m.value)==Number(a):gx.text.trim(m.value)==gx.text.trim(a)){if(h="undefined"!=typeof m.innerText?m.innerText:m.text,d.selectedIndex=n,k=!0,m.setAttribute("selected","selected"),o=m,c)break}else c||m.removeAttribute("selected")}o&&(o.value!=d.value&&gx.util.browser.isFirefox())&&gx.dom.redrawControl(d);k||(d.selectedIndex=0);0<g.grid&&this.persistGridControlValue(b,a,g)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(b,
h,0)}},loadComboBox:function(b,a){this.setComboValues(b,a)},setGridComboValues:function(b,a){if(0==this.controlGridId(b))this.setComboValues(b,a);else for(var c=1;999>c;c++){var d=gx.text.padr(c.toString(),4,"0"),d=gx.dom.el(b+"_"+d);if(null==d)break;this.setComboValues(d.name,a)}},setComboValues:function(b,a){var c=gx.dom.el(b),d=gx.util.browser;if(null!=c){var f="";-1!=c.selectedIndex&&(f=c.options[c.selectedIndex].value);for(;c.options.length>a.length;)c.remove(c.options.length-1);for(;a.length>
c.options.length;){var g=document.createElement("OPTION");c.options.add(g)}for(var h=a.length,k=0;k<h;k++)if(g=c.options[k],g.value=a[k][0],d.isIE()&&9<=d.ieVersion()?g.innerText!=a[k][1]&&(g.innerText=a[k][1]):g.text!=a[k][1]&&(g.text=a[k][1]),Number(g.value)?Number(g.value)==Number(f):gx.text.trim(g.value)==gx.text.trim(f))c.selectedIndex=k;if(0==c.options.length)c.selectedIndex=-1;else if(-1==c.selectedIndex||c.selectedIndex>c.options.length-1)c.options[0].selected=!0}},getControlRefById:function(b){return(b=
this.validStruct(b))?0==b.grid?this.getControlRef(b.fld,!1):this.getControlGridRef(b.fld,b.grid):null},getControlRef:function(b,a){a||(b=gx.csv.ctxControlId(b));if("FORM"==b)return document;var c=gx.dom.el(b);return null!=c?c:null},getControlRef_list:function(b){var a=gx.dom.byName(b);if(null!=a)return a;b=gx.dom.byId(b);return null!=b?[b]:null},screen_CtrlRef:function(b){b=this.getControlGridRef(b,this.controlGridId(b));return!gx.lang.emptyObject(b)?("hidden"==b.type&&(b=gx.dom.el("span_"+gx.dom.id(b))),
b):null},screen_CtrlId:function(b){return this.getControlGridId(b,this.controlGridId(b))},getControlGridId:function(b,a,c){b=gx.csv.ctxControlId(b);if(gx.dom.el(b))return b;try{if(0==a)return b;void 0==c&&(c=this.currentGridRow(a));return b+"_"+c}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(b,a,c){var b=gx.csv.ctxControlId(b),d=gx.dom.el(b);if(d)return d;try{if(0==a)return gx.dom.el(b);void 0==c&&(c=this.currentGridRow(a));return gx.dom.el(b+"_"+c)}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","getControlGridRef")}},setCurrentGridRow:function(b,a){if("0000"!=a)try{return gx.currentRows[b]=a}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(b){try{return gx.currentRows[b]}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(b){b=this.currentGridRowImpl(b);return void 0==b?"0001":b},gridDuplicateKey:function(b){b=gx.fn.validStruct(b);if(void 0!=b){var a=b.gxgrid;if(null!=a&&(a=a.updateControlValue(b,!0)))return a.gxHasDuplicateKey()}return!1},
firstGridControl:function(b){var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&d.grid==b)return a[i]}return-1},lastGridControl:function(b){var a=gx.fn.controlIds();for(i=a.length-1;0<=i;i--){var c=gx.fn.validStruct(a[i]);if(void 0!=c&&c.grid==b)return a[i]}return-1},getGridDateTimeValue:function(b,a){var c=this.getControlValue(b+"_"+a);return new gx.date.gxdate(c,gx.dateFormat)},getGridDecimalValue:function(b,a,c,d){return this.getDecimalValue(b+"_"+
a,c,d)},getGridIntegerValue:function(b,a,c){return this.getIntegerValue(b+"_"+a,c)},getGridControlValue:function(b,a){return this.getControlValue(b+"_"+a)},getGridCheckBoxValue:function(b,a,c,d){return this.getCheckBoxValue(b+"_"+a,c,d)},getCheckBoxValue:function(b,a,c){var b=gx.csv.ctxControlId(b),d=gx.dom.form()[b];null==d&&(ControlList=gx.dom.byName(b),null!=ControlList&&(d=ControlList[0]));return null==d?0:d.checked?a:c},getControlValue:function(b,a){return this.getControlValue_impl(gx.csv.ctxControlId(b),
a)},getControlValue_impl:function(b,a){try{var c=gx.O&&gx.O.getValidStructFld(b),d;if(c&&c.gxgrid&&!c.gxgrid.isUsercontrol||!c||!c.gxgrid){var f=gx.dom.el(b);if(null!=f&&gx.O){c&&!f.gxtype&&(f.gxtype={type:c.type,len:c.len,dec:c.dec});if("hidden"==f.type||"text"==f.type||"textarea"==f.type||"checkbox"==f.type)d=f.value;else if("radio"==f.type)d=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==f.nodeName&&0<f.options.length?d=-1!=f.selectedIndex?"screen"==a?f.options[f.selectedIndex].text:f.options[f.selectedIndex].value:
"screen"==a?f.options[0].text:f.options[0].value:c&&("date"!=c.type&&"dtime"!=c.type&&"bits"!=c.type&&"audio"!=c.type&&"video"!=c.type)&&(d=f.value),"IMG"==f.nodeName||"INPUT"==f.nodeName&&"image"==f.type)d=f.getAttribute("src");if(void 0!==d)return c&&"boolean"==c.type?gx.lang.gxBoolean(d):d}f=gx.dom.el("span_"+b);if(null!=f){var g=gx.fn.getHidden(b);return void 0!=g?g:gx.fn.getControlValue_span(f)}f=gx.dom.form()[b];if(null!=f)return this.getControlValueInt(f);f=gx.dom.byId("_"+b);if(null!=f)return f.value;
(ControlList=gx.dom.byName(b))&&0==ControlList.length&&(ControlList=gx.dom.byName("_"+b));if(null!=ControlList){for(var h=ControlList.length,c=0;c<h;c++)if(f=ControlList[c],null!=f)return this.getControlValueInt(f);if(f=ControlList[0])return f.value}}if(null==f)return"nohidden"===a?null:gx.fn.getHidden(b)}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","getControlValue_impl")}return""},setRadioValue:function(b,a){var b=gx.csv.ctxControlId(b),c=gx.dom.byName(b);if(null!=c)for(var d=c.length,f=0;f<d;f++)if(gx.text.ltrim(c[f].value)==
gx.text.ltrim(a)){c[f].checked=!0;break}},getRadioValue:function(b){for(var a=b.length,c=0;c<a;c++)if(b[c].checked)return b[c].value;return""},getControlValueInt:function(b){if(void 0!=b.length&&"SELECT"!=b.tagName&&"undefined"!=typeof b[0]&&"radio"==b[0].type)return this.getRadioValue(b);if("checkbox"==b.type)return b.checked;if("SPAN"==b.tagName){var a=gx.fn.getHidden(gx.dom.id(b));return void 0!=a?a:gx.fn.getControlValue_span(b)}if("INPUT"==b.tagName&&"text"==b.type&&(a=gx.dom.id(b),gx.O)){var c=
gx.O.getValidStructFld(a);if(c&&"undefined"!=typeof c.pic){if("int"==c.type)return this.getIntegerValue(a,-1!=c.pic.indexOf(",")?gx.thousandSeparator:"");if("decimal"==c.type)return this.getDecimalValue(a,-1!=c.pic.indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return b.value},getControlValue_span:function(b){for(;b&&!b.nodeValue;)b=b.childNodes[0];return b&&b.nodeValue?b.nodeValue:""},getDateValue:function(b){return this.getDateTimeValue(b)},getDateTimeValue:function(b){try{var a=this.getControlValue(b,
"nohidden");if(!gx.lang.emptyObject(a))return new gx.date.gxdate(a,gx.dateFormat);a=gx.fn.getHidden(gx.csv.ctxControlId(b));return new gx.date.gxdate(a,"Y4MD")}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(b,a){var c=0,c=gx.O?gx.O.getValidStructFld(b):null,d=this.getControlValue(b);c&&(d=gx.num.extractValue(c.pic,d));d="undefined"!=typeof d?d.toString():"";c=d.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(d,10,a):(new gx.num.dec.bigDecimal(gx.text.replaceAll(d,
a,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(c)?0:c},getDecimalValue:function(b,a,c){var d=gx.O?gx.O.getValidStructFld(b):null,b=this.getControlValue(b);d&&(b=gx.num.extractValue(d.pic,b));a=gx.num.parseFloat(b||"",a,c);return isNaN(a)?0:a},getBlobValue:function(b){var a=gx.dom.el("Object_"+b);if(null!=a){if(a.data)return a.data}else if(a=gx.dom.el("Link_"+b),null!=a)return a.href;return""},getVarControlMap:function(b){for(var a in gx.O.VarControlMap)if("function"!=typeof a){var c=
gx.O.VarControlMap[a];if(c.id==b||gx.O.CmpContext+c.id==b)return a}return null},getVarControlMapForVar:function(b){for(var a in gx.O.VarControlMap)if("string"==typeof a&&a==b)return gx.O.VarControlMap[a];return null},v2cMap:function(b){var a=this.getVarControlMapForVar(b);if(null!=a){var c="";"number"==typeof a.grid&&0!=a.grid&&(c="_"+gx.fn.currentGridRowImpl(a.grid));gx.fn.setHidden(gx.O.CmpContext+a.id+c,gx.O[b])}},c2vMap:function(b){var a=this.getVarControlMapForVar(b);if(null!=a){var c="";"number"==
typeof a.grid&&0!=a.grid&&(c="_"+gx.fn.currentGridRowImpl(a.grid));gx.O[b]=gx.fn.getHidden(gx.O.CmpContext+a.id+c)}},depsToVars:function(b){for(var a=0;a<b.length;a++){var c=b[a],d=gx.fn.vStructForVar(c);!gx.lang.emptyObject(d)&&"function"==typeof d.c2v?d.c2v():this.c2vMap(c)}},verticalFormula:function(b,a,c,d,f,g){var h=gx.fn.vStructForVar(b);gx.lang.emptyObject(h)?this.v2cMap(b):h.v2c();for(var k=gx.fn.currentGridRowImpl(c),l=gx.fn.getGridObj(c),o=0,n=!1,m=l.grid.rows.length,p=0;p<m;p++){var q=
l.grid.rows[p],t=q.gxDeleted(),w=q.gxExists(),v=q.gxIsMod();if(!t&&(w||v))gx.fn.setCurrentGridRow(c,q.gxId),g&&0<g.length?this.depsToVars(g):!gx.lang.emptyObject(h)&&"function"==typeof h.c2v?h.c2v():this.c2vMap(b),d.call(gx.O)&&(n=!0,o=f(p,o))}gx.fn.setCurrentGridRow(c,k);g&&0<g.length?this.depsToVars(g):!gx.lang.emptyObject(h)&&"function"==typeof h.c2v?h.c2v():this.c2vMap(b);n||(o=a);return o},sumFrm:function(b,a,c,d,f,g,h){return gx.fn.verticalFormula(b,a,f,g,function(a,f){var g=gx.num.parseFloat(gx.O[b],
c,d);return 0==a?g:f+g},h)},maxFrm:function(b,a,c,d,f,g,h){return gx.fn.verticalFormula(b,a,f,g,function(a,f){var g=gx.num.parseFloat(gx.O[b],c,d);return 0==a?g:g>f?g:f},h)},minFrm:function(b,a,c,d,f,g,h){return gx.fn.verticalFormula(b,a,f,g,function(a,f){var g=gx.num.parseFloat(gx.O[b],c,d);return 0==a?g:g<f?g:f},h)},averageFrm:function(b,a,c,d,f,g,h){return gx.fn.verticalFormula(b,a,f,g,function(a,f){var g=gx.num.parseFloat(gx.O[b],c,d);return 0==a?g:(f*a+g)/(a+1)},h)},countFrm:function(b,a,c,d,
f){return gx.fn.verticalFormula(b,a,c,d,function(a,b){return 0==a?1:b+1},f)},serialRule:function(b,a,c,d,f){f=f||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(c),c))return f[b];gx.lang.emptyObject(f[a])&&(f[a]=f[b]+d,(c=gx.fn.vStructForVar(a))&&c.v2c(),(b=f.VarControlMap[b])&&gx.fn.setControlValue(b.id,f[a]));return f[a]},setReturnParms:function(b,a,c){try{if(b&&a&&c){var d=a.length;if(d==c.length){gx.setGxO(b.CmpContext,b.IsMasterPage);for(var f=null,g=0;g<d;g++){var h=a[g];if(h){var k=c[g],
l=gx.fn.vStructForVar(h);gx.lang.emptyObject(l)&&(l=gx.fn.vStructForHC(h));if(l){var o=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(l.fld));gx.fn.isAccepted(o)&&(f=o,gx.evt.execOnchange(o));l.v2v&&(l.v2v(k),l.v2c())}else b.setVariable(h,k)}}f&&gx.fn.setFocus(f)}}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","setReturnParms")}},isOutputParm:function(b){return b&&b.IOType&&("out"==b.IOType||"inout"==b.IOType)?!0:!1},checkPopupFocus:function(b){if(gx.popup.ispopup()){var a=gx.popup.getPopup();if(a&&a.frameDocument&&
(b.ownerDocument?b.ownerDocument:b.document).URL!=a.frameWindow.location.href)return a.setFocusFirst(),!1}return!0},persistControlProperty:function(b,a,c){b=gx.fn.screen_CtrlId(gx.csv.ctxControlId(b));gx.usrPtys[b]||(gx.usrPtys[b]={});gx.usrPtys[b][a.toLowerCase()]=c},setCtrlProperty:function(b,a,c){if(gx.O){var d=null,d="FORM"==b?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(b));null!=d&&(this.persistControlProperty(b,a,c),this.setCtrlPropertyImpl(d,a,c))}else gx.fx.obs.addObserver("gx.onready",
this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(b,a,c){var d=gx.fn.screen_CtrlRef(b);null!=d&&(this.setCtrlPropertyImpl(d,a,c),d=d.parentElement,"TD"==d.tagName&&(this.persistControlProperty(b,a,c),this.setCtrlPropertyImpl(d,a,c)))},setCtrlPropertyImpl:function(b,a,c){if(null!=b){var d=gx.O.getValidStructFld(b.id);if(!("Enabled"===a||"Visible"===a)||!d||!(0<d.grid&&gx.fn.rowIsRemoved(d.grid,gx.fn.controlRowId(b)))){switch(a){case "Caption":this.setCtrlCaption(b,
c);break;case "Tooltiptext":b.title=c;break;case "Invitemessage":b.placeholder=c;break;case "Visible":if("INPUT"==b.nodeName&&"button"==b.type)this.setButtonVisibility(b,!this.propertyValueFalse(c));else{"INPUT"==b.nodeName&&("checkbox"==b.type&&"SPAN"==b.parentNode.nodeName?b=b.parentNode:"radio"==b.type&&b.parentNode&&(b="SPAN"==b.parentNode.tagName?b.parentNode:gx.dom.findParentByTagName(b,"table")));if(d=this.propertyValueFalse(c)){var f=gx.dom.el("span_"+b.id);this.setVisible(b,!d);f&&this.setVisible(f,
!d)}else d=b.gxusrdisabled?b.gxusrdisabled:!1,(f=this.getRONode(b.id,d))&&this.setVisible(f,d),this.setVisible(b,!d);gx.fn.showHideDatepicker(b,!d)}gx.fn.checkAttachedProperty(b.id,a,c);break;case "Enabled":d=this.propertyValueFalse(c);if("hidden"===b.type||"SPAN"===b.tagName&&d)return;if("INPUT"===b.nodeName&&"radio"===b.type){c=gx.dom.byName(gx.dom.id(b));a=c.length;for(b=0;b<a;b++)this.setEnabledProperty(c[b],!d);return}gx.dom.isEditControl(b)||"textarea"===b.type||"file"===b.type||"SELECT"===
b.tagName?(f=this.getRONode(b.id,d),gx.fn.isVisible(b,0)||f&&gx.fn.isVisible(f,0)?(f&&this.setVisible(f,d),this.setEnabledProperty(b,!d),this.setVisible(b,!d),gx.fn.showHideDatepicker(b,!d)):this.setEnabledProperty(b,!d),gx.fn.checkAttachedProperty(b.id,a,c)):this.setEnabledProperty(b,!d);break;case "Class":this.setCtrlClass(b,c);break;case "Link":this.setCtrlLink(b,c);break;case "Linktarget":this.setCtrlLinkTarget(b,c);break;case "Backcolor":if((d=gx.color.html(c))&&void 0==b.gxGridName)b.style.backgroundColor=
d.Html;break;case "Forecolor":if(d=gx.color.html(c))b.style.color=d.Html;break;case "Fontbold":d=this.propertyValueFalse(c);b.style.fontWeight=d?"normal":"bold";break;case "Fontitalic":d=this.propertyValueFalse(c);b.style.fontStyle=d?"normal":"italic";break;case "Fontunderline":d=this.propertyValueFalse(c);b.style.textDecoration=d?"none":"underline";break;case "Fontstrikethru":d=this.propertyValueFalse(c);b.style.textDecoration=d?"none":"line-through";break;case "Fontname":b.style.fontFamily=c;break;
case "Fontsize":b.style.fontSize=c+"pt";break;case "Filename":this.setBlobFilename(b,c);break;case "Filetype":this.setBlobFiletype(b,c);break;case "URL":this.setBlobUrl(b,c);break;case "IsBlob":this.setMultimediaType(b,c);break;case "Bitmap":b.src=c;break;case "Multimedia":this.setMultimediaValue(b,c);break;case "Jsonclick":b.jsevent=c;break;case "Source":d=c;f=d.indexOf("?");0<f&&(d=d.substring(0,f));b.src=-1==d.indexOf(":")&&-1==d.indexOf("/")?gx.ajax.objectUrl(c):gx.util.resourceUrl(c,!0);gx.evt.attach(b,
"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==b.tagName||"SPAN"==b.tagName)if(c=gx.json.evalJSON(c),"SELECT"==b.tagName)!1!=c.isset&&(gx.fn.loadComboBox(b.id,c.v),gx.fn.setComboBoxValue(b.id,c.s));else{var f=b.id.substring(5),g="",h=c.s,d=gx.O.getValidStructFld(f);gx.lang.emptyObject(d)||(g=d.type);h="int"==g?gx.text.trim(h):gx.text.rtrim(h);c.s=h;gx.fn.setControlValue_span_safe(f,gx.fn.selectedDescription(c))}break;case "Width":b.width&&(b.width=c);b.style.width=gx.dom.addUnits(c);
break;case "Height":b.height&&(b.height=c),b.style.height=gx.dom.addUnits(c)}if(b=gx.dom.id(b))a=b+"_"+a,gx.fn.isHidden(a)&&gx.fn.setHidden(a,c)}}},setEnabledProperty:function(b,a){var c=gx.dom.id(b);if(!gx.lang.gxBoolean(a)||!gx.fn.isAccepted(b,!1)){if(!0==gx.csv.validating&&a&&null==gx.csv.validActivatedControl&&b!=gx.csv.lastControl){var d=gx.O.getValidStructId(c);d>gx.O.fromValid&&d<=gx.O.toValid&&(gx.csv.validActivatedControl=b)}a?delete gx.disabledControls[c]:gx.util.addOnce(gx.disabledControls,
b,c);b.gxusrdisabled=!a;b.disabled=b.gxdisabled?!0==b.gxdisabled?!0:b.gxusrdisabled:b.gxusrdisabled;this.setEnabled(b,a)}},setEnabled:function(b,a){if(this.disabledAsSpan(b)){var c;try{if("checkbox"==b.type&&(c=b.parentNode),"radio"==b.type)c=b.parentNode.parentNode.parentNode.parentNode}catch(d){}if(gx.lang.booleanValue(a)){if(c&&0==c.className.indexOf("Readonly")&&(c.className=c.className.substring(8)),this.isVisible(b))this.setVisible(b,1),(c=this.getRONode(b.id,!0))&&this.setVisible(c,0)}else if(c&&
0>c.className.indexOf("Readonly")&&(c.className="Readonly"+c.className),this.isVisible(b)&&"password"!=b.type&&"image"!=b.type&&"checkbox"!=b.type)if(c=this.getRONode(b.id,!0)){this.setVisible(b,0);this.setVisible(c,1);var f=gx.O.getValidStructFld(b.id),g=0;!gx.lang.emptyObject(f)&&f.format&&(g=f.format);this.setControlValue_span_safe(c,gx.fn.getControlValue(gx.dom.id(b),"screen")||b.value,g,"textarea"==b.type)}}},disabledAsSpan:function(b){return"IMG"!=b.tagName},setVisible:function(b,a){b.style.display=
0==a?"none":this.displayByType(b.nodeName);var c=gx.O.getValidStructFld(b.id),d=b.parentNode;a&&(c&&c.gxgrid&&!c.gxgrid.grid.gxIsFreestyle&&null!=d.getAttribute("colindex"))&&c.gxgrid.applyPropEntireColumn(d.getAttribute("colindex"),"Visible",a)},getRONode:function(b,a){if(gx.lang.emptyObject(b))return null;var c=gx.dom.byId(b),d="span_"+b,f=gx.dom.byId(d);if(null!=f)return f;if(!a||null==c)return null;f=document.createElement("SPAN");f.setAttribute("id",d);this.setVisible(f,!1);f.className="Readonly"+
c.className;f.appendChild(document.createTextNode(c.value));c.parentNode.insertBefore(f,c);return f},showHideDatepicker:function(b,a){var c=gx.dom.el(gx.dom.id(b)+"_dp_trigger");c&&(c.style.display=a?"inline":"none")},getGridCtrlProperty:function(b,a,c){try{if(0!=b){var d=this.getGridObj(b);if(d){var f=d.grid.getColumnByHtmlName(a);if(f)return f[c.toLowerCase()]}}else return this.getCtrlProperty(a,c)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(b,
a){var c=this.screen_CtrlRef(b);if(null!=c)return this.getCtrlProperty_impl(c,a)},getCtrlProperty_impl:function(b,a){if(null==b)return"";switch(a){case "Tooltiptext":return b.title;case "Invitemessage":return b.placeholder;case "Visible":return"none"!=b.style.display;case "Enabled":return 0!=gx.lang.emptyObject(b.disabled);case "Class":return b.className;case "Backcolor":return gx.color.css(b.style.backgroundColor);case "Forecolor":return gx.color.css(b.style.color);case "Width":return gx.dom.dimensions(b).w;
case "Height":return gx.dom.dimensions(b).h;case "Caption":return this.getCtrlCaption(b);case "Fontbold":return"bold"==b.style.fontWeight;case "Fontitalic":return"italic"==b.style.fontStyle;case "Fontunderline":return"underline"==b.style.textDecoration;case "Fontstrikethru":return"line-through"==b.style.textDecoration;case "Fontname":return b.style.fontFamily;case "Fontsize":var c=parseInt(b.style.fontSize);return isNaN(c)?12:c}},displayByType:function(b){switch(b){case "TABLE":return!gx.util.browser.isIE()||
8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(b,a){try{switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":var c=b.getAttribute("gxformat");null==c&&(c=0);var d=gx.O.getValidStructFld(b.id),f=!1;d&&(f=d.ctrltype?d.multiline:!0);gx.fn.setControlValue_fmt(b,a,c,f);return;case "INPUT":"checkbox"!=b.type&&(b.value=a);return}"#document"==b.nodeName&&(b.title=a)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(b){switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":var a=
b.getAttribute("gxformat");if(null!=a&&"1"==a)return b.innerHTML;for(;null!=b.firstChild&&"#text"!=b.firstChild.nodeName;)b=b.firstChild;return"undefined"!=typeof b.innerText?b.innerText:b.textContent||b.text;case "INPUT":if("checkbox"!=b.type)return b.value;break;default:return""}},propertyValueFalse:function(b){return"string"==typeof b&&(b=b.toLowerCase(),"false"==b||0==gx.num.parseFloat(b))?!0:0==b},setButtonVisibility:function(b,a){var c=a?"":"none",d=b.parentNode;!gx.lang.emptyObject(d)&&"SPAN"==
d.nodeName&&(d.style.display=c,d=d.parentNode,!gx.lang.emptyObject(d)&&"SPAN"==d.nodeName&&(d.style.display=c,d=d.parentNode,!gx.lang.emptyObject(d)&&"SPAN"==d.nodeName&&(d.style.display=c,d=d.parentNode,!gx.lang.emptyObject(d)&&"SPAN"==d.nodeName&&(d.style.display=c))));b.style.display=c},setBlobValue:function(b,a){this.setBlobUrl(gx.dom.el(b)||gx.dom.el("Object_"+b),a)},setBlobFilename:function(b,a){if(null!=b){var c=gx.O.getValidStructFld(b.id);c&&gx.fn.setHidden(c.fld+"_Filename",gx.text.trim(a))}},
setBlobFiletype:function(b,a){if(null!=b){var c=gx.O.getValidStructFld(b.id);c&&gx.fn.setHidden(c.fld+"_Filetype",gx.text.trim(a));c=b;"INPUT"==c.nodeName&&"file"==c.type&&(c=gx.dom.el("Object_"+b.id));null!=c&&(a=gx.util.getContentType(a),this.setObjectCtrlType(c,a),gx.fn.setVisible(c,!0))}},resolveResourceUrl:function(b,a){if(""==b)return a?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.ajax.isabsoluteurl(b))if(gx.ajax.isRelativeToHost(b)){if(0!=b.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+
b,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b,!1);return b},setBlobUrl:function(b,a){var c=gx.html.multimediaUpload.getContainer(b);if(c){var d=this.resolveResourceUrl(a,!1);gx.html.multimediaUpload.setPreviewImage(c,d);gx.html.multimediaUpload.setPreviewLink(c,d)}else if(!a.match(/^[a-z]:[\S]*/i)&&null!=b){c=b;d="INPUT"==c.nodeName&&"file"==c.type;if(""===a)if(d&&gx.util.browser.isIE()){var f=c.parentNode,g=document.createElement("div");g.innerHTML=c.outerHTML;f.removeChild(c);
c=f.appendChild(g.firstChild)}else c.value="";d&&(c=gx.dom.el("Object_"+b.id));null!=c&&(d=gx.util.getContentTypeFromExt(a),c=this.setObjectCtrlType(c,d));null!=c?"IMG"==c.tagName?(a=this.resolveResourceUrl(a,!0),c.src=a):(c.data=a||"about:blank",gx.fn.setVisible(c,!0),this.resizeObject(c),gx.dom.redrawControl(c)):(c=gx.dom.el("Link_"+b.id),null!=c&&(c.style.display=""!=a?"block":"none",c.href=a))}},setGridMultimediaValue:function(b,a,c,d){if(void 0!==a)return this.setMultimediaValue(b+"_"+a,c,d)},
setMultimediaValue:function(b,a,c){var d=gx.dom.el(b);if(d){var f=gx.html.multimediaUpload.getContainer(d),g=this.resolveResourceUrl(a||c||"",!1);if(f){gx.html.multimediaUpload.setPreviewImage(f,g);var h=""==a&&""==c||""!=a;if(!h){var k=gx.dom.el(d.id+"_GXI");k&&(k.value=c)}if((b=gx.dom.el(b))&&""==a)b.value="";this.setMultimediaType(d,h);gx.html.multimediaUpload.setPreviewLink(f,g)}else{if("IMG"==d.tagName||"INPUT"==d.tagName&&"image"==d.type)d.src=g;if((a=d.parentNode)&&"A"==a.tagName&&gx.dom.isMultimediaElement(d))g?
a.href=g:a.removeAttribute("href")}}},setMultimediaType:function(b,a){if(b){var c=gx.html.multimediaUpload.getContainer(b);gx.html.multimediaUpload.setType(c,gx.lang.gxBoolean(a))}},setObjectCtrlType:function(b,a){var c=b;if("IMG"==b.nodeName&&(!a||0==a.indexOf("image/")))return c;if(b.type!=a||"OBJECT"==b.nodeName&&0==a.indexOf("image/"))if(c=0==a.indexOf("image/")?gx.html.nodesFromText('<img id="'+b.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+b.id+'" type="'+a+'">')[0]){try{for(var d in b.attributes)if("id"!=
d&&("type"!=d&&"implementation"!=d)&&b[d])try{c[d]=b[d]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setObjectCtrlType")}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setObjectCtrlType")}if(d=b.parentNode){var h=null,k=d.childNodes.length;for(i=0;i<k;i++)if(d.childNodes[i]==b){i<k-1&&(h=d.childNodes[i+1]);break}gx.dom.removeControlSafe(b);null!=h?d.insertBefore(c,h):d.appendChild(c)}}return c},resizeObject:function(b){var a=gx.lang.emptyObject;!a(b.data)&&"about:blank"!=b.data&&(a(b.width)&&a(b.height)&&a(b.style.width)&&
a(b.style.height))&&(b.style.width="200px",b.style.height="200px")},recoverLostCtrlOnGridRefresh:function(b){if(null==b.form){var a=gx.dom.id(b);void 0!=gx.O.getValidStructId(a)&&"checkbox"==b.type&&(a=b.checked,b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=a)}return b},checkboxClick:function(b,a,c,d){gx.fx.obs.notify("gx.validation");if(gx.evt.fixWebKitOnFocus())a.onfocus();a=this.recoverLostCtrlOnGridRefresh(a);a.value=a.checked?c:d;(b=gx.fn.validStruct(b))&&"function"==typeof b.c2v&&b.c2v()},
setCtrlClass:function(b,a){null!=b&&(b.className=a)},setCtrlLink:function(b,a){if(null!=b)if(""==a)this.unsetCtrlLink(b);else{var c=b.firstChild;if(c&&"A"==c.tagName)c.href=a;else{var d=b.parentNode;if("A"==d.tagName)d.href=a;else{var f=document.createElement("A");f.href=a;c&&"#text"==c.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(f,!0),f.innerHTML=c.nodeValue,b.replaceChild(f,c)):(d.replaceChild(f,b),f.appendChild(b))}}}},unsetCtrlLink:function(b){if(null!=b&&(b=b.parentNode,"A"==b.tagName)){var a=
b.firstChild;ParentTag2=b.parentNode;if(null!=ParentTag2){for(;null!=a;)ParentTag2.insertBefore(a,b),a=b.firstChild;gx.dom.removeControlSafe(b)}}},setCtrlLinkTarget:function(b,a){if(null!=b&&("SPAN"==b.nodeName&&b.firstChild&&(b=b.firstChild),"A"==b.nodeName))b.setAttribute?b.setAttribute("target",a):b.target=a},isVisible:function(b,a){try{for(var c;b&&("undefined"==typeof a||0<=a);){if((c=gx.dom.getComputedStyle(b))&&("hidden"==c.visibility||"none"==c.display))return!1;b=b.parentNode;"undefined"!=
typeof a&&a--}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(b,a){var c=this.gridObjByLvl(b),d=null;if(c)return c=gx.O.getGridById(c.gridId,a)||c,(d=c.grid.getRowByGxId(a))?d.gxIsMod():!0;c=!1;try{c=1==this.getControlValue("nIsMod_"+b+"_"+a)}catch(f){c=!1}return c},gridObjByLvl:function(b){for(var a=gx.O.Grids,c=a.length,d=0;d<c;d++)if(a[d].gridLvl==b)return a[d];return null},forceEnableControls:function(b){for(var a in gx.disabledControls){a=this.getControlRef_list(a);
for(var c=a.length,d=0;d<c;d++)try{"button"!=a[d].type&&"submit"!=a[d].type&&(a[d].disabled=b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","forceEnableControls")}}},alert:function(b,a){try{var c=gx.util.balloon.getNew(b.id);c.setError(a);c.show();gx.csv.invalidForcedCtrl=b}catch(d){alert(a)}},getGridRowMode:function(b,a){var c=this.currentGridRow(a),d=this.rowIsRemoved(a,c),c=this.getControlValue("nRcdExists_"+b+"_"+c);return"1"==d?"DLT":"0"==c?"INS":"UPD"},rowIsRemoved:function(b,a){var c=this.getGridObj(b);
return null!=c&&(c=c.grid.getRowByGxId(a))?c.gxDeleted():!1},getGridObj:function(b){return gx.O.getGridById(b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","changeCmpContext")}},initOld:function(b){void 0==gx.oldValues[b.id]&&(gx.oldValues[b.id]=b.value)},setFocusOnError:function(b){var a=gx.fn.controlGridId(b),b=gx.csv.ctxControlId(b),c=null,c=0==a?gx.dom.el(b):gx.fn.getControlGridRef(b,a);null!=c&&(gx.O.AnyError=1,gx.csv.anyError=!0,c.setAttribute("gxvalid",
"0"),gx.csv.stopOnError&&gx.fn.setFocus(c))},usrSetFocus:function(b){b=gx.csv.ctxControlId(b);!0==gx.csv.validating?gx.usrFocusControl=b:(b=gx.dom.el(b),null!=b&&gx.fn.setFocus(b))},setFocus:function(b,a){if(b){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(b.id)&&
(b=gx.dom.byId(b.id),!b))return;gx.fn.setFocusSafe(b,function(b){gx.util.browser.isIE()&&gx.fn.setSelection(b);b.forcedFocus=!0;a&&a()})}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(b,a){if(b){var c=function(a,b){try{d&&b&&gx.fx.obs.addObserver("gx.onaftervalidate",this,b.closure(this,[a]),{single:!0}),a.focus()}catch(c){}!d&&b&&b(a)},d=gx.csv.setFocusOnload;d||!gx.util.browser.isIE()?gx.lang.doCallTimeout(c,this,[b,a],d?500:0):c(b,a)}},setFocusInit:function(){try{gx.csv.lastActiveControl=
window.document.activeElement}catch(b){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},setFocusOnload:function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var b=null,b=gx.pO.getUserFocus();if(!gx.lang.emptyObject(b)){if("notset"==b)return;var a=gx.pO.getUserControl(gx.uc.userControlContainerId(b));if(gx.lang.emptyObject(a))gx.csv.userFocus=gx.fn.getControlRef(b);else{a.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=gx.csv.userFocus;gx.fn.isAccepted(b)||
(b=gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?gx.csv.lastActiveControl:gx.fn.firstAcceptedControl(gx.popup.ispopup()));try{b?(a=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=b,gx.csv.setFocusOnload=!0,gx.fn.isAccepted(b)?gx.fn.setFocus(b,a):(gx.popup.setFocus(),a())):gx.popup.setFocus()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocusOnload")}}}},setSelection:function(b){if(b&&gx.fn.isVisible(b))try{if(gx.csv.lastControl=b,(gx.dom.isEditControl(b)||"file"==b.type)&&
b.select)b.select();else if("TEXTAREA"==b.nodeName||"SELECT"==b.nodeName)b.focus(),b.select&&b.select()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","setSelection")}},isAccepted:function(b,a){var a=void 0==a||a,c=!0;if(null!=b&&void 0!=b.type&&"hidden"!=b.type&&gx.fn.isVisible(b)&&!1==b.disabled&&(null==b.readOnly||!1==b.readOnly)){if(a){var d=gx.dom.id(b),c=gx.O.getValidStructFld(d),d=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));
c=!gx.lang.emptyObject(c)&&c.nac?!1==c.nac.call(gx.O):!0;gx.setVar("Gx_mode",d)}}else c=!1;return c},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(b){var a=gx.csv.lastControl,c=gx.fn.getControlIndex(a),d=c,f=this.controlGridId(a.id||a.name),g=!1;b&&gx.dom.hasClass(a,"gx_newrow")&&(d=a.gxControlIdx,g=!0);if(-1==d)return!0;a=null;for(a=gx.fn.searchFocus(++d,!0);;a=gx.fn.searchFocus(++d,!0))if(null==a||d==gx.dom.form().elements.length)d=
-1;else{if(b)break;if(gx.evt.isEnterEvtCtrl(a))break;if("INPUT"==a.nodeName&&"submit"!=a.type&&"button"!=a.type&&"image"!=a.type)break}if(!g&&(f&&gx.O.isTransaction())&&this.controlGridId(a.id||a.name)!=f)b=gx.O.getGridById(f),a=gx.dom.el(b.containerName+"_NewRow").parentNode,a.gxControlIdx=c;gx.fn.setFocus(a)},getControlIndex:function(b){var a=gx.dom.form().elements.length-1;return el=this.controlIndex(b,0,a)},controlIndex:function(b,a,c){if(document.all){var d=gx.dom.form(),f=d.elements[a].sourceIndex,
g=d.elements[c].sourceIndex,h=parseInt(a+(c-a)/2)+1,d=d.elements[h].sourceIndex;if(a==c&&b.sourceIndex==f&&b.sourceIndex==g||b.sourceIndex==f)return a;if(b.sourceIndex==g)return c;if(b.sourceIndex==d)return h;if(b.sourceIndex>d&&b.sourceIndex<g)return this.controlIndex(b,h+1,c-1);if(b.sourceIndex>f&&b.sourceIndex<d)return this.controlIndex(b,a+1,h-1)}else return b.gxIndex},searchFocus:function(b,a){return a?this.searchFocusFwd(b):this.searchFocusBack(b)},searchFocusBack:function(b){for(var a=gx.dom.form();0<=
b;b--)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];return null},searchFocusFwd:function(b){for(var a=gx.dom.form(),c=a.elements.length;b<c;b++)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];return null},rowGridId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("gxgridid");return null!=a?a:gx.fn.rowGridId(b.parentNode)},controlRowId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("gxrow");return null!=a?a:gx.fn.controlRowId(b.parentNode)},
controlGridId:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(gx.O.isSameField(d,b))return d.grid}}catch(f){}return 0},oldGridId:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&d.gxold==b)return d.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(b,a){var c="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,b)&&(c=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),
gx.csv.lastGrid)):this.isLvlParmOld(0,b)&&(c=gx.O.Gx_mode);return"no_mode"==c?!0:"UPD"==c||null==gx.csv.validatingGrid?(window[b]=a,!0):!1},isLvlParmOld:function(b,a){try{var c=gx.O.getOldLvl(a);if(0<=c){if(0<b){var d=gx.fn.gridLvl(b);return c<d}return!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&void 0!=d.lvl&&d.grid==b)return d.lvl}}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&d.lvl==b)return d.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(b){try{var a=gx.fn.controlIds();for(i=0;i<a.length;i++){var c=gx.fn.validStruct(a[i]);if(void 0!=c&&c.fld==b)return a[i]}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(b,a){try{var c=null;a&&(c=[]);var d=gx.fn.controlIds(),
f=d.length;for(i=0;i<f;i++){var g=gx.fn.validStruct(d[i]);if(void 0!=g&&b(g))if(g.id=d[i],a)c.push(g);else return g}}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","getVStruct")}return c},vStructForOld:function(b){return gx.fn.getVStruct(function(a){return a.gxold==b})},vStructForVar:function(b){return gx.fn.getVStruct(function(a){return a.gxvar==b})},vStructForVarWId:function(b,a){var c=gx.fn.getVStruct(function(a){return a.gxvar==b},!0),d=c[0],f=c.length;if(1<f)for(var g=0;g<f&&!(d=c[g],d.id==a);g++);return d},
vStructForHC:function(b){return gx.fn.getVStruct(function(a){return a.hc==b})},firstCtrlAfterGrid:function(b,a){for(var c=gx.fn.lastCtrlId(),d=b;d<c;d++){var f=gx.fn.validStruct(d);if(void 0!=f&&f.grid!=a)return d}return c},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(b){try{return gx.oldKeyValues[b]}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(b,a){try{return gx.oldKeyValues[b+gx.fn.currentGridRow(a)]}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","oldGridKey")}return""},
setKey:function(b,a){null!=b&&(gx.oldKeyValues[b]=a)},unsetKey:function(b){null!=b&&(gx.oldKeyValues[b]=void 0)},setGridKey:function(b,a,c){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=c)},unsetGridKey:function(b,a){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=void 0)},removeGridRow:function(b,a){var c=gx.fn.rowIsRemoved(a,b);try{var d=gx.fn.controlIds(),f=d.length;for(i=0;i<f;i++){var g=gx.fn.validStruct(d[i]);if(void 0!=g&&g.grid==a){var h=gx.dom.el(g.fld+"_"+b);null!=h&&(h.gxdisabled=
c,h.disabled=c)}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(a,b)},controlIds:function(){return gx.O.getControlIds()},validStruct:function(b){return gx.O.getValidStruct(b)},lastCtrlId:function(b){if(!0===b)for(var b=this.controlIds(),a=b.length-1;0<=a;a--){if(this.validStruct(b[a]).v2v)return b[a]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(b,a){return 0==a&&b==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(b){try{for(var a=
gx.fn.vStructsArray(),c=gx.fn.controlIds(),d=c.length,f=0;f<d;f++){var g=a[c[f]];if(null!=g){var h=gx.fn.getControlGridRef(g.fld,g.grid);if(h&&gx.fn.isAccepted(h)&&(b||"submit"!=h.type&&"image"!=h.type&&"button"!=h.type&&"fieldset"!=h.type))return h}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var b=gx.dom.el(gx.csv.cmpCtx+"BTN_DELETE");null!=b&&gx.fn.setCtrlPropertyImpl(b,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(){!0!=
gx.csv.validating&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.O.fromValid=gx.csv.lastId,gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(b){var a=function(a){try{for(var b=a.length,c=0;c<b;c++)gx.fn.setCtrlPropertyImpl(a[c],"Enabled",0)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","disableCtrl")}},b=gx.fn.getControlRef_list(b);if(null!=b)if("complete"==
document.readyState)a(b);else gx.evt.on_ready(this,a.closure(this,[b]))},refreshGridRowBC:function(b,a){try{var c=gx.O.getGridBC(b);if(c){var d=gx.pO.getGridForColl(c.gxvar);if(gx.csv.validatingGrid&&d&&gx.csv.validatingGrid.gridId==d.gridId)return gx.fn.setGridHidden(b,a),a=a[parseInt(gx.fn.currentGridRow(d.gridId))-1],gx.O.bcToScreen(c,a),!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(b,a){return this.refreshFormBC(b,a)||this.refreshGridRowBC(b,a)},refreshFormBC:function(b,
a){try{var c=gx.O.getFormBC(b);if("undefined"!=typeof c)return gx.setVar(b,a),gx.fn.setGridHidden(b,a),gx.O.bcToScreen(c,a),!0}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(b){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[b]},getHidden:function(b){gx.http.viewStateLoaded||gx.http.loadState();return gx.http.viewState[b]},setHidden:function(b,a){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[b]=a},setGridHidden:function(b,
a){var c=b,d=gx.fn.oldGridId(b);0<d&&(c=b+"_"+gx.fn.currentGridRowImpl(d));gx.fn.setHidden(c,a)},deleteHidden:function(b){gx.http.viewState&&delete gx.http.viewState[b]},setPostHiddens:function(b){for(var a in b)gx.fn.setGridHidden(a,b[a])},filterHiddens:function(b,a){var c={},d;for(d in a)d&&0==d.search(b)&&(c[d]=a[d]);return c},autoRefreshingControl:function(b){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==b},setPostValues:function(b){if(b){for(var a=
gx.O,c=b.length,d=0;d<c;d++){var f=b[d],g=f.CmpContext,h=gx.lang.booleanValue(f.IsMasterPage);gx.setGxO(g,h);if(!gx.lang.emptyObject(gx.O))for(var k in f)if(!("CmpContext"==k||"IsMasterPage"==k)&&!("object"==typeof f[k]&&gx.fn.refreshBC(k,f[k]))&&"function"!=typeof f[k]){var l=gx.fn.vStructForVar(k);l?l.v2v&&!gx.fn.autoRefreshingControl(l.fld)&&(l.v2v(f[k]),l.v2c()):"GX_FocusControl"==k?a.CmpContext==g&&a.IsMasterPage==h&&(gx.usrFocusControl=f[k]):(l=gx.fn.getVarControlMap(k),gx.lang.emptyObject(l)?
gx.setVar(k,f[k]):gx.setVar(l,f[k]),gx.fn.setGridHidden(k,f[k]))}}gx.setGxO(a.CmpContext,a.IsMasterPage)}},setPostProperties:function(b){if(b){for(var a=gx.O,c=b.length,d=0;d<c;d++){var f=b[d],g=f.CmpContext,h=gx.lang.booleanValue(f.IsMasterPage);gx.setGxO(g,h);if(!gx.lang.emptyObject(gx.O))for(var k in f)if(!("CmpContext"==k||"IsMasterPage"==k||""===k)&&"function"!=typeof f[k])if(g=gx.fn.getControlRef(k,!0),g=null==g?gx.dom.el("Object_"+k):g,null==g)gx.uc.isUserControl(k)&&gx.uc.setProperties(k,
f[k]);else for(var l in f[k])if("object"==typeof f[k][l])for(var o in f[k][l])gx.fn.setCtrlPropertyImpl(g,o,f[k][l][o]);else gx.fn.setCtrlPropertyImpl(g,l,f[k][l])}gx.setGxO(a.CmpContext,a.IsMasterPage)}},loadPostGrids:function(b){if(void 0!=b)for(var a=b.length,c=0;c<a;c++)try{var d=b[c];if(void 0!=d.Count){var f=d.CmpContext,g=d.GridName,h=gx.csv.validatingGrid;if(gx.lang.emptyObject(h)||h.gxComponentContext!=f&&h.gridName!=g)gx.fn.gridObj(f,g,"true"==d.InMasterPage?!0:!1).loadGrid(d,!0)}}catch(k){gx.dbg.logEx(k,
"gxfrmutl.js","loadPostGrids")}},getErrorViewerCtrls:function(){var b=gx.dom.byName("gxErrorViewer");if(0==b.length)for(var b=[],a=gx.dom.byTag("span"),c=a.length,d=0;d<c;d++)"gxErrorViewer"==a[d].name&&b.push(a[d]);return b},setErrorViewer:function(b){gx.O.AnyError=0;if(b)try{gx.fx.obs.notify("gx.onmessages",[b]);var a=gx.dom.byClass("gx_ev","span"),c=a.length,d;for(d in b){var f,g=b[d];gx.lang.isArray(g)||(f=g.fields,g=g.msgs);var h=[];if(f)for(var k=0,l=f.length;k<l;k++){var o=gx.fn.vStructForVar(f[k].replace(/^gx\.O\./,
""));o&&h.push(o.fld)}"MAIN"==d&&(d="");if("undefined"!=typeof g){for(k=0;k<c;k++){var n=a[k];if(n&&n.id==d+"gxErrorViewer"){var m=gx.csv.setFocusOnload?n.innerHTML:"";break}}var p={},q;for(q in g){var t=g[q];t&&1==t.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(t.text)&&"function"!=typeof t)if(""!=t.att&&gx.fn.isVisible(gx.fn.screen_CtrlRef(t.att))){var w=p[t.att];w||(w=gx.util.balloon.getNew(t.att,void 0,h),p[t.att]=w);1==t.type?w.setError(t.text):w.setMessage(t.text)}else m+="<div>"+gx.html.encode(t.text)+
"</div>"}for(var v in p)if(w=p[v],!1==w.show()){gx.fn.setFocusOnError(v);break}for(k=0;k<c;k++)if((n=a[k])&&n.id==d+"gxErrorViewer"&&n.innerHTML!=m)gx.dom.shouldPurge()&&gx.dom.purge(n,!0),n.innerHTML=m,""!=m&&gx.fx.dom.highlight(n,[255,255,165],2500).play()}}}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(b){var a=c.exec(b);return a?a[1]+a[2]:b},setPostComponents:function(b,a,c,d){try{var f=[],g=!1,h=gx.gen.isDotNet(),k;for(k in b)if("function"!=typeof b[k])try{var l=
b[k],o=gx.dom.el(k);!o&&a&&(o=gx.dom.el(a[k]));if(!gx.lang.emptyObject(o)){gx.html.setInnerHtml(o,l);var n=gx.fn.cmpContextFromCtrl(k),m=gx.fn.getHidden(n+"_CMPPGM"),p=m.split("."),q=p.length,m=h&&1<q?p[q-2].toLowerCase():p[q-1].toLowerCase();f.push({type:n,name:m,html:l})}}catch(t){g=!0,gx.dbg.logEx(t,"gxfrmutl.js","setPostComponents")}}catch(w){g=!0,gx.dbg.logEx(w,"gxfrmutl.js","setPostComponents")}if((0==f.length||g)&&"function"==typeof d)d();else{var v=null,y=function(){0<f.length?(v=f.shift(),
gx.fn.createComponentAsync(v,c,y)):"function"==typeof d&&d()},v=f.shift();gx.fn.createComponentAsync(v,c,y)}},createComponentAsync:function(b,a,c){var d=b.type,f=b.name,b=b.html;try{var g=gx.fn.filterHiddens(RegExp("^"+d),a);gx.cache.codeLoaded(d+f)?(gx.fn.createComponentObj(f,d),gx.fn.setPostHiddens(g),"function"==typeof c&&c()):(gx.cache.addInlineCode(d+f),gx.html.processCode(b,!1,function(a,b,d){gx.fn.createComponentObj(a,b);gx.fn.setPostHiddens(d);if(typeof c=="function"){c();gx.fx.obs.notify("gx.onafterevent",
[gx.csv.lastEvtResponse])}},[f,d,g],f))}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","createComponentAsync"),"function"==typeof c&&c()}},createComponentObj:function(b,a){var c=gx.createComponent(b,a);null!=c&&gx.addComponent(c)},getAttachedCtrl:function(b){for(var a=gx.attachedControls.length,c=0;c<a;c++){var d=gx.attachedControls[c];if(d.id==b)return d}return null},attachCtrl:function(b,a){null==gx.fn.getAttachedCtrl(b)&&gx.attachedControls.push({id:b,info:a})},doAttachs:function(){for(var b=gx.fn.attachedControls(),
a=b.length,c=gx.O,d=0;d<a;d++){var f=b[d];gx.setGxO(f.info.wc,f.info.mp);if(f.info.isPrompt&&gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(f.info.wc+f.id),"Visible",!1);else for(var g=f.info.controls,h=g.length,k=0;k<h;k++){gx.fn.addAttach(g[k],f);var l=gx.fn.validStruct(g[k]);gx.fn.checkAttachedPropertyVS(l,"Visible",!1);gx.fn.checkAttachedPropertyVS(l,"Enabled",!1)}}gx.setGxO(c.CmpContext,c.IsMasterPage)},addAttach:function(b,a){var c=gx.fn.validStruct(b);void 0==
c.attachedCtrls&&(c.attachedCtrls=[]);c.attachedCtrls.push(a)},checkAttachedProperty:function(b,a,c){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(b),a,c)},checkAttachedPropertyVS:function(b,a,c){if(void 0!=b&&(b=b.attachedCtrls,void 0!=b))for(var d=b.length,f=0;f<d;f++)gx.fn.checkAttachedControlProperty(b[f],a,c)},checkAttachedControlProperty:function(b,a,c){for(var d=b.id,b=b.info,f=!1,g=b.controls,h=b.wc,k=g.length,l=0;l<k&&!f;l++)gx.fn.getCtrlProperty_impl(gx.dom.el(h+gx.fn.validStruct(g[l]).fld),
a)==c&&(f=!0==c||l==k-1);f&&(b=b.isPrompt?"Visible":a,gx.fn.setCtrlPropertyImpl(gx.dom.el(h+d),b,c))},changeControlOpacity:function(b,a,c,d){var f=Math.round(d),g="",g="string"==typeof b?b:b.id;a>c?(gx.fn.setOpacity(a,g),setTimeout(function(){gx.fn.changeControlOpacity(b,a-10,c,d)},f)):a<c?(gx.fn.setOpacity(a,g),setTimeout(function(){gx.fn.changeControlOpacity(b,a+10,c,d)},f)):gx.fn.setOpacity(c,g)},setOpacity:function(b,a){var c=a;"string"==typeof a&&(c="body"==a?document.body:gx.dom.el(a));null!=
c&&(c=c.style,c.opacity=b/100,c.MozOpacity=b/100,c.filter="alpha(opacity="+b+")")},fadeControl:function(b,a,c){"in"==a?gx.fn.changeControlOpacity(b,0,100,c):gx.fn.changeControlOpacity(b,100,0,c)},fadeIn:function(b,a){gx.fn.fadeControl(b,"in",a)},statusMsg:function(b){window.status=b},objectOnload:function(){null!=gx.pO&&(gx.pO.onload(),gx.setGxO(gx.pO.CmpContext,gx.pO.IsMasterPage))},objectOnUnload:function(){if(null!=gx.pO)gx.pO.onunload()},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},
objectPostback:function(){null!=gx.pO&&gx.pO.postbackLoad()},gridObjFromGxO:function(b){return gx.fn.gridObj(gx.O.CmpContext,b,gx.O.IsMasterPage)},gridObj:function(b,a,c){return gx.getObj(b,c).getGrid(a)},installComponents:function(b){var a=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=a){var c=gx.gen.isDotNet(),d;for(d in a)if(b||!gx.pO.getWebComponent(d)){var f=a[d].toLowerCase(),f=f.split("."),g=f.length,f=c&&1<g?f[g-2]:f[g-1],f=gx.createComponent(f,d);null!=f&&(gx.addComponent(f),setTimeout(function(a){this.addComponentRemoteFiles(a)}.closure(this,
[f]),1))}}},addComponentRemoteFiles:function(b){if(b=b.getContainer())gx.html.processCode(b.innerHTML,!0),gx.dom.fitToParent(b)},datePickerFormat:function(b,a,c){var d=gx.dateFormat,f=d.substr(0,1),g=d.substr(1,1),d=d.substr(2,1),f=gx.fn.datePickerDateFormat(f,b),g=gx.fn.datePickerDateFormat(g,b),b=gx.fn.datePickerDateFormat(d,b),d=gx.fn.datePickerTimeFormat(a);return 0<c&&0<a?f+"/"+g+"/"+b+" "+d:0<c?f+"/"+g+"/"+b:d},datePickerDateFormat:function(b,a){return"Y"==b&&"99/99/9999"==a.substr(0,10)?"%Y":
"Y"==b?"%y":"M"==b?"%m":"D"==b?"%d":""},datePickerTimeFormat:function(b){var a=gx.timeFormat,c;12==a?(a="%I",c=" %p"):(a=24==a?"%H":"",c="");if(2==b)b="";else if(5==b)b=":%M";else if(8==b)b=":%M:%S";else return"";return a+b+c},installDatePicker:function(b,a,c,d,f,g){gx.html.onTypeAvailable("Calendar",gx.fn.installDatePickerIfReady,[b,a,c,d,f,g])},installDatePickerIfReady:function(b,a,c,d,f,g){var h=gx.dom.el(b);if(gx.lang.emptyObject(h)||"SELECT"!=h.nodeName)0==a?Calendar.setup({inputField:b,showsTime:c,
weekNumbers:d,mondayFirst:f,ifFormat:g,button:b+"_dp_trigger",onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:!0}):(gx.lang.emptyObject(h)||(h.style.display="none"),Calendar.setup({inputField:b,showsTime:c,weekNumbers:d,mondayFirst:f,ifFormat:g,flat:b+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0}))},datePickerChanged:function(b,a,c){if(b&&b.dateClicked){c||(c=b.params.inputField);var a=gx.O,d=null,f=gx.fn.controlIds(),g=f.length;for(i=0;i<g;i++){var d=gx.fn.validStruct(f[i]),
h=0!=d.grid?"_"+gx.fn.currentGridRow(d.grid):"";if(c.id==a.CmpContext+d.fld+h)break}null!=d&&void 0!=d.dp&&(f=b.date.print(gx.fn.datePickerFormat(d.dp.pic,d.dp.dec,d.len)),f!=c.value&&(c.setAttribute("gxvalid","0"),c.value=f,c.onchange(),b.callCloseHandler(),0<d.grid&&gx.fn.getGridObj(d.grid).setRowModified(gx.fn.currentGridRow(d.grid)),a.refreshDependantGrids(d)))}},toArray:function(b){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var a=[],c=0,d=b.length;c<d;c++)a[c]=b[c];return a}return Array.prototype.slice.call(b)}}}();
gx.thread={Map:function(){this.map={};this.add=function(c,b){this.map[c]=b};this.remove=function(c){delete this.map[c]};this.get=function(c){return null==c?null:this.map[c]};this.first=function(){return this.get(this.nextKey())};this.next=function(c){return this.get(this.nextKey(c))};this.nextKey=function(c){for(i in this.map){if(!c)return i;c==i&&(c=null)}return null}},Command:function(c,b,a){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){b.apply(c,
a)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(c,b,a,e){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof e=="function")try{e.call(c,retVal)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(c,b,a);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var c=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(c)?null:c;null!=this.key&&this.loadSecToken()},loadSecToken:function(){var c=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(c)?null:c},encrypt:function(c,b){try{if(b=null==b?this.key:b,null!=b){var a=this.rijndael,b=a.hexToByteArray(b),e=a.rijndaelEncrypt(c,b);return a.byteArrayToHex(e)}}catch(d){gx.dbg.logEx(d,
"gxfrmutl.js","encrypt")}return c},decrypt:function(c,b){try{if(b=null==b?this.key:b,null!=b){var a=this.rijndael,b=a.hexToByteArray(b),e=a.hexToByteArray(c),d=a.rijndaelDecrypt(e,b);return a.byteArrayToString(d)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","decrypt")}return c},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(c,b){return c<<b|c>>>32-b},AddUnsigned:function(c,b){var a,e,d,f,g;d=c&2147483648;f=b&2147483648;a=c&1073741824;e=b&1073741824;g=(c&1073741823)+(b&1073741823);return a&e?g^2147483648^d^f:a|e?g&1073741824?g^3221225472^d^f:g^1073741824^d^f:g^d^f},F:function(c,b,a){return c&b|~c&a},G:function(c,b,a){return c&a|b&~a},H:function(c,b,a){return c^b^a},I:function(c,b,a){return b^(c|~a)},FF:function(c,b,a,e,d,f,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(b,
a,e),d),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,f),b)},GG:function(c,b,a,e,d,f,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(b,a,e),d),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,f),b)},HH:function(c,b,a,e,d,f,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(b,a,e),d),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,f),b)},II:function(c,b,a,e,d,f,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(b,a,e),d),g));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,f),b)},ConvertToWordArray:function(c){var b,a=c.length;b=a+8;for(var e=16*((b-b%64)/64+1),d=Array(e-1),f=0,g=0;g<a;)b=(g-g%4)/4,f=8*(g%4),d[b]|=c.charCodeAt(g)<<f,g++;b=(g-g%4)/4;d[b]|=128<<8*(g%4);d[e-2]=a<<3;d[e-1]=a>>>29;return d},WordToHex:function(c){var b="",a="",e;for(e=0;3>=e;e++)a=c>>>8*e&255,a="0"+a.toString(16),b+=a.substr(a.length-2,2);return b},Utf8Encode:function(c){for(var c=c.replace(/\r\n/g,"\n"),b="",a=0;a<c.length;a++){var e=c.charCodeAt(a);
128>e?b+=String.fromCharCode(e):(127<e&&2048>e?b+=String.fromCharCode(e>>6|192):(b+=String.fromCharCode(e>>12|224),b+=String.fromCharCode(e>>6&63|128)),b+=String.fromCharCode(e&63|128))}return b},getHsh:function(c){var b=[],a,e,d,f,g,h,k,l,c=gx.MD5.Utf8Encode(c),b=gx.MD5.ConvertToWordArray(c);g=1732584193;h=4023233417;k=2562383102;l=271733878;for(c=0;c<b.length;c+=16)a=g,e=h,d=k,f=l,g=gx.MD5.FF(g,h,k,l,b[c+0],7,3614090360),l=gx.MD5.FF(l,g,h,k,b[c+1],12,3905402710),k=gx.MD5.FF(k,l,g,h,b[c+2],17,606105819),
h=gx.MD5.FF(h,k,l,g,b[c+3],22,3250441966),g=gx.MD5.FF(g,h,k,l,b[c+4],7,4118548399),l=gx.MD5.FF(l,g,h,k,b[c+5],12,1200080426),k=gx.MD5.FF(k,l,g,h,b[c+6],17,2821735955),h=gx.MD5.FF(h,k,l,g,b[c+7],22,4249261313),g=gx.MD5.FF(g,h,k,l,b[c+8],7,1770035416),l=gx.MD5.FF(l,g,h,k,b[c+9],12,2336552879),k=gx.MD5.FF(k,l,g,h,b[c+10],17,4294925233),h=gx.MD5.FF(h,k,l,g,b[c+11],22,2304563134),g=gx.MD5.FF(g,h,k,l,b[c+12],7,1804603682),l=gx.MD5.FF(l,g,h,k,b[c+13],12,4254626195),k=gx.MD5.FF(k,l,g,h,b[c+14],17,2792965006),
h=gx.MD5.FF(h,k,l,g,b[c+15],22,1236535329),g=gx.MD5.GG(g,h,k,l,b[c+1],5,4129170786),l=gx.MD5.GG(l,g,h,k,b[c+6],9,3225465664),k=gx.MD5.GG(k,l,g,h,b[c+11],14,643717713),h=gx.MD5.GG(h,k,l,g,b[c+0],20,3921069994),g=gx.MD5.GG(g,h,k,l,b[c+5],5,3593408605),l=gx.MD5.GG(l,g,h,k,b[c+10],9,38016083),k=gx.MD5.GG(k,l,g,h,b[c+15],14,3634488961),h=gx.MD5.GG(h,k,l,g,b[c+4],20,3889429448),g=gx.MD5.GG(g,h,k,l,b[c+9],5,568446438),l=gx.MD5.GG(l,g,h,k,b[c+14],9,3275163606),k=gx.MD5.GG(k,l,g,h,b[c+3],14,4107603335),h=
gx.MD5.GG(h,k,l,g,b[c+8],20,1163531501),g=gx.MD5.GG(g,h,k,l,b[c+13],5,2850285829),l=gx.MD5.GG(l,g,h,k,b[c+2],9,4243563512),k=gx.MD5.GG(k,l,g,h,b[c+7],14,1735328473),h=gx.MD5.GG(h,k,l,g,b[c+12],20,2368359562),g=gx.MD5.HH(g,h,k,l,b[c+5],4,4294588738),l=gx.MD5.HH(l,g,h,k,b[c+8],11,2272392833),k=gx.MD5.HH(k,l,g,h,b[c+11],16,1839030562),h=gx.MD5.HH(h,k,l,g,b[c+14],23,4259657740),g=gx.MD5.HH(g,h,k,l,b[c+1],4,2763975236),l=gx.MD5.HH(l,g,h,k,b[c+4],11,1272893353),k=gx.MD5.HH(k,l,g,h,b[c+7],16,4139469664),
h=gx.MD5.HH(h,k,l,g,b[c+10],23,3200236656),g=gx.MD5.HH(g,h,k,l,b[c+13],4,681279174),l=gx.MD5.HH(l,g,h,k,b[c+0],11,3936430074),k=gx.MD5.HH(k,l,g,h,b[c+3],16,3572445317),h=gx.MD5.HH(h,k,l,g,b[c+6],23,76029189),g=gx.MD5.HH(g,h,k,l,b[c+9],4,3654602809),l=gx.MD5.HH(l,g,h,k,b[c+12],11,3873151461),k=gx.MD5.HH(k,l,g,h,b[c+15],16,530742520),h=gx.MD5.HH(h,k,l,g,b[c+2],23,3299628645),g=gx.MD5.II(g,h,k,l,b[c+0],6,4096336452),l=gx.MD5.II(l,g,h,k,b[c+7],10,1126891415),k=gx.MD5.II(k,l,g,h,b[c+14],15,2878612391),
h=gx.MD5.II(h,k,l,g,b[c+5],21,4237533241),g=gx.MD5.II(g,h,k,l,b[c+12],6,1700485571),l=gx.MD5.II(l,g,h,k,b[c+3],10,2399980690),k=gx.MD5.II(k,l,g,h,b[c+10],15,4293915773),h=gx.MD5.II(h,k,l,g,b[c+1],21,2240044497),g=gx.MD5.II(g,h,k,l,b[c+8],6,1873313359),l=gx.MD5.II(l,g,h,k,b[c+15],10,4264355552),k=gx.MD5.II(k,l,g,h,b[c+6],15,2734768916),h=gx.MD5.II(h,k,l,g,b[c+13],21,1309151649),g=gx.MD5.II(g,h,k,l,b[c+4],6,4149444226),l=gx.MD5.II(l,g,h,k,b[c+11],10,3174756917),k=gx.MD5.II(k,l,g,h,b[c+2],15,718787259),
h=gx.MD5.II(h,k,l,g,b[c+9],21,3951481745),g=gx.MD5.AddUnsigned(g,a),h=gx.MD5.AddUnsigned(h,e),k=gx.MD5.AddUnsigned(k,d),l=gx.MD5.AddUnsigned(l,f);return(gx.MD5.WordToHex(g)+gx.MD5.WordToHex(h)+gx.MD5.WordToHex(k)+gx.MD5.WordToHex(l)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(c){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(c)))},encode:function(c){return this.encodeImpl(this.UTF8BytesFromString(c))},bytesFromUTF8Bytes:function(c){for(var b=[],a=0,e=c1=c2=0,d=c.length;a<d;)e=c[a],128>e?(b.push(e),a++):191<e&&224>e?(c2=c[a+1],b.push((e&31)<<6|c2&63),a+=2):(c2=c[a+1],c3=c[a+2],b.push((e&15)<<12|(c2&63)<<6|c3&63),a+=3);return b},UTF8BytesFromString:function(c){for(var c=c.replace(/\r\n/g,"\n"),b=[],a=c.length,e=
0;e<a;e++){var d=c.charCodeAt(e);128>d?b.push(d):(127<d&&2048>d?b.push(d>>6|192):(b.push(d>>12|224),b.push(d>>6&63|128)),b.push(d&63|128))}return b},bytesToString:function(c){for(var b=gx.util.browser.isChrome()?32765:5E4,a=[];c.length>=b;)a.push(eval("String.fromCharCode("+c.slice(0,b).join(",")+");")),c=c.slice(b);0!=c.length&&a.push(eval("String.fromCharCode("+c.join(",")+");"));return a.join("")},decodeImpl:function(c){for(var b=this.f64,a=[],e=0,c=c.replace(/\n|\r/g,""),c=c.replace(/=/g,""),
d=c.length;e<d;)a[a.length]=b[c.charAt(e)]<<2|b[c.charAt(e+1)]>>4,a[a.length]=(b[c.charAt(e+1)]&15)<<4|b[c.charAt(e+2)]>>2,a[a.length]=(b[c.charAt(e+2)]&3)<<6|b[c.charAt(e+3)],e+=4;2==c.length%4&&(a=a.slice(0,a.length-2));3==c.length%4&&(a=a.slice(0,a.length-1));return a},encodeImpl:function(c){var b=this.b64,a=[],e=0,d=c.length;1==d%3&&(c[c.length]=0,c[c.length]=0);2==d%3&&(c[c.length]=0);for(var f=c.length;e<f;)a[a.length]=b[c[e]>>2],a[a.length]=b[(c[e]&3)<<4|c[e+1]>>4],a[a.length]=b[(c[e+1]&15)<<
2|c[e+2]>>6],a[a.length]=b[c[e+2]&63],e+=3;1==d%3&&(a[a.length-1]=a[a.length-2]="=");2==d%3&&(a[a.length-1]="=");return a.join("")},_init:function(){for(var c=0;64>c;c++){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c);this.b64[c]=b;this.f64[b]=c}}};
gx.geolocation={attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(c){c.attachedCtrl=c.previousSibling;attachedCtrls.push(c);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(c){var b=attachedCtrls.shift(),a=gx.fn.validStruct(gx.O.getValidStructId(b.attachedCtrl.id)),
c=c.coords.latitude+","+c.coords.longitude;gx.evt.setEventRow(gx.pO,b.attachedCtrl);a.v2v&&(a.v2v(c),a.v2c());a.gxgrid&&a.gxgrid.updateControlValue(a,!0)},handle_errors:function(c){attachedCtrls.shift();switch(c.code){case c.PERMISSION_DENIED:c="user did not share geolocation data";break;case c.POSITION_UNAVAILABLE:c="could not detect current position";break;case c.TIMEOUT:c="retrieving position timed out";break;default:c="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(c);gx.pO.refreshOutputs([])}};
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(c,b){var a=c.slice(0,b);return c=c.slice(b).concat(a)},xtime:function(c){c<<=1;return c&256?c^283:c},mult_GF256:function(c,b){var a,e=0;for(a=1;256>a;a*=2,b=this.xtime(b))c&a&&(e^=b);return e},byteSub:function(c,b){var a;a="encrypt"==b?this.SBox:this.SBoxInverse;for(var e=0;4>e;e++)for(var d=0;d<this.Nb;d++)c[e][d]=a[c[e][d]]},shiftRow:function(c,b){for(var a=
1;4>a;a++)c[a]="encrypt"==b?this.cyclicShiftLeft(c[a],this.shiftOffsets[this.Nb][a]):this.cyclicShiftLeft(c[a],this.Nb-this.shiftOffsets[this.Nb][a])},mixColumn:function(c,b){for(var a=[],e=0;e<this.Nb;e++){for(var d=0;4>d;d++)a[d]="encrypt"==b?this.mult_GF256(c[d][e],2)^this.mult_GF256(c[(d+1)%4][e],3)^c[(d+2)%4][e]^c[(d+3)%4][e]:this.mult_GF256(c[d][e],14)^this.mult_GF256(c[(d+1)%4][e],11)^this.mult_GF256(c[(d+2)%4][e],13)^this.mult_GF256(c[(d+3)%4][e],9);for(d=0;4>d;d++)c[d][e]=a[d]}},addRoundKey:function(c,
b){for(var a=0;a<this.Nb;a++)c[0][a]^=b[a]&255,c[1][a]^=b[a]>>8&255,c[2][a]^=b[a]>>16&255,c[3][a]^=b[a]>>24&255},keyExpansion:function(c){var b=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var a=0;a<this.Nk;a++)b[a]=c[4*a]|c[4*a+1]<<8|c[4*a+2]<<16|c[4*a+3]<<24;for(a=this.Nk;a<this.Nb*(this.Nr+1);a++)c=b[a-1],0==a%this.Nk?c=(this.SBox[c>>8&255]|this.SBox[c>>16&255]<<8|this.SBox[c>>24&255]<<16|this.SBox[c&255]<<24)^this.Rcon[Math.floor(a/
this.Nk)-1]:6<this.Nk&&4==a%this.Nk&&(c=this.SBox[c>>24&255]<<24|this.SBox[c>>16&255]<<16|this.SBox[c>>8&255]<<8|this.SBox[c&255]),b[a]=b[a-this.Nk]^c;return b},Round:function(c,b){this.byteSub(c,"encrypt");this.shiftRow(c,"encrypt");this.mixColumn(c,"encrypt");this.addRoundKey(c,b)},InverseRound:function(c,b){this.addRoundKey(c,b);this.mixColumn(c,"decrypt");this.shiftRow(c,"decrypt");this.byteSub(c,"decrypt")},FinalRound:function(c,b){this.byteSub(c,"encrypt");this.shiftRow(c,"encrypt");this.addRoundKey(c,
b)},InverseFinalRound:function(c,b){this.addRoundKey(c,b);this.shiftRow(c,"decrypt");this.byteSub(c,"decrypt")},encrypt:function(c,b){var a;if(c&&8*c.length==this.blockSizeInBits&&b){c=this.packBytes(c);this.addRoundKey(c,b);for(a=1;a<this.Nr;a++)this.Round(c,b.slice(this.Nb*a,this.Nb*(a+1)));this.FinalRound(c,b.slice(this.Nb*this.Nr));return this.unpackBytes(c)}},decrypt:function(c,b){var a;if(c&&8*c.length==this.blockSizeInBits&&b){c=this.packBytes(c);this.InverseFinalRound(c,b.slice(this.Nb*this.Nr));
for(a=this.Nr-1;0<a;a--)this.InverseRound(c,b.slice(this.Nb*a,this.Nb*(a+1)));this.addRoundKey(c,b);return this.unpackBytes(c)}},byteArrayToString:function(c){for(var b="",a=c.length,e=0;e<a;e++)0!=c[e]&&(b+=String.fromCharCode(c[e]));return b},stringToByteArray:function(c){for(var b=[],a=c.length,e=0;e<a;e++)b[b.length]=c.charCodeAt();return b},byteArrayToHex:function(c){var b="";if(c){for(var a=c.length,e=0;e<a;e++)b+=(16>c[e]?"0":"")+c[e].toString(16);return b}},hexToByteArray:function(c){var b=
[];if(!(c.length%2)){if(0==c.indexOf("0x")||0==c.indexOf("0X"))c=c.substring(2);for(var a=c.length,e=0;e<a;e+=2)b[Math.floor(e/2)]=parseInt(c.slice(e,e+2),16);return b}},packBytes:function(c){var b=[];if(c&&!(c.length%4)){b[0]=[];b[1]=[];b[2]=[];b[3]=[];for(var a=c.length,e=0;e<a;e+=4)b[0][e/4]=c[e],b[1][e/4]=c[e+1],b[2][e/4]=c[e+2],b[3][e/4]=c[e+3];return b}},unpackBytes:function(c){for(var b=[],a=c[0].length,e=0;e<a;e++)b[b.length]=c[0][e],b[b.length]=c[1][e],b[b.length]=c[2][e],b[b.length]=c[3][e];
return b},formatPlaintext:function(c){var b=this.blockSizeInBits/8,a;if("string"==typeof c||c.indexOf){var c=c.split(""),e=c.length;for(a=0;a<e;a++)c[a]=c[a].charCodeAt(0)&255}for(a=b-c.length%b;0<a&&a<b;a--)c[c.length]=0;return c},getRandomBytes:function(c){var b,a=[];for(b=0;b<c;b++)a[b]=Math.round(255*Math.random());return a},rijndaelEncrypt:function(c,b,a){var e,d,f=this.blockSizeInBits/8,g;if(c&&b&&8*b.length==this.keySizeInBits){"CBC"==a?g=this.getRandomBytes(f):(a="ECB",g=[]);for(var c=this.formatPlaintext(c),
b=this.keyExpansion(b),h=0;h<c.length/f;h++){d=c.slice(h*f,(h+1)*f);if("CBC"==a)for(e=0;e<f;e++)d[e]^=g[h*f+e];g=g.concat(this.encrypt(d,b))}return g}},rijndaelDecrypt:function(c,b,a){var e=this.blockSizeInBits/8,d=[],f,g;if(c&&(b&&"string"!=typeof c)&&8*b.length==this.keySizeInBits){a||(a="ECB");b=this.keyExpansion(b);for(g=c.length/e-1;0<g;g--)if(f=this.decrypt(c.slice(g*e,(g+1)*e),b),"CBC"==a)for(var h=0;h<e;h++)d[(g-1)*e+h]=f[h]^c[(g-1)*e+h];else d=f.concat(d);"ECB"==a&&(d=this.decrypt(c.slice(0,
e),b).concat(d));return d}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.ui={grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(c){this.gridContainer=c;this.DesignContainerName=this.ContainerName=gx.dom.id(c);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(c,b,a,e){this.clearFunctions();this.refreshDynProperties();this.properties=[];for(var d=
0;d<this.rows.length;d++){this.properties[d]=[];for(var f=this.rows[d],g=0;g<this.columns.length;g++){var h=this.columns[g],k=f.gxProps[h.index],l=h.gxControl;l.grid=this.ownerGrid;l.row=f;l.gridId=this.gxId;l.gridRow=f.gxId;a?l.value=k[0]:l.setProperties.apply(l,k);this.setRenderProperties(f.gxRenderProps[g],l);!l.enabled&&l.type<=gx.html.controls.types.checkBox&&(""!==l.cssClass&&0!==l.cssClass.indexOf("Readonly"))&&(l.cssClass="Readonly"+l.cssClass);this.properties[d][g]=gx.lang.clone(l);this.addC2V(h,
this.properties[d][g])}}this.firstTime=c;this.autoRefreshing=b?!0:!1;this.loadingCollection=a?!0:!1;this.show&&(this.setC2ShowFunction(function(a){a.show();e()}),this.autoRefreshing&&(this.show(),e()));this.autoRefreshing=!1};this.addC2V=function(c,b){this.addC2VFunction(function(a){if(""!==c.gxAttName){var e=a.ParentObject.getValidStruct(c.gxId);e&&(a.ParentObject[e.gxvar]=b.value);gx.fn.setHidden(b.id,b.value)}})};this.setRenderProperties=function(c,b){if(c)for(var a in c)b[a]=c[a]};this.selectRow=
function(c){if(c=this.rows[c])this.instanciateSelectionVars(c.gxId),this.instanciateSelectedRow(c)};this.getEventRow=function(){return!gx.lang.emptyObject(this.GridRow)?this.GridRow:"0001"};this.executeEvent=function(c,b){if(c<this.columns.length&&b<this.rows.length){var a=this.properties[b][c],e=gx.html.controls.eventJSCode(a.jsScrCode,a.eventName,a.jsDynCode,a.grid,a.row);if(""!==e)gx.lang.emptyObject(a.usrOnclick)||(e="if("+a.usrOnclick+") { "+e+" }"),a=new Function(e),"function"==typeof a&&a();
else if(a.clickEvent){var e=this.parentGxObject,d=a.row.gxId;this.ownerGrid.instanciateRow(d);e[a.clickEvent].call(e,d)}}};this.addEventHandler=function(c,b){this[c]=function(){this.eventHandler(this.GridId,gx.fn.currentGridRow(this.GridId),b)}.closure(this)}}};gx._init();
