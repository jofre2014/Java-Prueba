var gx=function(){var p=/^(?:gx\.O\.)(.+)$/,r=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/;return{O:null,pO:null,oldValues:[],oldKeyValues:[],newRows:[],suggestControls:[],disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",theme:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,
descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},NULL_TIMEZONEOFFSET:0,setParentObj:function(a){gx.pO=a;gx.O=gx.pO},setExecutableComponent:function(a){null==gx.pO&&gx.setParentObj(gx.createComponent(a,""))},setMasterPage:function(a){null!=gx.pO&&(gx.pO.MasterPage=a)},addComponent:function(a){null!=gx.pO&&gx.pO.setWebComponent(a)},createComponent:function(a,b){var c=null,d,e;d=gx.lang.getType(a);null!=d&&(d.prototype=new gx.GxObject,
e=gx.csv.cmpCtx,gx.csv.cmpCtx=b,c=new d(b),gx.csv.cmpCtx=e);return c},getObj:function(a,b){return""==a?!0==b?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(a,b){gx.csv.cmpCtx=a;gx.O=""==a?!0==b?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a);gx.O=gx.O||gx.pO},setVar:function(a,b){gx.O.setVariable(a,b)},getVar:function(a){return gx.O.getVariable(a)},prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var b=p,b=b.exec(a);null!=b&&b[1]?a=b[1]:(b=r,b=b.exec(a),null!=b&&b[1]&&
(a=b[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory=
"/";else{var b=gx.staticDirectory.length,a="/"!=gx.staticDirectory.charAt(0),b="/"!=gx.staticDirectory.charAt(b-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(b?"/":"")}},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");if(a&&a!=this.theme&&(this.theme=a,a=gx.dom.byId("gxtheme_css_reference")))a.href=a.href.replace(/[^/]*.css/,this.theme+".css")},setTheme:function(a){this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{if(gx.HTML5){for(var b=document.getElementsByTagName("TABLE",
a),c=b.length-1;0<=c;c-=1){var d=b[c],e=d.getAttribute("data-cellpadding");e&&d.setAttribute("cellPadding",parseInt(e));var f=d.getAttribute("data-cellspacing");f&&d.setAttribute("cellSpacing",parseInt(f));var g=d.getAttribute("data-align");g&&d.setAttribute("align",g)}if(gx.util.browser.isIE()||gx.util.browser.isOpera())for(var b=[],d=a||document,b=d.querySelectorAll?d.querySelectorAll("td[data-align]"):gx.dom.byTag("td",a),c=0,h=b.length;c<h;c++){var k=b[c].getAttribute("data-align");k&&b[c].setAttribute("align",
k)}}}catch(m){gx.dbg.logEx(m,"gxapi.js","setTheme")}},SetOld:function(a,b,c){var d=b,a=gx.fn.controlGridId(a);0<a&&(d=b+"_"+gx.fn.currentGridRow(a));gx.fn.setHidden(d,gx.getVar(c))},Old:function(a,b){try{var c=b,d=gx.fn.controlGridId(a);0<d&&(c=b+"_"+gx.fn.currentGridRow(d));var e=gx.fn.getHidden(c);"undefined"==typeof e&&""!=gx.O.CmpContext&&(e=gx.fn.getHidden(gx.O.CmpContext+c));return e}catch(f){gx.dbg.logEx(f,"gxapi.js","Old")}return""},OldInteger:function(a,b){var c=parseInt(gx.Old(a,b),10);
return isNaN(c)?0:c},OldDecimal:function(a,b){var c=gx.num.parseFloat(gx.Old(a,b),gx.thousandSeparator,gx.decimalPoint);return isNaN(c)?0:c},OldDate:function(a,b){return(new gx.date.gxdate(gx.Old(a,b),"Y4MD")).getStringWithFmt(gx.dateFormat)},OldDateTime:function(a,b){var c=new gx.date.gxdate(gx.Old(a,b),"Y4MD");return c.getStringWithFmt(gx.dateFormat)+" "+c.getTimeString(!0,!0)},typedOld:function(a,b,c){switch(c){case "int":return this.OldInteger(a,b);case "decimal":return this.OldDecimal(a,b,!0);
case "date":return this.OldDate(a,b);case "dtime":return this.OldDateTime(a,b);default:return this.Old(a,b)}},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:function(){return!1},isJava:function(){return!this.net}},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==
a.id||""==a.id?a.name:a.id},byId:function(a,b){b=b||document;return b.getElementById(a)},byName:function(a){return document.getElementsByName(a)},byTag:function(a,b){b=b||document;return b.getElementsByTagName(a)},byClass:function(a,b,c){if(document.getElementsByClassName)return c=c||document,c.getElementsByClassName(a);var d=[],b=gx.dom.byTag(b||"*",c),c=b.length,a=RegExp("(^|\\s)"+a+"(\\s|$)");for(j=i=0;i<c;i++)a.test(b[i].className)&&(d[j]=b[i],j++);return d},el:function(a){if(a){if("object"==
typeof a&&a.tagName)return a;var b=this.byId(a);if(null!=b)return b;b=this.byId("span_"+a);if(null!=b)return b;b=this.byName(a);return null!=b&&0<b.length?b[0]:null}return null},hasClass:function(a,b){var c=gx.dom.el(a);if(c)return b&&-1!=(" "+c.className+" ").indexOf(" "+b+" ")},isMultimediaElement:function(a){return"SPAN"==a.tagName&&(gx.dom.hasClass(a,"gx-video-placeholder")||gx.dom.hasClass(a,"gx-audio-placeholder"))},addPrefixClass:function(a,b){a&&(a.className&&a.className.substr(0,b.length)!=
b)&&(a.className=b+a.className)},removePrefixClass:function(a,b){a&&0==a.className.indexOf(b)&&(a.className=a.className.substring(b.length))},addClass:function(a,b){var c=gx.dom.el(a);c&&(b&&!this.hasClass(a,b))&&(c.className=c.className+" "+b)},classReCache:{},removeClass:function(a,b){var c=gx.dom.el(a);if(c&&this.hasClass(a,b)){var d=this.classReCache[b];d||(d=RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g"),this.classReCache[b]=d);c.className=c.className.replace(d," ")}},purgeElement:function(a,b){var c=
b||a.attributes,d,e,f;if(c){e=c.length;for(d=0;d<e;d+=1)f=c[d].name||c[d],"function"===typeof a[f]&&(a[f]=null)}},purge:function(a,b){b||this.purgeElement(a);var c=a.childNodes;if(c)for(var d=0,e=c.length;d<e;d++)gx.dom.purge(c[d],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()},form:function(){null==this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){if(!document.all)for(var a=
this.form().elements,b=a.length,c=0;c<b;c++)a[c].gxIndex=c},setAttribute:function(a,b,c){try{var d=gx.dom.byName(a);if(null!=d&&0<d.length)for(var e=d.length,a=0;a<e;a++)d[a].setAttribute(b,c);else{var f=gx.dom.byId(a);null!=f&&f.setAttribute(b,c)}}catch(g){gx.dbg.logEx(g,"gxapi.js","setAttribute")}},createInput:function(a,b){var c=document.createElement("input");c.type=b;c.id=a;c.name=a;gx.dom.form().appendChild(c);return c},hasSubmitControl:function(){var a=this.byTag("input"),b=a.length;if(!b)return!1;
for(var c=0;c<b;c++){var d=a[c].getAttribute("type");if("submit"==d||"image"==d)return!0}return!1},scripts:function(){var a=document.scripts;a||(a=document.getElementsByTagName("script"));if("undefined"!=typeof a){for(var b=[],c=a.length,d=0;d<c;d++){var e=a[d].attributes.src;e&&e.value&&(e=e.value,"//:"!=e&&b.push(e))}return b}return[]},styles:function(){var a=document.styleSheets;if("undefined"!=typeof a){for(var b=[],c=a.length,d=0;d<c;d++){var e=a[d].href;gx.lang.emptyObject(e)||b.push(e)}return b}return[]},
getComputedStyle:function(a){try{return a==document?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(a):"undefined"!=typeof a.currentStyle?a.currentStyle:a.style}catch(b){return gx.dbg.logEx(b,"gxapi.js","getComputedStyle"),null}},getStyle:function(a,b){var c="";try{var c="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[b]:"undefined"!=typeof a.currentStyle?a.currentStyle[b]:a.style[b],d=parseInt(c);isNaN(d)||(c=d)}catch(e){gx.dbg.logEx(e,"gxapi.js",
"getStyle")}return c},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0},isEditControl:function(a){return a&&"INPUT"==a.tagName?this.editControls[a.type]||!1:!1},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||"datetime-local"==a.type},isButtonLike:function(a){return this.isButton(a)?!0:void 0!=a&&null!=a?"INPUT"==a.nodeName&&
("image"==a.type||"checkbox"==a.type)&&"function"==typeof a.onclick:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document}catch(b){}return null},forEachChild:function(a,b,c){if(a&&a.childNodes&&"function"==typeof c)for(var d=a.childNodes.length,e=0;e<d&&!1!==c.call(b,a.childNodes[e]);e++);},isTextWithLink:function(a){return null!=a&&"A"==a.tagName&&(a.childNodes&&0<a.childNodes.length)&&this.innerChildIsText(a.firstChild)?!0:
!1},isChildNode:function(a,b){a.frameElement&&(a=a.frameElement);if(a==b)return!0;for(;a.parentNode;){if(a==b||a.parentNode==b)return!0;a=a.parentNode}return!1},findParentByTagName:function(a,b,c){a=a.parentNode;b=b.toUpperCase();for(i=0;a&&!(c&&i==c);){i++;if(a.tagName==b)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},position:function(a){var b=0,c=0;if(a.getBoundingClientRect){var d,b={top:0,left:0};d=(c=
a)&&c.ownerDocument;if(!d)return;a=d.documentElement;c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=d.defaultView||d.parentWindow;c=b.top+(d.pageYOffset||a.scrollTop)-(a.clientTop||0);b=b.left+(d.pageXOffset||a.scrollLeft)-(a.clientLeft||0)}else{for(;a.offsetParent;)b+=a.offsetLeft+(a.currentStyle?gx.num.intval(a.currentStyle.borderLeftWidth):0)-(a.scrollLeft||0),c+=a.offsetTop+(a.currentStyle?gx.num.intval(a.currentStyle.borderTopWidth):0)-(a.scrollTop||0),a=a.offsetParent;b+=a.offsetLeft+
(a.currentStyle?gx.num.intval(a.currentStyle.borderLeftWidth):0);c+=a.offsetTop+(a.currentStyle?gx.num.intval(a.currentStyle.borderTopWidth):0)}return{x:Math.floor(b),y:Math.floor(c)}},dimensions:function(a){var b=a.offsetWidth,c=a.offsetHeight,a=a.childNodes;if(!gx.util.browser.isIE()&&!gx.lang.emptyObject(a))for(var d=a.length,e=0;e<d;e++){var f=a[e].offsetWidth,g=a[e].offsetHeight;f>b&&(b=f);g>c&&(c=g)}return{w:b,h:c}},windowDimensions:function(a){var b=a.documentElement,c=a.body;if(b&&b.scrollHeight){var a=
Math.max(b.scrollHeight,c.scrollHeight),d=Math.max(b.scrollWidth,c.scrollWidth),e=Math.max(b.clientHeight,c.clientHeight),b=Math.max(b.clientWidth,c.clientWidth);return{scrollWidth:d,scrollHeight:a,clientHeight:e,clientWidth:b}}return{scrollWidth:c.scrollWidth,scrollHeight:c.scrollHeight,clientHeight:c.clientHeight,clientWidth:c.clientWidth}},documentScroll:function(a){a=a||document;return{scrollTop:a.documentElement.scrollTop||a.body.scrollTop,scrollLeft:a.documentElement.scrollLeft||a.body.scrollLeft}},
autofitIFrame:function(a){var a=gx.evt.source(window.event||a),b=window.frames[a.name].document;if(b&&!(""!=a.width||""!=a.height)){var c=gx.dom.windowDimensions(b),b=c.scrollWidth?c.scrollWidth+10:null,c=c.scrollHeight?c.scrollHeight+10:null;b&&c&&(a.style.width=b+"px",a.style.height=c+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&a&&a.childNodes){for(var b=null,c=a.childNodes.length,d=0;d<c;d++){var e=a.childNodes[d];if("TABLE"==e.nodeName){b=e;break}}if(null!=b&&(-1!=b.style.width.indexOf("%")&&
(a.style.width=gx.dom.addUnits(b.style.width)),-1!=b.style.height.indexOf("%")))a.style.height=gx.dom.addUnits(b.style.height)}},redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,a.outerHTML)},100)},setCaretPosition:function(a,b){if(null!=a)if(a.createTextRange){var c=a.createTextRange();c.move("character",b);c.select()}else a.selectionStart?(a.focus(),a.setSelectionRange(b,b)):a.focus()},
replaceAtCaretPosition:function(a,b){var c=a.selectionStart,d=a.selectionEnd;document.selection?(c=document.selection.createRange().getBookmark(),a.selection=a.createTextRange(),a.selection.moveToBookmark(c),a.selectLeft=a.createTextRange(),a.selectLeft.collapse(!0),a.selectLeft.setEndPoint("EndToStart",a.selection),c=a.selectLeft.text.length+1,d=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)):(c=a.selectionStart,d=a.selectionEnd);a.setRangeText?a.setRangeText(b,c,
d):a.value=a.value.substr(0,c)+b+a.value.substr(d,a.value.length);gx.dom.setCaretPosition(a,c+1)},spanValue:function(a){var b=a.nodeValue;gx.lang.emptyObject(b)&&(b=a.innerText||a.textContent);gx.lang.emptyObject(b)&&(b="");return b},removeControlSafe:function(a){this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV"),this._avoidLeaksDiv.style.display="none",document.body.appendChild(this._avoidLeaksDiv));this._avoidLeaksDiv.appendChild(a);gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv);
this._avoidLeaksDiv.innerHTML=""},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var b=document.createRange();a&&(b.selectNode(a),b.deleteContents())}},comboBoxToObj:function(a,b){try{var c={s:"",v:[]};if(!a)return c;if("SELECT"==a.tagName){c.s=a.value;for(var d=a.options.length,e=0;e<d;e++){var f="",f="undefined"!=typeof a.options[e].innerText?a.options[e].innerText:a.options[e].text;c.v.push([a.options[e].value,f])}}else"SPAN"==a.tagName&&"string"==typeof b&&(c.v.push([b,
b]),c.s=b);return c}catch(g){gx.dbg.logEx(g,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s)$/i,addUnits:function(a,b){return""===a||"auto"==a?a:void 0===a?"":"number"==typeof a||!this.unitPattern.test(a)?a+(b||"px"):a},getActiveElement:function(){var a=null;try{a=document.activeElement}catch(b){}return a},_init:function(){Function.prototype.closure=function(a,b,c){var d=gx.util.browser;if(d.isIE()&&8>d.ieVersion()){window.__objs||(window.__objs=[],window.__funs=
[],window.__args=[]);var e=this,f=a.__objId;f||(__objs[f=a.__objId=__objs.length]=a);var g=e.__funId;g||(__funs[g=e.__funId=__funs.length]=e);b||(b=[]);var h=b.__argsId;h||(__args[h=b.__argsId=__args.length]=b);b=e=a=null;return function(){if(__funs){var a=__args[h];if(c===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(__args[h])}a.length==0&&arguments.length>0&&(a=arguments);a=__funs[g].apply(__objs[f],a);if(__objs)try{delete __objs[f].__objId}catch(b){__objs[f].__objId=null}__funs&&
delete __funs[g].__funId;__args&&delete __args[h].__argsId;return a}}}e=this;return function(){var d=b||arguments;!0===c&&(d=Array.prototype.slice.call(arguments,0),d=d.concat(b));return e.apply(a||window,d)}};gx.evt.on_ready(this,function(){var a,b,c=gx.util.browser;if(c.isWebkit()){var d=[];if(document.querySelectorAll)d=document.querySelectorAll("input[type='hidden']");else{var e=gx.dom.byTag("input");a=0;for(b=e.length;a<b;a++)"hidden"==e[a].getAttribute("type")&&d.push(e[a])}a=0;for(b=d.length;a<
b;a++)d[a].setAttribute("autocomplete","off")}if(c.isChrome()){c=document.querySelectorAll("select");a=0;for(b=c.length;a<b;a++)if(!c[a].value&&(d=c[a].querySelectorAll("option[selected]"))&&d.length)c[a].value=d[0].value}})},_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv.parentNode.removeChild(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)}},
util:{contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",
pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},isKnownContentType:function(a){for(var b in this.contentTypes)if(this.contentTypes[b]==a)return!0;return!1},getContentTypeFromExt:function(a){var b=a.lastIndexOf(".");-1!=b&&(a=a.substring(b+1));return a?this.getContentType(a):""},getContentType:function(a){if(gx.lang.emptyObject(a))return"text/html";a=a.toLowerCase();a=gx.text.trim(a);if(this.isKnownContentType(a))return a;var b=a.lastIndexOf(".");
-1!=b&&(a=a.substring(b+1));a=this.contentTypes[a];return gx.lang.emptyObject(a)?"text/html":a},getFileName:function(a){var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\"),b=b>c?b:c,c=a.lastIndexOf(".");if(!a)return a;if(0>c||b>c)c=a.length;return a.substring(b+1,c)},getFileType:function(a){var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\"),d=a.lastIndexOf(".");return 0>d||d<b||d<c?"":a.substring(d+1)},getWindowInfo:function(){var a="",b=!0,c=!1;try{if(c=window.location!=window.parent.location?!0:!1)try{b=
window.frameElement.id||window.top.document.body,a=window.name}catch(d){b=!1}}catch(e){}return{insideIframe:c,canAccessFrame:b,frameId:a}},browser:{w3c:!0,ns4:!1,ie5:!0,ns6:!1,ie:-1!=navigator.userAgent.indexOf("MSIE")||-1!=navigator.userAgent.indexOf("Trident"),ff:-1!=navigator.userAgent.indexOf("Firefox"),winCE:-1!=navigator.userAgent.indexOf("Windows CE"),iphone:-1!=navigator.userAgent.indexOf("iPhone"),ipad:-1!=navigator.userAgent.indexOf("iPad"),blackBerry:-1!=navigator.userAgent.indexOf("BlackBerry"),
operaMini:-1!=navigator.userAgent.indexOf("Opera Mini"),opera:-1!=navigator.userAgent.indexOf("Opera"),chrome:-1!=navigator.userAgent.indexOf("Chrome"),webkit:-1!=navigator.userAgent.search(/webkit/ig),isIE:function(){return this.ie},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},
isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()},isCompatMode:function(){return"BackCompat"==document.compatMode},ieVersion:function(){if(this.isIE())try{var a=navigator.userAgent.indexOf("MSIE");if(0<=a){var b=navigator.userAgent.indexOf(";",a),c=navigator.userAgent.substring(a+5,b);return parseFloat(c,10)}var d=navigator.userAgent.match(/; rv.([0-9]+)/);if(1<d.length)return parseFloat(d[1],
10)}catch(e){gx.dbg.logEx(e,"gxapi.js","ieVersion")}return-1},chromeVersion:function(){if(this.isChrome()){var a=navigator.userAgent.match(/Chrome\/([0-9]+)/);if(1<a.length)return parseFloat(a[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&("undefined"!==typeof Range&&!Range.prototype.createContextualFragment)&&(Range.prototype.createContextualFragment=function(a){var b=document.createDocumentFragment(),c=document.createElement("div");b.appendChild(c);c.outerHTML=a;return b})},
setupFF:function(){if(this.isFirefox()){var a={IMG:!0,BR:!0,INPUT:!0,META:!0,LINK:!0,PARAM:!0,HR:!0};HTMLElement.prototype.__defineGetter__("outerHTML",function(){for(var b=this.attributes,c="<"+this.tagName,d=b.length,e=0;e<d;e++)c+=" "+b[e].name+'="'+b[e].value+'"';return a[this.tagName]?c+">":c+">"+this.innerHTML+"</"+this.tagName+">"});HTMLElement.prototype.__defineSetter__("outerHTML",function(a){var c=this.ownerDocument.createRange();c.setStartBefore(this);this.parentNode.replaceChild(c.createContextualFragment(a),
this)})}},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ns4=document.layers?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1,this.ns6=document.getElementById&&!document.all?!0:!1);this.setupFF();this.setupIE()}},addOnce:function(a,b,c){void 0==a[c]&&(a[c]=b)},inArray:function(a,b){if(null==a||!(b instanceof Array))return!1;for(var c=b.length,d=0;d<c;d++)if(b[d]==a)return!0;return!1},lastArray:function(a){return 0<a.length?a[a.length-1]:null},noParmsUrl:function(a){var b=
a.indexOf("?");-1!=b&&(a=a.substring(0,b));return a},resourceUrl:function(a,b){if("undefined"==typeof a)return"";if(-1!=a.indexOf("://")||"."==a.charAt(0))return a;var c="/"!=gx.basePath.charAt(gx.basePath.length-1),d=a.indexOf(gx.basePath);if(0==d&&!b)return("/"==a.charAt(0)?"":"/")+a;if(-1!=d||b){var e="",e=-1!=d?gx.text.replaceAll(a.substring(d+gx.basePath.length),"\\","/"):a;if("/"==a.charAt(0))return location.protocol+"//"+location.host+a;d="/"!=gx.basePath.charAt(0);c=c&&"/"!=e.charAt(0);return location.protocol+
"//"+location.host+(d?"/":"")+gx.basePath+(c?"/":"")+e}return a},sameAppUrl:function(a){a=new this.Url(a);return a.isRelative()?!0:a.isSameApp(location.href)},removeBaseUrl:function(a){var b=gx.staticDirectory.length,c="/"!=gx.staticDirectory.charAt(0),b="/"!=gx.staticDirectory.charAt(b-1),c=RegExp("(?:/)?(?:"+gx.basePath+(c?"/":"")+gx.staticDirectory+(b?"/":"")+")?((?:[\\S]*))").exec(a);null!=c&&c[1]&&(a=c[1]);return a},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&
6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var a=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,b=/^(([^@]+)@)?([^\:]+)(:(.+))?$/;return function(c){this.url=c;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(a){a=new gx.util.Url(a);return this.protocol==a.protocol&&this.host==a.host};(function(c,e){var f=a,f=f.exec(e),g=!gx.lang.emptyObject(f);
if(g&&(c.protocol=f[2]?f[2]:"",g=f[4]?f[4]:"",c.path=f[5]?f[5]:"",c.query=f[7]?f[7]:"",c.hash=f[9]?f[9]:"",f=b,f=f.exec(g),g=!gx.lang.emptyObject(f)))c.user=f[2]?f[2]:"",c.host=f[3]?f[3]:"",c.port=f[5]?f[5]:""})(this,c)}}(),regExp:{isMatch:function(a,b){return null!==RegExp(b).exec(a)},replace:function(a,b,c){return a.replace(b,c)},split:function(a,b){return a.split(b)},matches:function(a,b){var c=RegExp(b).exec(a);return null!==c?c:[]}},autoRefresh:{arTimer:null,getProps:function(){var a=gx.fn.getHidden("_GxRefreshTimeout");
null!=a&&(a=gx.json.evalJSON(a),a.Time=parseInt(a.Time));return a},install:function(){var a=this.getProps();null!=a&&(this.create(),"focus"==a.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var a=this.getProps();null!=a&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*a.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(a){var b=
"";if(-1!=a.indexOf("&"))for(var c=a.length,d=0;d<c-1;d++)if("&"==a[d]&&"&"!=a[d+1]){b+=a[d+1];break}return b},accessKeyCaption:function(a){var b="";if(-1==a.indexOf("&"))return a;for(var c=a.length,d=0;d<c-1;d++)if("&"==a[d]&&"&"!=a[d+1]){b+=a.substring(d+1);break}else b+=a[d];return b},invalidFunc:function(a){throw"gxInvalidFunc: "+a;},urlValue:function(a){var b=a;"string"!=typeof b&&(b=gx.fn.getControlValueInt(a));return encodeURIComponent(b)},help:function(a){open(a,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},
_init:function(){this.browser._init();Array.prototype.removeAt=function(a){this.splice(a,1)}}},lang:{inherits:function(a,b,c){var d=a.prototype;a.prototype=new b;for(var e in d)"undefined"==typeof a.prototype[e]&&(a.prototype[e]=d[e]);"undefined"==typeof a.prototype.base&&(a.prototype.base=b);!0===c&&(a.prototype.constructor=function(){b.prototype.constructor.apply(this,arguments);d.constructor.apply(this,arguments)})},apply:function(a,b){if(a&&b&&"object"===typeof b)for(var c in b)a[c]=b[c];return a},
instanceOf:function(a,b){if(null==a||null==b)return!1;if(a instanceof b||b==String&&"string"==typeof a||b==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||b==Array&&"array"==typeof a||b==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(var c=a.base;"undefined"!=typeof c;){if(c==b)return!0;c=c.base}return!1},clone:function(a){var b={},c;for(c in a)b[c]=a[c];return b},isNumericType:function(a){return"int"==
a||"decimal"==a},isBooleanType:function(a){return"boolean"==a||"bool"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return!0==a||!1==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&("false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},
arrayToSource:function(a){if(null!=a.toSource)return a.toSource();for(var b="[",c=a.length,d=c-1,e=0;e<c;e++)b+=this.objectToSource(a[e]),e<d&&(b+=",");return b+"]"},objectToSource:function(a){if(this.isArray(a))return this.arrayToSource(a);if("object"==typeof a){var b="{",c="",d;for(d in a){var e=d;""==e?e="''":"string"==typeof e&&(e="'"+e+"'");b+=c;b="object"==typeof a[d]?b+(e+":"+this.objectToSource(a[d])):"string"==typeof a[d]?b+(e+":'"+this.encodeValue(a[d])+"'"):b+(e+":"+a[d]);c=","}return b+
"}"}return"'"+this.encodeValue(a.toString())+"'"},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},supEval:function(a,b){var c=null,c=b instanceof String||"string"==typeof b?a[b]:b;return function(){return c.apply(a,arguments)}},getType:function(a){var b=null;try{b=eval(a)}catch(c){gx.dbg.logEx(c,"gxapi.js","getType")}return b},
doEval:function(a,b){b=b||window;return b.execScript?b.execScript(a):eval.call?eval.call(b,a):eval(a)},doCall:function(){try{for(var a=arguments[0],b=[],c=arguments.length,d=1;d<c;d++)b.push(arguments[d]);a.apply(this,b)}catch(e){gx.dbg.logEx(e,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,b,c,d){a=a.closure(b,c);d=setTimeout(a,d);return{f:a,t:d}},encodeValue:function(a){return gx.text.charReplace(a,['"',"'","\r","\n"],["\\042","\\047","\\015",
"\\012"])},decodeValue:function(a){a=gx.text.replaceAll(a,"\\042",'"');return gx.text.replaceAll(a,"\\015\\012","\r\n")},htmlDecode:function(a){if(!a)return a;this.htmlDecodeEl||(this.htmlDecodeEl=document.createElement("div"));this.htmlDecodeEl.innerHTML="<div>"+a+"</div>";a=this.htmlDecodeEl.firstChild;return a.innerText||a.text||a.textContent||""}},cache:{remoteFiles:[],inlineCode:[],addRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0},addLoadedFile:function(a){a=
gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0},removeRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!1},fileLoaded:function(a){a=gx.util.noParmsUrl(a);return this.remoteFiles[gx.util.resourceUrl(a,!0)]?!0:!1},updateStyles:function(a,b){for(var c=[],d=a.length,e=0;e<d;e++){var f=a[e];if(!gx.lang.emptyObject(f)){for(var g=!1,h=b.length,k=0;k<h;k++)if(f==b[k]){g=!0;break}g||c.push(f)}}g=gx.staticDirectory;"/"==g.charAt(0)&&(g=g.substring(1));
d=c.length;for(e=0;e<d;e++)f=c[e],"/"!=f.charAt(0)&&(f=g+f),this.removeRemoteFile(f)},addInlineCode:function(a){this.inlineCode[a]=!0},deleteInlineCode:function(a){delete this.inlineCode[a]},codeLoaded:function(a){return this.inlineCode[a]?!0:!1},_init:function(){var a=gx.staticDirectory;"/"==a.charAt(0)&&(a=a.substring(1));for(var b=gx.dom.scripts(),c=b.length,d=0;d<c;d++){var e=b[d];gx.lang.emptyObject(e)||("/"!=e.charAt(0)&&!gx.ajax.isabsoluteurl(e)&&(e=a+e),this.addRemoteFile(e))}b=gx.dom.styles();
c=b.length;for(d=0;d<c;d++)e=b[d],gx.lang.emptyObject(e)||("/"!=e.charAt(0)&&!gx.ajax.isabsoluteurl(e)&&(e=a+e),this.addRemoteFile(e))}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,hooks:[],controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!0,userReady:!1,skipPromptCtrl:!0,addHook:function(a,b,c){this.hooks[this.hooks.length]={c:a,e:b,f:c}},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof
Array?gx.evt.refreshGridCallback.push(a):a.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=gx.evt.refreshGridCallback.pop();"function"==typeof a&&a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=this.hooks.length,b=0;b<a;b++){var c=this.hooks[b];try{this.detach(c.c,c.e,c.f),c.c=null,c.f=null}catch(d){gx.dbg.logEx(d,"gxapi.js","clearHooks")}this.hooks[b]=null}this.hooks=
[]},source:function(a){return a.target||a.currentTarget||a.srcElement},attach:function(a,b,c,d,e){e=e||{};if("string"==typeof b){var f=c;d&&(f=c.closure(d));if(e.single)var g=f,h=!1,f=function(){h||(gx.evt.detach(a,b,g,e),g.apply(this,arguments),h=!0)};a.addEventListener?a.addEventListener(b,f,e.useCapture||!1):a.attachEvent?a.attachEvent("on"+b,f):a["on"+b]=f;this.addHook(a,b,f)}else if(gx.lang.isArray(b))for(var f=0,k=b.length;f<k;f++)this.attach(a,b[f],c,d,e)},detach:function(a,b,c,d){try{if(d=
d||{},"string"==typeof b)a.removeEventListener?a.removeEventListener(b,c,d.useCapture||!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null;else if(gx.lang.isArray(b))for(var e=0,f=b.length;e<f;e++)this.detach(a,b[e],c,d)}catch(g){gx.dbg.logEx(g,"gxapi.js","detach")}},cancel:function(a,b){if(b&&gx.util.browser.isIE()&&typeof("undefined"!=a.keyCode))try{a.keyCode=0}catch(c){}"undefined"==typeof a.preventDefault?(a.cancelBubble=b,a.returnValue=!b):b&&(a.preventDefault(),a.stopPropagation())},checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&
"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=a.onfocus)a.onfocus()}catch(b){gx.dbg.logEx(b,"gxapi.js","checkCtrlFocus")}},doClick:function(a,b){if(!gx.evt.processing||gx.csv.validating){var c=gx.evt.source(b);if("button"!=c.type&&"submit"!=c.type&&(c=gx.dom.el(a),gx.fn.isAccepted(c))){if(void 0!=c.onfocus)c.onfocus();if(void 0!=c.onclick)c.onclick();"INPUT"==c.nodeName&&"submit"==c.type&&gx.dom.form().submit()}}},executeOnblur:function(a){var b=gx.csv.lastId,c=gx.O.focusControl;gx.O.focusControl=
a;this.onblur(gx.O.focusControl);gx.O.focusControl=c;gx.csv.lastId=b},onblur:function(a){gx.csv.lastId=a;try{var b=gx.fn.validStruct(a);b&&null!=b.gxgrid&&b.gxgrid.updateControlValue(b,!1);var c=gx.csv.lastControl,d=c.getAttribute("maxlength");0<d&&c.value.length>=d&&(c.value=c.value.substring(0,d));if(b&&"bits"==b.type&&0==b.ro){var e=gx.fn.getControlGridRef(b.fld,b.gxgrid?b.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>c.id.indexOf(b.fld)&&(c=e);var f=gx.html.multimediaUpload.getContainer(e);
gx.html.multimediaUpload.refreshPreviewImg(f,c)}}catch(g){gx.dbg.logEx(g,"gxapi.js","onblur")}},onfocus:function(){var a=function(){gx.fx.obs.notify("gx.onbeforevalidate");gx.evt.onfocus_impl.apply(gx.evt,arguments);gx.fx.obs.notify("gx.onaftervalidate")};!0===gx.evt.is_button_mouse_event||gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,b,c,d,e,f,g){try{gx.evt.setReady(!1);if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0),
!1;var h=!1;gx.csv.cmpCtx!=c&&(h=!0,gx.O.fromValid=0);gx.setGxO(c,d);h&&gx.fn.changeCmpContext();gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(k){gx.dbg.logEx(k,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;(0==f||""!=e)&&gx.fn.setCurrentGridRow(f,e);gx.fx.installSuggest(a);c=!1;if(gx.csv.lastGrid!=f){gx.csv.lastRow[f]=null;if(!g){if(gx.csv.lastGrid<f){var m=gx.fn.firstGridControl(f);gx.O.fromValid>m&&(gx.O.fromValid=
m)}gx.csv.lastGrid=f}c=!0}gx.O.focusControl=b;if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(n){gx.dbg.logEx(n,"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0),!0;try{var l=gx.fn.getControlValue("Mode");if("DLT"==l||"DSP"==l||gx.O.isTransaction()&&gx.dom.isButton(a)&&!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&!g)return gx.evt.setReady(!0),!0}catch(o){gx.dbg.logEx(o,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&null!=gx.csv.lastControl){cn=
gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0),!0;gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0);return!0}if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0),!0;if(null!=gx.csv.invalidControl&&gx.csv.invalidControl!=a&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==a&&gx.csv.validate(gx.csv.invalidControl,
gx.csv.invalidId,!1))return gx.csv.invalidControl=null,gx.evt.setReady(!0),!0;g?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0!=gx.csv.lastRow[f]&&(gx.csv.lastRow[f]!=e&&!c)&&gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);var q=gx.fn.controlIds();0<q.length&&gx.O.fromValid<
q[0]&&(gx.O.fromValid=q[0]);gx.lang.emptyObject(gx.csv.lastRow[f])&&0!=f&&(gx.csv.rowChanged=!0,gx.csv.lastRow[f]=e);var t=gx.csv.checkRowChange(gx.csv.lastId,c),b=!1;if(!gx.lang.emptyObject(gx.csv.lastRow[f])&&!gx.lang.emptyObject(e)&&gx.csv.lastRow[f].length>e.length)var p=gx.csv.lastRow[f].substring(gx.csv.lastRow[f].length-e.length),b=parseInt(p)<parseInt(e);if((!t||c)&&(gx.O.focusControl>=gx.csv.lastId||b)){if(gx.fn.lastMainLevelCtrlId(gx.csv.lastId,f)){var s=gx.fn.getControlRefById(gx.csv.lastId);
s&&1===s.getAttribute("gxvalid")&&(gx.O.fromValid=gx.csv.lastId+1)}gx.csv.validateAll()}else gx.O.toValid=gx.O.focusControl;null==gx.csv.invalidControl&&("SELECT"==a.nodeName?(!gx.util.browser.isIE()||7<=gx.util.browser.ieVersion())&&gx.fn.setSelection(a):gx.fn.setSelection(a));gx.csv.disableFocusCondition();gx.evt.setReady(!0)}catch(r){gx.dbg.logEx(r,"gxapi.js","onfocus")}return!1},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(a){gx.dbg.logEx(a,"gxapi.js","userOnload")}},
onload:function(){gx.evt.execLoad&&(gx.fx.obs.notify("gx.onready"),null==gx.http.getCookie("GxTZOffset")&&gx.http.setCookie("GxTZOffset",jstz.determine().name())&&gx.http.reload(),gx.sec.loadKey(),gx.setTheme(),gx.fx.obs.addObserver("webcom.render",this,function(a){gx.setTheme(a.getContainer())}),gx.ajax._init(),gx.grid._init(),gx.evt.attach(window,"unload",gx.evt.onunload),gx.fn.setFocusInit(),gx.http.notification.node(),gx.cache._init(),gx.fn.installComponents(!0),gx.http.loadStyles(),gx.fn.objectOnload(),
gx.dom.indexElements(),gx.fn.doAttachs(),document.gxReadyState="complete",gx.util.autoRefresh.install(),(!gx.util.browser.isIE()||8<gx.util.browser.ieVersion())&&gx.fn.setOpacity(100,"body"),gx.evt.setProcessing(!1),gx.fx.obs.notify("gx.onload"),gx.evt.userOnload(),gx.fn.setFocusOnload(),gx.fx.delayedSuggest(),gx.http.doCommands(),gx.evt.setReady(!0),gx.evt.userReadyCnt=0)},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},
250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},on_ready:function(a,b){gx.fx.obs.addObserver("gx.onload",a,b)},onunload:function(){gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.obs.removeAll();gx.http.notification.cleanup();gx.fn.objectOnUnload();gx._deinit()},onclick:function(a){gx.evt.setReady(!1);gx.evt.processing&&gx.evt.cancel(a,!0);gx.evt.mouse.update(a);setTimeout(function(){gx.fx.ctx.notify()},10);gx.evt.setReady(!0)},onmousedown:function(a){var b=window.event||
a,c=gx.evt.source(b);if(c&&8>=gx.util.browser.ieVersion()&&"SHAPE"===c.tagName.toUpperCase())return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(c);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();c=a.getSource(b);null!=c&&(gx.evt.cancel(b,!0),gx.setGxO(c.obj.CmpContext,c.obj.IsMasterPage),a.drag(c.obj,c.types,c.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);var b=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()){var c=gx.popup.ext;c.movepopup();if(null!=c.currIDb||null!=
c.currRS)return!1}null!=b.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,b.obj.gxDragTypes)&&b.over(),b.moveControl(b.dragCtrl))},onmouseup:function(a){gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var b=gx.fx.dnd;if(null!=b.dragCtrl){var c=window.event||a,c=b.getTarget(c,b.obj.gxDragTypes);null!=c?(b.deleteClonControl(),gx.setGxO(c.obj.CmpContext,c.obj.IsMasterPage),b.drop(b.dropCtrl,c.obj,c.hdl)):b.restoreControl();c=window.event||a;gx.evt.cancel(c,!0)}b.out();
b.dragCtrl=null;b.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);gx.fx.dom.raiseEvent("dblclick",window.event||a)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(a,b,c){var c=window.event||c,d=gx.util.browser.isIE(),e=c.keyCode;if(d){if("keydown"==c.type&&229==e)return a.value.length<=b?a.ImeKey=!0:!1;if("keyup"==c.type&&8==e&&a.ImeKey&&a.value.length+1>=b)return a.value=a.value.substring(0,a.value.length-1),a.ImeKey=
!1,!0}if("keyup"==c.type||d)return a.value.length+1<=b||8==e||9==e||46==e||35<=e&&40>=e},onkeypress:function(a,b,c){if((null!=a||window.event)&&!(null!=a&&window.event)){var a=null==a?window.event:a,d=gx.fn,e=gx.util.browser,b={event:a,hasEnter:b,skipOnEnter:c,cancel:!1};gx.fx.obs.notify("gx.keypress",[b]);if(!b.cancel)if(27==a.keyCode&&gx.popup.ispopup())d.closeWindow();else{13==a.keyCode&&(gx.evt.processing&&!gx.csv.validating)&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&
this.invalidDSPKey(a))return this.cancel(a,!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var f=a.ctrlKey,b=gx.evt.source(a)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.csv.invalidateCtrl(b,a);if(!this.isEnterEvtCtrl(b)||!this.isTriggerKey(a)||!this.cancelAndRefresh(a)){this.checkFuncKey(a,b);if((32==a.charCode||32==a.keyCode||13==a.keyCode&&!c)&&gx.dom.hasClass(b,"gx_newrow")){var g=gx.dom.findParentByTagName(b,"DIV");g&&(g=gx.O.getGridById(g.getAttribute("gxgridid")))&&g.getNewRows(1,
a)}if(13==a.keyCode)if(g=this.triggersEvt(b),c){if(!d.enterHasFocus()&&(!this.shiftPressed||!("TEXTAREA"==b.nodeName&&e.isIE())))f&&"TEXTAREA"==b.nodeName?e.isIE()||gx.dom.replaceAtCaretPosition(b,"\n"):(e.isIE()&&"file"!=b.type?(gx.evt.isEnterEvtCtrl(b)&&gx.O.executeEnterEvent(a,b),a.keyCode=9,this.lastKey=a.keyCode,11<=e.ieVersion()&&(a.preventDefault(),d.setFocus(d.searchFocus(d.getControlIndex(b)+1,!0)))):(b.value&&(e.isIE()&&"SELECT"!=b.tagName)&&(e=b.value,b.value="",b.value=e),d.skipFocus(c),
this.cancel(a,!0)),this.enter=!1)}else g||gx.O.executeEnterEvent(a,b)}}}},onkeyup:function(a){var a=gx.evt.source(window.event?window.event:a),b=a.getAttribute("maxlength"),c="undefined"==typeof a.value?"":a.value;if((""==a.type&&9==this.lastKey||this.autoSkip&&""!=a.type&&!this.isControlKey(this.lastKey)&&c.length>=b)&&this.skipPromptCtrl)if(gx.dom.isTextWithLink(a)){if(b=a.id||("A"==a.tagName&&a.parentNode?a.parentNode.id:""))b=gx.O.getValidStructId(b),gx.evt.onfocus(a,b,"",!1,"",0)}else if(a=a.getAttribute("gxfocusable"),
!(null!=a&&"1"==a)){a=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==a)return!0;a=gx.fn.searchFocus(this.shiftPressed?a-1:a+1,!this.shiftPressed);gx.fn.setFocus(a)}},setEventRow:function(a,b){var c=gx.fn.rowGridId(b),d=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(c)||"0001";null!=c&&null!=d&&(void 0!=b.gxGridName&&gx.fn.setHidden(a.CmpContext+b.gxGridName.toUpperCase()+"_ROW",d),gx.csv.lastEvtRow=d,gx.fn.setCurrentGridRow(c,d))},ctrlOnchange:function(a,
b,c,d){gx.csv.pkDirty=c;"UPD"==a.value?"1"==b.value?(c?null!=d&&(d.value=gx.getMessage("GXM_captionadd")):null!=d&&(d.value=gx.getMessage("GXM_captionupdate")),b.value="0"):c&&null!=d&&(d.value=gx.getMessage("GXM_captionadd")):"INS"==a.value&&"1"==b.value&&(null!=d&&(d.value=gx.getMessage("GXM_captionadd")),b.value="0")},onchange:function(){var a=function(){gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):
a.apply(gx.evt,arguments)},onchange_impl:function(a){gx.evt.setReady(!1);gx.evt.lastControl=a;var b=gx.fn.getControlValue(gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"==a.type)a.onfocus();var c,d=!1;if(a.getAttribute("gxoldvalue")!=b){d=!0;gx.fn.setControlValue("IsModified","1");var e=!1;if(c=gx.O.getValidStruct(gx.O.focusControl))"function"==typeof c.c2v&&c.c2v(),"function"==typeof c.v2bc&&c.v2bc.call(gx.O);if(("select-one"==a.type||"checkbox"==a.type||"radio"==a.type)&&gx.csv.validate(a,gx.O.focusControl,
!0))e=!0,gx.csv.invalidControl==a&&(gx.csv.invalidControl=null);if("radio"==a.type)for(var f=gx.dom.byName(gx.dom.id(a)),g=f.length,h=0;h<g;h++)f[h].setAttribute("gxoldvalue",b);else a.setAttribute("gxoldvalue",b);gx.evt.execOnchange(a,e)}b=gx.evt.execUsrOnchange(a);gx.evt.setReady(!0);e=gx.util.browser.isWebkit()&&("radio"==a.type||"checkbox"==a.type||"file"==a.type);f=!1;if(d&&c&&(gx.fn.lastMainLevelCtrlId(gx.O.focusControl,c.grid)||c.gxsgprm))f=e=!0;if(e&&a.onblur)a.onblur();f&&("undefined"==typeof a.GXFormatError||
!1==a.GXFormatError)&&gx.csv.validControls(gx.O.focusControl,gx.O.focusControl+1,!0);return b},execOnchange:function(a,b){var c="";if(a.attributes.gxoch1)try{c+=a.attributes.gxoch1.value+";"}catch(d){gx.dbg.logEx(d,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&a.attributes.gxoch2)try{c+=a.attributes.gxoch2.value+";"}catch(e){gx.dbg.logEx(e,"gxapi.js","execOnchange")}try{""!=c&&eval(c)}catch(f){gx.dbg.logEx(f,"gxapi.js","execOnchange")}b||a.setAttribute("gxvalid","0");a.setAttribute("gxctrlchanged",
"1");gx.fn.setControlValue("IsModified","1")},execUsrOnchange:function(a){var b="";try{b=a.attributes.gxoch0.value}catch(c){return!0}return(new Function(b)).call(a)},jsEvent:function(a){if(gx.evt.processing&&!gx.csv.validating)return!1;a=a.getAttribute?a.getAttribute("jsevent"):a.jsevent;return!gx.lang.emptyObject(a)?eval(a):!0},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var b=gx.dom.id(a);!b&&"A"==a.tagName&&(b=a.parentNode.id);b&&0==b.indexOf("span_")&&(b=b.substring(5));if(!b)return!1;for(var c=
gx.O.EnterCtrl,a=gx.fn.rowGridId(a),d=0,e=c.length;d<e;d++){var f=gx.csv.ctxControlId(c[d]);if(a&&-1!=b.search(RegExp(".*"+f+"_[0-9]{4}$"))||f==b)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var a=gx.dom.id(a),b;for(b in gx.O.CheckCtrl)if(gx.O.CheckCtrl[b]==a||gx.O.CmpContext+gx.O.CheckCtrl[b]==a)return!0}return!1},isTriggerKey:function(a){for(var b=this.triggerKeys.length,c=0;c<b;c++)if(a.keyCode==this.triggerKeys[c]||a.charCode==this.triggerKeys[c])return!0;
return!1},isControlKey:function(a){for(var b=this.controlKeys.length,c=0;c<b;c++)if(a==this.controlKeys[c])return!0;return!1},invalidDSPKey:function(a){var b=a.keyCode-111;a.shiftKey&&(b+=12);return this.keyListeners[b]&&"ENTER"==this.keyListeners[b][gx.O.CmpContext]||13==a.keyCode?!0:!1},addKeyListener:function(a,b,c){1==b&&(document.body.onhelp=function(){return!1});void 0==this.keyListeners[b]&&(this.keyListeners[b]=[]);this.keyListeners[b][a]=c},setEvtName:function(a){gx.fn.setHidden("_EventName",
a)},cancelAndRefresh:function(a){return gx.O.conditionsChanged?(this.cancel(a,!0),gx.O.executeServerEvent("RFR",!1),!0):!1},setGridEvt:function(a,b){if((!gx.evt.processing||gx.csv.validating)&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(b)){var c=gx.fn.getGridObj(a);c&&(b=gx.fn.getHidden(gx.O.CmpContext+c.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",a);gx.fn.setHidden("_EventRowId",b);gx.fn.setCurrentGridRow(a,b)}},checkFuncKey:function(a,b){var c=this.lastKey-111;a.shiftKey&&
(c+=12);if(0<c&&24>=c&&void 0!=this.keyListeners[c]){var d=this.keyListeners[c][gx.O.CmpContext];if("undefined"!=typeof d)this.execFnKeyEvt(a,gx.O,d,b);else for(var e in this.keyListeners[c])if(d=this.keyListeners[c][e],"undefined"!=typeof d){var f=gx.getObj(e,!1);if(null!=f){this.execFnKeyEvt(a,f,d,b);break}}}},execFnKeyEvt:function(a,b,c,d){if(!gx.evt.processing)if(this.cancel(a,!0),"function"==typeof b[c])d=b.isServerEvent(c),gx.evt.setProcessing(!0,!d),b[c].call(b),"undefined"!=typeof gx&&gx.evt.setProcessing(!1,
!d);else if("PROMPT"==c){if((c=b.getValidStructFld(d.id))&&c.attachedCtrls)for(var a=c.attachedCtrls,e=0,f=a.length;e<f;e++)if((d=a[e])&&d.info&&d.info.isPrompt){var g=a[e].id;"function"==typeof b.promptKeyHandlers[g]&&(d=0<c.grid?"_"+gx.fn.currentGridRowImpl(c.grid):"",d=gx.dom.el(b.CmpContext+g+d),b.promptKeyHandlers[g].call(b,d))}}else if(b.isTransaction()&&"SELECT"==c){if((b=gx.dom.el(b.CmpContext+"BTN_SELECT"))&&"function"==typeof b.onclick)b.onclick()}else gx.evt.execEvt(b.CmpContext+"E"+c+
".",gx.evt.dummyCtrl)},keyModifiesValue:function(a){return 32<=a.keyCode&&127>=a.keyCode||229==a.keyCode?!0:!1},triggersEvt:function(a){return!gx.lang.emptyObject(a)&&(a==gx.evt.dummyCtrl||("A"==a.nodeName||"TEXTAREA"==a.nodeName)||"INPUT"==a.nodeName&&("button"==a.type||"image"==a.type))?!0:!1},setProcessing:function(a,b){if(("undefined"==typeof b||b)&&!gx.evt.redirecting)gx.evt.processing=a,gx.evt.setReady(!gx.evt.processing)},setReady:function(a){gx.evt.userReadyCnt+=a?-1:1;gx.evt.userReadyCnt=
0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;gx.evt.userReady=0==gx.evt.userReadyCnt;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0)},execEvt:function(a,b,c,d){var e=function(){gx.dbg.logPerf("execEvt");if(!gx.lang.emptyObject(a)&&!(gx.evt.processing&&!gx.csv.validating||!gx.ajax.isFormEnabled()||gx.csv.anyFormatError())){if(gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(b)&&b!=gx.csv.lastControl&&void 0!=b.onfocus)b.onfocus();gx.fx.obs.notify("gx.validation");if(d&&(gx.evt.srvCommand=!0,b)){var e=
gx.fn.rowGridId(b),g=gx.fn.controlRowId(b);!gx.lang.emptyObject(e)&&!gx.lang.emptyObject(g)&&(gx.csv.lastGrid=e,gx.fn.setCurrentGridRow(e,g))}0<gx.csv.lastId&&gx.evt.isEnterEvtCtrl(b)&&gx.O.getValidStructId(b.id)<gx.csv.lastId&&(gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll());this.setEvtName(a,b);this.lastEvent=a;!d&&(gx.grid.drawAtServer||b&&"INPUT"==b.nodeName&&"submit"==b.type)?this.execEvtSubmit(a,b):gx.ajax.doPost(gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),c)}}.closure(this);
gx.evt.waitGridRefresh(e)},execEvtSubmit:function(a,b){if(!gx.evt.processing||gx.csv.validating){gx.evt.setProcessing(!0);gx.ajax.disableForm();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);var c=gx.dom.form(),d=gx.popup.getPopup();if(null!=d){var e=c.action,d=d.window.gx.popup.lvl;if(-1!=d){var f=-1!=e.indexOf("?")?",":"?",f=f+encodeURIComponent("gxPopupLevel="+d+";");c.action=e+f}}c.submit()}},execCliEvt:function(a,b,c,d,e,f){if(!(gx.evt.processing&&
!gx.csv.validating||!gx.ajax.isFormEnabled()||gx.csv.anyFormatError())){gx.fx.obs.notify("gx.validation");var f=void 0!=f?f:[],g=gx.getObj(a,b);if(null!=g){gx.setGxO(a,b);"string"==typeof d&&(""!=d&&4<arguments.length)&&g.getGrid(d).instanciateRow(e);var h=g.isServerEvent(c);gx.evt.setProcessing(!0,!h);g.execC2VFunctions();g[c](f);gx.popup.waitCallback(function(){gx.evt.setProcessing(!1,!gx.csv.validating&&!h)});g.conditionsChanged&&g.executeServerEvent("RFR",!0)}}},fixWebKitOnFocus:function(){var a=
gx.util.browser;return a.isWebkit()&&!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},mouse:{x:-1,y:-1,update:function(a){try{gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=a.pageX,this.y=a.pageY)}catch(b){gx.dbg.logEx(b,"gxapi.js","mouse update")}}},_init:function(){document.gxReadyState="loading";if(gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&
!gx.util.browser.isWinCE()))this.attach(document,"readystatechange",this.onready);else if(9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini())this.attach(document,"DOMContentLoaded",this.onload);else if(gx.util.browser.isBlackBerry())this.attach(window,"load",this.onload);else this.onready(null);this.attach(document,"mousedown",this.onmousedown);this.attach(document,"mousemove",this.onmousemove);this.attach(document,
"mouseup",this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}},csv:{pkDirty:!1,validating:!1,lastRow:[],rowChanged:!1,currentId:0,
lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],validForm:function(){var a=!0;try{"1"!=gx.fn.getControlValue("IsConfirmed")&&"EENTER."==gx.fn.getHidden("_EventName")&&(a=this.validControls(this.lastId,
gx.fn.lastCtrlId()+1,!1))}catch(b){gx.dbg.logEx(b,"gxapi.js","validForm")}a&&gx.fn.forceEnableControls(!1);return a},validateAll:function(){try{if(this.validControls(gx.O.fromValid,gx.O.toValid,!1),(null==this.invalidControl||!gx.csv.stopOnError)&&(!this.rowChanged||this.targetRowIsMod(this.toValid)))gx.O.fromValid=gx.O.toValid}catch(a){gx.dbg.logEx(a,"gxapi.js","validateAll")}},validControls:function(a,b,c){var d=!0,e=-1;try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=
0;if(b>a)for(;a<b;a++){var f=this.validControl(a,c),g=f.ret;d&&!g&&(e=f.ctrl,d=!1)}if(gx.csv.stopOnError)if(-1!=e){var h=gx.fn.validStruct(e),k=gx.fn.getControlGridRef(h.fld,h.grid);gx.csv.disableFocus=!0;gx.fn.isAccepted(k)?gx.fn.setFocus(k):gx.fn.setFocus(gx.evt.lastControl)}else!gx.dom.isButton(gx.csv.lastControl)&&null!=gx.csv.validActivatedControl&&gx.fn.setFocus(gx.csv.validActivatedControl)}catch(m){gx.dbg.logEx(m,"gxapi.js","validControls")}return d},validControl:function(a,b){var c=!0,d=
-1,e=gx.fn.validStruct(a);if(void 0!=e){if(0!=e.grid){var f=gx.fn.currentGridRow(e.grid);void 0!=f&&gx.fn.setCurrentGridRow(e.grid,f)}!0==e.isuc?e.uc.execC2VFunctions():"function"==typeof e.c2v&&e.c2v();"function"==typeof e.v2bc&&e.v2bc.call(gx.O);try{if(0==e.lvl||0!=e.grid&&gx.fn.gridRowIsMod(e.lvl,gx.fn.currentGridRow(e.grid))||!gx.O.isTransaction())if(f=null,f=!0==e.isuc?e.uc.getRealControl():gx.fn.getControlGridRef(e.fld,e.grid)){var g=this.validate(f,a,b),h=!1;0!=e.grid&&(h=gx.fn.rowIsRemoved(e.grid,
gx.fn.currentGridRow(e.grid)));!g&&(c&&!h)&&(gx.csv.invalidControl=f,d=gx.csv.invalidId=a,c=!1);gx.csv.lastId=a;!1==gx.fn.isAccepted(f)&&(gx.evt.executeOnblur(a),f.getAttribute("gxhiddenonchange")!=f.value&&(f.setAttribute("gxhiddenonchange",f.value),gx.evt.execOnchange(f)))}}catch(k){gx.dbg.logEx(k,"gxapi.js","validControl")}}return{ret:c,ctrl:d}},validate:function(a,b,c){gx.csv.anyError=!1;var d=gx.fn.validStruct(b);if(void 0==d)return!0;gx.csv.refreshVars(d);if(null==d.fnc&&null==d.isvalid){if("SELECT"!=
a.tagName&&"checkbox"!=a.type&&gx.lang.isNumericType(d.type)&&!gx.lang.emptyObject(d.rgrid))for(var e=d.rgrid.length,b=0;b<e;b++)d.rgrid[b].filterVarChanged();return!0}try{if(-1!=b&&(c||"1"!=a.getAttribute("gxvalid"))){gx.evt.setProcessing(!0);gx.csv.currentId=b;gx.csv.validatingGrid=d.gxgrid;gx.csv.validating=!0;gx.csv.refreshVars(d);c=!1;c=!0==d.isuc?d.fnc.call(d.uc):null!=d.fnc?d.fnc.call(gx.O):!0;1==gx.O.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=a),gx.csv.anyError=
!0,gx.O.AnyError=0);!0==gx.csv.anyError&&(c=!gx.csv.anyError);if(!1==c)return gx.csv.validatingGrid=null,gx.csv.validating=!1,gx.evt.setProcessing(!1),!1;gx.csv.refreshControls(d);gx.csv.invalidateDeps(b);if(!gx.lang.emptyObject(d.rgrid)&&!gx.lang.emptyObject(d.hc)){e=d.rgrid.length;for(b=0;b<e;b++)d.rgrid[b].filterVarChanged()}if(!gx.csv.validateLostFocusOnly||gx.O.fromValid===b){var f=gx.fn.isAccepted(a);null!=d.isvalid&&f&&d.isvalid.call(gx.O);f?a.setAttribute("gxvalid","1"):a.setAttribute("gxvalid",
"0")}gx.csv.validatingGrid=null;gx.csv.validating=!1;gx.evt.setProcessing(!1)}}catch(g){gx.dbg.logEx(g,"gxapi.js","validate")}return!0},invalidateForm:function(){if(1!=gx.O.AnyError)for(var a=gx.fn.controlIds(),b=a.length,c=0;c<b;c++){var d=gx.fn.validStruct(a[c]);this.invalidateGXCtrl(gx.fn.getControlGridRef(d.fld,d.grid))}},invalidateGXCtrl:function(a){if(a){var b=a.getAttribute("gxoldvalue");1==a.getAttribute("gxvalid")&&b!=a.value&&a.setAttribute("gxvalid","0")}},invalidateCtrl:function(a,b){try{this.invalidateGXCtrl(a);
var c=gx.fn.validStruct(gx.O.focusControl);c&&(0!=c.grid&&gx.evt.keyModifiesValue(b))&&c.gxgrid.setRowModified(gx.fn.currentGridRowImpl(c.grid))}catch(d){gx.dbg.logEx(d,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(a){for(var b=gx.fn.controlIds(),c=b.length,d=0;d<c;d++){var e=b[d];if(e>a)for(var e=gx.fn.validStruct(e),f=e.ip?e.ip.length:0,g=0;g<f;g++)if(e.ip[g]==a)if(0==e.grid){var h=gx.fn.getControlGridRef(e.fld,e.grid);h&&h.setAttribute("gxvalid","0")}else{var k=gx.fn.getGridObj(e.grid);
if(k)for(var m=k.grid.rows.length,n=0;n<m;n++){var h=k.grid.rows[n],l=h.gxDeleted(),o=h.gxExists();!l&&o&&(k.setRowModified(h.gxId),(h=gx.fn.getControlRef(e.fld+"_"+h.gxId))&&h.setAttribute("gxvalid","0"))}}}},setFormatError:function(a,b){a.id&&(b||"undefined"==typeof b?(this.gxFormatErrors[a.id]=!0,a.GXFormatError=!0):(delete this.gxFormatErrors[a.id],a.GXFormatError=!1))},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==
typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var a=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var b=gx.fn.validStruct(gx.O.focusControl);if(b&&b.nac&&!0==b.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var c=gx.fn.searchFocusFwd(cn);null!=c&&gx.fn.setFocus(c);gx.setVar("Gx_mode",a);return!0}gx.setVar("Gx_mode",a)}catch(d){}return!1},loadScreen:function(){try{gx.csv.pkDirty&&(gx.csv.pkDirty=
!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,!0))}catch(a){gx.dbg.logEx(a,"gxapi.js","loadScreen")}},ctxControlId:function(a){return 0==a.indexOf(this.cmpCtx)?a:this.cmpCtx+a},isProperty:function(a){return a instanceof Array&&2==a.length||"object"==typeof a&&"undefined"!=typeof a[0]&&"undefined"!=typeof a[1]?!0:!1},checkRowChange:function(a,b){try{var c=gx.fn.validStruct(a);if("undefined"!=typeof c){var d=c.grid;if(0!=d){var e=gx.fn.currentGridRowImpl(d);if(e&&(e!=
gx.csv.lastRow[d]||b)&&1<e.length&&gx.csv.lastRow[d]&&1<gx.csv.lastRow[d].length){gx.csv.rowChanged=!0;var f=gx.O.Gx_BScreen;gx.O.Gx_BScreen=1;!0==gx.csv.validGridRowChange(d,e)&&gx.O.getGridById(d).instanciateRow(e);gx.O.Gx_BScreen=f;return!0}void 0!=e&&gx.fn.setCurrentGridRow(d,e)}}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","checkRowChange")}return!1},validGridRow:function(a,b){void 0!=b&&gx.fn.setCurrentGridRow(a,b);var c=gx.fn.firstGridControl(a),d=gx.fn.lastGridControl(a);return gx.csv.validControls(c,
d+1,!0)},validGridRowChange:function(a,b){void 0!=gx.csv.lastRow[a]&&gx.fn.setCurrentGridRow(a,gx.csv.lastRow[a]);var c=gx.fn.firstGridControl(a),d=gx.fn.lastGridControl(a);((d=gx.csv.validControls(c,d+1,!0))||!gx.csv.stopOnError)&&gx.csv.changeGridRow(a,c,b);return d},changeGridRow:function(a,b,c){gx.csv.lastId=b;gx.O.fromValid>b&&(gx.O.fromValid=b);gx.csv.lastRow[a]=c;Gx_BScreen=1},targetRowIsMod:function(a){return(a=gx.fn.validStruct(a))?gx.fn.gridRowIsMod(a.lvl,gx.fn.currentGridRow(a.grid)):!1},
refreshVars:function(a){for(var b=a.ip?a.ip.length:0,c=0;c<b;c++)try{"function"==typeof gx.fn.validStruct(a.ip[c]).c2v&&gx.fn.validStruct(a.ip[c]).c2v()}catch(d){gx.dbg.logEx(d,"gxapi.js","refreshVars")}},refreshControls:function(a){for(var b=a.op?a.op.length:0,c=0;c<b;c++)try{var d=gx.fn.validStruct(a.op[c]);d.v2c();var e=null;(e=0==d.grid?gx.dom.el(gx.csv.ctxControlId(d.fld)):gx.fn.getControlGridRef(d.fld,d.grid))&&e.setAttribute("gxvalid","0")}catch(f){gx.dbg.logEx(f,"gxapi.js","refreshControls")}b=
a.ucs?a.ucs.length:0;for(c=0;c<b;c++)try{gx.fn.validStruct(a.ucs[c]).uc.execV2CFunctions(!0)}catch(g){gx.dbg.logEx(g,"gxapi.js","refreshControls")}},setValidValues:function(a,b,c){var d=gx.json.evalJSON(c[c.length-1]),e={},a={fields:a,msgs:d};gx.O.cmpCtx?e[gx.O.cmpCtx]=a:e.MAIN=a;gx.fn.setErrorViewer(e);if(!gx.O.AnyError)for(var f=!1,e=b.length,a=0;a<e;a++){var g=b[a],d=c[a];if(this.isProperty(g)){var h=gx.fn.vStructForVar(g[0])||gx.O.getValidStructFld(g[0]);null!=h&&gx.fn.setCtrlProperty(h.fld,g[1],
d)}else if(h=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(h)&&!gx.lang.emptyObject(h.hc)&&(h.hc==g?(gx.O[h.hc]=d,gx.fn.setHidden(this.cmpCtx+"GXH_"+h.fld,d)):h.hd==g&&(gx.O[h.hd]=d)),h=gx.fn.vStructForVarWId(g,this.currentId),gx.lang.emptyObject(h)){h=gx.fn.vStructForHC(g);if(null!=h){var k="";0!=h.grid&&(k="_"+gx.fn.currentGridRow(h.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+h.fld+k,d)}h=gx.fn.gridObjFromGxO(g);void 0!=h?(f=!0,h.loadGrid(d)):gx.fn.saveLvlOldParm(g,d)&&(gx.setVar(g,d),gx.fn.setGridHidden(g,
d))}else if(g=gx.fn.screen_CtrlRef(h.fld),!gx.lang.emptyObject(g)&&d instanceof Object&&("SELECT"==g.tagName?(-1!=g.selectedIndex&&gx.fn.invalidEmptyValue(d)&&(d.s=g.options[g.selectedIndex].value),k=gx.dom.id(g),gx.fn.loadComboBox(k,d.v),gx.fn.setComboBoxValue(k,d.s)):gx.lang.emptyObject(d.s)||(d.s="int"==h.type?gx.text.trim(d.s):gx.text.rtrim(d.s)),k=gx.fn.selectedDescription(d),d=gx.lang.emptyObject(d.s)&&!gx.lang.emptyObject(g.value)?g.value:"SPAN"==g.tagName&&!gx.lang.emptyObject(d.s)&&!gx.lang.emptyObject(k)?
k:d.s,gx.fn.setControlValue_span_safe(this.cmpCtx+h.fld,d,0)),h.v2v)h.v2v(d),h.v2c()}gx.O.refreshOlds();gx.fn.enableDisableDelete();f&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}},json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||
this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=this._nonSerializables.length,c=0;c<b;c++)if(this._nonSerializables[c]==a)return!0;return!1},evalJSON:function(a){try{return eval("("+a+")")}catch(b){gx.dbg.logEx(b,"gxapi.js","evalJSON")}return a},serializeJson:function(a,b){var c=this.objToJson(a);if(null===c)c=this.arrayToJson(a);else return c;if(null===c){if("function"==typeof a)return null;var c=[],d;for(d in a)if(b||!this.isNonSerializable(d)){var e=this.objToJson(d,!0);
if(null!==e){var f=this.serializeJson(a[d]);"string"==typeof f&&c.push(e+":"+f)}}return"{"+c.join(",")+"}"}return c},objToJson:function(a,b){var c=typeof a;if(b){if(!gx.lang.emptyObject(a)){if("string"==c)return gx.text.escapeString(a);if("number"==c)return'"'+a+'"'}}else{if("undefined"==c)return c;if("string"==c)return gx.text.escapeString(a);if("number"==c||"boolean"==c)return a.toString();if(null===a)return"null";if("function"==typeof a.json&&(c=a.json(),a!==c))return this.serializeJson(c)}return null},
arrayToJson:function(a){if("function"!=typeof a&&"number"==typeof a.length){for(var b=[],c=a.length,d=0;d<c;d++){var e=this.serializeJson(a[d]);"string"!=typeof e&&(e="undefined");b.push(e)}return"["+b.join(",")+"]"}return null},objFromJson:function(a,b){var c=this.evalJSON(b);if(a instanceof Array&&c instanceof Array)for(;a.length>c.length;)a.shift();else for(var d in a)"function"!=typeof a[d]&&delete a[d];for(d in c)a[d]=c[d]}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,
hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()},logMsg:function(a){(this.enabled||window.console)&&this.write(a)},logEx:function(a,b,c){if(this.enabled||window.console){var d="";if(a&&a instanceof Error)d="["+a.name+": "+this.exTxt(a),d=d+(b?", file: "+b:"")+((c?", func: "+c:"")+"]"),a.fileName&&(d+=" FileName:"+a.fileName),a.lineNumber&&(d+=" ln:"+a.lineNumber);else try{d=""+a}catch(e){d="[Unknown Error]"}this.write(d,!0)}},exTxt:function(a){return!a?
"Unknown Error":a.message?a.message:a.description?a.description:a.toString()},write:function(a,b){if(this.enabled)try{null==this.dbgWin&&(this.dbgWin=window.open("","debug","scrollbars=1,height=900,width=900")),this.dbgWin.document.write(a+"<BR>")}catch(c){}window.console&&(b?console.error(a):console.log(a))},writeT:function(a){var b=new Date,c=b.getTime(),d=this.lastTime;0<this.lastTime&&(d=(c-this.lastTime)/1E3);this.lastTime=c;a=b.toString()+" (+"+d+"seg): "+a;this.write(a)},logPerf:function(a,
b){if(this.performance)if(void 0===this.hshTimes[a])this.hshTimes[a]=(new Date).getTime();else{var c=((new Date).getTime()-this.hshTimes[a])/1E3;delete this.hshTimes[a];0<c&&this.performanceLog.push((void 0==b?a:b)+":("+c+"seg)")}},printPerformanceLog:function(){if(this.performance){for(msg in this.performanceLog)"string"==typeof this.performanceLog[msg]&&(this.outputFunc&&this.outputFunc(this.performanceLog[msg]),this.write(this.performanceLog[msg]));this.performanceLog=[]}}},http:{STATE_UNSENT:0,
STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},loadState:function(){gx.dbg.logPerf("loadState");var a=gx.dom.el("GXState");this.viewState={};this.viewStateLoaded=!1;if(a){var b=a=a.value;this.useBase64State&&(b=gx.base64.decode(a));this.viewState=gx.json.evalJSON(b);this.viewStateLoaded=
!0}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var b=gx.json.serializeJson(this.viewState,a),a=b;this.useBase64State&&(a=gx.base64.encode(b));b=gx.dom.el("GXState");null==b?gx.dom.createInput("GXState","hidden"):this.oldState=b.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",
a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,b=0;b<a;b++)gx.http.setObjectHsh(gx.pO.WebComponents[b]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(a){var b=a.getControlIdsh();if(null!=b){var c="";a.IsComponent&&null!=a.CmpContext&&(c=a.CmpContext);for(var d="",e=0;e<b.length;e++)if((validStruct=a.getValidStruct(b[e]))&&"function"==typeof validStruct.val)var f=gx.fn.getControlValue_impl(c+validStruct.fld),d="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?d+validStruct.val():
d+f;gx.http.createHsh(c+"GXHSH11",d)}},createHsh:function(a,b){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");var c=gx.MD5.getHsh(b);gx.fn.setControlValue_impl(a,c)},refreshState:function(){null!=this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},notification:{_node:null,_moveInterval:null,_closeLink:null,_delay:200,isVisible:function(){var a=gx.http.notification.node();return null!=a&&"none"!=a.style.display},node:function(){if(!this._node&&(this._node=gx.dom.byId("gx_ajax_notification"),
!this._node)){var a=gx.ajax.getImageUrl(gx,"indicatorImage",!0),b;b='<div id="gx_ajax_notification" style="display:none;position:absolute;text-align:center;vertical-align:top;top:0px;left:0px;"><div style="background-color:#BEBEBE;filter:alpha(opacity=50);opacity:0.5;position:absolute;top:0px;left:0px;width:100%;height:100%;">';gx.grid.drawAtServer&&(b+='<div onclick="gx.ajax.enableForm()" style="display:none;cursor:hand;font-size:9;position:absolute;top:0px;left:0px;"><u>Enable Form</u></div>');
this._node=gx.html.nodesFromText(b+"</div>"+('<img id="gx_ajax_indicator" src="'+a+'" width="16px" height="16px" align="absmiddle"/></div>'))[0];document.body.appendChild(this._node);gx.popup.setZIndex(this._node);gx.grid.drawAtServer&&(this._closeLink=this._node.firstChild.firstChild)}return this._node},show:function(){var a=gx.http.notification.node();a.style.width=gx.html.viewportWidth()+"px";a.style.height=gx.html.viewportHeight()+"px";a.style.display="block";gx.http.notification._moveInterval=
setInterval(gx.http.notification.move,50);gx.evt.attach(window,"resize",gx.http.notification.resize);gx.grid.drawAtServer&&setTimeout(gx.http.notification.showCloseLink,5E3)},hide:function(){gx.http.notification.node().style.display="none";clearInterval(gx.http.notification._moveInterval);gx.http.notification._moveInterval=null;gx.evt.detach(window,"resize",gx.http.notification.resize);gx.grid.drawAtServer&&gx.http.notification.hideCloseLink()},move:function(){var a=gx.http.notification.node(),b=
parseInt(a.style.top),b=(gx.dom.documentScroll().scrollTop-b-10)/3+3+b;a.style.top=b+"px"},resize:function(){var a=gx.http.notification.node();a.style.width=gx.html.viewportWidth()+"px";a.style.height=gx.html.viewportHeight()+"px"},showCloseLink:function(){gx.http.notification._closeLink&&(gx.http.notification._closeLink.style.display="block")},hideCloseLink:function(){gx.http.notification._closeLink&&(gx.http.notification._closeLink.style.display="none")},cleanup:function(){this._node&&gx.dom.removeControlSafe(this._node);
this._moveInterval=this._closeLink=this._node=null}},getCookie:function(a){for(var a=a+"=",b=document.cookie.split(";"),c=b.length,d=0;d<c;d++){for(var e=b[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return null},setCookie:function(a,b,c){c=c||1;c=new Date((new Date).getTime()+864E5*c);document.cookie=a+"="+escape(b)+"; expires="+c.toGMTString();return this.getCookie(a)==b},checkResponseStatus:function(a){return a.status==this.STATUS_FORBIDDEN?
!1:a.status==this.STATUS_SESSION_TO||this.isBadResponse(a)?(gx.http.reloadOnTimeout(),!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.warn&&gx.http.reloadOnTimeout(),!0):!1},isSessionTimeoutError:function(a,b){return!gx.gen.isDotNet()&&(b&&a&&gx.pO.AjaxSecurity)&&a.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==b.name&&2147500037==b.result||"Error"==b.name&&-2146697209==b.number||"NETWORK_ERR"==
b.name&&101==b.code)?!0:!1},reloadOnTimeout:function(){if(gx.pO.AjaxSecurity&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(){""==document.location.hash?this.redirect(location.href):document.location.reload()},redirect:function(a,b){gx.evt.setProcessing(!0);b?gx.evt.redirecting=!0:setTimeout(function(){gx.ajax.enableForm()},200);var c=gx.popup.getPopup();if(null!=c&&(c=c.window.gx.popup.lvl,-1!=c))var d=-1!=a.indexOf("?")?",":
"?",d=d+encodeURIComponent("gxPopupLevel="+c+";"),a=a+d;gx.ajax.isabsoluteurl(a)||(a=gx.ajax.absoluteurl(a));location.href=a},getRequest:function(){var a=null;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}null==a&&"undefined"!=typeof XMLHttpRequest&&(a=new XMLHttpRequest);return a},getPostData:function(a){for(var a=a.formNode,b=[],c=a.elements.length,d=0;d<c;d++){var e=gx.http.elementPostData(a.elements[d]);null!=e&&b.push(e)}return b.join("&")+
"&"},elementPostData:function(a){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var b="";if("select-multiple"==a.type)for(var c=a.options.length,d=0;d<c;d++)a.options[d].selected&&(b=a.options[d].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)b=a.value;else{if("radio"==a.type)return null}else b=this.element_gxvalue(a);return encodeURIComponent(a.name)+"="+encodeURIComponent(b)},element_gxvalue:function(a){return a.gxtype&&"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,
gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,b){a.readyState==this.STATE_DONE&&(gx.evt.setReady(!1),gx.evt.setProcessing(!1,!gx.csv.validating),a.status==this.STATUS_OK?this.doCallHandler(a,b):gx.http.checkResponseStatus(a)||gx.lang.doCallTimeout(function(a){document.write(a)},document,[a.responseText],50),window.gx&&(gx.evt.setReady(!0),gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog()))},onRequestError:function(a){gx.evt.setProcessing(!1,
!gx.csv.validating);a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a):this.isBadResponse(a)&&gx.http.reloadOnTimeout()},isBadResponse:function(a){return a.status==this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?!0:!1},doCall:function(a){!a.handler&&"function"==typeof a.load&&(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var b=this.getRequest();if(null!=b){if("function"==typeof a.handler&&
!a.sync){var c=gx.http.doHandleRequest.closure(this,[b,a]),d=gx.http.onRequestError.closure(this,[b,a]);gx.util.browser.isIE()?b.onreadystatechange=c:(b.onload=c,b.onerror=d)}c=null;"POST"==a.method&&(c=gx.http.getPostData(a));b.open(a.method,this.uncache(a.url),!a.sync);b.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");gx.sec.secToken&&(gx.pO.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&b.setRequestHeader(gx.sec.secTokenName,
gx.sec.secToken);try{b.send(c)}catch(e){gx.dbg.logEx(e,"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(b,a)}}},doCallHandler:function(a,b){b.obj?b.handler.call(b.obj,null,a.responseText,a):b.handler(null,a.responseText,a);if(window.gx&&"function"===typeof b.onReady)b.onReady()},doMultipartPost:function(a){this.getPostIFrame().gxPostInfo=a;var b=a.formNode;a.oldAction=b.getAttribute("action");b.setAttribute("action",a.url);a.oldTarget=b.getAttribute("target");b.setAttribute("target",
this.iframeName);b.submit()},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var a=this.iframeName,b=gx.dom.el(a);b&&b.frameElement&&(b=b.frameElement);b||(b=document.createElement("div"),b.innerHTML='<iframe name="'+a+'" src="about:blank">',document.body.appendChild(b),b=b.firstChild,document.body.appendChild(b),window[a]=b,b.name=a,b.setAttribute("name",
a),b.id=a,b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.height="1px",b.style.width="1px",b.style.visibility="hidden");gx.evt.attach(b,this.iFrameloadEventName(),gx.http.iframeOnload);return b},iframeOnload:function(){var a=gx.dom.el(gx.http.iframeName);if(!(gx.http.useReadyStateEvent()&&"complete"!=a.readyState)&&(gx.evt.setProcessing(!1,!gx.csv.validating),a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&(a=a.frameElement),a)){gx.http.useReadyStateEvent()&&(a.src=
"about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var b=a.gxPostInfo,c=b.formNode;c.setAttribute("action",b.oldAction);c.setAttribute("target",b.oldTarget);if(a=a.contentDocument?a.contentDocument:a.contentWindow.document)c=a.body,1==c.childNodes.length&&"#text"==c.childNodes[0].nodeName?(a=gx.base64.decode(gx.http.multipartResponse(c)),b.handler(null,a,b)):document.write(a.documentElement.innerHTML)}},multipartResponse:function(a){try{for(var b=a.childNodes[0];"#text"!=
b.nodeName;)b=b.childNodes[0];var c=b.nodeValue;if(!gx.util.browser.isIE())for(b=b.nextSibling;b;)c+=b.nodeValue,b=b.nextSibling;return c}catch(d){return gx.dbg.logEx(d,"gxapi.js","multipartResponse"),""}},uncache:function(a){var b=(new Date).getTime(),c=a.indexOf("?");return a+(0<c?c<a.length-1?",":"":"?")+"gx-no-cache="+b},callBackend:function(a,b,c,d,e,f,g,h,k,m,n){var l=this.getRequest(),n=n||{};if(l){try{f||gx.ajax.disableForm();g="undefined"!=typeof g?g:"GET";h="undefined"!=typeof h?h:null;
m="undefined"!=typeof m?m:!1;k||(b=this.uncache(b));l.open(g,b,m);l.setRequestHeader(gx.ajax.reqHeader,"2");for(var o in n)l.setRequestHeader(o,n[o]);"POST"==g?l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&(gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&l.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);l.send(h);f||gx.ajax.enableForm();this.lastStatus=l.status;this.lastResponse=l.responseText}catch(q){window.status="GXAjax HTTP error: "+
q.message}window.status="";if(l.readyState!=this.STATE_DONE||l.status!=this.STATUS_OK)gx.http.checkResponseStatus(l)||(window.status="GXAjax HTTP error: ("+l.status+") - "+l.statusText,gx.dbg.logEx(l.responseText));else if(e!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(e==this.modes.full)this.handleFull(this.lastResponse,a,c);else if(e==this.modes.call)return this.handleCall(this.lastResponse,a,c);return this.handleRetVal(this.lastResponse,
a,c,d)}catch(p){gx.dbg.logEx(p,"gxapi.js","callBackend")}}else window.status="GXAjax HTTP error: (bad response format)"}},handleFull:function(a){gx.http.postHandler(null,a,{status:200,responseText:""})},handleCall:function(a,b,c){if(b)return eval(b+a+c)},handleRetVal:function(a,b,c,d){var a=gx.json.evalJSON(a),e=a[0];this.lastStatus=a[1];void 0==this.lastStatus&&(this.lastStatus=0);if(b&&(d||null==this.lastStatus||0==this.lastStatus))return eval(b+gx.lang.arrayToSource(e)+c)},postHandler:function(a,
b,c){try{if(gx.evt.enter=!1,gx.csv.lastEvtResponse=null,200>c.status||299<c.status)document.write(c.responseText);else{var d=gx.json.evalJSON(b);null==d?document.write(b.toString()):(gx.http.refreshState(),gx.csv.lastEvtResponse=d,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(d)||gx.fx.obs.notify("gx.onafterevent",[d]))}}catch(e){gx.dbg.logEx(e,"gxapi.js","postHandler")}},formatLink:function(a,b){a=gx.ajax.objectUrl(a);if(b&&0<b.length)for(var a=a+"?",c=b.length,d=0;d<c;d++)0<d&&(a+=","),
a+=encodeURIComponent("function"==typeof b[d].getUrlVal?b[d].getUrlVal():b[d]);return a},loadScripts:function(a,b,c){"undefined"==typeof c&&(c=0);c>=a.length?b():gx.http.loadScript(a[c],function(){gx.http.loadScripts(a,b,c+1)})},loadScript:function(a,b){var c=gx.dom.byTag("head")[0],d=document.createElement("script");d.type="text/javascript";d.src=a;"function"==typeof b&&(d.addEventListener?d.addEventListener("load",b,!1):d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&
b()});c.appendChild(d)},loadStyle:function(a,b){var c=gx.dom.byTag("head")[0],d=document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=a;"function"==typeof b&&(d.onload=b);c.appendChild(d)},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var b=0;b<a.length;b++){var c=a[b];(new gx.util.Url(c)).isRelative()&&(c=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c,!1));gx.cache.fileLoaded(c)||(gx.cache.addRemoteFile(c),this.loadStyle(c))}},
doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||gx.ajax.dispatchCommands(a)}},stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},storage:function(a){this._store=window.sessionStorage;this._prefix=a;this.supported=!1;this.set_string=function(a,b){this.supported&&(this._store[this._prefix+a]=b)};this.get_string=function(a){return this.supported?
this._store[this._prefix+a]:null};this.set=function(a,b){this.set_string(a,gx.json.serializeJson(b))};this.get=function(a){return(a=this.get_string(a))?gx.json.evalJSON(a):null};this.remove=function(a){this.supported&&this._store.removeItem(this._prefix+a)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1)}},_setBasePath:function(){for(var a=
gx.dom.scripts(),b=null,c=0,d=a.length;c<d;c++)if(0<=a[c].indexOf("gxgral.js")||0<=a[c].indexOf("gxapiSD.js")){b=a[c];break}a="";if(!gx.ajax.isRelativeToHost(b)||gx.ajax.isabsoluteurl(b))c=location.pathname.lastIndexOf("/"),a=1<c?location.pathname.substring(1,c):"";else{var b=b.split("/"),e=location.pathname.split("/");b.splice(b.length-1,1);e.splice(e.length-1,1);c=0;for(d=e.length;c<d;c++)if(e[c]==b[c]||void 0===b[c])a=a+(""==a?"":"/")+e[c];else break}gx.basePath=a},_init:function(){gx.dbg._init();
gx.dom._init();gx.base64._init();gx.sec._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.popup._init();gx.geolocation._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],b=gx.dom.form().elements,c=0,d=b.length;c<d;c++)gx.dom.purgeElement(b[c],
a);b=gx.dom.byTag("span");c=0;for(d=b.length;c<d;c++)gx.dom.purgeElement(b[c],a);b=gx.dom.byTag("img");c=0;for(d=b.length;c<d;c++)gx.dom.purgeElement(b[c],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.O=null;gx.pO=null}}}();
