gx.GxObject=function(){this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.ajax.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings=[];this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls=[];this.VarControlMap=
[];this.FormBCs=[];this.GridBCs=[];this.LvlOlds=[];this.ServerEvents=[];this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})/;this.getContainer=function(){var b=this.cmpRegex.exec(this.CmpContext);if(b=gx.dom.el(b[1]+"gxHTMLWrp"+b[2]))return b};this.setObjectType=function(b){this.ObjectType=b};this.getObjectType=function(){return this.ObjectType};this.isTransaction=
function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};this.setAjaxSecurity=function(b){this.AjaxSecurity=b};this.setOnAjaxSessionTimeout=function(b){switch(b){case "Warn":this.OnSessionTimeout=gx.ajax.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=gx.ajax.timeoutActions.callObj}};this.addKeyListener=function(b,a){gx.evt.addKeyListener(this.CmpContext,b,a)};this.clearMessages=function(){this.MsgList.length=0};this.addMessage=function(b){this.MsgList.push(b)};
this.showMessages=function(){for(var b=[],a=this.MsgList.length,c=0;c<a;c++)b.push({att:"",type:2,text:this.MsgList[c]});a={};a[""==this.CmpContext?"MAIN":this.CmpContext]=b;gx.fn.setErrorViewer(a);this.clearMessages()};this.setPrompt=function(b,a){gx.fn.attachCtrl(b,{isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:a});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[b]=function(a){if((a=(a||gx.dom.el(this.CmpContext+b)).parentNode)&&a.href)if((a=a.href.match("javascript:(.+)"))&&
a.length>1){a=decodeURIComponent(a[1]);try{eval(a)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setPrompt")}}}};this.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var b=[],a=gx.csv.lastEvtResponse.gxValues,c=a.length,d=0;d<c;d++){var e=a[d];if(e.CmpContext==this.CmpContext&&gx.lang.booleanValue(e.IsMasterPage)==this.IsMasterPage){b.push(e);break}}gx.fn.setPostValues(b)}};this.refreshInputs=function(b){for(var a=b.length,c=0;c<a;c++){var d=this.getValidStructFld(b[c][1]);
null!=d&&"function"==typeof d.c2v&&d.c2v()}};this.refreshOutputs=function(b){for(var a=[],c=0,d=b.length;c<d;c++){var e=b[c];if(e.fld){var f=this.getValidStructFld(e.fld);if(null!=f)f.v2c();else{f=this.getVariable(e.av);if(null!=f&&"object"==typeof f){var g=this.getFormBCForVar(e.av);null!=g&&this.bcToScreen(g,f);(g=this.getGridForColl(e.av))&&g.refreshCollection(f)}gx.fn.setHidden(gx.csv.ctxControlId(e.fld),f)}}else e.ctrl&&a.push(e)}c=0;for(d=a.length;c<d;c++)e=a[c],gx.uc.isUserControl(e.ctrl)&&
(e.ctrl.execV2CFunctions(!1),e.ctrl.execShowFunction());this.showMessages()};this.refreshServerOutputs=function(b){for(var a=b.length,c=0;c<a;c++){var d=b[c],e=gx.fn.getHidden(this.CmpContext+d.fld);void 0!=e&&((d=this.getValidStructFld(d.fld))&&d.v2v?(d.v2v(e),d.v2c()):this.setVariable(b[c].av,e))}};this.getContextObject=function(b){return null!=this.getValidStructFld(b)&&(b=gx.fn.getControlValue_impl(this.CmpContext+b),null!=b)?b:""};this.getValidStructId=function(b){if(!gx.lang.emptyObject(b))for(var a=
this.getControlIds(),c=0;c<a.length;c++)if(validStruct=this.getValidStruct(a[c]),this.isSameField(validStruct,b))return a[c];return-1};this.getValidStructFld=function(b){if(this.getValidStructFld_cache[b])return this.getValidStructFld_cache[b];if(!gx.lang.emptyObject(b))for(var a=this.getControlIds(),c=a.length,d=0;d<c;d++){var e=this.getValidStruct(a[d]);if(this.isSameField(e,b))return this.getValidStructFld_cache[b]=e}return this.getValidStructFld_cache[b]=null};this.isSameField=function(b,a){var c=
b.fld;if(c==a)return!0;this.IsComponent&&0==a.indexOf(this.CmpContext)&&(a=a.substring(this.CmpContext.length));0!=b.grid&&(a=a.replace(/_([0-9]{4})*$/,""));return c==a};this.getUserFocus=function(){var b=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(b)&&"notset"!=b){var a=gx.dom.byId(b);if(!gx.lang.emptyObject(a)&&!gx.fn.isAccepted(a)){b=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var c=gx.O;gx.O=this;a=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=c;gx.csv.cmpCtx=
b;b=gx.lang.emptyObject(a)?"":a.id}}if(gx.lang.emptyObject(b)){if(this.hasMasterPage()&&(b=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(b)))return b;a=[];for(c=0;c<this.WebComponents.length;c++)if(0==this.WebComponents[c].CmpContext.indexOf("MP"))a.push(this.WebComponents[c]);else if(b=this.WebComponents[c].getUserFocus(),!gx.lang.emptyObject(b))return b;for(c=0;c<a.length&&!(b=a[c].getUserFocus(),!gx.lang.emptyObject(b));c++);}return b};this.hasMasterPage=function(){return null!=this.MasterPage};
this.setComponent=function(b){this.CmpControls[b.id.toLowerCase()]=b};this.getComponentPrefix=function(b){return(b=this.getComponentData(b))?b.Prefix||"":""};this.getComponentData=function(b){return this.CmpControls[b.toLowerCase()]};this.createWebComponent=function(b,a,c,d,e,f){d=d||"";b=f||this.getComponentPrefix(b);a=gx.ajax.dynComponent(a,c,b,d);a.DynComponentMap||(a.DynComponentMap={});a.DynComponentMap[f+d]=e;gx.ajax.setPostResponse(a)};this.setWebComponent=function(b){this.deleteComponent(b.CmpContext,
b);this.WebComponents[b.CmpContext]=b;this.WebComponents.push(b);b.JustCreated=!0;gx.fx.obs.notify("webcom.render",[b])};this.getWebComponent=function(b){return this.WebComponents[b]};this.deleteComponent=function(b,a){var c=this.getWebComponent(b);if(c){gx.cache.deleteInlineCode(b+c.ServerClass.toLowerCase());this.deleteComponentHiddens(b);gx.lang.emptyObject(a)||gx.fn.setHidden(a.CmpContext,a.ServerClass);c.ondestroy();delete this.WebComponents[b];for(var c=this.WebComponents.length,d=0;d<c;d++)if(this.WebComponents[d].CmpContext==
b){this.WebComponents.removeAt(d);break}var c=this.WebComponents,e;for(e in c)isNaN(parseInt(e))&&0==e.indexOf(b)&&this.deleteComponent(e)}};this.deleteComponentHiddens=function(b){var b=gx.fn.filterHiddens(RegExp("^"+b),gx.http.viewState),a;for(a in b)a&&gx.fn.deleteHidden(a)};this.setCmpContext=function(b){void 0!=b&&(""!=b&&(this.IsComponent=!0),this.CmpContext=b)};this.getOldLvl=function(b){for(var a in this.LvlOlds)for(var c=this.LvlOlds[a],d=c.length,e=0;e<d;e++)if(c[e]==b)return a;return-1};
this.refreshDependantGrids=function(b){for(var a=this.Grids.length,c=0;c<a;c++)for(var d=this.Grids[c],e=d.refreshVars,f=e.length,g=0;g<f;g++)if(e[g].fld==b.fld){d.filterVarChanged();break}};this.setGrid=function(b){this.Grids[b.gridName]=b;var a=this.getGridIdxByName(b.gridName);-1!=a?this.Grids[a]=b:this.Grids.push(b)};this.getGrid=function(b){return this.Grids[b]};this.getGridIdxByName=function(b){for(var a=this.Grids.length,c=0;c<a;c++)if(this.Grids[c].gridName==b)return c;return-1};this.getGridIdx=
function(b){for(var a=this.Grids.length,c=0;c<a;c++)if(this.Grids[c].gridId==b)return c;return-1};this.getGridById=function(b,a){for(var a=a||"",c=this.Grids.length,d=0;d<c;d++){var e=this.Grids[d];if(e.gridId==b&&(!e.parentRow||gx.text.endsWith(a,e.parentRow.gxId)))return e}return null};this.getGridForColl=function(b){for(var a=this.Grids.length,c=0;c<a;c++){var d=this.Grids[c];if(d.boundedCollName==b)return d}return null};this.getFormBCForVar=function(b){for(var a in this.FormBCs){var c=this.FormBCs[a];
if(c&&c.gxvar==b)return c}return null};this.getGridBC=function(b){var a=b;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(a=b.substring(this.CmpContext.length));return this.GridBCs[a]};this.getFormBC=function(b){var a=b;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(a=b.substring(this.CmpContext.length));return this.FormBCs[a]};this.addGridBCProperty=function(b,a,c,d){var e=this.getGridBC(b);"undefined"==typeof e&&(e={},e.gxvar=d,this.GridBCs[b]=e);this.addBCProperties(e,a,c,d)};this.addBCProperty=
function(b,a,c,d){var e=this.getFormBC(b);"undefined"==typeof e&&(e={},e.gxvar=d,this.FormBCs[b]=e);this.addBCProperties(e,a,c,d)};this.addBCProperties=function(b,a,c,d){if(a instanceof Array)for(var e=a.length,f=0;f<e;f++){if("undefined"==typeof b[a[f]])if(f<e-1)b[a[f]]={};else{b[a[f]]=c;"object"==typeof this[d]&&(c.v2bc=function(){var b=this[c.gxvar];"date"==c.type&&(b=(new gx.date.gxdate(b)).getString("Y4MD"));this.valueToBCProp(this[d],a,b)});break}b=b[a[f]]}else"string"==typeof a&&(b[a]=c)};
this.valueToBCProp=function(b,a,c){try{for(var d=a.length,e=0;e<d;e++)if(1<d&&(e<d-1&&void 0===b[a[e]])&&(b[a[e]]={}),"object"==typeof b[a[e]])b=b[a[e]];else{b[a[e]]=c;break}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","valueToBCProp")}};this.bcToScreen=function(b,a){for(var c in b)if("gxvar"!=c)try{if("object"==typeof a[c])this.bcToScreen(b[c],a[c]);else{var d=b[c];if((0==d.grid||gx.csv.validatingGrid&&d.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(d.hc)&&d.v2v)d.v2v(a[c]),d.v2c()}}catch(e){gx.dbg.logEx(e,
"gxfrmutl.js","bcToScreen")}};this.addGridUCEventHandler=function(b,a,c){gx.lang.emptyObject(this.GridUCsEvts[b])&&(this.GridUCsEvts[b]=[]);this.GridUCsEvts[b].push({e:a,h:c})};this.getGridUCEventHandlers=function(b){b=this.GridUCsEvts[b];return gx.lang.emptyObject(b)?[]:b};this.setGridUCDynProp=function(b,a,c,d,e){this.setGridUCProp(b,a,c,void 0,e)};this.setGridUCProp=function(b,a,c,d,e){gx.lang.emptyObject(this.GridUCsProps[b])&&(this.GridUCsProps[b]=[]);this.GridUCsProps[b].push({p:a,h:c,v:d,t:e});
"InternalTitle"==a&&(this.GridUCsProps[b].title=d)};this.getGridUCProperties=function(b){b=this.GridUCsProps[b];return gx.lang.emptyObject(b)?[]:b};this.addUsercontrolBinding=function(b,a){this.UCBindings[b]=a};this.setUserControl=function(b){b.ContainerName&&(this.UserControls[b.ContainerName]=b)};this.getUserControl=function(b){var a=this.UserControls[b];!a&&""!=this.CmpContext&&(a=this.UserControls[this.CmpContext+b]);return a};this.execV2CFunctions=function(b){for(var a in this.UserControls)if(this.UserControls.hasOwnProperty(a)){var c=
this.UserControls[a];try{c.execV2CFunctions(b)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execV2CFunctions")}!0==b&&c.execShowFunction()}};this.execC2VFunctions=function(){for(var b in this.UserControls)if(this.UserControls.hasOwnProperty(b)){try{this.UserControls[b].execC2VFunctions()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","execC2VFunctions")}try{this.UserControls[b].saveProperties()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}}};this.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",
this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};this.setVariable=function(b,a){FormattedValue=this[b]=a;0!=b.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+b,a);if(void 0!=this.VarControlMap[b]){var c=this.VarControlMap[b].type;if("date"==c||"dtime"==c)"string"==typeof a&&(a=new gx.date.gxdate(a)),FormattedValue="date"==c?a.getStringWithFmt("Y4MD"):a.getStringWithFmt("Y4MD")+" "+a.getTimeString(!0,!0);"decimal"==c&&"."!=gx.decimalPoint?(FormattedValue=a.toString().replace(".",
gx.decimalPoint),"string"==typeof a&&(this[b]=gx.num.parseFloat(a))):"int"==c&&"string"==typeof a&&(this[b]=gx.num.parseInt(a));gx.fn.setHidden(this.CmpContext+this.VarControlMap[b].id,FormattedValue)}"Gx_mode"==b&&this.setMode();void 0!=this.UCBindings[b]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[b],a)};this.getVariable=function(b){return this[b]};this.isServerEvent=function(b){for(var a=this.ServerEvents.length,c=0;c<a;c++)if(this.ServerEvents[c]==b)return!0;return!1};this.setEventParameters=
function(b,a){gx.csv.lastEvtRow=null;gx.O=this;var c=!0,d=-1;gx.csv.cmpCtx=this.CmpContext;for(var e=b.length,f=0;f<e;f++){var g=b[f][0],j=b[f][1],h=b[f][2],k=!1,l;for(l in a)if(l.toLowerCase()==g.toLowerCase()){this.setVariable(h,a[l]);k=!0;break}k||this.setVariable(h,a);g=this.getValidStructFld(j);null!=g?(0!=g.grid&&-1==d?d=g.grid:0!=g.grid&&g.grid!=d&&(c=!1),g.v2c()):gx.fn.setHidden(this.CmpContext+j,this.getVariable(h))}c&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(d))};this.executeServerEvent=
function(b,a,c){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var d=!0;void 0!=a&&!1==a&&(d=!1);a="string"==typeof c?c:"";gx.lang.emptyObject(gx.csv.lastEvtRow)||(a=gx.csv.lastEvtRow);""==a&&!gx.lang.emptyObject(gx.csv.validatingGrid)&&(a=gx.csv.lastRow[gx.csv.validatingGrid.gridId]);gx.evt.execEvt(this.CmpContext+"E"+b+"."+a,gx.evt.dummyCtrl,d)};this.executeEnterEvent=function(b,a){if(a&&a.onblur)a.onblur();if(!gx.evt.cancelAndRefresh(b)){gx.dom.hasSubmitControl()&&gx.evt.cancel(b,!0);a&&("INPUT"==a.nodeName&&
gx.dom.isEditControl(a))&&gx.evt.cancel(b,!0);var c=this.gxOWithEnter();if(null!=c){gx.evt.enter=!0;var d="ENTER";c.IsMasterPage&&(d+="_MPAGE");d=c.CmpContext+"E"+d+".";gx.evt.isEnterEvtCtrl(a)&&(c=gx.fn.controlRowId(a))&&(d+=c);gx.evt.execEvt(d,gx.evt.dummyCtrl);gx.evt.enter=!1;gx.evt.cancel(b,!0)}}};this.gxOWithEnter=function(){if(this.hasEnterEvent)return this;if(this.IsComponent){var b=this.cmpRegex.exec(this.CmpContext),a=""==b[1]&&0==b[0].indexOf("MP"),b=gx.getObj(b[1],a);if(!gx.lang.emptyObject(b))return b.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();
return null};this.getLastControlId=function(){return this.GXLastCtrlId};this.getValidStruct=function(b){return this.GXValidFnc[b]};this.getControlIds=function(){return this.GXCtrlIds};this.getControlIdsh=function(){return this.GXCtrlIdsh};this.getUsercontrolFromChild=function(b){for(var a in this.UserControls)if(this.UserControls.hasOwnProperty(a)){var c=this.UserControls[a].getContainerControl();if(gx.dom.isChildNode(b,c))return this.UserControls[a]}return null};this.installFlatLevelDatePickers=
function(){for(var b=null,a=this.getControlIds(),c=a.length,d=0;d<c;d++)b=this.getValidStruct(a[d]),void 0!=b&&(0==b.grid&&void 0!=b.dp)&&gx.fn.installDatePicker(this.CmpContext+b.fld,b.dp.f,b.dp.st,b.dp.wn,b.dp.mf,gx.fn.datePickerFormat(b.dp.pic,b.dp.dec,b.len))};this.installImageControls=function(){for(var b=gx.dom.byClass("gx-multimedia-upload"),a=0,c=b.length;a<c;a++)gx.html.multimediaUpload.createControl(b[a]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};this.clearMultimediaValue=
function(b){b=gx.html.multimediaUpload.getElements(b);b.fileField.onchange(b.fileField);gx.fn.setHidden(b.fileField.id,"");gx.fn.setHidden(b.uriField.id,"");gx.fn.setHidden("gxBlob"+b.fileField.id,"")};this.refreshOlds=function(){for(var b in this.LvlOlds){var a=this.LvlOlds[b];if("function"!=typeof a){var c=gx.fn.lvlGrid(parseInt(b)),d=void 0;0!=c&&(d=gx.fn.currentGridRow(c));for(var c=a.length,e=0;e<c;e++){var f=a[e],g=f,j="",h=gx.fn.vStructForOld(g);if(h){if(!h.gxgrid||0<h.gxgrid.grid.rows.length)j=
gx.typedOld(h.fld,g,h.type)}else gx.lang.emptyObject(d)||(f+="_"+d),j=gx.fn.getHidden(f);"undefined"!=typeof j&&(h||(window[g]=j),this[g]=j)}}}};this.deleteEventHandlers=function(){try{gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","deleteEventHandlers")}};this.ondestroy=function(){try{this.deleteEventHandlers();for(var b in this.UserControls)if(this.UserControls.hasOwnProperty(b)){var a=this.UserControls[b];if(!gx.lang.emptyObject(a.destroy))try{a.destroy()}catch(c){gx.dbg.logEx(c,
"gxfrmutl.js","ondestroy")}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","ondestroy")}};this.onpost=function(){var b=gx.O;gx.setGxO(this.CmpContext,this.IsMasterPage);if(this.hasMasterPage())this.MasterPage.onpost();for(var a=this.WebComponents.length,c=0;c<a;c++)this.WebComponents[c].onpost();this.ReadonlyForm&&(this.IsComponent&&b!=this)&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(b.CmpContext,b.IsMasterPage)};this.roControlsAsHidden=function(){for(var b=this.getControlIds(),a=b.length,
c=0;c<a;c++){var d=this.getValidStruct(b[c]);if(0==d.grid&&"function"==typeof d.val){var d=this.CmpContext+d.fld,e=gx.dom.el(d);e&&!gx.fn.isAccepted(e)&&gx.fn.setHidden(d,gx.fn.getControlValue(d))}}};this.onload=function(){gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this.CmpContext,this.IsMasterPage);this.screenToVars();this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this.CmpContext,this.IsMasterPage));for(var b=this.Grids.length,a=0;a<b;a++)this.Grids[a].loadGrid();
b=this.WebComponents.length;for(a=0;a<b;a++)this.WebComponents[a].onload();gx.setGxO(this.CmpContext,this.IsMasterPage);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.execV2CFunctions(!0);this.JustCreated=!1;gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass)};this.onunload=function(){if(this.hasMasterPage())this.MasterPage.onunload();for(var b=this.Grids.length,a=0;a<b;a++)this.Grids[a].cleanup(),this.Grids[a]=null;this.Grids=[];b=this.WebComponents.length;
for(a=0;a<b;a++)this.WebComponents[a].onunload(),this.WebComponents[a]=null;this.WebComponents=[];this.getValidStructFld_cache={}};this.screenToVars=function(){try{for(var b=this.getControlIds(),a=b.length,c=0;c<a;c++){var d=this.getValidStruct(b[c]);d&&(0==d.lvl&&"function"==typeof d.c2v)&&d.c2v()}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","screenToVars")}};this.postbackLoad=function(){this.hasMasterPage()&&this.MasterPage.postbackLoad();for(var b=this.WebComponents.length,a=0;a<b;a++)this.WebComponents[a].postbackLoad();
this.IsComponent&&this.JustCreated&&(this.installImageControls(),this.installFlatLevelDatePickers());this.execV2CFunctions(!0);this.conditionsChanged=this.JustCreated=!1};this.addDragSource=function(b,a,c,d){gx.fx.dnd.addSource(this,b,a,c,d)};this.addDropTarget=function(b,a,c,d){gx.fx.dnd.addTarget(this,b,a,c,d)};this.addContextSetter=function(b,a,c,d){gx.fx.ctx.addSetter(this,b,a,c,d)};this.addContextTracker=function(b,a,c,d){gx.fx.ctx.addTracker(this,c,d)};this.addEventHandler=function(b,a,c){gx.fx.dom.addEventHandler(this,
b,a,c)};this.updateBitmapValue=function(b,a,c,d){b=gx.html.multimediaUpload.getContainer(b);"file"==gx.html.multimediaUpload.getOptionValue(b)?this[a]=d:this[c]=d}};
gx.uc={getNew:function(b,a,c,d,e,f,g,j,h){d=eval(d);gx.lang.inherits(d,gx.uc.UserControl,!0);d=new d;d.ContainerName=e;d.DesignContainerName=e;d.setupControl(b,f,a,c,g,j,h);return d},fromChild:function(b){var a=gx.pO.getUsercontrolFromChild(b);if(null!=a||gx.pO.hasMasterPage()&&(a=gx.pO.MasterPage.getUsercontrolFromChild(b),null!=a))return a;for(var c=gx.pO.WebComponents.length,d=0;d<c;d++)if(a=gx.pO.WebComponents[d].getUsercontrolFromChild(b),null!=a)return a;return null},getUserControlObj:function(b){var a=
gx.O.getUserControl(b);if(gx.lang.emptyObject(a)){if(gx.pO.hasMasterPage()&&(a=gx.pO.MasterPage.getUserControl(b),!gx.lang.emptyObject(a)))return a;for(var c=gx.pO.WebComponents.length,d=0;d<c&&!(a=gx.pO.WebComponents[d].getUserControl(b),!gx.lang.emptyObject(a));d++);}return a},userControlContainerId:function(b){var a=b.lastIndexOf("_");return-1!=a&&(a=b.substring(0,a)+"Container"+b.substring(a),null!=gx.dom.byId(a))?a:b+"Container"},setProperties:function(b,a){var c=gx.uc.getUserControlObj(gx.uc.userControlContainerId(b));
if(null!=c)if(void 0!=a.length)for(var d=a.length,e=0;e<d;e++)for(var f in a[e]){var g=a[e][f];c[f]=g}else for(f in a)g=a[f],c[f]=g},isUserControl:function(b){if(gx.lang.emptyObj(gx.O.UserControls))return!1;if(b instanceof gx.uc.UserControl)return!0;b=gx.dom.byId(gx.uc.userControlContainerId(b));return null!=b&&"DIV"==b.tagName?!0:!1},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=
0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.RealControl=this.C2ShowFunction=null;this.IsPostBack=!1;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(b){return gx.dom.byId(this.DesignContainerName+
b+(""!=this.GridRow?"_"+this.GridRow:""))};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl};this.setupControl=function(b,a,c,d,e,f,g){this.ParentObject=b;this.ControlName=a;this.ControlId=c;this.LastIdBefore=d;this.ControlLvl=void 0!=e?e:0;this.GridId=void 0!=f?f:0;this.GridRow=void 0!=g?g:"";this.ParentObject.GXValidFnc[this.ControlId]={lvl:this.ControlLvl,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl}};
this.addValidFunction=function(b,a,c){this.ValidFunctions.push(b);this.ParentObject.addUsercontrolBinding(a,c+(""==this.GridRow?"":"_"+this.GridRow))};this.validateControl=function(){gx.csv.validatingUC=this;for(var b=this.ValidFunctions.length,a=0;a<b;a++)if(!this.ValidFunctions[a].call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var b=this.getContainerControl();if(gx.lang.emptyObject(document.frames))b.onfocus=this.onfocus,
this.RealControl=b;else{var a=document.frames.length;if(0<a)for(var c=0,c=0;c<a;c++){var d=document.frames[c];if(!0==gx.dom.isChildNode(d,b)){d.frameElement.onfocus=this.onfocus;this.RealControl=d.frameElement;break}}}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);this.execShowFunction();gx.csv.anyError||this.setFocusBase()};this.onchange=
function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(b){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=b};this.createWebComponent=function(b,a,c,d,e){this.ParentObject.createWebComponent(b,a,c,this.GridRow,d,e)};this.deleteWebComponent=function(b){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(b))};
this.notifyContext=function(b,a){gx.fx.ctx.notify(null,b,a)};this.addV2CFunction=function(){if(1==arguments.length&&"function"==typeof arguments[0])this.V2CFunctions.push(arguments[0]);else{var b=arguments[0],a=arguments[1],c=arguments[2];this.V2CFunctions.push(function(d,e,f){var g=a;f&&(e&&(g=a+"_"+e),d.ParentObject[b]=gx.fn.getControlValue(g));d[c](d.ParentObject[b])})}};this.addC2VFunction=function(b){this.C2VFunctions.push(b)};this.setC2ShowFunction=function(b){this.C2ShowFunction=b};this.execV2CFunctions=
function(b){var a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var c=0,d=this.V2CFunctions,e=d.length,c=0;c<e;c++)try{d[c](this,this.GridRow,b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=a};this.execC2VFunctions=function(){var b=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var a=0,c=this.C2VFunctions,d=c.length,a=0;a<d;a++)try{c[a](this,this.GridRow)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=b};this.execShowFunction=
function(){try{null!=this.C2ShowFunction&&this.getContainerControl()&&this.C2ShowFunction(this)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","execV2CFunctions")}this.IsPostBack=!0};this.getEventRow=function(){return this.GridRow};this.eventHandler=function(b,a,c){gx.evt.setReady(!1);gx.setGxO(this.ParentObject.CmpContext,this.ParentObject.IsMasterPage);if(0<b){var d=this.DesignContainerName,e=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);e&&e[1]&&(d=e[1]);this.ParentObject[d]=
this;(b=this.ParentObject.getGridById(b))&&b.instanciateRow(a)}this.execC2VFunctions();c.call(this.ParentObject,this.getEventRow());gx.evt.setReady(!0)};this.addEventHandler=function(b,a){this[b]=this.eventHandler.closure(this,[this.GridId,this.GridRow,a])};this.addProperty=function(b,a){this.Properties[b]=a};this.setProp=function(b,a,c,d){this.addProperty(b,a);this.PropTypes[b]=d;gx.lang.isBooleanType(d)?this[b]=gx.lang.gxBoolean(c):"color"==d?gx.lang.emptyObject(c)||(this[b]="number"==typeof c||
"string"==typeof c?gx.color.html(c):c):gx.lang.isNumericType(d)?gx.lang.emptyObject(c)||(this[b]=gx.num.parseFloat(c)):this[b]=c};this.setDynProp=function(b,a,c,d){var e=this.getDynPropertyValueFromHidden(b,a);void 0===e&&(e=c);this.DynProperties.push(b);this.setProp(b,a,e,d)};this.refreshDynProperties=function(){for(var b=0,a=this.DynProperties.length;b<a;b++){var c=this.DynProperties[b];this[c]=this.getDynPropertyValueFromHidden(c,this.Properties[c])}};this.getDynPropertyValueFromHidden=function(b,
a){var c=gx.fn.getHidden(this.getHiddenName(a));void 0===c&&(c=gx.fn.getHidden(this.getHiddenName(b)));return c};this.setGridProperties=function(){for(var b=this.ParentObject.getGridUCProperties(this.ControlName),a=b.length,c=0;c<a;c++){var d=b[c],e=d.v;"undefined"==typeof e&&(e=this.getHiddenName(d.h),e=gx.fn.getHidden(e),"color"==d.t&&(e=gx.color.html(e)));this.setProp(d.p,d.h,e,d.t)}};this.setGridEventHandlers=function(){for(var b=this.ParentObject.getGridUCEventHandlers(this.ControlName),a=b.length,
c=0;c<a;c++){var d=b[c];this.addEventHandler(d.e,d.h)}};this.getHiddenName=function(b){var a="";""!=this.GridRow&&(a="_"+this.GridRow);return this.ParentObject.CmpContext+this.ControlName.toUpperCase()+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+b+a};this.saveProperties=function(){for(var b in this.Properties){var a=this[b];"function"!=typeof this.Properties[b]&&("undefined"!=typeof a&&("undefined"!=typeof a.R&&"undefined"!=typeof a.G&&"undefined"!=typeof a.B)&&(a=gx.color.rgb(a.R,a.G,a.B)),
gx.lang.isBooleanType(this.PropTypes[b])&&(a=a?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[b]),a))}}}};
gx.printing={loaded:!1,tries:0,waitInterval:100,IFrameId:"gxprintHelper_Iframe",print:function(b){if(gx.printing.avoidPrintingApplet)this.printDirect(b);else{if(!this.loaded){var a='<applet name="GeneXusPrintAppletForWindows" archive="'+gx.util.resourceUrl("printingappletsigned.jar",!0)+'" code="com/genexus/printing/Printer.class" width="0" height="0">',a=a+('<param name="path" value="'+gx.util.resourceUrl(gx.basePath,!0)+'">');document.body.appendChild(gx.html.nodesFromText(a+'<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p></applet>')[0]);
this.loaded=!0}0==this.tries?this.printWhenReady(b):gx.dbg.logMsg("Already trying to print a document.")}},printDirect:function(b){if(b){var a=gx.dom.byId(gx.printing.IFrameId);a||(a=document.createElement("IFRAME"),a.id=gx.printing.IFrameId,a.style.visibility="hidden",document.body.appendChild(a));a.src=b.reportFile;a.onload=function(){this.contentWindow.print();this.onload=null;this.src=""}}},printWhenReady:function(b){this.tries>=60*this.waitInterval?(this.tries=0,gx.dbg.logMsg("The printing applet was not loaded.")):
(this.tries++,this.isReady()?(document.GeneXusPrintAppletForWindows.printReport(b.reportFile,b.printerRule,"GXPRN.INI"),this.tries=0):setTimeout(function(){gx.printing.printWhenReady(b)},this.waitInterval))},isReady:function(){var b=document.GeneXusPrintAppletForWindows;return b&&("function"==typeof b.isReady||"unknown"==typeof b.isReady)?b.isReady():!1}};
gx.fn=function(){var b=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/;return{attachedControls:function(){return gx.attachedControls},closeWindow:function(a){if("string"==typeof a){if(this.closeFromServer(a))return;a=[]}a||(a=[]);if(gx.popup.ispopup()){var c=gx.popup.getPopup(),d=c.url?gx.util.noParmsUrl(c.url):"";if(!c.frameWindow||-1!=c.frameWindow.location.href.search(d+"(\\?.*)?$")||gx.grid.drawAtServer){c.close(a);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():
(a=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(a)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),location.href=gx.ajax.absoluteurl(a)))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(a){try{if(window.parent&&window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(a)):window.parent.gx.fn.closeWindow(gx.json.evalJSON(a)),
!0}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(a,c){gx.evt.execLoad=!1;a&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(c)},invalidEmptyValue:function(a){if(gx.lang.emptyObject(a.s)){for(var c=a.v.length,d=0;d<c;d++)if(a.v[d][0]===a.s)return!1;return!0}return!1},selectedDescription:function(a){for(var c=a.v.length,d=0;d<c;d++)if(a.v[d][0]===a.s)return a.v[d][1];return null},setGridCheckBoxValue:function(a,c,d,b){this.setCheckBoxValue(a+
"_"+c,d,b)},setGridDecimalValue:function(a,c,d){return this.setGridControlValue(a,c,d)},setGridControlValue:function(a,c,d,b){if(void 0!==c)return this.setControlValue(a+"_"+c,d,b)},setVarValues:function(a,c){for(var d=a.length,b=0;b<d;b++){var f=gx.fn.vStructForVar(a[b]);f&&f.v2v?f.v2v(c[b]):eval(a[b]+'="'+c[b]+'"')}},setControlValue:function(a,c,d){a=gx.csv.ctxControlId(a);this.setControlValueAny(a,c,d)},setControlValueAny:function(a,c,d){var b=gx.O.getValidStructFld(a),f=gx.dom.el(a);if(b&&("dtime"==
b.type||"date"==b.type))""===c?c=gx.date.nulldate_toc(b.len,b.dec):"string"==typeof c&&(c=new gx.date.gxdate(c));c instanceof gx.date.gxdate?gx.lang.emptyObject(b)||(c=gx.date.formatDateTime(b.dec,b.len,gx.dateFormat,c)):gx.lang.instanceOf(c,Number)||"undefined"!=typeof gx.num.dec&&c instanceof gx.num.dec.bigDecimal?!gx.lang.emptyObject(b)&&void 0!=b.pic&&(c=gx.num.formatNumber(c,b.dec,b.pic,b.len,b.sign,!1)):"string"==typeof c&&null!=f&&"SPAN"==f.nodeName&&!gx.lang.emptyObject(b)&&void 0!=b.isPwd&&
(c=gx.text.formatString(c,b.len,b.isPwd));this.persistGridControlValue(a,c);null!=f&&"SPAN"!=f.nodeName?this.setControlValue_impl(f,c,d):gx.fn.setHidden(a,c);null!=f&&"SPAN"==f.nodeName&&(a=f);var g=!1,g=b?b.multiline:null!=f&&"TEXTAREA"==f.tagName;this.setControlValue_span_safe(a,c,d,g)},setDecimalValue:function(a,c){this.setControlValue(a,c)},toDecimalValue:function(a,c,d){return gx.num.parseFloat(a,c,d)},toDatetimeValue:function(a,c){return new gx.date.gxdate(a,c)},setCheckBoxValue:function(a,
c,d){try{var a=gx.csv.ctxControlId(a),b=gx.dom.form()[a];null==b&&(b=gx.dom.byId(a));b&&(b.checked=c.toString()==d.toString(),b.value=c)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(a,c,d){var b=a.lastIndexOf("_");if(-1!=b&&(d=d?d:gx.O.getValidStructFld(a.substring(0,b)))&&d.gxgrid)b=a.substring(b+1),4<b.length?(b=b.substring(4,b.length),(b=gx.O.getGrid(d.gxgrid.gridName+"_"+b))&&b.persistControlValue(a,c,d)):d.gxgrid.persistControlValue(a,c,d)},setControlValue_span_safe:function(a,
c,d,b){"string"==typeof a&&(a=gx.dom.el("span_"+a));if(null!=a){if("SPAN"!=a.nodeName)var f="span_",f="string"==typeof a?f+a:f+gx.dom.id(a),a=gx.dom.byId(f);this.setControlValue_fmt(a,c,d,b)}},setControlValue_fmt:function(a,c,d,b){try{if(null!=a)if(1==d){var f=a.getAttribute("gxlink");!gx.lang.emptyObject(f)&&(null!=a.firstChild&&"A"==a.firstChild.nodeName)&&(a=a.firstChild);gx.html.setInnerHtml(a,c,!0)}else{0==d&&"string"==typeof c&&(c=c.replace(/ +/g," "));for(f=a;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=
a.firstChild;0==d&&(null==a.firstChild||"#text"!=a.firstChild.nodeName)&&"A"!=a.nodeName?gx.html.setInnerText(f,c,d,b):gx.html.setInnerText(a,c,d,b)}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(a,c,d){"string"==typeof a&&(a=gx.dom.el(a));c instanceof gx.date.gxdate&&(c=c.getString());null!=a&&(null!=a&&"undefined"!=typeof a.length&&"undefined"!=typeof a[0]&&"radio"==a[0].type?this.setRadioValue(a,c):gx.dom.isEditControl(a)||"textarea"==a.type?a.value=
gx.lang.decodeValue(c):void 0!=a.value?a.value=c:this.setControlValue_span_safe(a,c,d))},setGridComboBoxValue:function(a,c,d){this.setComboBoxValue(a+"_"+c,d)},setComboBoxValue:function(a,c){var d=gx.util.browser.isIE(),a=gx.csv.ctxControlId(a),b=gx.dom.byId(a);if(b){var f="",g=gx.O.getValidStructFld(a);gx.lang.emptyObject(g)||(f=g.type);"int"==f?c=gx.text.trim(c):"date"==f&&c instanceof gx.date.gxdate?c=c.getStringWithFmt("Y4MD"):"decimal"!=f&&(c=gx.text.rtrim(c));var j=c,h=!1;try{for(var k=b.options.length,
l,m=0;m<k;m++){var n=b.options[m];if(gx.lang.isNumericType(f)?Number(n.value)==Number(c):gx.text.trim(n.value)==gx.text.trim(c)){if(j="undefined"!=typeof n.innerText?n.innerText:n.text,b.selectedIndex=m,h=!0,n.setAttribute("selected","selected"),l=n,d)break}else d||n.removeAttribute("selected")}l&&(l.value!=b.value&&gx.util.browser.isFirefox())&&gx.dom.redrawControl(b);h||(b.selectedIndex=0);0<g.grid&&this.persistGridControlValue(a,c,g)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(a,
j,0)}},loadComboBox:function(a,c){this.setComboValues(a,c)},setGridComboValues:function(a,c){if(0==this.controlGridId(a))this.setComboValues(a,c);else for(var d=1;999>d;d++){var b=gx.text.padr(d.toString(),4,"0"),b=gx.dom.el(a+"_"+b);if(null==b)break;this.setComboValues(b.name,c)}},setComboValues:function(a,c){var d=gx.dom.el(a),b=gx.util.browser;if(null!=d){var f="";-1!=d.selectedIndex&&(f=d.options[d.selectedIndex].value);for(;d.options.length>c.length;)d.remove(d.options.length-1);for(;c.length>
d.options.length;){var g=document.createElement("OPTION");d.options.add(g)}for(var j=c.length,h=0;h<j;h++)if(g=d.options[h],g.value=c[h][0],b.isIE()&&9<=b.ieVersion()?g.innerText!=c[h][1]&&(g.innerText=c[h][1]):g.text!=c[h][1]&&(g.text=c[h][1]),Number(g.value)?Number(g.value)==Number(f):gx.text.trim(g.value)==gx.text.trim(f))d.selectedIndex=h;if(0==d.options.length)d.selectedIndex=-1;else if(-1==d.selectedIndex||d.selectedIndex>d.options.length-1)d.options[0].selected=!0}},getControlRefById:function(a){return(a=
this.validStruct(a))?0==a.grid?this.getControlRef(a.fld,!1):this.getControlGridRef(a.fld,a.grid):null},getControlRef:function(a,c){c||(a=gx.csv.ctxControlId(a));if("FORM"==a)return document;var d=gx.dom.el(a);return null!=d?d:null},getControlRef_list:function(a){var c=gx.dom.byName(a);if(null!=c)return c;a=gx.dom.byId(a);return null!=a?[a]:null},screen_CtrlRef:function(a){a=this.getControlGridRef(a,this.controlGridId(a));return!gx.lang.emptyObject(a)?("hidden"==a.type&&(a=gx.dom.el("span_"+gx.dom.id(a))),
a):null},screen_CtrlId:function(a){return this.getControlGridId(a,this.controlGridId(a))},getControlGridId:function(a,c,d){a=gx.csv.ctxControlId(a);if(gx.dom.el(a))return a;try{if(0==c)return a;void 0==d&&(d=this.currentGridRow(c));return a+"_"+d}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(a,c,d){var a=gx.csv.ctxControlId(a),b=gx.dom.el(a);if(b)return b;try{if(0==c)return gx.dom.el(a);void 0==d&&(d=this.currentGridRow(c));return gx.dom.el(a+"_"+d)}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","getControlGridRef")}},setCurrentGridRow:function(a,c){if("0000"!=c)try{return gx.currentRows[a]=c}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(a){try{return gx.currentRows[a]}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(a){a=this.currentGridRowImpl(a);return void 0==a?"0001":a},gridDuplicateKey:function(a){a=gx.fn.validStruct(a);if(void 0!=a){var c=a.gxgrid;if(null!=c&&(c=c.updateControlValue(a,!0)))return c.gxHasDuplicateKey()}return!1},
firstGridControl:function(a){var c=gx.fn.controlIds(),d=c.length;for(i=0;i<d;i++){var b=gx.fn.validStruct(c[i]);if(void 0!=b&&b.grid==a)return c[i]}return-1},lastGridControl:function(a){var c=gx.fn.controlIds();for(i=c.length-1;0<=i;i--){var d=gx.fn.validStruct(c[i]);if(void 0!=d&&d.grid==a)return c[i]}return-1},getGridDateTimeValue:function(a,c){var d=this.getControlValue(a+"_"+c);return new gx.date.gxdate(d,gx.dateFormat)},getGridDecimalValue:function(a,c,d,b){return this.getDecimalValue(a+"_"+
c,d,b)},getGridIntegerValue:function(a,c,d){return this.getIntegerValue(a+"_"+c,d)},getGridControlValue:function(a,c){return this.getControlValue(a+"_"+c)},getGridCheckBoxValue:function(a,c,d,b){return this.getCheckBoxValue(a+"_"+c,d,b)},getCheckBoxValue:function(a,c,d){var a=gx.csv.ctxControlId(a),b=gx.dom.form()[a];null==b&&(ControlList=gx.dom.byName(a),null!=ControlList&&(b=ControlList[0]));return null==b?0:b.checked?c:d},getControlValue:function(a,c){return this.getControlValue_impl(gx.csv.ctxControlId(a),
c)},getControlValue_impl:function(a,c){try{var d=gx.O&&gx.O.getValidStructFld(a),b;if(d&&d.gxgrid&&!d.gxgrid.isUsercontrol||!d||!d.gxgrid){var f=gx.dom.el(a);if(null!=f&&gx.O){d&&!f.gxtype&&(f.gxtype={type:d.type,len:d.len,dec:d.dec});if("hidden"==f.type||"text"==f.type||"textarea"==f.type||"checkbox"==f.type)b=f.value;else if("radio"==f.type)b=gx.fn.getRadioValue(gx.dom.byName(a));else if("SELECT"==f.nodeName&&0<f.options.length?b=-1!=f.selectedIndex?"screen"==c?f.options[f.selectedIndex].text:f.options[f.selectedIndex].value:
"screen"==c?f.options[0].text:f.options[0].value:d&&("date"!=d.type&&"dtime"!=d.type&&"bits"!=d.type&&"audio"!=d.type&&"video"!=d.type)&&(b=f.value),"IMG"==f.nodeName||"INPUT"==f.nodeName&&"image"==f.type)b=f.getAttribute("src");if(void 0!==b)return d&&"boolean"==d.type?gx.lang.gxBoolean(b):b}f=gx.dom.el("span_"+a);if(null!=f){var g=gx.fn.getHidden(a);return void 0!=g?g:gx.fn.getControlValue_span(f)}f=gx.dom.form()[a];if(null!=f)return this.getControlValueInt(f);f=gx.dom.byId("_"+a);if(null!=f)return f.value;
(ControlList=gx.dom.byName(a))&&0==ControlList.length&&(ControlList=gx.dom.byName("_"+a));if(null!=ControlList){for(var j=ControlList.length,d=0;d<j;d++)if(f=ControlList[d],null!=f)return this.getControlValueInt(f);if(f=ControlList[0])return f.value}}if(null==f)return"nohidden"===c?null:gx.fn.getHidden(a)}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","getControlValue_impl")}return""},setRadioValue:function(a,c){var a=gx.csv.ctxControlId(a),d=gx.dom.byName(a);if(null!=d)for(var b=d.length,f=0;f<b;f++)if(gx.text.ltrim(d[f].value)==
gx.text.ltrim(c)){d[f].checked=!0;break}},getRadioValue:function(a){for(var c=a.length,d=0;d<c;d++)if(a[d].checked)return a[d].value;return""},getControlValueInt:function(a){if(void 0!=a.length&&"SELECT"!=a.tagName&&"undefined"!=typeof a[0]&&"radio"==a[0].type)return this.getRadioValue(a);if("checkbox"==a.type)return a.checked;if("SPAN"==a.tagName){var c=gx.fn.getHidden(gx.dom.id(a));return void 0!=c?c:gx.fn.getControlValue_span(a)}if("INPUT"==a.tagName&&"text"==a.type&&(c=gx.dom.id(a),gx.O)){var d=
gx.O.getValidStructFld(c);if(d&&"undefined"!=typeof d.pic){if("int"==d.type)return this.getIntegerValue(c,-1!=d.pic.indexOf(",")?gx.thousandSeparator:"");if("decimal"==d.type)return this.getDecimalValue(c,-1!=d.pic.indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return a.value},getControlValue_span:function(a){for(;a&&!a.nodeValue;)a=a.childNodes[0];return a&&a.nodeValue?a.nodeValue:""},getDateValue:function(a){return this.getDateTimeValue(a)},getDateTimeValue:function(a){try{var c=this.getControlValue(a,
"nohidden");if(!gx.lang.emptyObject(c))return new gx.date.gxdate(c,gx.dateFormat);c=gx.fn.getHidden(gx.csv.ctxControlId(a));return new gx.date.gxdate(c,"Y4MD")}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(a,c){var d=0,d=gx.O?gx.O.getValidStructFld(a):null,b=this.getControlValue(a);d&&(b=gx.num.extractValue(d.pic,b));b="undefined"!=typeof b?b.toString():"";d=b.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(b,10,c):(new gx.num.dec.bigDecimal(gx.text.replaceAll(b,
c,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(d)?0:d},getDecimalValue:function(a,c,d){var b=gx.O?gx.O.getValidStructFld(a):null,a=this.getControlValue(a);b&&(a=gx.num.extractValue(b.pic,a));c=gx.num.parseFloat(a||"",c,d);return isNaN(c)?0:c},getBlobValue:function(a){var c=gx.dom.el("Object_"+a);if(null!=c){if(c.data)return c.data}else if(c=gx.dom.el("Link_"+a),null!=c)return c.href;return""},getVarControlMap:function(a){for(var c in gx.O.VarControlMap)if("function"!=typeof c){var d=
gx.O.VarControlMap[c];if(d.id==a||gx.O.CmpContext+d.id==a)return c}return null},getVarControlMapForVar:function(a){for(var c in gx.O.VarControlMap)if("string"==typeof c&&c==a)return gx.O.VarControlMap[c];return null},v2cMap:function(a){var c=this.getVarControlMapForVar(a);if(null!=c){var d="";"number"==typeof c.grid&&0!=c.grid&&(d="_"+gx.fn.currentGridRowImpl(c.grid));gx.fn.setHidden(gx.O.CmpContext+c.id+d,gx.O[a])}},c2vMap:function(a){var c=this.getVarControlMapForVar(a);if(null!=c){var d="";"number"==
typeof c.grid&&0!=c.grid&&(d="_"+gx.fn.currentGridRowImpl(c.grid));gx.O[a]=gx.fn.getHidden(gx.O.CmpContext+c.id+d)}},depsToVars:function(a){for(var c=0;c<a.length;c++){var d=a[c],b=gx.fn.vStructForVar(d);!gx.lang.emptyObject(b)&&"function"==typeof b.c2v?b.c2v():this.c2vMap(d)}},verticalFormula:function(a,c,d,b,f,g){var j=gx.fn.vStructForVar(a);gx.lang.emptyObject(j)?this.v2cMap(a):j.v2c();for(var h=gx.fn.currentGridRowImpl(d),k=gx.fn.getGridObj(d),l=0,m=!1,n=k.grid.rows.length,p=0;p<n;p++){var q=
k.grid.rows[p],o=q.gxDeleted(),r=q.gxExists(),s=q.gxIsMod();if(!o&&(r||s))gx.fn.setCurrentGridRow(d,q.gxId),g&&0<g.length?this.depsToVars(g):!gx.lang.emptyObject(j)&&"function"==typeof j.c2v?j.c2v():this.c2vMap(a),b.call(gx.O)&&(m=!0,l=f(p,l))}gx.fn.setCurrentGridRow(d,h);g&&0<g.length?this.depsToVars(g):!gx.lang.emptyObject(j)&&"function"==typeof j.c2v?j.c2v():this.c2vMap(a);m||(l=c);return l},sumFrm:function(a,c,d,b,f,g,j){return gx.fn.verticalFormula(a,c,f,g,function(c,f){var g=gx.num.parseFloat(gx.O[a],
d,b);return 0==c?g:f+g},j)},maxFrm:function(a,c,d,b,f,g,j){return gx.fn.verticalFormula(a,c,f,g,function(c,f){var g=gx.num.parseFloat(gx.O[a],d,b);return 0==c?g:g>f?g:f},j)},minFrm:function(a,c,d,b,f,g,j){return gx.fn.verticalFormula(a,c,f,g,function(c,f){var g=gx.num.parseFloat(gx.O[a],d,b);return 0==c?g:g<f?g:f},j)},averageFrm:function(a,c,d,b,f,g,j){return gx.fn.verticalFormula(a,c,f,g,function(c,f){var g=gx.num.parseFloat(gx.O[a],d,b);return 0==c?g:(f*c+g)/(c+1)},j)},countFrm:function(a,c,d,b,
f){return gx.fn.verticalFormula(a,c,d,b,function(a,c){return 0==a?1:c+1},f)},serialRule:function(a,c,d,b,f){f=f||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(d),d))return f[a];gx.lang.emptyObject(f[c])&&(f[c]=f[a]+b,(d=gx.fn.vStructForVar(c))&&d.v2c(),(a=f.VarControlMap[a])&&gx.fn.setControlValue(a.id,f[c]));return f[c]},setReturnParms:function(a,c,d){try{if(a&&c&&d){var b=c.length;if(b==d.length){gx.setGxO(a.CmpContext,a.IsMasterPage);for(var f=null,g=0;g<b;g++){var j=c[g];if(j){var h=d[g],
k=gx.fn.vStructForVar(j);gx.lang.emptyObject(k)&&(k=gx.fn.vStructForHC(j));if(k){var l=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(k.fld));gx.fn.isAccepted(l)&&(f=l,gx.evt.execOnchange(l));k.v2v&&(k.v2v(h),k.v2c())}else a.setVariable(j,h)}}f&&gx.fn.setFocus(f)}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","setReturnParms")}},isOutputParm:function(a){return a&&a.IOType&&("out"==a.IOType||"inout"==a.IOType)?!0:!1},checkPopupFocus:function(a){if(gx.popup.ispopup()){var c=gx.popup.getPopup();if(c&&c.frameDocument&&
(a.ownerDocument?a.ownerDocument:a.document).URL!=c.frameWindow.location.href)return c.setFocusFirst(),!1}return!0},persistControlProperty:function(a,c,d){a=gx.fn.screen_CtrlId(gx.csv.ctxControlId(a));gx.usrPtys[a]||(gx.usrPtys[a]={});gx.usrPtys[a][c.toLowerCase()]=d},setCtrlProperty:function(a,c,d){if(gx.O){var b=null,b="FORM"==a?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a));null!=b&&(this.persistControlProperty(a,c,d),this.setCtrlPropertyImpl(b,c,d))}else gx.fx.obs.addObserver("gx.onready",
this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(a,c,d){var b=gx.fn.screen_CtrlRef(a);null!=b&&(this.setCtrlPropertyImpl(b,c,d),b=b.parentElement,"TD"==b.tagName&&(this.persistControlProperty(a,c,d),this.setCtrlPropertyImpl(b,c,d)))},setCtrlPropertyImpl:function(a,c,d){if(null!=a){var b=gx.O.getValidStructFld(a.id);if(!("Enabled"===c||"Visible"===c)||!b||!(0<b.grid&&gx.fn.rowIsRemoved(b.grid,gx.fn.controlRowId(a)))){switch(c){case "Caption":this.setCtrlCaption(a,
d);break;case "Tooltiptext":a.title=d;break;case "Invitemessage":a.placeholder=d;break;case "Visible":if("INPUT"==a.nodeName&&"button"==a.type)this.setButtonVisibility(a,!this.propertyValueFalse(d));else{"INPUT"==a.nodeName&&("checkbox"==a.type&&"SPAN"==a.parentNode.nodeName?a=a.parentNode:"radio"==a.type&&a.parentNode&&(a="SPAN"==a.parentNode.tagName?a.parentNode:gx.dom.findParentByTagName(a,"table")));if(b=this.propertyValueFalse(d)){var f=gx.dom.el("span_"+a.id);this.setVisible(a,!b);f&&this.setVisible(f,
!b)}else b=a.gxusrdisabled?a.gxusrdisabled:!1,(f=this.getRONode(a.id,b))&&this.setVisible(f,b),this.setVisible(a,!b);gx.fn.showHideDatepicker(a,!b)}gx.fn.checkAttachedProperty(a.id,c,d);break;case "Enabled":b=this.propertyValueFalse(d);if("hidden"===a.type||"SPAN"===a.tagName&&b)return;if("INPUT"===a.nodeName&&"radio"===a.type){d=gx.dom.byName(gx.dom.id(a));c=d.length;for(a=0;a<c;a++)this.setEnabledProperty(d[a],!b);return}gx.dom.isEditControl(a)||"textarea"===a.type||"file"===a.type||"SELECT"===
a.tagName?(f=this.getRONode(a.id,b),gx.fn.isVisible(a,0)||f&&gx.fn.isVisible(f,0)?(f&&this.setVisible(f,b),this.setEnabledProperty(a,!b),this.setVisible(a,!b),gx.fn.showHideDatepicker(a,!b)):this.setEnabledProperty(a,!b),gx.fn.checkAttachedProperty(a.id,c,d)):this.setEnabledProperty(a,!b);break;case "Class":this.setCtrlClass(a,d);break;case "Link":this.setCtrlLink(a,d);break;case "Linktarget":this.setCtrlLinkTarget(a,d);break;case "Backcolor":if((b=gx.color.html(d))&&void 0==a.gxGridName)a.style.backgroundColor=
b.Html;break;case "Forecolor":if(b=gx.color.html(d))a.style.color=b.Html;break;case "Fontbold":b=this.propertyValueFalse(d);a.style.fontWeight=b?"normal":"bold";break;case "Fontitalic":b=this.propertyValueFalse(d);a.style.fontStyle=b?"normal":"italic";break;case "Fontunderline":b=this.propertyValueFalse(d);a.style.textDecoration=b?"none":"underline";break;case "Fontstrikethru":b=this.propertyValueFalse(d);a.style.textDecoration=b?"none":"line-through";break;case "Fontname":a.style.fontFamily=d;break;
case "Fontsize":a.style.fontSize=d+"pt";break;case "Filename":this.setBlobFilename(a,d);break;case "Filetype":this.setBlobFiletype(a,d);break;case "URL":this.setBlobUrl(a,d);break;case "IsBlob":this.setMultimediaType(a,d);break;case "Bitmap":a.src=d;break;case "Multimedia":this.setMultimediaValue(a,d);break;case "Jsonclick":a.jsevent=d;break;case "Source":b=d;f=b.indexOf("?");0<f&&(b=b.substring(0,f));a.src=-1==b.indexOf(":")&&-1==b.indexOf("/")?gx.ajax.objectUrl(d):gx.util.resourceUrl(d,!0);gx.evt.attach(a,
"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==a.tagName||"SPAN"==a.tagName)if(d=gx.json.evalJSON(d),"SELECT"==a.tagName)!1!=d.isset&&(gx.fn.loadComboBox(a.id,d.v),gx.fn.setComboBoxValue(a.id,d.s));else{var f=a.id.substring(5),g="",j=d.s,b=gx.O.getValidStructFld(f);gx.lang.emptyObject(b)||(g=b.type);j="int"==g?gx.text.trim(j):gx.text.rtrim(j);d.s=j;gx.fn.setControlValue_span_safe(f,gx.fn.selectedDescription(d))}break;case "Width":a.width&&(a.width=d);a.style.width=gx.dom.addUnits(d);
break;case "Height":a.height&&(a.height=d),a.style.height=gx.dom.addUnits(d)}if(a=gx.dom.id(a))c=a+"_"+c,gx.fn.isHidden(c)&&gx.fn.setHidden(c,d)}}},setEnabledProperty:function(a,c){var b=gx.dom.id(a);if(!gx.lang.gxBoolean(c)||!gx.fn.isAccepted(a,!1)){if(!0==gx.csv.validating&&c&&null==gx.csv.validActivatedControl&&a!=gx.csv.lastControl){var e=gx.O.getValidStructId(b);e>gx.O.fromValid&&e<=gx.O.toValid&&(gx.csv.validActivatedControl=a)}c?delete gx.disabledControls[b]:gx.util.addOnce(gx.disabledControls,
a,b);a.gxusrdisabled=!c;a.disabled=a.gxdisabled?!0==a.gxdisabled?!0:a.gxusrdisabled:a.gxusrdisabled;this.setEnabled(a,c)}},setEnabled:function(a,c){if(this.disabledAsSpan(a)){var b;try{if("checkbox"==a.type&&(b=a.parentNode),"radio"==a.type)b=a.parentNode.parentNode.parentNode.parentNode}catch(e){}if(gx.lang.booleanValue(c)){if(b&&0==b.className.indexOf("Readonly")&&(b.className=b.className.substring(8)),this.isVisible(a))this.setVisible(a,1),(b=this.getRONode(a.id,!0))&&this.setVisible(b,0)}else if(b&&
0>b.className.indexOf("Readonly")&&(b.className="Readonly"+b.className),this.isVisible(a)&&"password"!=a.type&&"image"!=a.type&&"checkbox"!=a.type)if(b=this.getRONode(a.id,!0)){this.setVisible(a,0);this.setVisible(b,1);var f=gx.O.getValidStructFld(a.id),g=0;!gx.lang.emptyObject(f)&&f.format&&(g=f.format);this.setControlValue_span_safe(b,gx.fn.getControlValue(gx.dom.id(a),"screen")||a.value,g,"textarea"==a.type)}}},disabledAsSpan:function(a){return"IMG"!=a.tagName},setVisible:function(a,c){a.style.display=
0==c?"none":this.displayByType(a.nodeName);var b=gx.O.getValidStructFld(a.id),e=a.parentNode;c&&(b&&b.gxgrid&&!b.gxgrid.grid.gxIsFreestyle&&null!=e.getAttribute("colindex"))&&b.gxgrid.applyPropEntireColumn(e.getAttribute("colindex"),"Visible",c)},getRONode:function(a,c){if(gx.lang.emptyObject(a))return null;var b=gx.dom.byId(a),e="span_"+a,f=gx.dom.byId(e);if(null!=f)return f;if(!c||null==b)return null;f=document.createElement("SPAN");f.setAttribute("id",e);this.setVisible(f,!1);f.className="Readonly"+
b.className;f.appendChild(document.createTextNode(b.value));b.parentNode.insertBefore(f,b);return f},showHideDatepicker:function(a,c){var b=gx.dom.el(gx.dom.id(a)+"_dp_trigger");b&&(b.style.display=c?"inline":"none")},getGridCtrlProperty:function(a,c,b){try{if(0!=a){var e=this.getGridObj(a);if(e){var f=e.grid.getColumnByHtmlName(c);if(f)return f[b.toLowerCase()]}}else return this.getCtrlProperty(c,b)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(a,
c){var b=this.screen_CtrlRef(a);if(null!=b)return this.getCtrlProperty_impl(b,c)},getCtrlProperty_impl:function(a,c){if(null==a)return"";switch(c){case "Tooltiptext":return a.title;case "Invitemessage":return a.placeholder;case "Visible":return"none"!=a.style.display;case "Enabled":return 0!=gx.lang.emptyObject(a.disabled);case "Class":return a.className;case "Backcolor":return gx.color.css(a.style.backgroundColor);case "Forecolor":return gx.color.css(a.style.color);case "Width":return gx.dom.dimensions(a).w;
case "Height":return gx.dom.dimensions(a).h;case "Caption":return this.getCtrlCaption(a);case "Fontbold":return"bold"==a.style.fontWeight;case "Fontitalic":return"italic"==a.style.fontStyle;case "Fontunderline":return"underline"==a.style.textDecoration;case "Fontstrikethru":return"line-through"==a.style.textDecoration;case "Fontname":return a.style.fontFamily;case "Fontsize":var b=parseInt(a.style.fontSize);return isNaN(b)?12:b}},displayByType:function(a){switch(a){case "TABLE":return!gx.util.browser.isIE()||
8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(a,c){try{switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":var b=a.getAttribute("gxformat");null==b&&(b=0);var e=gx.O.getValidStructFld(a.id),f=!1;e&&(f=e.ctrltype?e.multiline:!0);gx.fn.setControlValue_fmt(a,c,b,f);return;case "INPUT":"checkbox"!=a.type&&(a.value=c);return}"#document"==a.nodeName&&(a.title=c)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(a){switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":var c=
a.getAttribute("gxformat");if(null!=c&&"1"==c)return a.innerHTML;for(;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;return"undefined"!=typeof a.innerText?a.innerText:a.textContent||a.text;case "INPUT":if("checkbox"!=a.type)return a.value;break;default:return""}},propertyValueFalse:function(a){return"string"==typeof a&&(a=a.toLowerCase(),"false"==a||0==gx.num.parseFloat(a))?!0:0==a},setButtonVisibility:function(a,c){var b=c?"":"none",e=a.parentNode;!gx.lang.emptyObject(e)&&"SPAN"==
e.nodeName&&(e.style.display=b,e=e.parentNode,!gx.lang.emptyObject(e)&&"SPAN"==e.nodeName&&(e.style.display=b,e=e.parentNode,!gx.lang.emptyObject(e)&&"SPAN"==e.nodeName&&(e.style.display=b,e=e.parentNode,!gx.lang.emptyObject(e)&&"SPAN"==e.nodeName&&(e.style.display=b))));a.style.display=b},setBlobValue:function(a,c){this.setBlobUrl(gx.dom.el(a)||gx.dom.el("Object_"+a),c)},setBlobFilename:function(a,c){if(null!=a){var b=gx.O.getValidStructFld(a.id);b&&gx.fn.setHidden(b.fld+"_Filename",gx.text.trim(c))}},
setBlobFiletype:function(a,c){if(null!=a){var b=gx.O.getValidStructFld(a.id);b&&gx.fn.setHidden(b.fld+"_Filetype",gx.text.trim(c));b=a;"INPUT"==b.nodeName&&"file"==b.type&&(b=gx.dom.el("Object_"+a.id));null!=b&&(c=gx.util.getContentType(c),this.setObjectCtrlType(b,c),gx.fn.setVisible(b,!0))}},resolveResourceUrl:function(a,c){if(""==a)return c?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.ajax.isabsoluteurl(a))if(gx.ajax.isRelativeToHost(a)){if(0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+
a,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1);return a},setBlobUrl:function(a,c){var b=gx.html.multimediaUpload.getContainer(a);if(b){var e=this.resolveResourceUrl(c,!1);gx.html.multimediaUpload.setPreviewImage(b,e);gx.html.multimediaUpload.setPreviewLink(b,e)}else if(!c.match(/^[a-z]:[\S]*/i)&&null!=a){b=a;e="INPUT"==b.nodeName&&"file"==b.type;if(""===c)if(e&&gx.util.browser.isIE()){var f=b.parentNode,g=document.createElement("div");g.innerHTML=b.outerHTML;f.removeChild(b);
b=f.appendChild(g.firstChild)}else b.value="";e&&(b=gx.dom.el("Object_"+a.id));null!=b&&(e=gx.util.getContentTypeFromExt(c),b=this.setObjectCtrlType(b,e));null!=b?"IMG"==b.tagName?(c=this.resolveResourceUrl(c,!0),b.src=c):(b.data=c||"about:blank",gx.fn.setVisible(b,!0),this.resizeObject(b),gx.dom.redrawControl(b)):(b=gx.dom.el("Link_"+a.id),null!=b&&(b.style.display=""!=c?"block":"none",b.href=c))}},setGridMultimediaValue:function(a,c,b,e){if(void 0!==c)return this.setMultimediaValue(a+"_"+c,b,e)},
setMultimediaValue:function(a,c,b){var e=gx.dom.el(a);if(e){var f=gx.html.multimediaUpload.getContainer(e),g=this.resolveResourceUrl(c||b||"",!1);if(f){gx.html.multimediaUpload.setPreviewImage(f,g);var j=""==c&&""==b||""!=c;if(!j){var h=gx.dom.el(e.id+"_GXI");h&&(h.value=b)}if((a=gx.dom.el(a))&&""==c)a.value="";this.setMultimediaType(e,j);gx.html.multimediaUpload.setPreviewLink(f,g)}else{if("IMG"==e.tagName||"INPUT"==e.tagName&&"image"==e.type)e.src=g;if((c=e.parentNode)&&"A"==c.tagName&&gx.dom.isMultimediaElement(e))g?
c.href=g:c.removeAttribute("href")}}},setMultimediaType:function(a,c){if(a){var b=gx.html.multimediaUpload.getContainer(a);gx.html.multimediaUpload.setType(b,gx.lang.gxBoolean(c))}},setObjectCtrlType:function(a,c){var b=a;if("IMG"==a.nodeName&&(!c||0==c.indexOf("image/")))return b;if(a.type!=c||"OBJECT"==a.nodeName&&0==c.indexOf("image/"))if(b=0==c.indexOf("image/")?gx.html.nodesFromText('<img id="'+a.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+a.id+'" type="'+c+'">')[0]){try{for(var e in a.attributes)if("id"!=
e&&("type"!=e&&"implementation"!=e)&&a[e])try{b[e]=a[e]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setObjectCtrlType")}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setObjectCtrlType")}if(e=a.parentNode){var j=null,h=e.childNodes.length;for(i=0;i<h;i++)if(e.childNodes[i]==a){i<h-1&&(j=e.childNodes[i+1]);break}gx.dom.removeControlSafe(a);null!=j?e.insertBefore(b,j):e.appendChild(b)}}return b},resizeObject:function(a){var c=gx.lang.emptyObject;!c(a.data)&&"about:blank"!=a.data&&(c(a.width)&&c(a.height)&&c(a.style.width)&&
c(a.style.height))&&(a.style.width="200px",a.style.height="200px")},recoverLostCtrlOnGridRefresh:function(a){if(null==a.form){var c=gx.dom.id(a);void 0!=gx.O.getValidStructId(c)&&"checkbox"==a.type&&(c=a.checked,a=gx.dom.el(a.id)||gx.dom.el(a.name),a.checked=c)}return a},checkboxClick:function(a,c,b,e){gx.fx.obs.notify("gx.validation");if(gx.evt.fixWebKitOnFocus())c.onfocus();c=this.recoverLostCtrlOnGridRefresh(c);c.value=c.checked?b:e;(a=gx.fn.validStruct(a))&&"function"==typeof a.c2v&&a.c2v()},
setCtrlClass:function(a,c){null!=a&&(a.className=c)},setCtrlLink:function(a,c){if(null!=a)if(""==c)this.unsetCtrlLink(a);else{var b=a.firstChild;if(b&&"A"==b.tagName)b.href=c;else{var e=a.parentNode;if("A"==e.tagName)e.href=c;else{var f=document.createElement("A");f.href=c;b&&"#text"==b.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(f,!0),f.innerHTML=b.nodeValue,a.replaceChild(f,b)):(e.replaceChild(f,a),f.appendChild(a))}}}},unsetCtrlLink:function(a){if(null!=a&&(a=a.parentNode,"A"==a.tagName)){var c=
a.firstChild;ParentTag2=a.parentNode;if(null!=ParentTag2){for(;null!=c;)ParentTag2.insertBefore(c,a),c=a.firstChild;gx.dom.removeControlSafe(a)}}},setCtrlLinkTarget:function(a,c){if(null!=a&&("SPAN"==a.nodeName&&a.firstChild&&(a=a.firstChild),"A"==a.nodeName))a.setAttribute?a.setAttribute("target",c):a.target=c},isVisible:function(a,c){try{for(var b;a&&("undefined"==typeof c||0<=c);){if((b=gx.dom.getComputedStyle(a))&&("hidden"==b.visibility||"none"==b.display))return!1;a=a.parentNode;"undefined"!=
typeof c&&c--}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(a,c){var b=this.gridObjByLvl(a),e=null;if(b)return b=gx.O.getGridById(b.gridId,c)||b,(e=b.grid.getRowByGxId(c))?e.gxIsMod():!0;b=!1;try{b=1==this.getControlValue("nIsMod_"+a+"_"+c)}catch(f){b=!1}return b},gridObjByLvl:function(a){for(var c=gx.O.Grids,b=c.length,e=0;e<b;e++)if(c[e].gridLvl==a)return c[e];return null},forceEnableControls:function(a){for(var c in gx.disabledControls){c=this.getControlRef_list(c);
for(var b=c.length,e=0;e<b;e++)try{"button"!=c[e].type&&"submit"!=c[e].type&&(c[e].disabled=a)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","forceEnableControls")}}},alert:function(a,c){try{var b=gx.util.balloon.getNew(a.id);b.setError(c);b.show();gx.csv.invalidForcedCtrl=a}catch(e){alert(c)}},getGridRowMode:function(a,c){var b=this.currentGridRow(c),e=this.rowIsRemoved(c,b),b=this.getControlValue("nRcdExists_"+a+"_"+b);return"1"==e?"DLT":"0"==b?"INS":"UPD"},rowIsRemoved:function(a,c){var b=this.getGridObj(a);
return null!=b&&(b=b.grid.getRowByGxId(c))?b.gxDeleted():!1},getGridObj:function(a){return gx.O.getGridById(a)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","changeCmpContext")}},initOld:function(a){void 0==gx.oldValues[a.id]&&(gx.oldValues[a.id]=a.value)},setFocusOnError:function(a){var b=gx.fn.controlGridId(a),a=gx.csv.ctxControlId(a),d=null,d=0==b?gx.dom.el(a):gx.fn.getControlGridRef(a,b);null!=d&&(gx.O.AnyError=1,gx.csv.anyError=!0,d.setAttribute("gxvalid",
"0"),gx.csv.stopOnError&&gx.fn.setFocus(d))},usrSetFocus:function(a){a=gx.csv.ctxControlId(a);!0==gx.csv.validating?gx.usrFocusControl=a:(a=gx.dom.el(a),null!=a&&gx.fn.setFocus(a))},setFocus:function(a,b){if(a){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(a.id)&&
(a=gx.dom.byId(a.id),!a))return;gx.fn.setFocusSafe(a,function(a){gx.util.browser.isIE()&&gx.fn.setSelection(a);a.forcedFocus=!0;b&&b()})}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(a,b){if(a){var d=function(a,b){try{e&&b&&gx.fx.obs.addObserver("gx.onaftervalidate",this,b.closure(this,[a]),{single:!0}),a.focus()}catch(c){}!e&&b&&b(a)},e=gx.csv.setFocusOnload;e||!gx.util.browser.isIE()?gx.lang.doCallTimeout(d,this,[a,b],e?500:0):d(a,b)}},setFocusInit:function(){try{gx.csv.lastActiveControl=
window.document.activeElement}catch(a){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},setFocusOnload:function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var a=null,a=gx.pO.getUserFocus();if(!gx.lang.emptyObject(a)){if("notset"==a)return;var b=gx.pO.getUserControl(gx.uc.userControlContainerId(a));if(gx.lang.emptyObject(b))gx.csv.userFocus=gx.fn.getControlRef(a);else{b.setFocusBase();return}}if("notset"!=gx.csv.userFocus){a=gx.csv.userFocus;gx.fn.isAccepted(a)||
(a=gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?gx.csv.lastActiveControl:gx.fn.firstAcceptedControl(gx.popup.ispopup()));try{a?(b=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=a,gx.csv.setFocusOnload=!0,gx.fn.isAccepted(a)?gx.fn.setFocus(a,b):(gx.popup.setFocus(),b())):gx.popup.setFocus()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setFocusOnload")}}}},setSelection:function(a){if(a&&gx.fn.isVisible(a))try{if(gx.csv.lastControl=a,(gx.dom.isEditControl(a)||"file"==a.type)&&
a.select)a.select();else if("TEXTAREA"==a.nodeName||"SELECT"==a.nodeName)a.focus(),a.select&&a.select()}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setSelection")}},isAccepted:function(a,b){var b=void 0==b||b,d=!0;if(null!=a&&void 0!=a.type&&"hidden"!=a.type&&gx.fn.isVisible(a)&&!1==a.disabled&&(null==a.readOnly||!1==a.readOnly)){if(b){var e=gx.dom.id(a),d=gx.O.getValidStructFld(e),e=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));
d=!gx.lang.emptyObject(d)&&d.nac?!1==d.nac.call(gx.O):!0;gx.setVar("Gx_mode",e)}}else d=!1;return d},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(a){var b=gx.csv.lastControl,d=gx.fn.getControlIndex(b),e=d,f=this.controlGridId(b.id||b.name),g=!1;a&&gx.dom.hasClass(b,"gx_newrow")&&(e=b.gxControlIdx,g=!0);if(-1==e)return!0;b=null;for(b=gx.fn.searchFocus(++e,!0);;b=gx.fn.searchFocus(++e,!0))if(null==b||e==gx.dom.form().elements.length)e=
-1;else{if(a)break;if(gx.evt.isEnterEvtCtrl(b))break;if("INPUT"==b.nodeName&&"submit"!=b.type&&"button"!=b.type&&"image"!=b.type)break}if(!g&&(f&&gx.O.isTransaction())&&this.controlGridId(b.id||b.name)!=f)a=gx.O.getGridById(f),b=gx.dom.el(a.containerName+"_NewRow").parentNode,b.gxControlIdx=d;gx.fn.setFocus(b)},getControlIndex:function(a){var b=gx.dom.form().elements.length-1;return el=this.controlIndex(a,0,b)},controlIndex:function(a,b,d){if(document.all){var e=gx.dom.form(),f=e.elements[b].sourceIndex,
g=e.elements[d].sourceIndex,j=parseInt(b+(d-b)/2)+1,e=e.elements[j].sourceIndex;if(b==d&&a.sourceIndex==f&&a.sourceIndex==g||a.sourceIndex==f)return b;if(a.sourceIndex==g)return d;if(a.sourceIndex==e)return j;if(a.sourceIndex>e&&a.sourceIndex<g)return this.controlIndex(a,j+1,d-1);if(a.sourceIndex>f&&a.sourceIndex<e)return this.controlIndex(a,b+1,j-1)}else return a.gxIndex},searchFocus:function(a,b){return b?this.searchFocusFwd(a):this.searchFocusBack(a)},searchFocusBack:function(a){for(var b=gx.dom.form();0<=
a;a--)if(gx.fn.isAccepted(b.elements[a]))return b.elements[a];return null},searchFocusFwd:function(a){for(var b=gx.dom.form(),d=b.elements.length;a<d;a++)if(gx.fn.isAccepted(b.elements[a]))return b.elements[a];return null},rowGridId:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("gxgridid");return null!=b?b:gx.fn.rowGridId(a.parentNode)},controlRowId:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("gxrow");return null!=b?b:gx.fn.controlRowId(a.parentNode)},
controlGridId:function(a){try{var b=gx.fn.controlIds(),d=b.length;for(i=0;i<d;i++){var e=gx.fn.validStruct(b[i]);if(gx.O.isSameField(e,a))return e.grid}}catch(f){}return 0},oldGridId:function(a){try{var b=gx.fn.controlIds(),d=b.length;for(i=0;i<d;i++){var e=gx.fn.validStruct(b[i]);if(void 0!=e&&e.gxold==a)return e.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(a,b){var d="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,a)&&(d=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),
gx.csv.lastGrid)):this.isLvlParmOld(0,a)&&(d=gx.O.Gx_mode);return"no_mode"==d?!0:"UPD"==d||null==gx.csv.validatingGrid?(window[a]=b,!0):!1},isLvlParmOld:function(a,b){try{var d=gx.O.getOldLvl(b);if(0<=d){if(0<a){var e=gx.fn.gridLvl(a);return d<e}return!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(a){try{var b=gx.fn.controlIds(),d=b.length;for(i=0;i<d;i++){var e=gx.fn.validStruct(b[i]);if(void 0!=e&&void 0!=e.lvl&&e.grid==a)return e.lvl}}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(a){try{var b=gx.fn.controlIds(),d=b.length;for(i=0;i<d;i++){var e=gx.fn.validStruct(b[i]);if(void 0!=e&&e.lvl==a)return e.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(a){try{var b=gx.fn.controlIds();for(i=0;i<b.length;i++){var d=gx.fn.validStruct(b[i]);if(void 0!=d&&d.fld==a)return b[i]}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(a,b){try{var d=null;b&&(d=[]);var e=gx.fn.controlIds(),
f=e.length;for(i=0;i<f;i++){var g=gx.fn.validStruct(e[i]);if(void 0!=g&&a(g))if(g.id=e[i],b)d.push(g);else return g}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getVStruct")}return d},vStructForOld:function(a){return gx.fn.getVStruct(function(b){return b.gxold==a})},vStructForVar:function(a){return gx.fn.getVStruct(function(b){return b.gxvar==a})},vStructForVarWId:function(a,b){var d=gx.fn.getVStruct(function(b){return b.gxvar==a},!0),e=d[0],f=d.length;if(1<f)for(var g=0;g<f&&!(e=d[g],e.id==b);g++);return e},
vStructForHC:function(a){return gx.fn.getVStruct(function(b){return b.hc==a})},firstCtrlAfterGrid:function(a,b){for(var d=gx.fn.lastCtrlId(),e=a;e<d;e++){var f=gx.fn.validStruct(e);if(void 0!=f&&f.grid!=b)return e}return d},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(a){try{return gx.oldKeyValues[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(a,b){try{return gx.oldKeyValues[a+gx.fn.currentGridRow(b)]}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","oldGridKey")}return""},
setKey:function(a,b){null!=a&&(gx.oldKeyValues[a]=b)},unsetKey:function(a){null!=a&&(gx.oldKeyValues[a]=void 0)},setGridKey:function(a,b,d){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=d)},unsetGridKey:function(a,b){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=void 0)},removeGridRow:function(a,b){var d=gx.fn.rowIsRemoved(b,a);try{var e=gx.fn.controlIds(),f=e.length;for(i=0;i<f;i++){var g=gx.fn.validStruct(e[i]);if(void 0!=g&&g.grid==b){var j=gx.dom.el(g.fld+"_"+a);null!=j&&(j.gxdisabled=
d,j.disabled=d)}}}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(b,a)},controlIds:function(){return gx.O.getControlIds()},validStruct:function(a){return gx.O.getValidStruct(a)},lastCtrlId:function(a){if(!0===a)for(var a=this.controlIds(),b=a.length-1;0<=b;b--){if(this.validStruct(a[b]).v2v)return a[b]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(a,b){return 0==b&&a==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(a){try{for(var b=
gx.fn.vStructsArray(),d=gx.fn.controlIds(),e=d.length,f=0;f<e;f++){var g=b[d[f]];if(null!=g){var j=gx.fn.getControlGridRef(g.fld,g.grid);if(j&&gx.fn.isAccepted(j)&&(a||"submit"!=j.type&&"image"!=j.type&&"button"!=j.type&&"fieldset"!=j.type))return j}}}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var a=gx.dom.el(gx.csv.cmpCtx+"BTN_DELETE");null!=a&&gx.fn.setCtrlPropertyImpl(a,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(){!0!=
gx.csv.validating&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.O.fromValid=gx.csv.lastId,gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(a){var b=function(a){try{for(var b=a.length,c=0;c<b;c++)gx.fn.setCtrlPropertyImpl(a[c],"Enabled",0)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","disableCtrl")}},a=gx.fn.getControlRef_list(a);if(null!=a)if("complete"==
document.readyState)b(a);else gx.evt.on_ready(this,b.closure(this,[a]))},refreshGridRowBC:function(a,b){try{var d=gx.O.getGridBC(a);if(d){var e=gx.pO.getGridForColl(d.gxvar);if(gx.csv.validatingGrid&&e&&gx.csv.validatingGrid.gridId==e.gridId)return gx.fn.setGridHidden(a,b),b=b[parseInt(gx.fn.currentGridRow(e.gridId))-1],gx.O.bcToScreen(d,b),!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(a,b){return this.refreshFormBC(a,b)||this.refreshGridRowBC(a,b)},refreshFormBC:function(a,
b){try{var d=gx.O.getFormBC(a);if("undefined"!=typeof d)return gx.setVar(a,b),gx.fn.setGridHidden(a,b),gx.O.bcToScreen(d,b),!0}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[a]},getHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return gx.http.viewState[a]},setHidden:function(a,b){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[a]=b},setGridHidden:function(a,
b){var d=a,e=gx.fn.oldGridId(a);0<e&&(d=a+"_"+gx.fn.currentGridRowImpl(e));gx.fn.setHidden(d,b)},deleteHidden:function(a){gx.http.viewState&&delete gx.http.viewState[a]},setPostHiddens:function(a){for(var b in a)gx.fn.setGridHidden(b,a[b])},filterHiddens:function(a,b){var d={},e;for(e in b)e&&0==e.search(a)&&(d[e]=b[e]);return d},autoRefreshingControl:function(a){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==a},setPostValues:function(a){if(a){for(var b=
gx.O,d=a.length,e=0;e<d;e++){var f=a[e],g=f.CmpContext,j=gx.lang.booleanValue(f.IsMasterPage);gx.setGxO(g,j);if(!gx.lang.emptyObject(gx.O))for(var h in f)if(!("CmpContext"==h||"IsMasterPage"==h)&&!("object"==typeof f[h]&&gx.fn.refreshBC(h,f[h]))&&"function"!=typeof f[h]){var k=gx.fn.vStructForVar(h);k?k.v2v&&!gx.fn.autoRefreshingControl(k.fld)&&(k.v2v(f[h]),k.v2c()):"GX_FocusControl"==h?b.CmpContext==g&&b.IsMasterPage==j&&(gx.usrFocusControl=f[h]):(k=gx.fn.getVarControlMap(h),gx.lang.emptyObject(k)?
gx.setVar(h,f[h]):gx.setVar(k,f[h]),gx.fn.setGridHidden(h,f[h]))}}gx.setGxO(b.CmpContext,b.IsMasterPage)}},setPostProperties:function(a){if(a){for(var b=gx.O,d=a.length,e=0;e<d;e++){var f=a[e],g=f.CmpContext,j=gx.lang.booleanValue(f.IsMasterPage);gx.setGxO(g,j);if(!gx.lang.emptyObject(gx.O))for(var h in f)if(!("CmpContext"==h||"IsMasterPage"==h||""===h)&&"function"!=typeof f[h])if(g=gx.fn.getControlRef(h,!0),g=null==g?gx.dom.el("Object_"+h):g,null==g)gx.uc.isUserControl(h)&&gx.uc.setProperties(h,
f[h]);else for(var k in f[h])if("object"==typeof f[h][k])for(var l in f[h][k])gx.fn.setCtrlPropertyImpl(g,l,f[h][k][l]);else gx.fn.setCtrlPropertyImpl(g,k,f[h][k])}gx.setGxO(b.CmpContext,b.IsMasterPage)}},loadPostGrids:function(a){if(void 0!=a)for(var b=a.length,d=0;d<b;d++)try{var e=a[d];if(void 0!=e.Count){var f=e.CmpContext,g=e.GridName,j=gx.csv.validatingGrid;if(gx.lang.emptyObject(j)||j.gxComponentContext!=f&&j.gridName!=g)gx.fn.gridObj(f,g,"true"==e.InMasterPage?!0:!1).loadGrid(e,!0)}}catch(h){gx.dbg.logEx(h,
"gxfrmutl.js","loadPostGrids")}},getErrorViewerCtrls:function(){var a=gx.dom.byName("gxErrorViewer");if(0==a.length)for(var a=[],b=gx.dom.byTag("span"),d=b.length,e=0;e<d;e++)"gxErrorViewer"==b[e].name&&a.push(b[e]);return a},setErrorViewer:function(a){gx.O.AnyError=0;if(a)try{gx.fx.obs.notify("gx.onmessages",[a]);var b=gx.dom.byClass("gx_ev","span"),d=b.length,e;for(e in a){var f,g=a[e];gx.lang.isArray(g)||(f=g.fields,g=g.msgs);var j=[];if(f)for(var h=0,k=f.length;h<k;h++){var l=gx.fn.vStructForVar(f[h].replace(/^gx\.O\./,
""));l&&j.push(l.fld)}"MAIN"==e&&(e="");if("undefined"!=typeof g){for(h=0;h<d;h++){var m=b[h];if(m&&m.id==e+"gxErrorViewer"){var n=gx.csv.setFocusOnload?m.innerHTML:"";break}}var p={},q;for(q in g){var o=g[q];o&&1==o.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(o.text)&&"function"!=typeof o)if(""!=o.att&&gx.fn.isVisible(gx.fn.screen_CtrlRef(o.att))){var r=p[o.att];r||(r=gx.util.balloon.getNew(o.att,void 0,j),p[o.att]=r);1==o.type?r.setError(o.text):r.setMessage(o.text)}else n+="<div>"+gx.html.encode(o.text)+
"</div>"}for(var s in p)if(r=p[s],!1==r.show()){gx.fn.setFocusOnError(s);break}for(h=0;h<d;h++)if((m=b[h])&&m.id==e+"gxErrorViewer"&&m.innerHTML!=n)gx.dom.shouldPurge()&&gx.dom.purge(m,!0),m.innerHTML=n,""!=n&&gx.fx.dom.highlight(m,[255,255,165],2500).play()}}}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(a){var c=b.exec(a);return c?c[1]+c[2]:a},setPostComponents:function(a,b,d,e){try{var f=[],g=!1,j=gx.gen.isDotNet(),h;for(h in a)if("function"!=typeof a[h])try{var k=
a[h],l=gx.dom.el(h);!l&&b&&(l=gx.dom.el(b[h]));if(!gx.lang.emptyObject(l)){gx.html.setInnerHtml(l,k);var m=gx.fn.cmpContextFromCtrl(h),n=gx.fn.getHidden(m+"_CMPPGM"),p=n.split("."),q=p.length,n=j&&1<q?p[q-2].toLowerCase():p[q-1].toLowerCase();f.push({type:m,name:n,html:k})}}catch(o){g=!0,gx.dbg.logEx(o,"gxfrmutl.js","setPostComponents")}}catch(r){g=!0,gx.dbg.logEx(r,"gxfrmutl.js","setPostComponents")}if((0==f.length||g)&&"function"==typeof e)e();else{var s=null,t=function(){0<f.length?(s=f.shift(),
gx.fn.createComponentAsync(s,d,t)):"function"==typeof e&&e()},s=f.shift();gx.fn.createComponentAsync(s,d,t)}},createComponentAsync:function(a,b,d){var e=a.type,f=a.name,a=a.html;try{var g=gx.fn.filterHiddens(RegExp("^"+e),b);gx.cache.codeLoaded(e+f)?(gx.fn.createComponentObj(f,e),gx.fn.setPostHiddens(g),"function"==typeof d&&d()):(gx.cache.addInlineCode(e+f),gx.html.processCode(a,!1,function(a,b,c){gx.fn.createComponentObj(a,b);gx.fn.setPostHiddens(c);if(typeof d=="function"){d();gx.fx.obs.notify("gx.onafterevent",
[gx.csv.lastEvtResponse])}},[f,e,g],f))}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","createComponentAsync"),"function"==typeof d&&d()}},createComponentObj:function(a,b){var d=gx.createComponent(a,b);null!=d&&gx.addComponent(d)},getAttachedCtrl:function(a){for(var b=gx.attachedControls.length,d=0;d<b;d++){var e=gx.attachedControls[d];if(e.id==a)return e}return null},attachCtrl:function(a,b){null==gx.fn.getAttachedCtrl(a)&&gx.attachedControls.push({id:a,info:b})},doAttachs:function(){for(var a=gx.fn.attachedControls(),
b=a.length,d=gx.O,e=0;e<b;e++){var f=a[e];gx.setGxO(f.info.wc,f.info.mp);if(f.info.isPrompt&&gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(f.info.wc+f.id),"Visible",!1);else for(var g=f.info.controls,j=g.length,h=0;h<j;h++){gx.fn.addAttach(g[h],f);var k=gx.fn.validStruct(g[h]);gx.fn.checkAttachedPropertyVS(k,"Visible",!1);gx.fn.checkAttachedPropertyVS(k,"Enabled",!1)}}gx.setGxO(d.CmpContext,d.IsMasterPage)},addAttach:function(a,b){var d=gx.fn.validStruct(a);void 0==
d.attachedCtrls&&(d.attachedCtrls=[]);d.attachedCtrls.push(b)},checkAttachedProperty:function(a,b,d){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(a),b,d)},checkAttachedPropertyVS:function(a,b,d){if(void 0!=a&&(a=a.attachedCtrls,void 0!=a))for(var e=a.length,f=0;f<e;f++)gx.fn.checkAttachedControlProperty(a[f],b,d)},checkAttachedControlProperty:function(a,b,d){for(var e=a.id,a=a.info,f=!1,g=a.controls,j=a.wc,h=g.length,k=0;k<h&&!f;k++)gx.fn.getCtrlProperty_impl(gx.dom.el(j+gx.fn.validStruct(g[k]).fld),
b)==d&&(f=!0==d||k==h-1);f&&(a=a.isPrompt?"Visible":b,gx.fn.setCtrlPropertyImpl(gx.dom.el(j+e),a,d))},changeControlOpacity:function(a,b,d,e){var f=Math.round(e),g="",g="string"==typeof a?a:a.id;b>d?(gx.fn.setOpacity(b,g),setTimeout(function(){gx.fn.changeControlOpacity(a,b-10,d,e)},f)):b<d?(gx.fn.setOpacity(b,g),setTimeout(function(){gx.fn.changeControlOpacity(a,b+10,d,e)},f)):gx.fn.setOpacity(d,g)},setOpacity:function(a,b){var d=b;"string"==typeof b&&(d="body"==b?document.body:gx.dom.el(b));null!=
d&&(d=d.style,d.opacity=a/100,d.MozOpacity=a/100,d.filter="alpha(opacity="+a+")")},fadeControl:function(a,b,d){"in"==b?gx.fn.changeControlOpacity(a,0,100,d):gx.fn.changeControlOpacity(a,100,0,d)},fadeIn:function(a,b){gx.fn.fadeControl(a,"in",b)},statusMsg:function(a){window.status=a},objectOnload:function(){null!=gx.pO&&(gx.pO.onload(),gx.setGxO(gx.pO.CmpContext,gx.pO.IsMasterPage))},objectOnUnload:function(){if(null!=gx.pO)gx.pO.onunload()},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},
objectPostback:function(){null!=gx.pO&&gx.pO.postbackLoad()},gridObjFromGxO:function(a){return gx.fn.gridObj(gx.O.CmpContext,a,gx.O.IsMasterPage)},gridObj:function(a,b,d){return gx.getObj(a,d).getGrid(b)},installComponents:function(a){var b=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=b){var d=gx.gen.isDotNet(),e;for(e in b)if(a||!gx.pO.getWebComponent(e)){var f=b[e].toLowerCase(),f=f.split("."),g=f.length,f=d&&1<g?f[g-2]:f[g-1],f=gx.createComponent(f,e);null!=f&&(gx.addComponent(f),setTimeout(function(a){this.addComponentRemoteFiles(a)}.closure(this,
[f]),1))}}},addComponentRemoteFiles:function(a){if(a=a.getContainer())gx.html.processCode(a.innerHTML,!0),gx.dom.fitToParent(a)},datePickerFormat:function(a,b,d){var e=gx.dateFormat,f=e.substr(0,1),g=e.substr(1,1),e=e.substr(2,1),f=gx.fn.datePickerDateFormat(f,a),g=gx.fn.datePickerDateFormat(g,a),a=gx.fn.datePickerDateFormat(e,a),e=gx.fn.datePickerTimeFormat(b);return 0<d&&0<b?f+"/"+g+"/"+a+" "+e:0<d?f+"/"+g+"/"+a:e},datePickerDateFormat:function(a,b){return"Y"==a&&"99/99/9999"==b.substr(0,10)?"%Y":
"Y"==a?"%y":"M"==a?"%m":"D"==a?"%d":""},datePickerTimeFormat:function(a){var b=gx.timeFormat,d;12==b?(b="%I",d=" %p"):(b=24==b?"%H":"",d="");if(2==a)a="";else if(5==a)a=":%M";else if(8==a)a=":%M:%S";else return"";return b+a+d},installDatePicker:function(a,b,d,e,f,g){gx.html.onTypeAvailable("Calendar",gx.fn.installDatePickerIfReady,[a,b,d,e,f,g])},installDatePickerIfReady:function(a,b,d,e,f,g){var j=gx.dom.el(a);if(gx.lang.emptyObject(j)||"SELECT"!=j.nodeName)0==b?Calendar.setup({inputField:a,showsTime:d,
weekNumbers:e,mondayFirst:f,ifFormat:g,button:a+"_dp_trigger",onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:!0}):(gx.lang.emptyObject(j)||(j.style.display="none"),Calendar.setup({inputField:a,showsTime:d,weekNumbers:e,mondayFirst:f,ifFormat:g,flat:a+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0}))},datePickerChanged:function(a,b,d){if(a&&a.dateClicked){d||(d=a.params.inputField);var b=gx.O,e=null,f=gx.fn.controlIds(),g=f.length;for(i=0;i<g;i++){var e=gx.fn.validStruct(f[i]),
j=0!=e.grid?"_"+gx.fn.currentGridRow(e.grid):"";if(d.id==b.CmpContext+e.fld+j)break}null!=e&&void 0!=e.dp&&(f=a.date.print(gx.fn.datePickerFormat(e.dp.pic,e.dp.dec,e.len)),f!=d.value&&(d.setAttribute("gxvalid","0"),d.value=f,d.onchange(),a.callCloseHandler(),0<e.grid&&gx.fn.getGridObj(e.grid).setRowModified(gx.fn.currentGridRow(e.grid)),b.refreshDependantGrids(e)))}},toArray:function(a){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var b=[],d=0,e=a.length;d<e;d++)b[d]=a[d];return b}return Array.prototype.slice.call(a)}}}();
gx.thread={Map:function(){this.map={};this.add=function(b,a){this.map[b]=a};this.remove=function(b){delete this.map[b]};this.get=function(b){return null==b?null:this.map[b]};this.first=function(){return this.get(this.nextKey())};this.next=function(b){return this.get(this.nextKey(b))};this.nextKey=function(b){for(i in this.map){if(!b)return i;b==i&&(b=null)}return null}},Command:function(b,a,c){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){a.apply(b,
c)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(b,a,c,d){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(c){gx.dbg.logEx(c,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof d=="function")try{d.call(b,retVal)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(b,a,c);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var b=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(b)?null:b;null!=this.key&&this.loadSecToken()},loadSecToken:function(){var b=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(b)?null:b},encrypt:function(b,a){try{if(a=null==a?this.key:a,null!=a){var c=this.rijndael,a=c.hexToByteArray(a),d=c.rijndaelEncrypt(b,a);return c.byteArrayToHex(d)}}catch(e){gx.dbg.logEx(e,
"gxfrmutl.js","encrypt")}return b},decrypt:function(b,a){try{if(a=null==a?this.key:a,null!=a){var c=this.rijndael,a=c.hexToByteArray(a),d=c.hexToByteArray(b),e=c.rijndaelDecrypt(d,a);return c.byteArrayToString(e)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","decrypt")}return b},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(b,a){return b<<a|b>>>32-a},AddUnsigned:function(b,a){var c,d,e,f,g;e=b&2147483648;f=a&2147483648;c=b&1073741824;d=a&1073741824;g=(b&1073741823)+(a&1073741823);return c&d?g^2147483648^e^f:c|d?g&1073741824?g^3221225472^e^f:g^1073741824^e^f:g^e^f},F:function(b,a,c){return b&a|~b&c},G:function(b,a,c){return b&c|a&~c},H:function(b,a,c){return b^a^c},I:function(b,a,c){return a^(b|~c)},FF:function(b,a,c,d,e,f,g){b=gx.MD5.AddUnsigned(b,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(a,
c,d),e),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(b,f),a)},GG:function(b,a,c,d,e,f,g){b=gx.MD5.AddUnsigned(b,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(a,c,d),e),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(b,f),a)},HH:function(b,a,c,d,e,f,g){b=gx.MD5.AddUnsigned(b,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(a,c,d),e),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(b,f),a)},II:function(b,a,c,d,e,f,g){b=gx.MD5.AddUnsigned(b,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(a,c,d),e),g));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(b,f),a)},ConvertToWordArray:function(b){var a,c=b.length;a=c+8;for(var d=16*((a-a%64)/64+1),e=Array(d-1),f=0,g=0;g<c;)a=(g-g%4)/4,f=8*(g%4),e[a]|=b.charCodeAt(g)<<f,g++;a=(g-g%4)/4;e[a]|=128<<8*(g%4);e[d-2]=c<<3;e[d-1]=c>>>29;return e},WordToHex:function(b){var a="",c="",d;for(d=0;3>=d;d++)c=b>>>8*d&255,c="0"+c.toString(16),a+=c.substr(c.length-2,2);return a},Utf8Encode:function(b){for(var b=b.replace(/\r\n/g,"\n"),a="",c=0;c<b.length;c++){var d=b.charCodeAt(c);
128>d?a+=String.fromCharCode(d):(127<d&&2048>d?a+=String.fromCharCode(d>>6|192):(a+=String.fromCharCode(d>>12|224),a+=String.fromCharCode(d>>6&63|128)),a+=String.fromCharCode(d&63|128))}return a},getHsh:function(b){var a=[],c,d,e,f,g,j,h,k,b=gx.MD5.Utf8Encode(b),a=gx.MD5.ConvertToWordArray(b);g=1732584193;j=4023233417;h=2562383102;k=271733878;for(b=0;b<a.length;b+=16)c=g,d=j,e=h,f=k,g=gx.MD5.FF(g,j,h,k,a[b+0],7,3614090360),k=gx.MD5.FF(k,g,j,h,a[b+1],12,3905402710),h=gx.MD5.FF(h,k,g,j,a[b+2],17,606105819),
j=gx.MD5.FF(j,h,k,g,a[b+3],22,3250441966),g=gx.MD5.FF(g,j,h,k,a[b+4],7,4118548399),k=gx.MD5.FF(k,g,j,h,a[b+5],12,1200080426),h=gx.MD5.FF(h,k,g,j,a[b+6],17,2821735955),j=gx.MD5.FF(j,h,k,g,a[b+7],22,4249261313),g=gx.MD5.FF(g,j,h,k,a[b+8],7,1770035416),k=gx.MD5.FF(k,g,j,h,a[b+9],12,2336552879),h=gx.MD5.FF(h,k,g,j,a[b+10],17,4294925233),j=gx.MD5.FF(j,h,k,g,a[b+11],22,2304563134),g=gx.MD5.FF(g,j,h,k,a[b+12],7,1804603682),k=gx.MD5.FF(k,g,j,h,a[b+13],12,4254626195),h=gx.MD5.FF(h,k,g,j,a[b+14],17,2792965006),
j=gx.MD5.FF(j,h,k,g,a[b+15],22,1236535329),g=gx.MD5.GG(g,j,h,k,a[b+1],5,4129170786),k=gx.MD5.GG(k,g,j,h,a[b+6],9,3225465664),h=gx.MD5.GG(h,k,g,j,a[b+11],14,643717713),j=gx.MD5.GG(j,h,k,g,a[b+0],20,3921069994),g=gx.MD5.GG(g,j,h,k,a[b+5],5,3593408605),k=gx.MD5.GG(k,g,j,h,a[b+10],9,38016083),h=gx.MD5.GG(h,k,g,j,a[b+15],14,3634488961),j=gx.MD5.GG(j,h,k,g,a[b+4],20,3889429448),g=gx.MD5.GG(g,j,h,k,a[b+9],5,568446438),k=gx.MD5.GG(k,g,j,h,a[b+14],9,3275163606),h=gx.MD5.GG(h,k,g,j,a[b+3],14,4107603335),j=
gx.MD5.GG(j,h,k,g,a[b+8],20,1163531501),g=gx.MD5.GG(g,j,h,k,a[b+13],5,2850285829),k=gx.MD5.GG(k,g,j,h,a[b+2],9,4243563512),h=gx.MD5.GG(h,k,g,j,a[b+7],14,1735328473),j=gx.MD5.GG(j,h,k,g,a[b+12],20,2368359562),g=gx.MD5.HH(g,j,h,k,a[b+5],4,4294588738),k=gx.MD5.HH(k,g,j,h,a[b+8],11,2272392833),h=gx.MD5.HH(h,k,g,j,a[b+11],16,1839030562),j=gx.MD5.HH(j,h,k,g,a[b+14],23,4259657740),g=gx.MD5.HH(g,j,h,k,a[b+1],4,2763975236),k=gx.MD5.HH(k,g,j,h,a[b+4],11,1272893353),h=gx.MD5.HH(h,k,g,j,a[b+7],16,4139469664),
j=gx.MD5.HH(j,h,k,g,a[b+10],23,3200236656),g=gx.MD5.HH(g,j,h,k,a[b+13],4,681279174),k=gx.MD5.HH(k,g,j,h,a[b+0],11,3936430074),h=gx.MD5.HH(h,k,g,j,a[b+3],16,3572445317),j=gx.MD5.HH(j,h,k,g,a[b+6],23,76029189),g=gx.MD5.HH(g,j,h,k,a[b+9],4,3654602809),k=gx.MD5.HH(k,g,j,h,a[b+12],11,3873151461),h=gx.MD5.HH(h,k,g,j,a[b+15],16,530742520),j=gx.MD5.HH(j,h,k,g,a[b+2],23,3299628645),g=gx.MD5.II(g,j,h,k,a[b+0],6,4096336452),k=gx.MD5.II(k,g,j,h,a[b+7],10,1126891415),h=gx.MD5.II(h,k,g,j,a[b+14],15,2878612391),
j=gx.MD5.II(j,h,k,g,a[b+5],21,4237533241),g=gx.MD5.II(g,j,h,k,a[b+12],6,1700485571),k=gx.MD5.II(k,g,j,h,a[b+3],10,2399980690),h=gx.MD5.II(h,k,g,j,a[b+10],15,4293915773),j=gx.MD5.II(j,h,k,g,a[b+1],21,2240044497),g=gx.MD5.II(g,j,h,k,a[b+8],6,1873313359),k=gx.MD5.II(k,g,j,h,a[b+15],10,4264355552),h=gx.MD5.II(h,k,g,j,a[b+6],15,2734768916),j=gx.MD5.II(j,h,k,g,a[b+13],21,1309151649),g=gx.MD5.II(g,j,h,k,a[b+4],6,4149444226),k=gx.MD5.II(k,g,j,h,a[b+11],10,3174756917),h=gx.MD5.II(h,k,g,j,a[b+2],15,718787259),
j=gx.MD5.II(j,h,k,g,a[b+9],21,3951481745),g=gx.MD5.AddUnsigned(g,c),j=gx.MD5.AddUnsigned(j,d),h=gx.MD5.AddUnsigned(h,e),k=gx.MD5.AddUnsigned(k,f);return(gx.MD5.WordToHex(g)+gx.MD5.WordToHex(j)+gx.MD5.WordToHex(h)+gx.MD5.WordToHex(k)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(b){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(b)))},encode:function(b){return this.encodeImpl(this.UTF8BytesFromString(b))},bytesFromUTF8Bytes:function(b){for(var a=[],c=0,d=c1=c2=0,e=b.length;c<e;)d=b[c],128>d?(a.push(d),c++):191<d&&224>d?(c2=b[c+1],a.push((d&31)<<6|c2&63),c+=2):(c2=b[c+1],c3=b[c+2],a.push((d&15)<<12|(c2&63)<<6|c3&63),c+=3);return a},UTF8BytesFromString:function(b){for(var b=b.replace(/\r\n/g,"\n"),a=[],c=b.length,d=
0;d<c;d++){var e=b.charCodeAt(d);128>e?a.push(e):(127<e&&2048>e?a.push(e>>6|192):(a.push(e>>12|224),a.push(e>>6&63|128)),a.push(e&63|128))}return a},bytesToString:function(b){for(var a=gx.util.browser.isChrome()?32765:5E4,c=[];b.length>=a;)c.push(eval("String.fromCharCode("+b.slice(0,a).join(",")+");")),b=b.slice(a);0!=b.length&&c.push(eval("String.fromCharCode("+b.join(",")+");"));return c.join("")},decodeImpl:function(b){for(var a=this.f64,c=[],d=0,b=b.replace(/\n|\r/g,""),b=b.replace(/=/g,""),
e=b.length;d<e;)c[c.length]=a[b.charAt(d)]<<2|a[b.charAt(d+1)]>>4,c[c.length]=(a[b.charAt(d+1)]&15)<<4|a[b.charAt(d+2)]>>2,c[c.length]=(a[b.charAt(d+2)]&3)<<6|a[b.charAt(d+3)],d+=4;2==b.length%4&&(c=c.slice(0,c.length-2));3==b.length%4&&(c=c.slice(0,c.length-1));return c},encodeImpl:function(b){var a=this.b64,c=[],d=0,e=b.length;1==e%3&&(b[b.length]=0,b[b.length]=0);2==e%3&&(b[b.length]=0);for(var f=b.length;d<f;)c[c.length]=a[b[d]>>2],c[c.length]=a[(b[d]&3)<<4|b[d+1]>>4],c[c.length]=a[(b[d+1]&15)<<
2|b[d+2]>>6],c[c.length]=a[b[d+2]&63],d+=3;1==e%3&&(c[c.length-1]=c[c.length-2]="=");2==e%3&&(c[c.length-1]="=");return c.join("")},_init:function(){for(var b=0;64>b;b++){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b);this.b64[b]=a;this.f64[a]=b}}};
gx.geolocation={attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(b){b.attachedCtrl=b.previousSibling;attachedCtrls.push(b);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(b){var a=attachedCtrls.shift(),c=gx.fn.validStruct(gx.O.getValidStructId(a.attachedCtrl.id)),
b=b.coords.latitude+","+b.coords.longitude;gx.evt.setEventRow(gx.pO,a.attachedCtrl);c.v2v&&(c.v2v(b),c.v2c());c.gxgrid&&c.gxgrid.updateControlValue(c,!0)},handle_errors:function(b){attachedCtrls.shift();switch(b.code){case b.PERMISSION_DENIED:b="user did not share geolocation data";break;case b.POSITION_UNAVAILABLE:b="could not detect current position";break;case b.TIMEOUT:b="retrieving position timed out";break;default:b="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(b);gx.pO.refreshOutputs([])}};
